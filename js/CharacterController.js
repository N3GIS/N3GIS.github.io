!function(t,i){if("object"==typeof exports&&"object"==typeof module)module.exports=i(require("babylonjs"));else if("function"==typeof define&&define.amd)define(["babylonjs"],i);else{var s="object"==typeof exports?i(require("babylonjs")):i(t.BABYLON);for(var h in s)("object"==typeof exports?exports:t)[h]=s[h]}}(window,(function(t){return function(t){var i={};function s(h){if(i[h])return i[h].exports;var n=i[h]={i:h,l:!1,exports:{}};return t[h].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=t,s.c=i,s.d=function(t,i,h){s.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:h})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"h",{value:!0})},s.t=function(t,i){if(1&i&&(t=s(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.h)return t;var h=Object.create(null);if(s.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)s.d(h,n,function(i){return t[i]}.bind(null,n));return h},s.n=function(t){var i=t&&t.h?function(){return t.default}:function(){return t};return s.d(i,"a",i),i},s.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},s.p="",s(s.s=1)}([function(i,s){i.exports=t},function(t,i,s){"use strict";s.r(i),s.d(i,"CharacterController",(function(){return n})),s.d(i,"ActionData",(function(){return u})),s.d(i,"ActionMap",(function(){return r})),s.d(i,"CCSettings",(function(){return f}));var h=s(0),n=function(){function t(t,i,s,n,u){var f=this;void 0===u&&(u=!1),this.u=null,this.v=null,this.k=9.8,this.M=30,this.j=45,this.O=Math.PI*this.M/180,this.g=Math.PI*this.j/180,this.C=.25,this.F=0,this.L=h.Vector3.Zero(),this.R=new r,this.S=!0,this.q=h.Vector3.Zero(),this.B=!1,this.A=0,this.J=0,this._=!1,this.D=-1,this.T=!1,this.G=!1,this.H=null,this.I=h.Vector3.Zero(),this.K=!1,this.N=0,this.P=50,this.U=0,this.V=!1,this.W=!1,this.X=!1,this.Y=0,this.Z=0,this.$=0,this.tt=1,this.it=!1,this.st=!1,this.ht=0,this.nt=0,this.et=10,this.ut=!0,this.rt=!1,this.ft=new h.Ray(h.Vector3.Zero(),h.Vector3.One(),1),this.ot=h.Vector3.Zero(),this.ct=.5,this.at=0,this.lt=!1,this.vt=!1,this.bt=!1,this.wt=i,this.kt=s,this.setAvatar(t,u)||console.error("unable to set avatar");null!=n&&this.setActionMap(n),this.vt||null==this.v||this.Mt(this.v),this.vt,this.ut=this.wt.checkCollisions,this.dt=new e,this.pt=function(){f.jt()},this.yt=function(t){f.Ot(t)},this.gt=function(t){f.xt(t)}}return t.prototype.getScene=function(){return this.kt},t.prototype.setSlopeLimit=function(t,i){this.M=t,this.j=i,this.O=Math.PI*this.M/180,this.g=Math.PI*this.j/180},t.prototype.setStepOffset=function(t){this.C=t},t.prototype.setWalkSpeed=function(t){this.R.walk.speed=t},t.prototype.setRunSpeed=function(t){this.R.run.speed=t},t.prototype.setBackSpeed=function(t){this.R.walkBack.speed=t},t.prototype.setBackFastSpeed=function(t){this.R.walkBackFast.speed=t},t.prototype.setJumpSpeed=function(t){this.R.idleJump.speed=t,this.R.runJump.speed=t},t.prototype.setLeftSpeed=function(t){this.R.strafeLeft.speed=t},t.prototype.setLeftFastSpeed=function(t){this.R.strafeLeftFast.speed=t},t.prototype.setRightSpeed=function(t){this.R.strafeRight.speed=t},t.prototype.setRightFastSpeed=function(t){this.R.strafeLeftFast.speed=t},t.prototype.setTurnSpeed=function(t){this.R.turnLeft.speed=t*Math.PI/180,this.R.turnRight.speed=t*Math.PI/180},t.prototype.setTurnFastSpeed=function(t){this.R.turnLeftFast.speed=t*Math.PI/180,this.R.turnRightFast.speed=t*Math.PI/180},t.prototype.setGravity=function(t){this.k=t},t.prototype.setAnimationGroups=function(t){null!=this.H&&this.H.exist&&this.H.ag.stop(),this.vt=!0,this.setActionMap(t)},t.prototype.setAnimationRanges=function(t){this.vt=!1,this.setActionMap(t)},t.prototype.setActionMap=function(t){for(var i,s=!1,n=0,e=Object.keys(this.R);n<e.length;n++){var r=e[n],f=this.R[r];f instanceof u&&(f.exist=!1,null!=(i=t[f.id])&&(i instanceof h.AnimationGroup?(f.ag=i,f.name=f.ag.name,f.exist=!0,s=!0,this.bt=!0):i.exist&&(this.bt=!0,f.exist=!0,i instanceof Object?(i.ag&&(f.ag=i.ag,s=!0),i.name&&(f.name=i.name),null!=i.loop&&(f.loop=i.loop),i.rate&&(f.rate=i.rate),i.speed&&(f.speed=i.speed),i.sound&&(f.sound=i.sound)):f.name=i)))}return this.Ct(),this.H=null,s?"ag":"ar"},t.prototype.getActionMap=function(){for(var t=new r,i=0,s=Object.keys(this.R);i<s.length;i++){var h=s[i],n=this.R[h];if(n instanceof u&&n.exist){var e=t[n.id];e.ag=n.ag,e.name=n.name,e.loop=n.loop,e.rate=n.rate,e.speed=n.speed,e.key=n.key,e.sound=n.sound,e.exist=n.exist}}return t},t.prototype.getSettings=function(){var t=new f;return t.faceForward=this.isFaceForward(),t.topDown=1==this.getMode(),t.turningOff=this.isTurningOff(),t.cameraTarget=this.q.clone(),t.cameraElastic=this.S,t.gravity=this.k,t.keyboard=this.Ft,t.maxSlopeLimit=this.j,t.minSlopeLimit=this.M,t.noFirstPerson=this.B,t.stepOffset=this.C,t},t.prototype.setSettings=function(t){this.setFaceForward(t.faceForward),this.setMode(t.topDown?1:0),this.setTurningOff(t.turningOff),this.setCameraTarget(t.cameraTarget),this.setCameraElasticity(t.cameraElastic),this.setGravity(t.gravity),this.enableKeyBoard(t.keyboard),this.setSlopeLimit(t.minSlopeLimit,t.maxSlopeLimit),this.setNoFirstPerson(t.noFirstPerson),this.setStepOffset(t.stepOffset)},t.prototype.Lt=function(t,i,s,n){if(this.vt||null!=this.v){if(null!=i)if(this.vt){if(!(i instanceof h.AnimationGroup))return;t.ag=i,t.exist=!0}else{if(null==this.v.getAnimationRange(t.name))return void(t.exist=!1);t.name=i,t.exist=!0}null!=n&&(t.loop=n),null!=s&&(t.rate=s)}},t.prototype.enableBlending=function(t){if(this.vt)for(var i=0,s=Object.keys(this.R);i<s.length;i++){var h=s[i],n=this.R[h];if(n instanceof u&&n.exist)for(var e=0,r=n.ag.targetedAnimations;e<r.length;e++){var f=r[e];f.animation.enableBlending=!0,f.animation.blendingSpeed=t}}else null!==this.v&&this.v.enableBlending(t)},t.prototype.disableBlending=function(){if(this.vt)for(var t=0,i=Object.keys(this.R);t<i.length;t++){var s=i[t],h=this.R[s];if(h instanceof u&&h.exist)for(var n=0,e=h.ag.targetedAnimations;n<e.length;n++){e[n].animation.enableBlending=!1}}},t.prototype.setWalkAnim=function(t,i,s){this.Lt(this.R.walk,t,i,s)},t.prototype.setRunAnim=function(t,i,s){this.Lt(this.R.run,t,i,s)},t.prototype.setWalkBackAnim=function(t,i,s){this.Lt(this.R.walkBack,t,i,s),this.Rt(this.R.walkBackFast,this.R.walkBack)},t.prototype.setWalkBackFastAnim=function(t,i,s){this.Lt(this.R.walkBackFast,t,i,s)},t.prototype.setSlideBackAnim=function(t,i,s){this.Lt(this.R.slideBack,t,i,s)},t.prototype.setIdleAnim=function(t,i,s){this.Lt(this.R.idle,t,i,s)},t.prototype.setTurnRightAnim=function(t,i,s){this.Lt(this.R.turnRight,t,i,s),this.Rt(this.R.turnRightFast,this.R.turnRight)},t.prototype.setTurnRightFastAnim=function(t,i,s){this.Lt(this.R.turnRightFast,t,i,s)},t.prototype.setTurnLeftAnim=function(t,i,s){this.Lt(this.R.turnLeft,t,i,s),this.Rt(this.R.turnLeftFast,this.R.turnLeft)},t.prototype.setTurnLeftFastAnim=function(t,i,s){this.Lt(this.R.turnLeftFast,t,i,s)},t.prototype.setStrafeRightAnim=function(t,i,s){this.Lt(this.R.strafeRight,t,i,s),this.Rt(this.R.strafeRightFast,this.R.strafeRight)},t.prototype.setStrafeRightFastAnim=function(t,i,s){this.Lt(this.R.strafeRightFast,t,i,s)},t.prototype.setStrafeLeftAnim=function(t,i,s){this.Lt(this.R.strafeLeft,t,i,s),this.Rt(this.R.strafeLeftFast,this.R.strafeLeft)},t.prototype.setStrafeLeftFastAnim=function(t,i,s){this.Lt(this.R.strafeLeftFast,t,i,s)},t.prototype.setIdleJumpAnim=function(t,i,s){this.Lt(this.R.idleJump,t,i,s)},t.prototype.setRunJumpAnim=function(t,i,s){this.Lt(this.R.runJump,t,i,s)},t.prototype.setFallAnim=function(t,i,s){this.Lt(this.R.fall,t,i,s)},t.prototype.setWalkKey=function(t){this.R.walk.key=t.toLowerCase()},t.prototype.setWalkBackKey=function(t){this.R.walkBack.key=t.toLowerCase()},t.prototype.setTurnLeftKey=function(t){this.R.turnLeft.key=t.toLowerCase()},t.prototype.setTurnRightKey=function(t){this.R.turnRight.key=t.toLowerCase()},t.prototype.setStrafeLeftKey=function(t){this.R.strafeLeft.key=t.toLowerCase()},t.prototype.setStrafeRightKey=function(t){this.R.strafeRight.key=t.toLowerCase()},t.prototype.setJumpKey=function(t){this.R.idleJump.key=t.toLowerCase()},t.prototype.setCameraElasticity=function(t){this.S=t},t.prototype.setCameraTarget=function(t){this.q.copyFrom(t)},t.prototype.cameraCollisionChanged=function(){this.ut=this.wt.checkCollisions},t.prototype.setNoFirstPerson=function(t){this.B=t},t.prototype.Mt=function(t){for(var i=0,s=Object.keys(this.R);i<s.length;i++){var h=s[i],n=this.R[h];n instanceof u&&(null!=t?null!=t.getAnimationRange(n.id)&&(n.name=n.id,n.exist=!0,this.bt=!0):n.exist=!1)}this.Ct()},t.prototype.Ct=function(){this.Rt(this.R.walkBackFast,this.R.walkBack),this.Rt(this.R.turnRightFast,this.R.turnRight),this.Rt(this.R.turnLeftFast,this.R.turnLeft),this.Rt(this.R.strafeRightFast,this.R.strafeRight),this.Rt(this.R.strafeLeftFast,this.R.strafeLeft)},t.prototype.Rt=function(t,i){t.exist||i.exist&&(t.exist=!0,t.ag=i.ag,t.name=i.name,t.rate=2*i.rate)},t.prototype.setMode=function(t){this.A=t,this.J=t},t.prototype.getMode=function(){return this.A},t.prototype.setTurningOff=function(t){this.st=t},t.prototype.isTurningOff=function(){return this.st},t.prototype.St=function(t){var i=t.getWorldMatrix(),s=h.Vector3.FromFloatArray(i.m,0),n=h.Vector3.FromFloatArray(i.m,4),e=h.Vector3.FromFloatArray(i.m,8),u=h.Vector3.Cross(s,n);h.Vector3.Dot(u,e)<0?(this._=!0,this.D=1):(this._=!1,this.D=-1)},t.prototype.setFaceForward=function(t){this.qt=t,this._?(this.Bt=t?Math.PI/2:3*Math.PI/2,this.At=t?1:-1):(this.Bt=t?3*Math.PI/2:Math.PI/2,this.At=t?-1:1)},t.prototype.isFaceForward=function(){return this.qt},t.prototype.checkAGs=function(t){for(var i=0,s=Object.keys(this.R);i<s.length;i++){var h=s[i],n=this.R[h];n instanceof u&&(null!=t[n.name]&&(n.ag=t[n.name],n.exist=!0))}},t.prototype.Jt=function(t,i,s){var n;n=s?this._t(t).getChildren((function(t){return t instanceof h.TransformNode}),!1):[t];for(var e=0,u=i;e<u.length;e++)for(var r=0,f=u[e].targetedAnimations;r<f.length;r++){var o=f[r];if(n.indexOf(o.target)>-1)return!0}return!1},t.prototype._t=function(t){return null==t.parent?t:this._t(t.parent)},t.prototype.start=function(){this.T||(this.T=!0,this.dt.reset(),this.$=0,this.ht=.001,this.K=!1,this.Dt(),this.enableKeyBoard(!0),this.kt.registerBeforeRender(this.pt))},t.prototype.stop=function(){this.T&&(this.T=!1,this.kt.unregisterBeforeRender(this.pt),this.enableKeyBoard(!1),this.H=null)},t.prototype.pauseAnim=function(){this.G=!0},t.prototype.resumeAnim=function(){this.G=!1},t.prototype.Tt=function(){return h.Vector3.Dot(this.u.forward,this.u.position.subtract(this.wt.position))<0?1:-1},t.prototype.jt=function(){this.I.copyFrom(this.u.position);var t=null,i=this.kt.getEngine().getDeltaTime()/1e3;this.dt.zt&&!this.V?(this.K=!1,this.ht=0,t=this.Et(i)):this.anyMovement()||this.V?(this.K=!1,this.ht=0,t=this.Gt(i)):this.V||(t=this.Ht(i)),!this.G&&this.bt&&null!=t&&this.H!==t&&(t.exist&&(this.vt?(null!=this.H&&this.H.exist&&this.H.ag.stop(),t.ag.start(t.loop,t.rate)):this.v.beginAnimation(t.name,t.loop,t.rate)),this.H=t),this.Dt()},t.prototype.Et=function(t){var i=null;i=this.R.runJump,0===this.Z&&(this.Y=this.u.position.y),this.Z=this.Z+t;var s,n=0,e=0;if(1==this.A||this.st||(this.u.rotation.y=this.Bt-this.wt.alpha),this.X||this.W?(this.X?n=this.R.run.speed*t:this.W&&(n=this.R.walk.speed*t),(s=this.It.clone()).y=0,(s=s.normalize()).scaleToRef(n,s),e=this.Kt(this.R.runJump.speed,t),s.y=e):(e=this.Kt(this.R.idleJump.speed,t),s=new h.Vector3(0,e,0),i=this.R.idleJump),this.u.moveWithCollisions(s),e<0)if(this.u.position.y>this.I.y||this.u.position.y===this.I.y&&s.length()>.001)this.Nt();else if(this.u.position.y<this.Y){var u=this.u.position.subtract(this.I);this.Pt(u,s,.001)?i=this.R.fall:this.Qt(u)<=this.O&&this.Nt()}return i},t.prototype.Kt=function(t,i){return(t-this.k*this.Z)*i-.5*this.k*i*i},t.prototype.Nt=function(){this.dt.zt=!1,this.Z=0,this.W=!1,this.X=!1},t.prototype.Pt=function(t,i,s){return Math.abs(t.x-i.x)<s&&Math.abs(t.y-i.y)<s&&Math.abs(t.z-i.z)<s},t.prototype.Qt=function(t){return Math.atan(Math.abs(t.y/Math.sqrt(t.x*t.x+t.z*t.z)))},t.prototype.Gt=function(t){var i=this.$*this.k;this.N=i*t+this.k*t*t/2,this.$=this.$+t;var s=!1,h=null;if(this.V)this.It.y=-this.N,s=!0;else{this.W=!1,this.X=!1;var n=void 0,e=0;switch(!0){case this.dt.Ut:n=this.D*this.Tt(),e=this.R.strafeLeft.speed*t,this.dt.Vt?(e=this.R.strafeLeftFast.speed*t,h=-this.At*n>0?this.R.strafeLeftFast:this.R.strafeRightFast):h=-this.At*n>0?this.R.strafeLeft:this.R.strafeRight,this.It=this.u.calcMovePOV(n*e,-this.N,0),s=!0;break;case this.dt.Wt:n=-this.D*this.Tt(),e=this.R.strafeRight.speed*t,this.dt.Vt?(e=this.R.strafeRightFast.speed*t,h=-this.At*n>0?this.R.strafeLeftFast:this.R.strafeRightFast):h=-this.At*n>0?this.R.strafeLeft:this.R.strafeRight,this.It=this.u.calcMovePOV(n*e,-this.N,0),s=!0;break;case this.dt.Xt||this.st&&0==this.A:this.dt.Vt?(this.X=!0,e=this.R.run.speed*t,h=this.R.run):(this.W=!0,e=this.R.walk.speed*t,h=this.R.walk),this.It=this.u.calcMovePOV(0,-this.N,this.At*e),s=!0;break;case this.dt.Yt:e=this.R.walkBack.speed*t,this.dt.Vt?(e=this.R.walkBackFast.speed*t,h=this.R.walkBackFast):h=this.R.walkBack,this.It=this.u.calcMovePOV(0,-this.N,-this.At*e),s=!0}}if((!this.st||0!=this.A)&&!this.dt.Ut&&!this.dt.Wt&&(this.dt.Zt||this.dt.$t)){var u=this.R.turnLeft.speed*t;if(this.dt.Vt&&(u*=2),1==this.A){this.it||(this.tt=-this.At*this.Tt(),this._&&(this.tt=-this.tt),this.it=!0);var r=this.tt;this.dt.Zt?this.dt.Xt||(this.dt.Yt?r=-this.tt:h=this.tt>0?this.R.turnRight:this.R.turnLeft):this.dt.Xt?r=-this.tt:this.dt.Yt||(r=-this.tt,h=this.tt>0?this.R.turnLeft:this.R.turnRight),this.u.rotation.y=this.u.rotation.y+u*r}else{r=1;this.dt.Zt?(this.dt.Yt&&(r=-1),s||(h=this.R.turnLeft)):(this.dt.Xt&&(r=-1),s||(r=-1,h=this.R.turnRight)),this.wt.alpha=this.wt.alpha+u*r}}if(1!=this.A)if(this.st)switch(!0){case this.dt.Xt&&this.dt.$t:this.u.rotation.y=this.Bt-this.wt.alpha+Math.PI/4;break;case this.dt.Xt&&this.dt.Zt:this.u.rotation.y=this.Bt-this.wt.alpha-Math.PI/4;break;case this.dt.Yt&&this.dt.$t:this.u.rotation.y=this.Bt-this.wt.alpha+3*Math.PI/4;break;case this.dt.Yt&&this.dt.Zt:this.u.rotation.y=this.Bt-this.wt.alpha-3*Math.PI/4;break;case this.dt.Xt:this.u.rotation.y=this.Bt-this.wt.alpha;break;case this.dt.Yt:this.u.rotation.y=this.Bt-this.wt.alpha+Math.PI;break;case this.dt.$t:this.u.rotation.y=this.Bt-this.wt.alpha+Math.PI/2;break;case this.dt.Zt:this.u.rotation.y=this.Bt-this.wt.alpha-Math.PI/2}else this.u.rotation.y=this.Bt-this.wt.alpha;if(s&&this.It.length()>.001)if(this.u.moveWithCollisions(this.It),this.u.position.y>this.I.y){var f=this.u.position.subtract(this.I),o=this.Qt(f);o>=this.g?this.C>0?(0==this.F&&this.L.copyFrom(this.I),this.F=this.F+(this.u.position.y-this.I.y),this.F>this.C&&(this.F=0,this.u.position.copyFrom(this.L),this.ti())):(this.u.position.copyFrom(this.I),this.ti()):(this.F=0,o>this.O?(this.U=0,this.V=!1):this.ti())}else if(this.u.position.y<this.I.y){f=this.u.position.subtract(this.I);this.Pt(f,this.It,.001)?(this.V=!0,this.U++,this.U>this.P&&(h=this.R.fall)):this.Qt(f)<=this.O?this.ti():(this.U=0,this.V=!1)}else this.ti();return h},t.prototype.ti=function(){this.$=0,this.U=0,this.V=!1},t.prototype.Ht=function(t){if(this.K)return this.R.idle;this.W=!1,this.X=!1,this.$=0;var i=this.R.idle;if(this.U=0,0===t)this.N=5;else{var s=this.ht*this.k;this.N=s*t+this.k*t*t/2,this.ht=this.ht+t}if(this.N<.01)return i;var n=new h.Vector3(0,-this.N,0);if(1==this.A||this.st||(this.u.rotation.y=this.Bt-this.wt.alpha),this.u.moveWithCollisions(n),this.u.position.y>this.I.y||this.u.position.y===this.I.y)this.ii();else if(this.u.position.y<this.I.y){var e=this.u.position.subtract(this.I);this.Pt(e,n,.001)||(this.Qt(e)<=this.O?(this.ii(),this.u.position.copyFrom(this.I)):(this.si(),i=this.R.slideBack))}return i},t.prototype.ii=function(){this.nt++,this.nt>this.et&&(this.K=!0,this.ht=0)},t.prototype.si=function(){this.K=!1,this.nt=0},t.prototype.Dt=function(){0==this.F&&this.u.position.addToRef(this.q,this.wt.target),this.wt.radius>this.wt.lowerRadiusLimit&&this.S&&this.hi(),this.wt.radius<=this.wt.lowerRadiusLimit?this.B||this.rt||(this.u.visibility=0,this.wt.checkCollisions=!1,this.J=this.A,this.A=0,this.rt=!0):(this.rt=!1,this.A=this.J,this.u.visibility=1,this.wt.checkCollisions=this.ut)},t.prototype.hi=function(){var t=this;this.wt.position.subtractToRef(this.wt.target,this.ot),this.ft.origin=this.wt.target,this.ft.length=this.ot.length(),this.ft.direction=this.ot.normalize();var i=this.kt.pickWithRay(this.ft,(function(i){return!(i==t.u||!i.checkCollisions)}),!0);if(i.hit)if(this.wt.checkCollisions){var s=this.wt.target.subtract(i.pickedPoint).normalize().scale(this.ct);i.pickedPoint.addToRef(s,this.wt.position)}else{var h=i.pickedPoint.subtract(this.wt.target).length();this.wt.radius=h-this.ct}},t.prototype.anyMovement=function(){return this.dt.Xt||this.dt.Yt||this.dt.Zt||this.dt.$t||this.dt.Ut||this.dt.Wt},t.prototype.xt=function(t){if(t.key&&!t.repeat){switch(t.key.toLowerCase()){case this.R.idleJump.key:this.dt.zt=!0;break;case"capslock":this.dt.Vt=!this.dt.Vt;break;case"shift":this.dt.Vt=!0;break;case"up":case"arrowup":case this.R.walk.key:this.dt.Xt=!0;break;case"left":case"arrowleft":case this.R.turnLeft.key:this.dt.Zt=!0;break;case"right":case"arrowright":case this.R.turnRight.key:this.dt.$t=!0;break;case"down":case"arrowdown":case this.R.walkBack.key:this.dt.Yt=!0;break;case this.R.strafeLeft.key:this.dt.Ut=!0;break;case this.R.strafeRight.key:this.dt.Wt=!0}this.lt=this.anyMovement()}},t.prototype.Ot=function(t){if(t.key){switch(t.key.toLowerCase()){case"shift":this.dt.Vt=!1;break;case"up":case"arrowup":case this.R.walk.key:this.dt.Xt=!1;break;case"left":case"arrowleft":case this.R.turnLeft.key:this.dt.Zt=!1,this.it=!1;break;case"right":case"arrowright":case this.R.turnRight.key:this.dt.$t=!1,this.it=!1;break;case"down":case"arrowdown":case this.R.walkBack.key:this.dt.Yt=!1;break;case this.R.strafeLeft.key:this.dt.Ut=!1;break;case this.R.strafeRight.key:this.dt.Wt=!1}this.lt=this.anyMovement()}},t.prototype.enableKeyBoard=function(t){this.Ft=t;var i=this.kt.getEngine().getRenderingCanvas();t?(i.addEventListener("keyup",this.yt,!1),i.addEventListener("keydown",this.gt,!1)):(i.removeEventListener("keyup",this.yt,!1),i.removeEventListener("keydown",this.gt,!1))},t.prototype.walk=function(t){this.dt.Xt=t},t.prototype.walkBack=function(t){this.dt.Yt=t},t.prototype.walkBackFast=function(t){this.dt.Yt=t,this.dt.Vt=t},t.prototype.run=function(t){this.dt.Xt=t,this.dt.Vt=t},t.prototype.turnLeft=function(t){this.dt.Zt=t,t||(this.it=t)},t.prototype.turnLeftFast=function(t){this.dt.Zt=t,t||(this.it=t),this.dt.Vt=t},t.prototype.turnRight=function(t){this.dt.$t=t,t||(this.it=t)},t.prototype.turnRightFast=function(t){this.dt.$t=t,t||(this.it=t),this.dt.Vt=t},t.prototype.strafeLeft=function(t){this.dt.Ut=t},t.prototype.strafeLeftFast=function(t){this.dt.Ut=t,this.dt.Vt=t},t.prototype.strafeRight=function(t){this.dt.Wt=t},t.prototype.strafeRightFast=function(t){this.dt.Wt=t,this.dt.Vt=t},t.prototype.jump=function(){this.dt.zt=!0},t.prototype.idle=function(){this.dt.reset()},t.prototype.isAg=function(){return this.vt},t.prototype.ni=function(t){var i=this.ei(t);if(i instanceof h.Mesh&&i.skeleton)return i.skeleton;var s=i.getChildMeshes(!1,(function(t){return!!(t instanceof h.Mesh&&t.skeleton)}));return s.length>0?s[0].skeleton:null},t.prototype.ei=function(t){return null==t.parent?t:this.ei(t.parent)},t.prototype.setAvatar=function(t,i){void 0===i&&(i=!1);var s=this.ei(t);return s instanceof h.Mesh?(this.u=s,this.v=this.ni(t),this.vt=this.Jt(t,this.kt.animationGroups,!0),this.R.reset(),this.vt||null==this.v||this.Mt(this.v),this.St(t),this.setFaceForward(i),!0):(console.error("Cannot move this mesh. The root node of the mesh provided is not a mesh"),!1)},t.prototype.getAvatar=function(){return this.u},t.prototype.setAvatarSkeleton=function(t){this.v=t,null!=this.v&&this.v.overrideMesh?this.vt=!0:this.vt=!1,this.vt||null==this.v||this.Mt(this.v)},t.prototype.getSkeleton=function(){return this.v},t}(),e=function(){function t(){this.Xt=!1,this.Yt=!1,this.$t=!1,this.Zt=!1,this.Wt=!1,this.Ut=!1,this.zt=!1,this.Vt=!1,this.reset()}return t.prototype.reset=function(){this.Xt=!1,this.Yt=!1,this.$t=!1,this.Zt=!1,this.Wt=!1,this.Ut=!1,this.zt=!1,this.Vt=!1},t}(),u=function(){function t(t,i,s){void 0===i&&(i=1),this.name="",this.loop=!0,this.rate=1,this.exist=!1,this.id=t,this.speed=i,this.ds=i,this.key=s,this.dk=s}return t.prototype.reset=function(){this.name="",this.speed=this.ds,this.key=this.dk,this.loop=!0,this.rate=1,this.sound="",this.exist=!1},t}(),r=function(){function t(){this.walk=new u("walk",3,"w"),this.walkBack=new u("walkBack",1.5,"s"),this.walkBackFast=new u("walkBackFast",3,"na"),this.idle=new u("idle",0,"na"),this.idleJump=new u("idleJump",6," "),this.run=new u("run",6,"na"),this.runJump=new u("runJump",6,"na"),this.fall=new u("fall",0,"na"),this.turnLeft=new u("turnLeft",Math.PI/8,"a"),this.turnLeftFast=new u("turnLeftFast",Math.PI/4,"na"),this.turnRight=new u("turnRight",Math.PI/8,"d"),this.turnRightFast=new u("turnRightFast",Math.PI/4,"na"),this.strafeLeft=new u("strafeLeft",1.5,"q"),this.strafeLeftFast=new u("strafeLeftFast",3,"na"),this.strafeRight=new u("strafeRight",1.5,"e"),this.strafeRightFast=new u("strafeRightFast",3,"na"),this.slideBack=new u("slideBack",0,"na")}return t.prototype.reset=function(){for(var t=0,i=Object.keys(this);t<i.length;t++){var s=this[i[t]];s instanceof u&&s.reset()}},t}(),f=function(){this.cameraElastic=!0,this.cameraTarget=h.Vector3.Zero(),this.noFirstPerson=!1,this.topDown=!0,this.turningOff=!0,this.keyboard=!0}}])}));
//# sourceMappingURL=CharacterController.js.map