{"version":3,"file":"Measure/Measure.min.js","mappings":"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","sources":["webpack://Autodesk.Extensions/./extensions/Measure/EventTypes.js","webpack://Autodesk.Extensions/./extensions/Measure/Calibration.css","webpack://Autodesk.Extensions/./extensions/Measure/Measure.css","webpack://Autodesk.Extensions/./node_modules/css-loader/dist/runtime/api.js","webpack://Autodesk.Extensions/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://Autodesk.Extensions/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://Autodesk.Extensions/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://Autodesk.Extensions/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://Autodesk.Extensions/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://Autodesk.Extensions/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://Autodesk.Extensions/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://Autodesk.Extensions/webpack/bootstrap","webpack://Autodesk.Extensions/webpack/runtime/compat get default export","webpack://Autodesk.Extensions/webpack/runtime/define property getters","webpack://Autodesk.Extensions/webpack/runtime/hasOwnProperty shorthand","webpack://Autodesk.Extensions/webpack/runtime/make namespace object","webpack://Autodesk.Extensions/webpack/runtime/nonce","webpack://Autodesk.Extensions/./extensions/Measure/MeasurementsManager.js","webpack://Autodesk.Extensions/./extensions/Measure/Indicator.js","webpack://Autodesk.Extensions/./extensions/Measure/PolygonCentroid.js","webpack://Autodesk.Extensions/./extensions/Measure/MeasureToolIndicator.js","webpack://Autodesk.Extensions/./src/application/EventTypes.js","webpack://Autodesk.Extensions/external assign \"THREE\"","webpack://Autodesk.Extensions/./src/measurement/SnapTypes.js","webpack://Autodesk.Extensions/./src/measurement/SnapResult.js","webpack://Autodesk.Extensions/./src/measurement/MeasurementTypes.js","webpack://Autodesk.Extensions/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://Autodesk.Extensions/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://Autodesk.Extensions/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://Autodesk.Extensions/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://Autodesk.Extensions/./node_modules/@babel/runtime/helpers/esm/objectSpread.js","webpack://Autodesk.Extensions/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://Autodesk.Extensions/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://Autodesk.Extensions/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://Autodesk.Extensions/./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack://Autodesk.Extensions/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://Autodesk.Extensions/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://Autodesk.Extensions/./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack://Autodesk.Extensions/./node_modules/i18next/dist/esm/i18next.js","webpack://Autodesk.Extensions/./src/measurement/DisplayUnits.js","webpack://Autodesk.Extensions/./src/measurement/UnitFormatter.js","webpack://Autodesk.Extensions/./src/measurement/MeasureCommon.js","webpack://Autodesk.Extensions/./src/measurement/Measurement.js","webpack://Autodesk.Extensions/./extensions/Measure/MeasureTool.js","webpack://Autodesk.Extensions/./extensions/Measure/CalibrationToolIndicator.js","webpack://Autodesk.Extensions/./extensions/Measure/CalibrationPanels.js","webpack://Autodesk.Extensions/./extensions/Measure/CalibrationTool.js","webpack://Autodesk.Extensions/./extensions/Measure/MagnifyingGlass.js","webpack://Autodesk.Extensions/./extensions/Measure/MeasureToolbar.js","webpack://Autodesk.Extensions/./extensions/Measure/Measure.css?5e17","webpack://Autodesk.Extensions/./extensions/Measure/Calibration.css?b994","webpack://Autodesk.Extensions/./extensions/Measure/Measure.js"],"sourcesContent":["/**\n* Fired to start or stop mouse tracking\n* the mouse tracker starts and stop a mousetracker used by an application\n* this can be used to support autoscrolling in an application\n* @event SET_MOUSE_TRACKING\n* @property {string} [mode] - 'start' or 'stop'\n*/\nmodule.exports.SET_MOUSE_TRACKING = 'mouseTracking';\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `@font-face{font-family:\"calibration-icon\";src:url(\"data:application/octet-stream;base64,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\") format(\"woff\");font-weight:normal;font-style:normal}[class^=calibration-icon],[class*=\" calibration-icon\"]{font-family:\"calibration-icon\";font-style:normal;font-weight:normal;font-variant:normal;line-height:1;padding-top:2px;speak:none;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.adsk-viewing-viewer .calibration-icon:before{content:\"a\"}.adsk-viewing-viewer .calibration-panel{left:calc(50% - 190px);top:calc(50% - 145px);width:380px;height:auto;z-index:4}.adsk-viewing-viewer .calibration-panel .calibration-table{padding-left:24px;padding-right:24px;margin-top:12px;margin-bottom:12px;box-sizing:border-box}.adsk-viewing-viewer .measure-settings-popup .option-drop-down,.adsk-viewing-viewer .calibration-panel .option-drop-down{width:100%;padding-right:0px;box-sizing:border-box}.adsk-viewing-viewer .measure-settings-popup .adsk-lmv-tftable tr td,.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td{width:auto;padding:2px 0px 2px 0px;height:56px;font-size:14px}.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td div{padding:0px}.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td input{margin:0px;box-sizing:border-box;width:100%;height:36px;font-size:14px}.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td select{height:36px;font-size:14px}.adsk-viewing-viewer .measure-settings-popup .switch{margin-left:25px}.adsk-viewing-viewer .measure-settings-popup .switch .slider{width:26px}.adsk-viewing-viewer .calibration-textbox::-webkit-inner-spin-button,.adsk-viewing-viewer .calibration-textbox::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.adsk-viewing-viewer .calibration-text{text-align:left;padding:6px 10px 6px 10px;margin:20px 20px 14px 20px;font-size:14px;-webkit-font-smoothing:antialiased}.adsk-viewing-viewer .calibration-button{margin-top:15px}.adsk-viewing-viewer .calibration-button-left{width:calc(50% - 15px);margin-right:5px !important;display:inline-block}.adsk-viewing-viewer .calibration-button-right{width:calc(50% - 15px);margin-left:5px !important;display:inline-block}.adsk-viewing-viewer .calibration-line{position:absolute;display:block;top:0;left:0;pointer-events:none;z-index:0}.adsk-viewing-viewer .calibration-label{display:none;position:absolute;pointer-events:none;text-align:\"center\";vertical-align:middle;cursor:default;padding:2px;color:#000;background:#fff;border-radius:10px;-webkit-transform-origin:50% 53%}.adsk-viewing-viewer .calibration-label-text{display:inline-block;pointer-events:none;text-align:\"center\";vertical-align:middle;font-size:12px;cursor:default;padding:2px;color:#000;background:#fff;border-bottom:1px dashed #000;text-decoration:none;text-transform:uppercase;-webkit-font-smoothing:antialiased}.adsk-viewing-viewer .calibration-label-text:hover{color:#039be5;border-bottom:1px dashed #039be5}.adsk-viewing-viewer .calibration-label.visible{display:block}.adsk-viewing-viewer .calibration-endpoint:hover.calibration-endpoint.enable-hover,.adsk-viewing-viewer .calibration-endpoint.edit{background-color:#039be5}.adsk-viewing-viewer .calibration-endpoint:hover.calibration-endpoint.enable-hover>*,.adsk-viewing-viewer .calibration-endpoint.edit>*{color:#fff}.adsk-viewing-viewer .calibration-endpoint.editable{pointer-events:all}.adsk-viewing-viewer .calibration-endpoint{display:none;position:absolute;cursor:move;pointer-events:none;width:30px;height:30px;background-color:#fff;box-shadow:0 4px 8px 0 rgba(0,0,0,.24),0 0 8px 0 rgba(0,0,0,.12);-moz-border-radius:50px;-webkit-border-radius:50px;border-radius:50px;justify-content:center;align-items:center;text-align:center}.adsk-viewing-viewer .calibration-endpoint.visible{display:block}.adsk-viewing-viewer .calibration-endpoint-text{display:inline-block;font-size:14px;vertical-align:middle;cursor:default;margin:5px 5px 5px 5px;vertical-align:middle;text-align:center;color:#039be5;text-decoration:none;text-transform:uppercase;pointer-events:none}.adsk-viewing-viewer .calibration-panel .docking-panel-footer{padding:16px 24px;display:flex;justify-content:flex-end;text-align:center;position:relative;height:auto}.adsk-viewing-viewer .calibration-panel .docking-panel-footer .docking-panel-secondary-button,.adsk-viewing-viewer .calibration-panel .docking-panel-footer .docking-panel-primary-button{padding:0px 16px;margin:0px 0px 0px 8px;font-size:14px}.adsk-viewing-viewer .calibration-panel .docking-panel-title{padding-top:19px;padding-bottom:19px}.adsk-viewing-viewer .calibration-panel .docking-panel-close{margin-top:7.5px}`, \"\",{\"version\":3,\"sources\":[\"webpack://./extensions/Measure/Calibration.css\"],\"names\":[],\"mappings\":\"AAAA,WAAW,8BAA8B,CAAC,+1HAA+1H,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,uDAAuD,8BAA8B,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,mBAAmB,CAAC,aAAa,CAAC,eAAe,CAAC,UAAU,CAAC,mBAAmB,CAAC,kCAAkC,CAAC,iCAAiC,CAAC,8CAA8C,WAAW,CAAC,wCAAwC,sBAAsB,CAAC,qBAAqB,CAAC,WAAW,CAAC,WAAW,CAAC,SAAS,CAAC,2DAA2D,iBAAiB,CAAC,kBAAkB,CAAC,eAAe,CAAC,kBAAkB,CAAC,qBAAqB,CAAC,yHAAyH,UAAU,CAAC,iBAAiB,CAAC,qBAAqB,CAAC,qIAAqI,UAAU,CAAC,uBAAuB,CAAC,WAAW,CAAC,cAAc,CAAC,oEAAoE,WAAW,CAAC,sEAAsE,UAAU,CAAC,qBAAqB,CAAC,UAAU,CAAC,WAAW,CAAC,cAAc,CAAC,uEAAuE,WAAW,CAAC,cAAc,CAAC,qDAAqD,gBAAgB,CAAC,6DAA6D,UAAU,CAAC,0IAA0I,uBAAuB,CAAC,QAAQ,CAAC,uCAAuC,eAAe,CAAC,yBAAyB,CAAC,0BAA0B,CAAC,cAAc,CAAC,kCAAkC,CAAC,yCAAyC,eAAe,CAAC,8CAA8C,sBAAsB,CAAC,2BAA2B,CAAC,oBAAoB,CAAC,+CAA+C,sBAAsB,CAAC,0BAA0B,CAAC,oBAAoB,CAAC,uCAAuC,iBAAiB,CAAC,aAAa,CAAC,KAAK,CAAC,MAAM,CAAC,mBAAmB,CAAC,SAAS,CAAC,wCAAwC,YAAY,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,cAAc,CAAC,WAAW,CAAC,UAAU,CAAC,eAAe,CAAC,kBAAkB,CAAC,gCAAgC,CAAC,6CAA6C,oBAAoB,CAAC,mBAAmB,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,cAAc,CAAC,cAAc,CAAC,WAAW,CAAC,UAAU,CAAC,eAAe,CAAC,6BAA6B,CAAC,oBAAoB,CAAC,wBAAwB,CAAC,kCAAkC,CAAC,mDAAmD,aAAa,CAAC,gCAAgC,CAAC,gDAAgD,aAAa,CAAC,mIAAmI,wBAAwB,CAAC,uIAAuI,UAAU,CAAC,oDAAoD,kBAAkB,CAAC,2CAA2C,YAAY,CAAC,iBAAiB,CAAC,WAAW,CAAC,mBAAmB,CAAC,UAAU,CAAC,WAAW,CAAC,qBAAqB,CAAC,gEAAgE,CAAC,uBAAuB,CAAC,0BAA0B,CAAC,kBAAkB,CAAC,sBAAsB,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,mDAAmD,aAAa,CAAC,gDAAgD,oBAAoB,CAAC,cAAc,CAAC,qBAAqB,CAAC,cAAc,CAAC,sBAAsB,CAAC,qBAAqB,CAAC,iBAAiB,CAAC,aAAa,CAAC,oBAAoB,CAAC,wBAAwB,CAAC,mBAAmB,CAAC,8DAA8D,iBAAiB,CAAC,YAAY,CAAC,wBAAwB,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,WAAW,CAAC,0LAA0L,gBAAgB,CAAC,sBAAsB,CAAC,cAAc,CAAC,6DAA6D,gBAAgB,CAAC,mBAAmB,CAAC,6DAA6D,gBAAgB\",\"sourcesContent\":[\"@font-face{font-family:\\\"calibration-icon\\\";src:url(\\\"data:application/octet-stream;base64,d09GRgABAAAAAAtYAA8AAAAAE7QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABWAAAADsAAABUIIwleU9TLzIAAAGUAAAAQgAAAFZWgGFpY21hcAAAAdgAAABOAAABcAGIBM1jdnQgAAACKAAAABMAAAAgBtX/BGZwZ20AAAI8AAAFkAAAC3CKkZBZZ2FzcAAAB8wAAAAIAAAACAAAABBnbHlmAAAH1AAAAOQAAADkZyzZ8WhlYWQAAAi4AAAAMQAAADYL0YfIaGhlYQAACOwAAAAcAAAAJAc7A1VobXR4AAAJCAAAAAgAAAAIBvL//2xvY2EAAAkQAAAABgAAAAYAcgAAbWF4cAAACRgAAAAgAAAAIADpC8puYW1lAAAJOAAAAXcAAALNzJ0cHnBvc3QAAAqwAAAAKgAAADsMvKbDcHJlcAAACtwAAAB6AAAAhuVBK7x4nGNgZGBg4GIwYLBjYMpJLMlj4HNx8wlhkGJgYYAAkDwymzEnMz2RgQPGA8qxgGkOIGaDiAIAKVkFSAB4nGNgZK5knMDAysDAVMW0h4GBoQdCMz5gMGRkAooysDIzYAUBaa4pDA4MiQyJzEH/sxiimIMYpgGFGUFyAM95CpgAAHicY2BgYGVgYGAGYh0gZmFgYAxhYGQAAT+gKCNYnJmBCyzOwqAEVsMCFk/8/x9OMoJ0gkQZ2RhoDxjpYAclgAdMykB54LCCYkYA4LUHVgAAeJxjYEADEhDIHPQ/C4QBEmwD3QB4nK1WaXfTRhQdeUmchCwlCy1qYcTEabBGJmzBgAlBsmMgXZytlaCLFDvpvvGJ3+Bf82Tac+g3flrvGy8kkLTncJqTo3fnzdXM22USWpLYC+uRlJsvxdTWJo3sPAnphk3LUXwoO3shZYrJ3wVREK2W2rcdh0REIlC1rrBEEPseWZpkfOhRRsu2pFdNyi096S5b40G9Vd9+GjrKsTuhpGYzdGg9siVVGFWiSKY9UtKmZaj6K0krvL/CzFfNUMKITiJpvBnG0EjeG2e0ymg1tuMoimyy3ChSJJrhQRR5lNUS5+SKCQzKB82Q8sqnEeXD/Iis2KOcVrBLttP8vi95p3c5P7Ffb1G25EAfyI7s4Ox0JV+EW1th3LST7ShUEXbXd0Js2exU/2aP8ppGA7crMr3QjGCpfIUQKz+hzP4hWS2cT/mSR6NaspETQetlTuxLPoHW44gpcc0YWdDd0QkR1P2SMwz2mD4e/PHeKZYLEwJ4HMt6RyWcCBMpYXM0SdowcmAlZYsqqfWumDjldVrEW8J+7drRl85o41B3YjxbDx1bOVHJ8WhSp5lMndpJzaMpDaKUdCZ4zK8DKD+iSV5tYzWJlUfTOGbGhEQiAi3cS1NBLDuxpCkEzaMZvbkbprl2LVqkyQP13KP39OZWuLnTU9oO9LNGf1anYjrYC9PpaeQv8Wna5SJF6frpGX5M4kHWAjKRLTbDlIMHb/0O0svXlhyF1wbY7u3zK6h91kTwpAH7G9AeT9UpCUyFmFWIVkBirWtZlsnVrBapyNR3Q5pWvqzTBIpyHBfHvoxx/V8zM5aYEr7fidOzIy49c+1LCNMcfJt1PZrXqcVyAXFmeU6nWZbv6zTH8gOd5lme1+kIS1unoyw/1GmB5Uc6HWN5QQuadN/BkIsw5AIOkDCEpQNDWF6CISwVDGG5CENYFmEIyyUYwvJjGMJyGYawvKxl1dRTSePamVgGbEJgYo4eucxF5WoquVRCu2hUakOeEm6VVBTPqn9loF488oY5sBZIl8iaXzHOlY9G5fjWFS1vGjtXwLHqbx+O9jnxUtaLhT8F/9XWVCW9Ys3Dk6vwG4aebCeqNql4dE2Xz1U9uv5fVFRYC/QbSIVYKMqybHBnIoSPOp2GaqCVQ8xszDy063XLmp/D/TcxQhZQ/fg3FBoL3INOWUlZ7eCs1dfbstw7g3I4EyxJMTfz+lb4IiOz0n6RWcqej3wecAWMSmXYagOtFbzZJzEPmd4kzwRxW1E2SNrYzgSJDRzzgHnznQQmYeqqDeRO4YYN+AVhbsF5J1yieqMsh+5F7PMopPxbp+JE9qhojMCz2Rthr+9Cym9xDCQ0+aV+DFQVoakYNRXQNFJuqAZfxtm6bULGDvQjKnbDsqziw8cW95WSbRmEfKSI1aOjn9Zeok6q3H5mFJfvnb4FwSA1MX9733RxkMq7WskyR20DU7calVPXmkPjVYfq5lH1vePsEzlrmm66Jx56X9Oq28HFXCyw9m0O0lImF9T1YYUNosvFpVDqZTRJ77gHGBYY0O9Qio3/q/rYfJ4rVYXRcSTfTtS30edgDPwP2H9H9QPQ92Pocg0uz/eaE59u9OFsma6iF+un6Dcwa625WboG3NB0A+IhR62OuMoNfKcGcXqkuRzpIeBj3RXiAcAmgMXgE921jOZTAKP5jDk+wOfMYdBkDoMt5jDYZs4awA5zGOwyh8Eecxh8wZx1gC+ZwyBkDoOIOQyeMCcAeMocBl8xh8HXzGHwDXPuA3zLHAYxcxgkzGGwr+nWMMwtXtBdoLZBVaADU09Y3MPiUFNlyP6OF4b9vUHM/sEgpv6o6faQ+hMvDPVng5j6i0FM/VXTnSH1N14Y6u8GMfUPg5j6TL8Yy2UGv4x8lwoHlF1sPufvifcP28VAuQABAAH//wAPAAP///+TAwoDUgAlAC4AMQBJQEYkAQIGBQFHFhUQDwQBRAAHBgAGBwBtCAQCAAMCAgEAAVwKAQYGBVYJAQUFDAZJJyYAADEwKyomLicuACUAJSMkFCQXCwUZKwEVDgEVFBcDIw4BHgE7AQcXPwEhHwE3JzMyNjQmKwEDNjU0Jic1BzIWFAYiJjQ2FxMhAVgoNA7ANAoNAg0KHh4LXEABjUBbDB4eCQ4OCTLADTMoLhMbGyYaGhOw/qEDUm8ORyweHP5EAQ0UDERnLn19LmdEDRQNAbwaICxHDm/CGyYaGiYbzv6qeJxjYGRgYABiNfd3DvH8Nl8ZuJlfAEUYrqQu/A+jgWAy8wvmICCXg4EJJAoAgCEOvwAAAHicY2BkYGAO+p8FJF/8/w8iGYAiKIAJAIvHBZcD6AAAAwr//wAAAAAAcgAAAAEAAAACADIAAwAAAAAAAgAWACYAcwAAAFoLcAAAAAB4nHWQy07CQBSG/5GLCokaTdw6KwMxlksiCxISEgxsdEMMW1NKaUtKh0wHEl7Dd/BhfAmfxZ92MAZim+l855szZ04HwDW+IZA/Txw5C5wxyvkEp+hZLtA/Wy6SXyyXUMWb5TL9u+UKHhBYruIGH6wgiueMFvi0LHAlLi2f4ELcWS7QP1ouknuWS7gVr5bL9J7lCiYitVzFvfgaqNVWR0FoZG1Ql+1mqyOnW6moosSNpbs2odKp7Mu5Sowfx8rx1HLPYz9Yx67eh/t54us0UolsOc29GvmJr13jz3bV003QNmYu51ot5dBmyJVWC98zTmjMqtto/D0PAyissIVGxKsKYSBRo61zbqOJFjqkKTMkM/OsCAlcxDQu1twRZisp4z7HnFFC6zMjJjvw+F0e+TEp4P6YVfTR6mE8Ie3OiDIv2ZfD7g6zRqQky3QzO/vtPcWGp7VpDXftutRZVxLDgxqS97FbW9B49E52K4a2iwbff/7vB+NphE8AeJxjYGKAAC4G7ICJkYmRmUEwOTEnM6kosSQzPy++PCOzJJWBAQBRdwcvAAB4nGPw3sFwIihiIyNjX+QGxp0cDBwMyQUbGVidNjEwMmiBGJu5mBg5ICw+BjCLzWkX0wGgNCeQze60i8EBwmZmcNmowtgRGLHBoSNiI3OKy0Y1EG8XRwMDI4tDR3JIBEhJJBBs5mFi5NHawfi/dQNL70YmBhcADHYj9AAA\\\") format(\\\"woff\\\");font-weight:normal;font-style:normal}[class^=calibration-icon],[class*=\\\" calibration-icon\\\"]{font-family:\\\"calibration-icon\\\";font-style:normal;font-weight:normal;font-variant:normal;line-height:1;padding-top:2px;speak:none;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.adsk-viewing-viewer .calibration-icon:before{content:\\\"a\\\"}.adsk-viewing-viewer .calibration-panel{left:calc(50% - 190px);top:calc(50% - 145px);width:380px;height:auto;z-index:4}.adsk-viewing-viewer .calibration-panel .calibration-table{padding-left:24px;padding-right:24px;margin-top:12px;margin-bottom:12px;box-sizing:border-box}.adsk-viewing-viewer .measure-settings-popup .option-drop-down,.adsk-viewing-viewer .calibration-panel .option-drop-down{width:100%;padding-right:0px;box-sizing:border-box}.adsk-viewing-viewer .measure-settings-popup .adsk-lmv-tftable tr td,.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td{width:auto;padding:2px 0px 2px 0px;height:56px;font-size:14px}.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td div{padding:0px}.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td input{margin:0px;box-sizing:border-box;width:100%;height:36px;font-size:14px}.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td select{height:36px;font-size:14px}.adsk-viewing-viewer .measure-settings-popup .switch{margin-left:25px}.adsk-viewing-viewer .measure-settings-popup .switch .slider{width:26px}.adsk-viewing-viewer .calibration-textbox::-webkit-inner-spin-button,.adsk-viewing-viewer .calibration-textbox::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.adsk-viewing-viewer .calibration-text{text-align:left;padding:6px 10px 6px 10px;margin:20px 20px 14px 20px;font-size:14px;-webkit-font-smoothing:antialiased}.adsk-viewing-viewer .calibration-button{margin-top:15px}.adsk-viewing-viewer .calibration-button-left{width:calc(50% - 15px);margin-right:5px !important;display:inline-block}.adsk-viewing-viewer .calibration-button-right{width:calc(50% - 15px);margin-left:5px !important;display:inline-block}.adsk-viewing-viewer .calibration-line{position:absolute;display:block;top:0;left:0;pointer-events:none;z-index:0}.adsk-viewing-viewer .calibration-label{display:none;position:absolute;pointer-events:none;text-align:\\\"center\\\";vertical-align:middle;cursor:default;padding:2px;color:#000;background:#fff;border-radius:10px;-webkit-transform-origin:50% 53%}.adsk-viewing-viewer .calibration-label-text{display:inline-block;pointer-events:none;text-align:\\\"center\\\";vertical-align:middle;font-size:12px;cursor:default;padding:2px;color:#000;background:#fff;border-bottom:1px dashed #000;text-decoration:none;text-transform:uppercase;-webkit-font-smoothing:antialiased}.adsk-viewing-viewer .calibration-label-text:hover{color:#039be5;border-bottom:1px dashed #039be5}.adsk-viewing-viewer .calibration-label.visible{display:block}.adsk-viewing-viewer .calibration-endpoint:hover.calibration-endpoint.enable-hover,.adsk-viewing-viewer .calibration-endpoint.edit{background-color:#039be5}.adsk-viewing-viewer .calibration-endpoint:hover.calibration-endpoint.enable-hover>*,.adsk-viewing-viewer .calibration-endpoint.edit>*{color:#fff}.adsk-viewing-viewer .calibration-endpoint.editable{pointer-events:all}.adsk-viewing-viewer .calibration-endpoint{display:none;position:absolute;cursor:move;pointer-events:none;width:30px;height:30px;background-color:#fff;box-shadow:0 4px 8px 0 rgba(0,0,0,.24),0 0 8px 0 rgba(0,0,0,.12);-moz-border-radius:50px;-webkit-border-radius:50px;border-radius:50px;justify-content:center;align-items:center;text-align:center}.adsk-viewing-viewer .calibration-endpoint.visible{display:block}.adsk-viewing-viewer .calibration-endpoint-text{display:inline-block;font-size:14px;vertical-align:middle;cursor:default;margin:5px 5px 5px 5px;vertical-align:middle;text-align:center;color:#039be5;text-decoration:none;text-transform:uppercase;pointer-events:none}.adsk-viewing-viewer .calibration-panel .docking-panel-footer{padding:16px 24px;display:flex;justify-content:flex-end;text-align:center;position:relative;height:auto}.adsk-viewing-viewer .calibration-panel .docking-panel-footer .docking-panel-secondary-button,.adsk-viewing-viewer .calibration-panel .docking-panel-footer .docking-panel-primary-button{padding:0px 16px;margin:0px 0px 0px 8px;font-size:14px}.adsk-viewing-viewer .calibration-panel .docking-panel-title{padding-top:19px;padding-bottom:19px}.adsk-viewing-viewer .calibration-panel .docking-panel-close{margin-top:7.5px}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.adsk-viewing-viewer .measure-length:hover.measure-length.enable-hover{box-shadow:0 0 16px 3px rgba(0,117,210,.7);-webkit-box-shadow:0 0 16px 3px rgba(0,117,210,.7);-moz-box-shadow:0 0 16px 3px rgba(0,117,210,.7)}.adsk-viewing-viewer .measure-length{display:none;position:absolute;height:19px;left:0px;top:0px;padding:2px 0 2px 0;background-color:#009bea;box-shadow:0px 1px 3px 1px rgba(0,0,0,.25);color:#f4f4f4;font-size:12px;text-align:center;line-height:1.2;white-space:nowrap;border-radius:8px;pointer-events:none;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0)}.adsk-viewing-viewer .measure-length.visible{display:block}.adsk-viewing-viewer .measure-length.fetching-topology{background-color:rgba(34,34,34,.8);box-shadow:0 .5px 1.5px 0 rgba(0,0,0,.3)}.adsk-viewing-viewer .measure-length-text{display:inline-block;margin:0 5px 0 5px;vertical-align:middle;font-size:16px;pointer-events:none}.adsk-viewing-viewer .measure-delta-text{margin:0 5px 0 5px;align-self:center;font-size:14px;overflow:hidden;white-space:nowrap;height:16px;line-height:16px;vertical-align:middle;pointer-events:none}.adsk-viewing-viewer .measure-length-button{display:inline-block;width:16px;height:16px;font-size:16px;float:right;color:#fff;opacity:.7}.adsk-viewing-viewer .measure-length-button:hover{background-color:rgba(166,194,255,.7);-webkit-transition:all .2s ease;-moz-transition:all .2s ease;-ms-transition:all .2s ease;-o-transition:all .2s ease;transition:all .2s ease}.adsk-viewing-viewer .measure-label:hover.measure-label.enable-hover,.adsk-viewing-viewer .measure-label.on-edit{box-shadow:0 0 4px 4px #0d69ca;-webkit-box-shadow:0 0 4px 4px #0d69ca;-moz-box-shadow:0 0 4px 4px #0d69ca}.adsk-viewing-viewer .measure-label.editable{pointer-events:all}.adsk-viewing-viewer .measure-label{display:none;position:absolute;width:7px;height:7px;cursor:move;pointer-events:none;border-radius:100px}.adsk-viewing-viewer .measure-label-hit-area{display:inline-block;position:absolute;width:44px;height:44px;left:-22px;top:-22px;border-radius:100px;z-index:2}.adsk-viewing-viewer .measure-label-icon{display:inline-block;position:absolute;width:7px;height:7px;left:-2px;top:-2px;background-color:#009bea;border-style:solid;border-width:2px;border-color:#fff;border-radius:100px;box-shadow:0 2px 5px 0 #182a3d;z-index:2}.adsk-viewing-viewer .measure-label.visible{display:block}.adsk-viewing-viewer .measure-label-text{display:inline-block;margin:0px 5px 0px 5px;vertical-align:middle}.adsk-viewing-viewer .measure-horizontal-divider{height:1px;border-top:1px solid rgba(200,200,200,.8)}.adsk-viewing-viewer .measure-submenu-select{display:block;position:relative;width:calc(100% - 40px);padding:10px 20px 0px 20px;opacity:.3}.adsk-viewing-viewer .option-drop-down:disabled{opacity:.3}.adsk-viewing-viewer .measure-submenu-selectlabel{position:relative;display:inline-block;padding-right:20px;padding-bottom:4px}.adsk-viewing-viewer .measure-results{position:relative;display:block;padding:5px 0px 10px 30px}.adsk-viewing-viewer .measure-result-label{display:inline-block;padding-right:10px}.adsk-viewing-viewer .measure-result-number{display:inline-block}.adsk-viewing-viewer .measure-delta-collapse{position:absolute;right:20px;display:inline-block;background-color:rgba(255,255,255,.12);margin:0px 4px 0px 4px;padding:0px 4px 0px 4px;cursor:pointer;text-align:center}.adsk-viewing-viewer .measure-delta-collapse:hover{background-color:rgba(166,194,255,.7);-webkit-transition:all .2s ease;-moz-transition:all .2s ease;-ms-transition:all .2s ease;-o-transition:all .2s ease;transition:all .2s ease}.adsk-viewing-viewer .measure-selection-repick{position:absolute;right:20px;display:inline-block;background-color:rgba(255,255,255,.12);margin:4px 4px 4px 4px;padding:4px 4px 4px 4px;cursor:pointer;text-align:center}.adsk-viewing-viewer .measure-selection-repick:hover{background-color:rgba(166,194,255,.7);-webkit-transition:all .2s ease;-moz-transition:all .2s ease;-ms-transition:all .2s ease;-o-transition:all .2s ease;transition:all .2s ease}.adsk-viewing-viewer .measure-restart{margin:10px 20px 15px 20px;padding:6px 10px 6px 10px;width:calc(100% - 55px);cursor:pointer;text-align:center;border-style:solid;border-width:1px;border-color:rgba(255,255,255,.2);border-radius:3px}.adsk-viewing-viewer .docking-panel:hover .measure-restart{background-color:rgba(255,255,255,.12)}.adsk-viewing-viewer .docking-panel .measure-restart:hover{background-color:rgba(166,194,255,.7);-webkit-transition:all .2s ease;-moz-transition:all .2s ease;-ms-transition:all .2s ease;-o-transition:all .2s ease;transition:all .2s ease}.adsk-viewing-viewer .measure-panel-title{padding-top:0px;padding-left:20px;margin-top:10px}.adsk-viewing-viewer .measure-panel-title:hover{cursor:pointer}.adsk-viewing-viewer .measure-panel-title.collapsed{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkEwMDhBMzY4QTYyODExRTM5REY0Q0MwMTM3MTVFOTMzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkEwMDhBMzY5QTYyODExRTM5REY0Q0MwMTM3MTVFOTMzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTAwOEEzNjZBNjI4MTFFMzlERjRDQzAxMzcxNUU5MzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTAwOEEzNjdBNjI4MTFFMzlERjRDQzAxMzcxNUU5MzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6WHWu4AAAAcElEQVR42mL8//8/AzmAiYFMgEtjGSFDcUmGAfEEIOYix6lWQLwUiGXJ8SNI00IgNiIncPiAeCoQ+5ITqsxQA+CAhQhN34C4AoiPkaLxGRAXAfEdUvx4DohjsGkCA1CSw4LrgZgVhxwYM9I9rQIEGACZNDs01yUXlAAAAABJRU5ErkJggg==);background-repeat:no-repeat}.adsk-viewing-viewer .measure-panel-title.expanded{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkE3QzFFQUQ1QTYyODExRTM5NzE2RjcyN0QxQjg0QTREIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkE3QzFFQUQ2QTYyODExRTM5NzE2RjcyN0QxQjg0QTREIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTdDMUVBRDNBNjI4MTFFMzk3MTZGNzI3RDFCODRBNEQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTdDMUVBRDRBNjI4MTFFMzk3MTZGNzI3RDFCODRBNEQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6XuY60AAAARklEQVR42mL8//8/AzmAiYFMQBeNqSg8kB+JwKlAfAZZjIlIm9JJdSpWTYQ04tSETyNeTbg0EtSETSNRmkCAcegkOYAAAwDGjDZHvY373AAAAABJRU5ErkJggg==);background-repeat:no-repeat}.adsk-viewing-viewer .adsk-viewing-viewer .measure-table td{padding:10px 0px 10px 20px}.adsk-viewing-viewer .measure-selection-one-label{display:inline-block;margin:18px 18px 18px 18px;width:16px;height:16px;font-size:16px;float:left;padding:2px;background-color:#03f;border-radius:10px;opacity:.6}.adsk-viewing-viewer .measure-selection-two-label{display:inline-block;margin:18px 18px 18px 18px;width:16px;height:16px;font-size:16px;float:left;padding:2px;background-color:#03f;border-radius:10px;opacity:.6}.adsk-viewing-viewer .measure-repick{display:inline-block;cursor:default;margin:20px 20px 20px 20px;width:16px;height:16px;font-size:16px;float:right;opacity:.5}.adsk-viewing-viewer .measure-repick:hover{opacity:1}.adsk-viewing-viewer .measure-selection-result{display:inline-block;margin:21px 0px 21px 0px}.adsk-viewing-viewer .measure-distance-icon{display:inline-block;margin:20px 2px 20px 2px;font-size:52px;color:#f90;float:left}.adsk-viewing-viewer .measure-angle-icon{display:inline-block;margin:20px 2px 20px 2px;font-size:52px;color:#f90;float:left}.adsk-viewing-viewer .adsk-viewing-viewer .measure-result{font-size:20px;color:#f90;display:inline-block;margin:38px 0px 38px 0px}.adsk-viewing-viewer .measure-initial{font-size:20px;display:inline-block;margin:38px 0px 38px 56px}.adsk-viewing-viewer .measure-settings-button{cursor:default;position:relative;top:20px;right:20px;width:16px;height:16px;font-size:18px;float:right;opacity:.5}.adsk-viewing-viewer .measure-settings-button:hover{opacity:1}.adsk-viewing-viewer .measure-delta-button{position:relative;top:56px;right:4px;width:16px;height:16px;font-size:16px;float:right;opacity:.5;-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-ms-transform:rotate(-90deg);-o-transform:rotate(-90deg);transform:rotate(-90deg)}.adsk-viewing-viewer .measure-delta-button.rotated{-webkit-transform:rotate(90deg);-moz-transform:rotate(90deg);-ms-transform:rotate(90deg);-o-transform:rotate(90deg);transform:rotate(90deg)}.adsk-viewing-viewer .measure-delta-button:hover{opacity:1}.adsk-viewing-viewer .measure-delta-result{display:inline-block;margin:0px 0px 20px 0px;padding:0px 0px 0px 56px}.adsk-viewing-viewer .measure-label-axis{display:none;position:absolute;width:16px;height:16px;left:0px;top:0px;background-color:#f4f4f4;border-radius:8px;pointer-events:none}.adsk-viewing-viewer .measure-label-axis-icon.X{background-color:#f12c2c}.adsk-viewing-viewer .measure-label-axis-icon.Y{background-color:#0bb80b}.adsk-viewing-viewer .measure-label-axis-icon.Z{background-color:#2c2cf1}.adsk-viewing-viewer .measure-label-axis-icon{width:20px;height:18px;color:#f4f4f4;border-radius:8px 0 0 8px;font-size:12px;padding-top:4px;line-height:15px;text-align:center;margin-left:-2px}.adsk-viewing-viewer .measure-label-axis-delta.enableTransition{transition:opacity .1s linear}.adsk-viewing-viewer .measure-label-axis-delta{display:none;position:absolute;font-size:18px;left:0px;top:0px;background-color:#fff;pointer-events:none;opacity:0;border-radius:8px;box-shadow:0px 1px 3px 1px rgba(0,0,0,.25)}.adsk-viewing-viewer .measure-label-axis.visible{display:block}.adsk-viewing-viewer .measure-label-axis-delta.visible{display:flex}.adsk-viewing-viewer .measure-label-axis-x{color:#f12c2c}.adsk-viewing-viewer .measure-label-axis-y{color:#0bb80b}.adsk-viewing-viewer .measure-label-axis-z{color:#2c2cf1}.adsk-viewing-viewer .magnifying-glass.visible{display:block}.adsk-viewing-viewer .magnifying-glass{position:absolute;display:none;-moz-border-radius:100%;-webkit-border-radius:100%;border-radius:100%;background:rgba(0,0,0,0);box-shadow:2px 2px 4px rgba(0,0,0,.5),inset 2px 2px 4px rgba(0,0,0,.5);-webkit-box-shadow:2px 2px 4px rgba(0,0,0,.5),inset 2px 2px 4px rgba(0,0,0,.5);-moz-box-shadow:2px 2px 4px rgba(0,0,0,.5),inset 2px 2px 4px rgba(0,0,0,.5);z-index:4}.adsk-viewing-viewer .measure-fetching-topology{display:inline-block;width:10px;height:10px;background:url(\"data:image/svg+xml,%3Csvg xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22 width%3D%2210%22 height%3D%2210%22 viewBox%3D%220 0 10 10%22%3E  %3Cdefs%3E    %3ClinearGradient id%3D%22linear-gradient%22 y1%3D%225%22 x2%3D%2210%22 y2%3D%225%22 gradientUnits%3D%22userSpaceOnUse%22%3E      %3Cstop offset%3D%220%22 stop-color%3D%22%23fff%22 stop-opacity%3D%220%22%2F%3E      %3Cstop offset%3D%221%22 stop-color%3D%22%23fff%22%2F%3E    %3C%2FlinearGradient%3E  %3C%2Fdefs%3E  %3Ctitle%3EAsset 6%3C%2Ftitle%3E  %3Cg id%3D%22Layer_2%22 data-name%3D%22Layer 2%22%3E    %3Cg id%3D%22finals_24px%22%3E      %3Cpath d%3D%22M5%2C10A5%2C5%2C0%2C0%2C1%2C0%2C5%2C1.2%2C1.2%2C0%2C0%2C1%2C2.3%2C5%2C2.7%2C2.7%2C0%2C1%2C0%2C5%2C2.3%2C1.2%2C1.2%2C0%2C0%2C1%2C5%2C0%2C5%2C5%2C0%2C0%2C1%2C5%2C10Z%22 fill%3D%22url(%23linear-gradient)%22%2F%3E    %3C%2Fg%3E  %3C%2Fg%3E%3C%2Fsvg%3E\");margin:3px 0px -2px 3px;animation:measure-topology-fetching-anim 1.4s infinite linear;-webkit-animation:measure-topology-fetching-anim 1.4s infinite linear}@keyframes measure-topology-fetching-anim{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes measure-topology-fetching-anim{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.adsk-viewing-viewer .docking-panel.measure-settings-popup{display:flex;justify-content:center;flex-direction:column;bottom:120%;box-sizing:border-box;text-align:left;position:absolute;padding-top:15px;padding-bottom:15px}.adsk-viewing-viewer .adsk-toolbar-vertical .docking-panel.measure-settings-popup{right:120%;bottom:unset;height:max-content;width:max-content}.adsk-viewing-viewer .docking-panel.measure-settings-popup .adsk-lmv-tftable tr.switch-slider-row td{width:auto;padding-bottom:0px;padding-top:0px;vertical-align:inherit}.adsk-viewing-viewer .docking-panel.measure-settings-popup.hide{display:none}.adsk-viewing-viewer .measure-settings-popup tbody{top:15px}.adsk-toolbar .measure-toolbar-seperator{height:18px;width:1px;background-color:#999;float:left;margin:16px 5px}.adsk-toolbar.adsk-toolbar-vertical .measure-toolbar-seperator{height:1px;width:18px;margin:5px 16px}.adsk-viewing-viewer .measure-selection-area{display:block;position:absolute;cursor:pointer;z-index:1;-webkit-tap-highlight-color:rgba(0,0,0,0)}.adsk-viewing-viewer .adsk-toolbar.adsk-toolbar-vertical .adsk-label-button{padding:0px;width:40px}.adsk-viewing-viewer .adsk-toolbar.adsk-toolbar-vertical .adsk-label-button>label{padding:10px 0px}`, \"\",{\"version\":3,\"sources\":[\"webpack://./extensions/Measure/Measure.css\"],\"names\":[],\"mappings\":\"AAAA,uEAAuE,0CAA0C,CAAC,kDAAkD,CAAC,+CAA+C,CAAC,qCAAqC,YAAY,CAAC,iBAAiB,CAAC,WAAW,CAAC,QAAQ,CAAC,OAAO,CAAC,mBAAmB,CAAC,wBAAwB,CAAC,0CAA0C,CAAC,aAAa,CAAC,cAAc,CAAC,iBAAiB,CAAC,eAAe,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,cAAc,CAAC,SAAS,CAAC,yCAAyC,CAAC,6CAA6C,aAAa,CAAC,uDAAuD,kCAAkC,CAAC,wCAAwC,CAAC,0CAA0C,oBAAoB,CAAC,kBAAkB,CAAC,qBAAqB,CAAC,cAAc,CAAC,mBAAmB,CAAC,yCAAyC,kBAAkB,CAAC,iBAAiB,CAAC,cAAc,CAAC,eAAe,CAAC,kBAAkB,CAAC,WAAW,CAAC,gBAAgB,CAAC,qBAAqB,CAAC,mBAAmB,CAAC,4CAA4C,oBAAoB,CAAC,UAAU,CAAC,WAAW,CAAC,cAAc,CAAC,WAAW,CAAC,UAAU,CAAC,UAAU,CAAC,kDAAkD,qCAAqC,CAAC,+BAA+B,CAAC,4BAA4B,CAAC,2BAA2B,CAAC,0BAA0B,CAAC,uBAAuB,CAAC,iHAAiH,8BAA8B,CAAC,sCAAsC,CAAC,mCAAmC,CAAC,6CAA6C,kBAAkB,CAAC,oCAAoC,YAAY,CAAC,iBAAiB,CAAC,SAAS,CAAC,UAAU,CAAC,WAAW,CAAC,mBAAmB,CAAC,mBAAmB,CAAC,6CAA6C,oBAAoB,CAAC,iBAAiB,CAAC,UAAU,CAAC,WAAW,CAAC,UAAU,CAAC,SAAS,CAAC,mBAAmB,CAAC,SAAS,CAAC,yCAAyC,oBAAoB,CAAC,iBAAiB,CAAC,SAAS,CAAC,UAAU,CAAC,SAAS,CAAC,QAAQ,CAAC,wBAAwB,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,8BAA8B,CAAC,SAAS,CAAC,4CAA4C,aAAa,CAAC,yCAAyC,oBAAoB,CAAC,sBAAsB,CAAC,qBAAqB,CAAC,iDAAiD,UAAU,CAAC,yCAAyC,CAAC,6CAA6C,aAAa,CAAC,iBAAiB,CAAC,uBAAuB,CAAC,0BAA0B,CAAC,UAAU,CAAC,gDAAgD,UAAU,CAAC,kDAAkD,iBAAiB,CAAC,oBAAoB,CAAC,kBAAkB,CAAC,kBAAkB,CAAC,sCAAsC,iBAAiB,CAAC,aAAa,CAAC,yBAAyB,CAAC,2CAA2C,oBAAoB,CAAC,kBAAkB,CAAC,4CAA4C,oBAAoB,CAAC,6CAA6C,iBAAiB,CAAC,UAAU,CAAC,oBAAoB,CAAC,sCAAsC,CAAC,sBAAsB,CAAC,uBAAuB,CAAC,cAAc,CAAC,iBAAiB,CAAC,mDAAmD,qCAAqC,CAAC,+BAA+B,CAAC,4BAA4B,CAAC,2BAA2B,CAAC,0BAA0B,CAAC,uBAAuB,CAAC,+CAA+C,iBAAiB,CAAC,UAAU,CAAC,oBAAoB,CAAC,sCAAsC,CAAC,sBAAsB,CAAC,uBAAuB,CAAC,cAAc,CAAC,iBAAiB,CAAC,qDAAqD,qCAAqC,CAAC,+BAA+B,CAAC,4BAA4B,CAAC,2BAA2B,CAAC,0BAA0B,CAAC,uBAAuB,CAAC,sCAAsC,0BAA0B,CAAC,yBAAyB,CAAC,uBAAuB,CAAC,cAAc,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,iCAAiC,CAAC,iBAAiB,CAAC,2DAA2D,sCAAsC,CAAC,2DAA2D,qCAAqC,CAAC,+BAA+B,CAAC,4BAA4B,CAAC,2BAA2B,CAAC,0BAA0B,CAAC,uBAAuB,CAAC,0CAA0C,eAAe,CAAC,iBAAiB,CAAC,eAAe,CAAC,gDAAgD,cAAc,CAAC,oDAAoD,43CAA43C,CAAC,2BAA2B,CAAC,mDAAmD,o0CAAo0C,CAAC,2BAA2B,CAAC,4DAA4D,0BAA0B,CAAC,kDAAkD,oBAAoB,CAAC,0BAA0B,CAAC,UAAU,CAAC,WAAW,CAAC,cAAc,CAAC,UAAU,CAAC,WAAW,CAAC,qBAAqB,CAAC,kBAAkB,CAAC,UAAU,CAAC,kDAAkD,oBAAoB,CAAC,0BAA0B,CAAC,UAAU,CAAC,WAAW,CAAC,cAAc,CAAC,UAAU,CAAC,WAAW,CAAC,qBAAqB,CAAC,kBAAkB,CAAC,UAAU,CAAC,qCAAqC,oBAAoB,CAAC,cAAc,CAAC,0BAA0B,CAAC,UAAU,CAAC,WAAW,CAAC,cAAc,CAAC,WAAW,CAAC,UAAU,CAAC,2CAA2C,SAAS,CAAC,+CAA+C,oBAAoB,CAAC,wBAAwB,CAAC,4CAA4C,oBAAoB,CAAC,wBAAwB,CAAC,cAAc,CAAC,UAAU,CAAC,UAAU,CAAC,yCAAyC,oBAAoB,CAAC,wBAAwB,CAAC,cAAc,CAAC,UAAU,CAAC,UAAU,CAAC,0DAA0D,cAAc,CAAC,UAAU,CAAC,oBAAoB,CAAC,wBAAwB,CAAC,sCAAsC,cAAc,CAAC,oBAAoB,CAAC,yBAAyB,CAAC,8CAA8C,cAAc,CAAC,iBAAiB,CAAC,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,WAAW,CAAC,cAAc,CAAC,WAAW,CAAC,UAAU,CAAC,oDAAoD,SAAS,CAAC,2CAA2C,iBAAiB,CAAC,QAAQ,CAAC,SAAS,CAAC,UAAU,CAAC,WAAW,CAAC,cAAc,CAAC,WAAW,CAAC,UAAU,CAAC,gCAAgC,CAAC,6BAA6B,CAAC,4BAA4B,CAAC,2BAA2B,CAAC,wBAAwB,CAAC,mDAAmD,+BAA+B,CAAC,4BAA4B,CAAC,2BAA2B,CAAC,0BAA0B,CAAC,uBAAuB,CAAC,iDAAiD,SAAS,CAAC,2CAA2C,oBAAoB,CAAC,uBAAuB,CAAC,wBAAwB,CAAC,yCAAyC,YAAY,CAAC,iBAAiB,CAAC,UAAU,CAAC,WAAW,CAAC,QAAQ,CAAC,OAAO,CAAC,wBAAwB,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,gDAAgD,wBAAwB,CAAC,gDAAgD,wBAAwB,CAAC,gDAAgD,wBAAwB,CAAC,8CAA8C,UAAU,CAAC,WAAW,CAAC,aAAa,CAAC,yBAAyB,CAAC,cAAc,CAAC,eAAe,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,gEAAgE,6BAA6B,CAAC,+CAA+C,YAAY,CAAC,iBAAiB,CAAC,cAAc,CAAC,QAAQ,CAAC,OAAO,CAAC,qBAAqB,CAAC,mBAAmB,CAAC,SAAS,CAAC,iBAAiB,CAAC,0CAA0C,CAAC,iDAAiD,aAAa,CAAC,uDAAuD,YAAY,CAAC,2CAA2C,aAAa,CAAC,2CAA2C,aAAa,CAAC,2CAA2C,aAAa,CAAC,+CAA+C,aAAa,CAAC,uCAAuC,iBAAiB,CAAC,YAAY,CAAC,uBAAuB,CAAC,0BAA0B,CAAC,kBAAkB,CAAC,wBAAwB,CAAC,sEAAsE,CAAC,8EAA8E,CAAC,2EAA2E,CAAC,SAAS,CAAC,gDAAgD,oBAAoB,CAAC,UAAU,CAAC,WAAW,CAAC,06BAAuC,CAAC,uBAAuB,CAAC,6DAA6D,CAAC,qEAAqE,CAAC,0CAA0C,GAAG,8BAA8B,CAAC,sBAAsB,CAAC,KAAK,gCAAgC,CAAC,wBAAwB,CAAC,CAAC,kDAAkD,GAAG,8BAA8B,CAAC,sBAAsB,CAAC,KAAK,gCAAgC,CAAC,wBAAwB,CAAC,CAAC,2DAA2D,YAAY,CAAC,sBAAsB,CAAC,qBAAqB,CAAC,WAAW,CAAC,qBAAqB,CAAC,eAAe,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,mBAAmB,CAAC,kFAAkF,UAAU,CAAC,YAAY,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,qGAAqG,UAAU,CAAC,kBAAkB,CAAC,eAAe,CAAC,sBAAsB,CAAC,gEAAgE,YAAY,CAAC,mDAAmD,QAAQ,CAAC,yCAAyC,WAAW,CAAC,SAAS,CAAC,qBAAqB,CAAC,UAAU,CAAC,eAAe,CAAC,+DAA+D,UAAU,CAAC,UAAU,CAAC,eAAe,CAAC,6CAA6C,aAAa,CAAC,iBAAiB,CAAC,cAAc,CAAC,SAAS,CAAC,yCAAyC,CAAC,4EAA4E,WAAW,CAAC,UAAU,CAAC,kFAAkF,gBAAgB\",\"sourcesContent\":[\".adsk-viewing-viewer .measure-length:hover.measure-length.enable-hover{box-shadow:0 0 16px 3px rgba(0,117,210,.7);-webkit-box-shadow:0 0 16px 3px rgba(0,117,210,.7);-moz-box-shadow:0 0 16px 3px rgba(0,117,210,.7)}.adsk-viewing-viewer .measure-length{display:none;position:absolute;height:19px;left:0px;top:0px;padding:2px 0 2px 0;background-color:#009bea;box-shadow:0px 1px 3px 1px rgba(0,0,0,.25);color:#f4f4f4;font-size:12px;text-align:center;line-height:1.2;white-space:nowrap;border-radius:8px;pointer-events:none;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0)}.adsk-viewing-viewer .measure-length.visible{display:block}.adsk-viewing-viewer .measure-length.fetching-topology{background-color:rgba(34,34,34,.8);box-shadow:0 .5px 1.5px 0 rgba(0,0,0,.3)}.adsk-viewing-viewer .measure-length-text{display:inline-block;margin:0 5px 0 5px;vertical-align:middle;font-size:16px;pointer-events:none}.adsk-viewing-viewer .measure-delta-text{margin:0 5px 0 5px;align-self:center;font-size:14px;overflow:hidden;white-space:nowrap;height:16px;line-height:16px;vertical-align:middle;pointer-events:none}.adsk-viewing-viewer .measure-length-button{display:inline-block;width:16px;height:16px;font-size:16px;float:right;color:#fff;opacity:.7}.adsk-viewing-viewer .measure-length-button:hover{background-color:rgba(166,194,255,.7);-webkit-transition:all .2s ease;-moz-transition:all .2s ease;-ms-transition:all .2s ease;-o-transition:all .2s ease;transition:all .2s ease}.adsk-viewing-viewer .measure-label:hover.measure-label.enable-hover,.adsk-viewing-viewer .measure-label.on-edit{box-shadow:0 0 4px 4px #0d69ca;-webkit-box-shadow:0 0 4px 4px #0d69ca;-moz-box-shadow:0 0 4px 4px #0d69ca}.adsk-viewing-viewer .measure-label.editable{pointer-events:all}.adsk-viewing-viewer .measure-label{display:none;position:absolute;width:7px;height:7px;cursor:move;pointer-events:none;border-radius:100px}.adsk-viewing-viewer .measure-label-hit-area{display:inline-block;position:absolute;width:44px;height:44px;left:-22px;top:-22px;border-radius:100px;z-index:2}.adsk-viewing-viewer .measure-label-icon{display:inline-block;position:absolute;width:7px;height:7px;left:-2px;top:-2px;background-color:#009bea;border-style:solid;border-width:2px;border-color:#fff;border-radius:100px;box-shadow:0 2px 5px 0 #182a3d;z-index:2}.adsk-viewing-viewer .measure-label.visible{display:block}.adsk-viewing-viewer .measure-label-text{display:inline-block;margin:0px 5px 0px 5px;vertical-align:middle}.adsk-viewing-viewer .measure-horizontal-divider{height:1px;border-top:1px solid rgba(200,200,200,.8)}.adsk-viewing-viewer .measure-submenu-select{display:block;position:relative;width:calc(100% - 40px);padding:10px 20px 0px 20px;opacity:.3}.adsk-viewing-viewer .option-drop-down:disabled{opacity:.3}.adsk-viewing-viewer .measure-submenu-selectlabel{position:relative;display:inline-block;padding-right:20px;padding-bottom:4px}.adsk-viewing-viewer .measure-results{position:relative;display:block;padding:5px 0px 10px 30px}.adsk-viewing-viewer .measure-result-label{display:inline-block;padding-right:10px}.adsk-viewing-viewer .measure-result-number{display:inline-block}.adsk-viewing-viewer .measure-delta-collapse{position:absolute;right:20px;display:inline-block;background-color:rgba(255,255,255,.12);margin:0px 4px 0px 4px;padding:0px 4px 0px 4px;cursor:pointer;text-align:center}.adsk-viewing-viewer .measure-delta-collapse:hover{background-color:rgba(166,194,255,.7);-webkit-transition:all .2s ease;-moz-transition:all .2s ease;-ms-transition:all .2s ease;-o-transition:all .2s ease;transition:all .2s ease}.adsk-viewing-viewer .measure-selection-repick{position:absolute;right:20px;display:inline-block;background-color:rgba(255,255,255,.12);margin:4px 4px 4px 4px;padding:4px 4px 4px 4px;cursor:pointer;text-align:center}.adsk-viewing-viewer .measure-selection-repick:hover{background-color:rgba(166,194,255,.7);-webkit-transition:all .2s ease;-moz-transition:all .2s ease;-ms-transition:all .2s ease;-o-transition:all .2s ease;transition:all .2s ease}.adsk-viewing-viewer .measure-restart{margin:10px 20px 15px 20px;padding:6px 10px 6px 10px;width:calc(100% - 55px);cursor:pointer;text-align:center;border-style:solid;border-width:1px;border-color:rgba(255,255,255,.2);border-radius:3px}.adsk-viewing-viewer .docking-panel:hover .measure-restart{background-color:rgba(255,255,255,.12)}.adsk-viewing-viewer .docking-panel .measure-restart:hover{background-color:rgba(166,194,255,.7);-webkit-transition:all .2s ease;-moz-transition:all .2s ease;-ms-transition:all .2s ease;-o-transition:all .2s ease;transition:all .2s ease}.adsk-viewing-viewer .measure-panel-title{padding-top:0px;padding-left:20px;margin-top:10px}.adsk-viewing-viewer .measure-panel-title:hover{cursor:pointer}.adsk-viewing-viewer .measure-panel-title.collapsed{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkEwMDhBMzY4QTYyODExRTM5REY0Q0MwMTM3MTVFOTMzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkEwMDhBMzY5QTYyODExRTM5REY0Q0MwMTM3MTVFOTMzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTAwOEEzNjZBNjI4MTFFMzlERjRDQzAxMzcxNUU5MzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTAwOEEzNjdBNjI4MTFFMzlERjRDQzAxMzcxNUU5MzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6WHWu4AAAAcElEQVR42mL8//8/AzmAiYFMgEtjGSFDcUmGAfEEIOYix6lWQLwUiGXJ8SNI00IgNiIncPiAeCoQ+5ITqsxQA+CAhQhN34C4AoiPkaLxGRAXAfEdUvx4DohjsGkCA1CSw4LrgZgVhxwYM9I9rQIEGACZNDs01yUXlAAAAABJRU5ErkJggg==);background-repeat:no-repeat}.adsk-viewing-viewer .measure-panel-title.expanded{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkE3QzFFQUQ1QTYyODExRTM5NzE2RjcyN0QxQjg0QTREIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkE3QzFFQUQ2QTYyODExRTM5NzE2RjcyN0QxQjg0QTREIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTdDMUVBRDNBNjI4MTFFMzk3MTZGNzI3RDFCODRBNEQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTdDMUVBRDRBNjI4MTFFMzk3MTZGNzI3RDFCODRBNEQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6XuY60AAAARklEQVR42mL8//8/AzmAiYFMQBeNqSg8kB+JwKlAfAZZjIlIm9JJdSpWTYQ04tSETyNeTbg0EtSETSNRmkCAcegkOYAAAwDGjDZHvY373AAAAABJRU5ErkJggg==);background-repeat:no-repeat}.adsk-viewing-viewer .adsk-viewing-viewer .measure-table td{padding:10px 0px 10px 20px}.adsk-viewing-viewer .measure-selection-one-label{display:inline-block;margin:18px 18px 18px 18px;width:16px;height:16px;font-size:16px;float:left;padding:2px;background-color:#03f;border-radius:10px;opacity:.6}.adsk-viewing-viewer .measure-selection-two-label{display:inline-block;margin:18px 18px 18px 18px;width:16px;height:16px;font-size:16px;float:left;padding:2px;background-color:#03f;border-radius:10px;opacity:.6}.adsk-viewing-viewer .measure-repick{display:inline-block;cursor:default;margin:20px 20px 20px 20px;width:16px;height:16px;font-size:16px;float:right;opacity:.5}.adsk-viewing-viewer .measure-repick:hover{opacity:1}.adsk-viewing-viewer .measure-selection-result{display:inline-block;margin:21px 0px 21px 0px}.adsk-viewing-viewer .measure-distance-icon{display:inline-block;margin:20px 2px 20px 2px;font-size:52px;color:#f90;float:left}.adsk-viewing-viewer .measure-angle-icon{display:inline-block;margin:20px 2px 20px 2px;font-size:52px;color:#f90;float:left}.adsk-viewing-viewer .adsk-viewing-viewer .measure-result{font-size:20px;color:#f90;display:inline-block;margin:38px 0px 38px 0px}.adsk-viewing-viewer .measure-initial{font-size:20px;display:inline-block;margin:38px 0px 38px 56px}.adsk-viewing-viewer .measure-settings-button{cursor:default;position:relative;top:20px;right:20px;width:16px;height:16px;font-size:18px;float:right;opacity:.5}.adsk-viewing-viewer .measure-settings-button:hover{opacity:1}.adsk-viewing-viewer .measure-delta-button{position:relative;top:56px;right:4px;width:16px;height:16px;font-size:16px;float:right;opacity:.5;-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-ms-transform:rotate(-90deg);-o-transform:rotate(-90deg);transform:rotate(-90deg)}.adsk-viewing-viewer .measure-delta-button.rotated{-webkit-transform:rotate(90deg);-moz-transform:rotate(90deg);-ms-transform:rotate(90deg);-o-transform:rotate(90deg);transform:rotate(90deg)}.adsk-viewing-viewer .measure-delta-button:hover{opacity:1}.adsk-viewing-viewer .measure-delta-result{display:inline-block;margin:0px 0px 20px 0px;padding:0px 0px 0px 56px}.adsk-viewing-viewer .measure-label-axis{display:none;position:absolute;width:16px;height:16px;left:0px;top:0px;background-color:#f4f4f4;border-radius:8px;pointer-events:none}.adsk-viewing-viewer .measure-label-axis-icon.X{background-color:#f12c2c}.adsk-viewing-viewer .measure-label-axis-icon.Y{background-color:#0bb80b}.adsk-viewing-viewer .measure-label-axis-icon.Z{background-color:#2c2cf1}.adsk-viewing-viewer .measure-label-axis-icon{width:20px;height:18px;color:#f4f4f4;border-radius:8px 0 0 8px;font-size:12px;padding-top:4px;line-height:15px;text-align:center;margin-left:-2px}.adsk-viewing-viewer .measure-label-axis-delta.enableTransition{transition:opacity .1s linear}.adsk-viewing-viewer .measure-label-axis-delta{display:none;position:absolute;font-size:18px;left:0px;top:0px;background-color:#fff;pointer-events:none;opacity:0;border-radius:8px;box-shadow:0px 1px 3px 1px rgba(0,0,0,.25)}.adsk-viewing-viewer .measure-label-axis.visible{display:block}.adsk-viewing-viewer .measure-label-axis-delta.visible{display:flex}.adsk-viewing-viewer .measure-label-axis-x{color:#f12c2c}.adsk-viewing-viewer .measure-label-axis-y{color:#0bb80b}.adsk-viewing-viewer .measure-label-axis-z{color:#2c2cf1}.adsk-viewing-viewer .magnifying-glass.visible{display:block}.adsk-viewing-viewer .magnifying-glass{position:absolute;display:none;-moz-border-radius:100%;-webkit-border-radius:100%;border-radius:100%;background:rgba(0,0,0,0);box-shadow:2px 2px 4px rgba(0,0,0,.5),inset 2px 2px 4px rgba(0,0,0,.5);-webkit-box-shadow:2px 2px 4px rgba(0,0,0,.5),inset 2px 2px 4px rgba(0,0,0,.5);-moz-box-shadow:2px 2px 4px rgba(0,0,0,.5),inset 2px 2px 4px rgba(0,0,0,.5);z-index:4}.adsk-viewing-viewer .measure-fetching-topology{display:inline-block;width:10px;height:10px;background:url(res/icon-spinner-sm.svg);margin:3px 0px -2px 3px;animation:measure-topology-fetching-anim 1.4s infinite linear;-webkit-animation:measure-topology-fetching-anim 1.4s infinite linear}@keyframes measure-topology-fetching-anim{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes measure-topology-fetching-anim{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.adsk-viewing-viewer .docking-panel.measure-settings-popup{display:flex;justify-content:center;flex-direction:column;bottom:120%;box-sizing:border-box;text-align:left;position:absolute;padding-top:15px;padding-bottom:15px}.adsk-viewing-viewer .adsk-toolbar-vertical .docking-panel.measure-settings-popup{right:120%;bottom:unset;height:max-content;width:max-content}.adsk-viewing-viewer .docking-panel.measure-settings-popup .adsk-lmv-tftable tr.switch-slider-row td{width:auto;padding-bottom:0px;padding-top:0px;vertical-align:inherit}.adsk-viewing-viewer .docking-panel.measure-settings-popup.hide{display:none}.adsk-viewing-viewer .measure-settings-popup tbody{top:15px}.adsk-toolbar .measure-toolbar-seperator{height:18px;width:1px;background-color:#999;float:left;margin:16px 5px}.adsk-toolbar.adsk-toolbar-vertical .measure-toolbar-seperator{height:1px;width:18px;margin:5px 16px}.adsk-viewing-viewer .measure-selection-area{display:block;position:absolute;cursor:pointer;z-index:1;-webkit-tap-highlight-color:rgba(0,0,0,0)}.adsk-viewing-viewer .adsk-toolbar.adsk-toolbar-vertical .adsk-label-button{padding:0px;width:40px}.adsk-viewing-viewer .adsk-toolbar.adsk-toolbar-vertical .adsk-label-button>label{padding:10px 0px}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nc = undefined;","\nvar MeasureCommon = Autodesk.Viewing.MeasureCommon; //These come from main lmv bundle.\n\nexport class MeasurementsManager {\n    constructor(viewer) {\n        this.viewer = viewer;\n        this.currentMeasurement = null;\n        this.measurementsList = {};\n        this.measurementsCounter = 0;\n        this.restoredMeasurementData = [];\n    }\n\n    getCurrentMeasurement() {\n        return this.currentMeasurement;\n    }\n\n    getRestoredMeasurementData() {\n        return this.restoredMeasurementData.slice();\n    }\n\n    selectMeasurementById(id) {\n        var measurement = this.measurementsList[id];\n\n        if (measurement) {\n            this.changeCurrentMeasurement(measurement);\n            return this.currentMeasurement;\n        }\n\n        return false;\n    }\n\n    createMeasurement(measurementType, options) {\n        var measurement = new MeasureCommon.Measurement(measurementType, this.measurementsCounter++, options);\n        this.addMeasurement(measurement);\n        return measurement;\n    }\n\n    addMeasurement(measurement) {\n        // Measurements created by custom tools might not have an id yet, so we have to assign one first\n        if (this.measurementsList[measurement.id] || measurement.id === undefined) {\n            measurement.id = this.measurementsCounter++;\n        }\n        this.measurementsList[measurement.id] = measurement;\n        this.changeCurrentMeasurement(measurement);\n    }\n\n    // Renders measurements from data.\n    createMeasurementFromData(measurementData, measurementType, createIndicatorCb, preparePicksCb, measurement = null) {\n        // Convert optional values from DWF to local coordinate\n        let options = measurementData.options;\n        if (options) {\n            // Deep clone options\n            options = JSON.parse(JSON.stringify(options));\n\n            // Convert global world coordinats to LMV coordinates\n            const model =\n                Object.prototype.hasOwnProperty.call(options, 'modelId') && options.modelId\n                    ? this.viewer.impl.findModel(options.modelId)\n                    : this.viewer.model;\n            const globalOffset = model && model.getData().globalOffset;\n            if (globalOffset && (globalOffset.x !== 0 || globalOffset.y !== 0 || globalOffset.z !== 0)) {\n                const cvtPts = points => {\n                    if (points) {\n                        for (let i = 0; i < points.length; ++i) {\n                            // Tricky way to use Vector3 sub on plain objects\n                            THREE.Vector3.prototype.sub.call(points[i], globalOffset);\n                        }\n                    }\n                };\n                cvtPts(options.dimensionOffset);\n                cvtPts(options.dashedLeader);\n                cvtPts(options.arc);\n            }\n        }\n\n        if (measurement) {\n            this.addMeasurement(measurement);\n        } else {\n            measurement = this.createMeasurement(measurementType, options);\n        }\n        if (createIndicatorCb instanceof Function) {\n            createIndicatorCb(measurement);\n        }\n\n        this.initPicks(measurementData.picks, measurement);\n\n        if (preparePicksCb instanceof Function) {\n            preparePicksCb();\n        }\n\n        if (measurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA) {\n            measurement.closedArea = true;\n        } else if (measurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_CALLOUT) {\n            measurement.text = measurementData.text;\n        }\n\n        const preparePointData = (points) => {\n            const keys = Object.keys(points);\n            const data = [];\n            for (let i = 0; i < keys.length; i++) {\n                const key = keys[i];\n                const pointData = points[key];\n                data[key] = {\n                    intersection: pointData.intersection,\n                    circularArcRadius: pointData.circularArcRadius,\n                    circularArcCenter: pointData.circularArcCenter,\n                };\n            }\n            return data;\n        };\n\n        const indicator = measurement.indicator;\n\n        indicator.changeAllEndpointsEditableStyle(true);\n        indicator.enableSelectionAreas(true);\n        indicator.enableLabelsTouchEvents(true);\n\n        this.activatePicks(measurement);\n\n        measurement.computeResult(measurement.picks, this.viewer);\n\n        // This will render the measurements\n        const points = this.restoredMeasurementData[measurement.id];\n        indicator.renderFromPoints(preparePointData(points), true);\n\n        indicator.changeAllEndpointsEditableStyle(true);\n        indicator.enableSelectionAreas(true);\n        indicator.enableLabelsTouchEvents(true);\n\n        measurement.isRestored = true;\n    }\n\n    // Initializes picks from pick data\n    initPicks(pickData, measurement) {\n        if (!pickData) return;\n        const points = [];\n\n        for (let i = 0; i < pickData.length; i++) {\n            const pick = pickData[i];\n            if (!pick) continue;\n            const key = i + 1;\n\n            let pickPoint = new THREE.Vector3(pick.intersection.x, pick.intersection.y, pick.intersection.z);\n            const model =\n                Object.prototype.hasOwnProperty.call(pick, 'modelId') && pick.modelId\n                    ? this.viewer.impl.findModel(pick.modelId)\n                    : this.viewer.model;\n\n            if (model) {\n                const modelData = model.getData();\n                pickPoint =\n                    modelData && Object.prototype.hasOwnProperty.call(modelData, 'globalOffset')\n                        ? pickPoint.sub(modelData.globalOffset).clone()\n                        : pickPoint.clone();\n            }\n\n            points[key] = {\n                intersection: pickPoint,\n                viewportId: pick.viewportIndex2d,\n                hasTopology: pick.hasTopology,\n                modelId: pick.modelId,\n                fragId: pick.fragId,\n                fragPos: pick.fragPos,\n                snapNode: pick.snapNode,\n                circularArcRadius: pick.circularArcRadius,\n                circularArcCenter: pick.circularArcCenter\n            };\n            measurement.getPick(key);\n        }\n\n        this.restoredMeasurementData[measurement.id] = points;\n    }\n\n    // Stores information from the restored measurement pick data in the current measurement picks\n    activatePicks(measurement) {\n        if (!measurement.picks) return;\n        const keys = Object.keys(measurement.picks);\n\n        const id = measurement.id;\n        for (let i = 0; i < keys.length; i++) {\n            const key = keys[i];\n\n            const pick = measurement.picks[key];\n            const restoredMeasurements = this.getRestoredMeasurementData();\n            const pointInfo = restoredMeasurements[id][key];\n            let p = pointInfo.intersection.clone();\n\n            if (!pick.getGeometry() && pointInfo.intersection) {\n                pick.geomType = MeasureCommon.SnapType.SNAP_VERTEX;\n                pick.geomVertex = p;\n                pick.intersectPoint = p;\n                pick.modelId = pointInfo.modelId;\n                pick.fragId = pointInfo.fragId;\n                pick.fragPos = pointInfo.fragPos;\n                pick.snapNode = pointInfo.snapNode; // the dbid of the pick. This is used for isolation.\n                pick.circularArcCenter = pointInfo.circularArcCenter;\n                pick.circularArcRadius = pointInfo.circularArcRadius;\n\n                // Set the isRestored flag if all of the picks are valid.\n                pick.viewportIndex2d = pointInfo.viewportId;\n            }\n        }\n    }\n\n    changeCurrentMeasurement(measurement) {\n        this.currentMeasurement = measurement;\n        this.viewer.dispatchEvent({ type: MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, data: { type: measurement.measurementType, id: measurement.id } });\n    }\n\n    removeCurrentMeasurement() {\n        // Remove current measurement from the list\n        if (Object.keys(this.measurementsList).length > 0) {\n            delete this.measurementsList[this.currentMeasurement.id];\n        }\n        this.currentMeasurement = null;\n    }\n\n    destroy() {\n        this.reset();\n    }\n\n    reset() {\n        this.currentMeasurement = null;\n        this.measurementsList = {};\n        this.measurementsCounter = 0;\n    }\n}\n\n\n","\n    var av = Autodesk.Viewing;\n    var MeasureCommon = av.MeasureCommon;\n\n    /**\n     * Base class for an indicator.\n     */\n\n    export var Indicator = function(viewer, measurement, tool)\n    {\n        this.viewer = viewer;\n        this.setGlobalManager(viewer.globalManager);\n        this.measurement = measurement;\n        this.tool = tool;\n        this.snapper = tool.getSnapper();\n        this.materialExtensionLine = null;\n        this.materialExtensionFace = null;\n        this.extensionLines = [];\n        this.extensionFaces = [];\n        this.grayOutPlane = [];\n        this.materialPoint = null;\n        this.materialLine = null;\n        this.materialAngle = null;\n        this.materialAngleOutline = null;\n        this.materialGreyOutPlane = null;\n        this.materialFace = null;\n        this.angleArc = null;\n        this.angleOutline = [];\n        this.arcOutline = [];\n        this.arcTip = [];\n        this.showMeasureResult = false;\n        this.visibleLabels = [];\n        this.overlayName = 'measure-indicator-overlay-' + (measurement.id || '');\n        this.xAxis = this.viewer.autocam.getWorldRightVector();\n        this.yAxis = this.viewer.autocam.getWorldUpVector();\n        this.zAxis = this.viewer.autocam.getWorldFrontVector();\n    };\n\n\n\n    var proto = Indicator.prototype;\n    av.GlobalManagerMixin.call(proto);\n\n    proto.init = function() {\n        return false;\n    };\n\n    proto.updateDistance = function() {\n        return false;\n    };\n\n    proto.updateAngle = function() {\n        return false;\n    };\n\n    proto.clear = function() {\n        return false;\n    };\n\n    proto.updateLabelsPosition = function() {\n        return false;\n    };\n\n    proto.renderFromPoints = function(pointData, showMeasureResult) {\n        this.showMeasureResult = showMeasureResult;\n\n        this.clear();\n\n        for (var i = 1; i <= Object.keys(pointData).length; i++) {\n            const p = pointData[i].intersection;\n\n            if (!this.endpoints[i]) {\n                this.createEndpoint(i);\n            }\n\n            this.endpoints[i].position = new THREE.Vector3(p.x, p.y, p.z);\n            this.showClick(i);\n        }\n\n        this.renderRubberbandFromPoints(pointData);\n\n        this.updateLabelsPosition();\n    };\n\n    // Renders the measurement and the labels.\n    proto.render = function(picks, showMeasureResult) {\n\n        this.showMeasureResult = showMeasureResult;\n\n        this.clear();\n\n        for (var i = 1; i <= Object.keys(picks).length; i++) {\n            if (this.measurement.hasPick(i)) {\n                this.renderPick(i);\n            }\n        }\n\n        this.renderRubberband(picks);\n\n        this.updateLabelsPosition();\n    };\n\n    proto.changeEndpointOnEditStyle = function(endpointNumber, isEditing) {\n        return false;\n    };\n\n    proto.handleResize = function() {\n        return false;\n    };\n\n    proto.setNoTopology = function() {\n        return false;\n    };\n\n    proto.setFetchingTopology = function() {\n        return false;\n    };\n\n    proto.setTopologyAvailable = function() {\n        return false;\n    };\n\n    proto.clientToCanvasCoords = function(event) {\n        var rect = this.viewer.impl.getCanvasBoundingClientRect();\n        var res = {};\n        if(Object.prototype.hasOwnProperty.call(event, \"center\"))\n        {\n            event.canvasX = res.x = event.center.x - rect.left;\n            event.canvasY = res.y = event.center.y - rect.top;\n        }\n        else\n        {\n            event.canvasX = res.x = event.pointers[0].clientX - rect.left;\n            event.canvasY = res.y = event.pointers[0].clientY - rect.top;\n        }\n\n        return res;\n    };\n\n    proto.initLabelMobileGestures = function(label, pointNumber) {\n        var magnifyingGlass = this.viewer.toolController.getTool(\"magnifyingGlass\");\n\n        this.hammer = new av.Hammer.Manager(label, {\n                recognizers: [\n                    av.GestureRecognizers.drag,\n                    av.GestureRecognizers.singletap\n                ],\n                handlePointerEventMouse: false,\n                inputClass: av.Hammer.TouchInput\n            });\n\n        this.onSingleTapBinded = function(event) {\n                                    var pos = this.clientToCanvasCoords(event);\n                                    this.snapper.onMouseDown(pos);\n                                    this.tool.editEndpoint(event, pointNumber, this.measurement.id);\n                                }.bind(this);\n\n        this.onDragStartBinded = function(event) {\n                                    var pos = this.clientToCanvasCoords(event);\n                                    this.snapper.onMouseDown(pos);\n                                    this.tool.editEndpoint(event, pointNumber, this.measurement.id);\n                                    this.tool.editByDrag = true;\n\n                                    // Activate Magnifying Glass and tool by faking press event.\n                                    event.type = \"press\";\n                                    magnifyingGlass.handlePressHold(event);\n                                    this.tool.handlePressHold(event);\n                                    event.type = \"dragstart\";\n                                    magnifyingGlass.handleGesture(event);\n                                    this.tool.handleGesture(event);\n                                }.bind(this);\n\n        this.onDragMoveBinded = function(event){\n                                    var pos = this.clientToCanvasCoords(event);\n                                    this.snapper.onMouseDown(pos);\n\n                                    magnifyingGlass.handleGesture(event);\n                                    this.tool.handleGesture(event);\n                                }.bind(this);\n\n        this.onDragEndBinded = function(event){\n                                    var pos = this.clientToCanvasCoords(event);\n                                    this.snapper.onMouseDown(pos);\n\n                                    // Deactivate Magnifying Glass and tool by faking pressup event.\n                                    magnifyingGlass.handleGesture(event);\n                                    this.tool.handleGesture(event);\n                                    event.type = \"pressup\";\n                                    magnifyingGlass.handlePressHold(event);\n                                    this.tool.handlePressHold(event);\n\n                                    this.tool.handleButtonUp(event);\n                                }.bind(this);\n\n        this.hammer.on(\"singletap\", this.onSingleTapBinded);\n        this.hammer.on(\"dragstart\", this.onDragStartBinded);\n        this.hammer.on(\"dragmove\", this.onDragMoveBinded);\n        this.hammer.on(\"dragend\", this.onDragEndBinded);\n    };\n\n    proto.clearLabelMobileGestures = function() {\n        if (this.hammer) {\n            this.hammer.off(\"singletap\", this.onSingleTapBinded);\n            this.hammer.off(\"dragstart\", this.onDragStartBinded);\n            this.hammer.off(\"dragmove\", this.onDragMoveBinded);\n            this.hammer.off(\"dragend\", this.onDragEndBinded);\n            this.hammer = null;\n        }\n    };\n\n    proto.updateVisibleLabelsArray = function(label, isVisible) {\n        if (isVisible) {\n            if (!(this.visibleLabels.indexOf(label) > -1)) {\n                this.visibleLabels.push(label);\n            }\n        } else {\n            // remove from array\n            var index = this.visibleLabels.indexOf(label);\n            if (index > -1) {\n                this.visibleLabels.splice(index, 1);\n            }\n        }\n    };\n\n    proto.hideEndpoints = function() {\n        for (var name in this.endpoints) {\n            if (Object.prototype.hasOwnProperty.call(this.endpoints, name)) {\n                var endpoint = this.endpoints[name];\n                if (endpoint.label) {\n                    this.hideLabel(endpoint.label);\n                }\n            }\n        }\n    };\n\n    proto.showEndpoints = function() {\n        for (var name in this.endpoints) {\n            if (Object.prototype.hasOwnProperty.call(this.endpoints, name)) {\n                var endpoint = this.endpoints[name];\n                if (this.measurement.hasPick(name) && endpoint.label) {\n                    this.showLabel(endpoint.label);\n                }\n            }\n        }\n    };\n\n    proto.hideLabel = function(label) {\n        if (label) {\n            MeasureCommon.safeToggle(label, 'visible', false);\n            this.updateVisibleLabelsArray(label, false);\n        }\n    };\n\n    proto.showLabel = function(label) {\n        if (label) {\n            MeasureCommon.safeToggle(label, 'visible', true);\n            this.updateVisibleLabelsArray(label, true);\n        }\n    };\n\n    proto.changeEndpointOnEditStyle = function(endpointNumber, isEditing) {\n        if (this.endpoints[endpointNumber] && this.endpoints[endpointNumber].label) {\n            MeasureCommon.safeToggle(this.endpoints[endpointNumber].label, 'on-edit', isEditing);\n        }\n    };\n\n    proto.changeEndpointEditableStyle = function(endpointNumber, isEditable) {\n        if (this.endpoints[endpointNumber] && this.endpoints[endpointNumber].label) {\n            MeasureCommon.safeToggle(this.endpoints[endpointNumber].label, 'editable', isEditable);\n        }\n    };\n\n    proto.changeAllEndpointsEditableStyle = function(isEditable) {\n        for (var name in this.endpoints) {\n            if (Object.prototype.hasOwnProperty.call(this.endpoints, name)) {\n                this.changeEndpointEditableStyle(name, isEditable);\n            }\n        }\n    };\n\n    proto.changeAllEndpointsOnEditStyle = function(isEditing) {\n        for (var name in this.endpoints) {\n            if (Object.prototype.hasOwnProperty.call(this.endpoints, name)) {\n                this.changeEndpointOnEditStyle(name, isEditing);\n            }\n        }\n    };\n\n    proto.hideLabelsOutsideOfView = function() {\n        // For each label, check if it's inside the camera viewport.\n        if (this.viewer.model && !this.viewer.model.is2d()) {\n            this.visibleLabels.forEach(function(label) {\n\n                // Ignore labels if position is not computed yet. This may temporarily happen, because label positions are not\n                // always immediately assigned. (see MeasureToolIndicator.js)\n                // Note that we must not set them to invisible here, because this may cause a hen-and-egg-problem:\n                // Some code sections in MeasureToolIndicator.updatePositions() don't set the label position for invisible labels.\n                if (!label.point) {\n                    return;\n                }\n\n                var show = this.viewer.navigation.isPointVisible(label.point);\n\n                if ((label.classList.contains('visible') && !show) || (!label.classList.contains('visible') && show)) {\n                    label.classList.toggle('visible', show);\n                }\n\n            }.bind(this));\n        }\n    };\n\n    proto.showClick = function(pickNumber) {\n        if (this.tool.getActivePointIndex() !== pickNumber) {\n            this.showLabel(this.endpoints[pickNumber].label);\n        }\n    };\n\n    proto.hideClick = function(pickNumber) {\n\n        if (this.endpoints[pickNumber]) {\n            this.hideLabel(this.endpoints[pickNumber].label);\n        }\n    };\n\n    proto.renderPick = function(pickNumber) {\n        if (!this.endpoints[pickNumber]) {\n            this.createEndpoint(pickNumber);\n        }\n\n        this.renderEndpointGeometry(pickNumber);\n        this.showClick(pickNumber);\n    };\n\n    proto.renderEndpointGeometry = function(pickNumber) {\n        var geometry = MeasureCommon.getSnapResultPosition(this.measurement.getPick(pickNumber), this.viewer);\n\n        if (geometry !== null) {\n            this.endpoints[pickNumber].position = geometry.clone();\n        }\n    };\n\n    // This is a workaround to deal with the limitation on linewidth on Windows due to the ANGLE library\n    proto.drawEdgeAsCylinder = function(geom, material, linewidth, type, cylinderGeometry) {\n\n        // The array for all cylinders\n        var edge = [];\n        var cylinder;\n\n        const position = geom.getAttribute('position');\n        const v0 = new THREE.Vector3();\n        const v1 = new THREE.Vector3();\n\n        if (type == 1) { // LinePieces\n            for (let i = 0; i < position.count; i += 2) {\n                v0.fromBufferAttribute(position, i);\n                v1.fromBufferAttribute(position, i + 1);\n                cylinder = this.cylinderMesh(v0, v1, material, linewidth, cylinderGeometry);\n                this.setCylinderScale(cylinder, v0, v1);\n                edge.push(cylinder);\n            }\n        }\n        else { // LineStrip\n            for (let i = 0; i < position.count - 1; i++) {\n                v0.fromBufferAttribute(position, i);\n                v1.fromBufferAttribute(position, i + 1);\n                cylinder = this.cylinderMesh(v0, v1, material, linewidth, cylinderGeometry);\n                this.setCylinderScale(cylinder, v0, v1);\n                edge.push(cylinder);\n            }\n        }\n\n\n        return edge;\n    };\n\n    proto.drawDashedLine = function(p1, p2, dashSize, gapSize, material, width, overlayName) {\n\n        const geometry = new THREE.BufferGeometry();\n        var line = new THREE.Vector3().subVectors(p2, p1);\n        var lineLength = line.length() - gapSize;\n        var lineDirection = line.normalize();\n\n        var pos = p1.clone();\n        var currLength = 0;\n\n        const points = [];\n        while (currLength < lineLength) {\n            var isPointVisible = this.viewer.navigation.isPointVisible(pos);\n\n            if (isPointVisible) {\n                points.push(pos.clone());\n            }\n\n            pos.addVectors(pos, lineDirection.clone().multiplyScalar(dashSize));\n\n            if (isPointVisible) {\n                points.push(pos.clone());\n            }\n\n            pos.addVectors(pos, lineDirection.clone().multiplyScalar(gapSize));\n\n            currLength += dashSize + gapSize;\n        }\n        geometry.setFromPoints(points);\n\n        line = this.drawEdgeAsCylinder(geometry, material, width, 1, this.getNewCylinderGeometry());\n        this.viewer.impl.addMultipleOverlays(overlayName, line);\n\n        return line;\n    };\n\n    // This is a workaround to deal with the limitation on linewidth on Windows due to the ANGLE library\n    proto.drawLineAsCylinder = function(geom, material, linewidth, overlayName) {\n\n        var line;\n\n        const position = geom.getAttribute('position');\n        if (position.count == 2) {\n            const p0 = new THREE.Vector3().fromBufferAttribute(position, 0);\n            const p1 = new THREE.Vector3().fromBufferAttribute(position, 1);\n            line = this.cylinderMesh(p0, p1, material, linewidth, this.getNewCylinderGeometry());\n            this.setCylinderScale(line, p0, p1);\n            this.viewer.impl.addOverlay(overlayName, line);\n        }\n\n        return line;\n    };\n\n    proto.getNewCylinderGeometry = function() {\n        return new THREE.CylinderGeometry(0.1, 0.1, 1, 8, 1, true);\n    };\n\n\n    proto.cylinderMesh = function(pointX, pointY, material, linewidth, cylinderGeometry) {\n\n        var direction = new THREE.Vector3().subVectors(pointY, pointX);\n        var orientation = new THREE.Matrix4();\n        orientation.lookAt(pointX, pointY, new THREE.Object3D().up);\n        orientation.multiply(new THREE.Matrix4().set(linewidth, 0, 0, 0,\n            0, 0, linewidth, 0,\n            0, -direction.length(), 0, 0,\n            0, 0, 0, 1));\n\n        var edge = new THREE.Mesh(cylinderGeometry, material);\n        edge.applyMatrix4(orientation);\n        edge.lmv_line_width = linewidth;\n        edge.position.x = (pointY.x + pointX.x) / 2;\n        edge.position.y = (pointY.y + pointX.y) / 2;\n        edge.position.z = (pointY.z + pointX.z) / 2;\n\n        return edge;\n    };\n\n    // Set scale for cylinder\n    proto.setCylinderScale = function(cylinderMesh, p1, p2) {\n        var scale;\n\n        if (p1 && p2) {\n            var point = MeasureCommon.nearestPointInPointToSegment(this.viewer.navigation.getPosition(), p1, p2);\n            scale = this.setScale(point);\n        } else {\n            scale = this.setScale(cylinderMesh.position);\n        }\n\n        if (Object.prototype.hasOwnProperty.call(cylinderMesh, \"lmv_line_width\"))\n            scale *= cylinderMesh.lmv_line_width;\n        cylinderMesh.scale.x = scale;\n        cylinderMesh.scale.z = scale;\n    };\n\n\n    // Set scale for vertex and extension dashed line\n    proto.setScale = function(point) {\n\n        var pixelSize = 5;\n\n        var navapi = this.viewer.navigation;\n        var camera = navapi.getCamera();\n        var position = navapi.getPosition();\n\n        var p = point.clone();\n\n        var distance = camera.isPerspective ? p.sub(position).length()\n            : navapi.getEyeVector().length();\n\n        var fov = navapi.getVerticalFov();\n        var worldHeight = 2.0 * distance * Math.tan(THREE.Math.degToRad(fov * 0.5));\n\n        var viewport = navapi.getScreenViewport();\n        var scale = pixelSize * worldHeight / viewport.height;\n\n        return scale;\n    };\n\n    proto.alignLabelWithLine = function(label, p1, p2, offset, viewer){\n        var camUpVector = viewer.navigation.getCameraUpVector();\n        var worldUpVec = new THREE.Vector3(0,1,0);\n        var cameraAngle = worldUpVec.angleTo(camUpVector) * 180 / Math.PI;\n\n        cameraAngle = camUpVector.x >= 0 ? cameraAngle : -cameraAngle;\n\n        var angle = null;\n\n        var deltaX = p1.x - p2.x;\n        var deltaY = p1.y - p2.y;\n\n        if (p1.x < p2.x) {\n            angle =  Math.atan2(-deltaY , -deltaX) * 180 / Math.PI;\n        }\n        else {\n            angle =  Math.atan2(deltaY , deltaX) * 180 / Math.PI;\n        }\n\n        angle = -(angle + cameraAngle);\n\n        if (Math.abs(angle) > 90){\n            angle = angle + 180;\n        }\n\n        label.style.transform = 'rotate('+ angle +'deg) translate(0px, ' + offset + 'px)';\n    };\n\n    proto.destroy = function() {\n        this.materialPoint = null;\n        this.materialFace = null;\n        this.materialLine = null;\n        this.materialAngle = null;\n\n        if (av.isTouchDevice()) {\n            this.clearLabelMobileGestures();\n        }\n\n        for (var name in this.endpoints) {\n            if (Object.prototype.hasOwnProperty.call(this.endpoints, name)) {\n                var endPoint = this.endpoints[name];\n\n                if (endPoint.label) {\n                    endPoint.label.removeEventListener(av.isSafari() ? 'mousedown' : 'pointerdown', this.onMouseClickBinded);\n                    endPoint.label.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n                    endPoint.label.parentNode.removeChild(endPoint.label);\n                    endPoint.label = null;\n                }\n            }\n        }\n\n        this.visibleLabels = [];\n    };\n\n    proto.renderRubberbandFromPoints = function(pointData) {\n        const keys = Object.keys(pointData);\n        const intersectionPoints = [];\n        for (let i = 0; i < keys.length; i++) {\n            intersectionPoints.push(pointData[keys[i]].intersection);\n        }\n        switch (this.measurement.measurementType) {\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE:\n                var start = pointData[1].intersection;\n                var end = pointData[2].intersection;\n                if (start && end) {\n                    this.renderDistanceMeasurementFromPoints(start, end);\n                }\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE:\n                this.renderAngleMeasurementFromPoints(intersectionPoints);\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_AREA:\n                this.renderAreaMeasurementFromPoints(intersectionPoints);\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_ARC: {\n                const p1 = pointData[1].intersection;\n                const p2 = pointData[2].intersection;\n                const center = pointData[1].circularArcCenter;\n                const radius = pointData[1].circularArcRadius;\n                // Render the arc measurement from the intersection points, center and radius.\n                this.renderArcMeasurementFromPoints(p1, p2, center, radius);\n                break;\n            }\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_SPOT:\n                this.renderSpotMeasurementFromPoints(intersectionPoints);\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_CALLOUT:\n                this.renderCalloutMeasurementFromPoints(intersectionPoints);\n                break;\n            }\n\n    };\n\n    proto.renderRubberband = function(picks) {\n\n        switch (this.measurement.measurementType) {\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE:\n                var previewsPick = picks[1];\n                var activePick = picks[2];\n                var start = MeasureCommon.getSnapResultPosition(previewsPick, this.viewer);\n                var end = MeasureCommon.getSnapResultPosition(activePick, this.viewer);\n\n                if (start && end) {\n                    this.renderDistanceMeasurement(start, end);\n                }\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE:\n                this.renderAngleMeasurement(picks);\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_AREA:\n                this.renderAreaMeasurement(picks);\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_ARC: {\n                let previewsPick = picks[1];\n                let activePick = picks[2];\n\n                if (previewsPick && activePick) {\n                    this.renderArcMeasurement(previewsPick, activePick);\n                }\n                break;\n            }\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_SPOT: {\n                const point = MeasureCommon.getSnapResultPosition(picks[1], this.viewer);\n                if (point) {\n                    this.renderSpotMeasurement(point);\n                }\n                break;\n            }\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_CALLOUT:\n                this.renderCalloutMeasurement(picks);\n                break;\n            }\n    };\n\n    proto.initMouseEvent = function(label, pointNumber) {\n\n        var isSafari = av.isSafari();\n        this.onMouseClickBinded = function(event) {\n            if(isSafari || event.pointerType === 'mouse'){\n                event.canvasX = event.clientX;\n                event.canvasY = event.clientY;\n                this.tool.editEndpoint(event, pointNumber, this.measurement.id);\n            }\n        }.bind(this);\n        label.addEventListener(isSafari ? 'mousedown' : 'pointerdown', this.onMouseClickBinded);\n    };\n","    // Centroid of a polygon is the average of its points.\n    export function getCentroidOfPolygon(points) {\n        var centroid = new THREE.Vector3();\n        var n = points.length;\n\n        for (var i = 0; i < n; i++) {\n            centroid.add(points[i]);\n        }\n\n        centroid.multiplyScalar(1 / n);\n        return centroid;\n    }\n\n    // Algorithm based on https://github.com/mapbox/polylabel\n    export function getPolygonVisualCenter(polygon) {\n        function compareMax(a, b) {\n            return b.max - a.max;\n        }\n\n        function Cell(x, y, h, polygon) {\n            this.x = x; // cell center x\n            this.y = y; // cell center y\n            this.h = h; // half the cell size\n            this.d = pointToPolygonDist(x, y, polygon); // distance from cell center to polygon\n            this.max = this.d + this.h * Math.SQRT2; // max distance to polygon within a cell\n        }\n\n        // signed distance from point to polygon outline (negative if point is outside)\n        function pointToPolygonDist(x, y, polygon) {\n            var inside = false;\n            var minDistSq = Infinity;\n\n            for (var k = 0; k < polygon.length; k++) {\n                var ring = polygon[k];\n\n                for (var i = 0, len = ring.length, j = len - 1; i < len; j = i++) {\n                    var a = ring[i];\n                    var b = ring[j];\n\n                    if ((a.y > y !== b.y > y) &&\n                        (x < (b.x - a.x) * (y - a.y) / (b.y - a.y) + a.x)) inside = !inside;\n\n                    minDistSq = Math.min(minDistSq, getSegDistSq(x, y, a, b));\n                }\n            }\n\n            return (inside ? 1 : -1) * Math.sqrt(minDistSq);\n        }\n\n        // get polygon centroid\n        function getCentroidCell(polygon) {\n            var area = 0;\n            var x = 0;\n            var y = 0;\n            var points = polygon[0];\n\n            for (var i = 0, len = points.length, j = len - 1; i < len; j = i++) {\n                var a = points[i];\n                var b = points[j];\n                var f = a.x * b.y - b.x * a.y;\n                x += (a.x + b.x) * f;\n                y += (a.y + b.y) * f;\n                area += f * 3;\n            }\n            if (area === 0) return new Cell(points[0].x, points[0].y, 0, polygon);\n            return new Cell(x / area, y / area, 0, polygon);\n        }\n\n        // get squared distance from a point to a segment\n        function getSegDistSq(px, py, a, b) {\n\n            var x = a.x;\n            var y = a.y;\n            var dx = b.x - x;\n            var dy = b.y - y;\n\n            if (dx !== 0 || dy !== 0) {\n\n                var t = ((px - x) * dx + (py - y) * dy) / (dx * dx + dy * dy);\n\n                if (t > 1) {\n                    x = b.x;\n                    y = b.y;\n\n                } else if (t > 0) {\n                    x += dx * t;\n                    y += dy * t;\n                }\n            }\n\n            dx = px - x;\n            dy = py - y;\n\n            return dx * dx + dy * dy;\n        }\n\n        function TinyQueue(data, compare) {\n\n            function defaultCompare(a, b) {\n                return a < b ? -1 : a > b ? 1 : 0;\n            }\n\n            if (!(this instanceof TinyQueue)) return new TinyQueue(data, compare);\n\n            this.data = data || [];\n            this.length = this.data.length;\n            this.compare = compare || defaultCompare;\n\n            if (this.length > 0) {\n                for (var i = (this.length >> 1); i >= 0; i--) this._down(i);\n            }\n        }\n\n        TinyQueue.prototype = {\n\n            push: function (item) {\n                this.data.push(item);\n                this.length++;\n                this._up(this.length - 1);\n            },\n\n            pop: function () {\n                if (this.length === 0) return undefined;\n\n                var top = this.data[0];\n                this.length--;\n\n                if (this.length > 0) {\n                    this.data[0] = this.data[this.length];\n                    this._down(0);\n                }\n                this.data.pop();\n\n                return top;\n            },\n\n            peek: function () {\n                return this.data[0];\n            },\n\n            _up: function (pos) {\n                var data = this.data;\n                var compare = this.compare;\n                var item = data[pos];\n\n                while (pos > 0) {\n                    var parent = (pos - 1) >> 1;\n                    var current = data[parent];\n                    if (compare(item, current) >= 0) break;\n                    data[pos] = current;\n                    pos = parent;\n                }\n\n                data[pos] = item;\n            },\n\n            _down: function (pos) {\n                var data = this.data;\n                var compare = this.compare;\n                var halfLength = this.length >> 1;\n                var item = data[pos];\n\n                while (pos < halfLength) {\n                    var left = (pos << 1) + 1;\n                    var right = left + 1;\n                    var best = data[left];\n\n                    if (right < this.length && compare(data[right], best) < 0) {\n                        left = right;\n                        best = data[right];\n                    }\n                    if (compare(best, item) >= 0) break;\n\n                    data[pos] = best;\n                    pos = left;\n                }\n\n                data[pos] = item;\n            }\n        };\n\n        if (polygon.length === 3) {\n            return getCentroidOfPolygon(polygon);\n        }\n\n        var precision = 0.01;\n        polygon = [polygon];\n\n        // find the bounding box of the outer ring\n        var minX, minY, maxX, maxY;\n        for (var i = 0; i < polygon[0].length; i++) {\n            var p = polygon[0][i];\n            if (!i || p.x < minX) minX = p.x;\n            if (!i || p.y < minY) minY = p.y;\n            if (!i || p.x > maxX) maxX = p.x;\n            if (!i || p.y > maxY) maxY = p.y;\n        }\n\n        var width = maxX - minX;\n        var height = maxY - minY;\n        var cellSize = Math.min(width, height);\n        var h = cellSize / 2;\n\n        // a priority queue of cells in order of their \"potential\" (max distance to polygon)\n        var cellQueue = new TinyQueue(null, compareMax);\n\n        if (cellSize === 0) return [minX, minY];\n\n        // cover polygon with initial cells\n        for (var x = minX; x < maxX; x += cellSize) {\n            for (var y = minY; y < maxY; y += cellSize) {\n                cellQueue.push(new Cell(x + h, y + h, h, polygon));\n            }\n        }\n\n        // take centroid as the first best guess\n        var bestCell = getCentroidCell(polygon);\n\n        // special case for rectangular polygons\n        var bboxCell = new Cell(minX + width / 2, minY + height / 2, 0, polygon);\n        if (bboxCell.d > bestCell.d) bestCell = bboxCell;\n\n        while (cellQueue.length) {\n            // pick the most promising cell from the queue\n            var cell = cellQueue.pop();\n\n            // update the best cell if we found a better one\n            if (cell.d > bestCell.d) {\n                bestCell = cell;\n            }\n\n            // do not drill down further if there's no chance of a better solution\n            if (cell.max - bestCell.d <= precision) continue;\n\n            // split the cell into four cells\n            h = cell.h / 2;\n            cellQueue.push(new Cell(cell.x - h, cell.y - h, h, polygon));\n            cellQueue.push(new Cell(cell.x + h, cell.y - h, h, polygon));\n            cellQueue.push(new Cell(cell.x - h, cell.y + h, h, polygon));\n            cellQueue.push(new Cell(cell.x + h, cell.y + h, h, polygon));\n        }\n\n        return {x:bestCell.x, y:bestCell.y};\n    }\n","import { Indicator } from './Indicator';\nimport { getPolygonVisualCenter } from \"./PolygonCentroid\";\n\n    var av = Autodesk.Viewing;\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    /** Color values should match Measure.css **/\n    const DEFAULT_LINE_COLOR = '009bea';\n    const X_AXIS_COLOR = \"F12C2C\";\n    const Y_AXIS_COLOR = \"0BB80B\";\n    const Z_AXIS_COLOR = \"2C2CF1\";\n    /*******************************************/\n\n    const tmpColor = new THREE.Color();\n    function numToColor(num) {\n        return tmpColor.set(num >>> 8).getHexString();\n    }\n\n    // /** @constructor */\n    export function MeasureToolIndicator( viewer, measurement, measureTool )\n    {\n        Indicator.call(this, viewer, measurement, measureTool);\n        this.measureTool = measureTool;\n        this.endpoints = [];\n        this.lines = {\n            xyz: {axis: false, material: this._createLineMaterial(DEFAULT_LINE_COLOR), className: 'adsk-icon-axis-delta' + '-xyz measure-label-axis-delta' + ' measure-label-axis-xyz'},\n            x:   {axis: true,  material: this._createLineMaterial(X_AXIS_COLOR), className: 'adsk-icon-axis-delta' + '-x measure-label-axis-delta' + ' measure-label-axis-x', iconText: 'X'},\n            y:   {axis: true,  material: this._createLineMaterial(Y_AXIS_COLOR), className: 'adsk-icon-axis-delta' + '-y measure-label-axis-delta' + ' measure-label-axis-y', iconText: 'Y'},\n            z:   {axis: true,  material: this._createLineMaterial(Z_AXIS_COLOR), className: 'adsk-icon-axis-delta' + '-z measure-label-axis-delta' + ' measure-label-axis-z', iconText: 'Z'}\n        };\n        this.applyLineColor(this.lines.xyz.material);\n        this.segments = [];\n        this.dashedLines = [];\n        this.simple = false;\n        this.angleLabel = {};\n        this.areaLabel = {};\n        this.arcLabel = {};\n        this.spotLabel = {};\n        this.calloutLabel = {};\n        this.labels = [];\n        this.isLeaflet = false;\n        this.topologyStatus = TOPOLOGY_NOT_AVAILABLE;\n        this.tmpVector = new THREE.Vector3();\n        this.surfaceColor = new THREE.MeshBasicMaterial({\n            color: parseInt(DEFAULT_LINE_COLOR, 16),\n            opacity: 0.15,\n            transparent: true,\n            depthTest: false,\n            depthWrite: false,\n            side: THREE.DoubleSide\n        });\n        this.applyLineColor(this.surfaceColor);\n        this.topLabel = null;\n        this.allowShortDistances = false;\n        this.segmentWidth = 4;\n    }\n\n    MeasureToolIndicator.prototype = Object.create(Indicator.prototype);\n    MeasureToolIndicator.prototype.constructor = MeasureToolIndicator;\n    var proto = MeasureToolIndicator.prototype;\n\n    var _labelsSpace = 4;\n    var _angleLabelOffset = 5;\n    var TOPOLOGY_NOT_AVAILABLE = 0;\n    var TOPOLOGY_FETCHING = 1;\n    var TOPOLOGY_AVAILABLE = 2;\n    var _selectorAreaSize = 15;\n\n    var _tipHeight = 2;\n    var _tipWidth = 3;\n\n    var _dashedSegmentWidth = 3;\n    var _axisLineWidth = 2;\n    var _dashSize = 2;\n    var _gapSize = 1;\n\n    var _angleArcWidth = 2;\n\n    function isVisible(label) {\n        return label.classList.contains('visible');\n    }\n\n    proto.init = function() {\n        this.isLeaflet = this.viewer.model.isLeaflet();\n        // Create HTML Labels\n        var currLabel;\n\n        this.onSelectionAreaClickedBinded = this.onSelectionAreaClicked.bind(this);\n        this.onMeasurementHoveredBinded = this.onMeasurementHovered.bind(this);\n\n        // Line\n        if (!this.lines.xyz.label) {\n            currLabel = this.lines.xyz.label = this.createMeasurementLabel(); // Measurement result\n            this._addEventListener(currLabel);\n            this.viewer.container.appendChild(currLabel);\n        }\n        switch (this.topologyStatus) {\n            case TOPOLOGY_FETCHING:\n                this.setFetchingTopology();\n                break;\n            case TOPOLOGY_AVAILABLE:\n                this.setTopologyAvailable();\n                break;\n            case TOPOLOGY_NOT_AVAILABLE:\n                this.setNoTopology();\n                break;\n        }\n\n        this.showMeasureResult = false;\n\n        this.onCameraChangeBinded = this.onCameraChange.bind(this);\n        this.viewer.addEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n\n        this.handleButtonUpBinded = this.measureTool.handleButtonUp.bind(this.measureTool);\n        this.addWindowEventListener('mouseup', this.handleButtonUpBinded);\n    };\n\n    proto._addEventListener = function(element) {\n        if (!element) {\n            return;\n        }\n\n        element.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n        element.addEventListener('click', this.onSelectionAreaClickedBinded);\n        element.addEventListener('mouseover', this.onMeasurementHoveredBinded);\n    };\n\n    proto._removeEventListener = function(element) {\n        if (!element) {\n            return;\n        }\n\n        element.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n        element.removeEventListener('click', this.onSelectionAreaClickedBinded);\n        element.removeEventListener('mouseover', this.onMeasurementHoveredBinded);\n    };\n\n    proto._hexToCorrectedColor = function (color) {\n        tmpColor.set(parseInt(color, 16));\n\n        // In case of a 3D viewer, manually apply gamma correction to the materials.\n        // It is needed because we are using THREE.js materials that don't get LMV's shaders.\n        // So GAMMA_INPUT & GAMMA_OUTPUT are missing in their shaders.\n        if (!this.viewer.impl.is2d) {\n          tmpColor.multiply(tmpColor);\n        }\n\n        return tmpColor;\n    };\n\n    proto._createLineMaterial = function(color) {\n        const correctedColor = this._hexToCorrectedColor(color);\n\n        const material = new THREE.MeshBasicMaterial({\n            color: correctedColor.getHex(),\n            depthTest: false,\n            depthWrite: false,\n            side: THREE.DoubleSide,\n        });\n\n        return material;\n    };\n\n    proto.createEndpoint = function(index) {\n        this.endpoints[index] = {};\n\n        // Don't render endpoints that are under the labels.\n        if (index === 2 &&\n            (this.measurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_SPOT ||\n                this.measurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_CALLOUT)) {\n            return;\n        }\n\n        var currLabel = this.endpoints[index].label = this.createSnapResultLabel(index);\n        this.viewer.container.appendChild(currLabel);\n    };\n\n    proto.applyLineColor = function(material) {\n        if (!material)\n            return;\n\n        const hasColor = this.measurement.options && this.measurement.options.format &&\n            this.measurement.options.format.TEXTCOLOR && this.measurement.options.format.TEXTCOLOR.Enabled === 'true' &&\n            this.measurement.options.format.FILLCOLOR && this.measurement.options.format.FILLCOLOR.Enabled === 'true' &&\n            this.measurement.options.format.LINECOLOR && this.measurement.options.format.LINECOLOR.Enabled === 'true';\n        const lineColor = hasColor ? numToColor(this.measurement.options.format.LINECOLOR.UIntValue) : DEFAULT_LINE_COLOR;\n        const correctedColor = this._hexToCorrectedColor(lineColor);\n\n        material.color.set(correctedColor);\n    };\n\n    proto.applyLabelColors = function(label) {\n        if (!label)\n            return;\n\n        const hasColor = this.measurement.options && this.measurement.options.format &&\n            this.measurement.options.format.TEXTCOLOR && this.measurement.options.format.TEXTCOLOR.Enabled === 'true' &&\n            this.measurement.options.format.FILLCOLOR && this.measurement.options.format.FILLCOLOR.Enabled === 'true' &&\n            this.measurement.options.format.LINECOLOR && this.measurement.options.format.LINECOLOR.Enabled === 'true';\n        const color = hasColor ? `#${numToColor(this.measurement.options.format.TEXTCOLOR.UIntValue)}` : `#${DEFAULT_LINE_COLOR}`;\n        const bg = hasColor ? `#${numToColor(this.measurement.options.format.FILLCOLOR.UIntValue)}` : '#f4f4f4';\n        label.style.color = color;\n        label.style.backgroundColor = bg;\n    };\n\n    proto.updateLabelsPosition = function() {\n\n        var point,\n            xy,\n            label,\n            key;\n\n        const placeLabel = (xOff, yOff) => {\n            xy = MeasureCommon.project(point, this.viewer);\n\n            label.style.top  = (xy.y - yOff) + 'px';\n            label.style.left = (xy.x - xOff) + 'px';\n            label.point = point;\n            this.applyLabelColors(label);\n            this.labels.push(label);\n        };\n\n        for (key in this.endpoints) {\n            if (Object.prototype.hasOwnProperty.call(this.endpoints, key)) {\n                    label = this.endpoints[key].label;\n                    point = this.endpoints[key].position;\n\n                if (label && point && isVisible(label)) {\n                    xy = MeasureCommon.project(point, this.viewer);\n\n                    placeLabel(label.getBoundingClientRect().width / 2,\n                        label.getBoundingClientRect().height / 2);\n                }\n            }\n        }\n\n        for (var name in this.lines) {\n            if (Object.prototype.hasOwnProperty.call(this.lines, name)) {\n                var item = this.lines[name];\n                    label = item.label;\n\n                if (label && item.p1 && item.p2 && isVisible(label)) {\n\n                    item.line.visible = item.visible;\n\n                    point = { x: (item.p1.x + item.p2.x)/2, y: (item.p1.y + item.p2.y)/2, z: (item.p1.z + item.p2.z)/2 };\n\n                    xy = MeasureCommon.project(point, this.viewer);\n                    label.style.top  = xy.y - Math.floor(label.clientHeight / 2) + 'px';\n                    label.style.left = xy.x - Math.floor(label.clientWidth / 2) + 'px';\n\n                    if (this.viewer.model && this.viewer.model.is2d()) {\n                        var offset = item === this.lines.xyz ? 0 : label.clientHeight;\n\n                        var p1Projected = MeasureCommon.project(item.p1, this.viewer);\n                        var p2Projected = MeasureCommon.project(item.p2, this.viewer);\n\n                        if (label.clientWidth >= p1Projected.distanceTo(p2Projected) - this.endpoints[1].label.clientWidth) {\n                            if (item === this.lines.xyz) {\n                                offset = label.clientHeight;\n                            } else {\n                                // Hide all axis labels and quit the loop\n\n                                this.lines.x.line.visible = false;\n                                this.lines.y.line.visible = false;\n\n                                this.viewer.impl.invalidate(false, false, /*overlayDirty=*/true);\n\n                                for (name in this.lines) {\n                                    if (Object.prototype.hasOwnProperty.call(this.lines, name)) {\n                                        if (this.lines[name] !== this.lines.xyz) {\n                                            var currLabel = this.lines[name].label;\n                                            if (currLabel) {\n                                                currLabel.style.opacity = 0;\n                                            }\n                                        }\n                                    }\n                                }\n\n                                break;\n\n                            }\n                        }\n\n                        if (item !== this.lines.xyz) {\n                            var xyzDirection = new THREE.Vector3();\n                            var itemDirection = new THREE.Vector3();\n                            xyzDirection.subVectors(this.lines.xyz.p1, this.lines.xyz.p2).normalize();\n                            itemDirection.subVectors(item.p1, item.p2).normalize();\n                            var normal = xyzDirection.cross(this.viewer.navigation.getEyeVector()).normalize();\n                            var angle = normal.dot(itemDirection);\n\n                            if (angle < 0) {\n                                offset = -offset;\n                            }\n                        }\n\n                        this.alignLabelWithLine(label, item.p1, item.p2, offset, this.viewer);\n                    }\n\n                    label.style.opacity = 1;\n                    label.point = point;\n                    this.applyLabelColors(label);\n                    this.labels.push(label);\n                }\n            }\n        }\n\n        if (this.angleLabel) {\n\n            label = this.angleLabel.label;\n\n            if (label && this.angleLabel.p1 && this.angleLabel.p2 && isVisible(label)) {\n                point = { x: (this.angleLabel.p1.x + this.angleLabel.p2.x)/2, y: (this.angleLabel.p1.y + this.angleLabel.p2.y)/2, z: (this.angleLabel.p1.z + this.angleLabel.p2.z)/2 };\n                xy = MeasureCommon.project(point, this.viewer, _angleLabelOffset);\n                placeLabel(Math.floor(label.clientWidth / 2), Math.floor(label.clientHeight / 2));\n            }\n        }\n\n        if(this.arcLabel) {\n            label = this.arcLabel.label;\n            offset = 0;\n\n            if (label && this.arcLabel.p1 && this.arcLabel.p2 && isVisible(label)) {\n                point = { x: (this.arcLabel.p1.x + this.arcLabel.p2.x)/2, y: (this.arcLabel.p1.y + this.arcLabel.p2.y)/2, z: (this.arcLabel.p1.z + this.arcLabel.p2.z)/2 };\n                xy = MeasureCommon.project(point, this.viewer, label.clientHeight);\n                placeLabel(Math.floor(label.clientWidth / 2), Math.floor(label.clientHeight / 2));\n\n                // Rotate the label\n                let p1Projected = MeasureCommon.project(this.arcLabel.point1Relative, this.viewer);\n                let p2Projected = MeasureCommon.project(this.arcLabel.point2Relative, this.viewer);\n\n                if (label.clientWidth >= p1Projected.distanceTo(p2Projected) - this.endpoints[1].label.clientWidth) {\n\n                    // you need to project midpoint and the circle center here because the offset direction logic occurs in screen coordinates\n                    var midPointProjected = MeasureCommon.project(this.arcLabel.midPointRelative, this.viewer);\n                    var centerProjected = MeasureCommon.project(new THREE.Vector3(), this.viewer);\n\n                    // Check if the midpoint position is above or below the center of the circle\n                    // Based on this, offset the label up or down to ensure it is always outside the arc\n                    if(midPointProjected.y > centerProjected.y) {\n                        offset = label.clientHeight; // offset down\n                    } else {\n                        offset = -label.clientHeight; // offset up\n                    }\n\n                }\n                this.alignLabelWithLine(label, this.arcLabel.point1Relative, this.arcLabel.point2Relative, offset, this.viewer);\n            }\n        }\n\n        if (this.spotLabel) {\n\n            label = this.spotLabel.label;\n\n            if (label && this.spotLabel.p && isVisible(label)) {\n                xy = MeasureCommon.project(this.spotLabel.p, this.viewer);\n                // spotMesh radius of 1 is getting scaled to pixelSize 5\n                placeLabel(5, Math.floor(label.clientHeight) + 10);\n            }\n        }\n\n        if (this.calloutLabel) {\n\n            label = this.calloutLabel.label;\n\n            if (label && this.calloutLabel.p && isVisible(label)) {\n                xy = MeasureCommon.project(this.calloutLabel.p, this.viewer);\n                placeLabel(Math.floor(label.clientWidth / 2), Math.floor(label.clientHeight / 2));\n            }\n        }\n\n        if (this.areaLabel) {\n\n            label = this.areaLabel.label;\n\n            if (label && this.areaLabel.p1 && this.areaLabel.p2 && isVisible(label)) {\n                point = { x: (this.areaLabel.p1.x + this.areaLabel.p2.x)/2, y: (this.areaLabel.p1.y + this.areaLabel.p2.y)/2, z: (this.areaLabel.p1.z + this.areaLabel.p2.z)/2 };\n                xy = MeasureCommon.project(point, this.viewer);\n                placeLabel(Math.floor(label.clientWidth / 2), Math.floor(label.clientHeight / 2));\n            }\n        }\n\n        if (this.viewer.model && !this.viewer.model.is2d()) {\n\n            var needToStackLabels = false;\n            this.labelsStacked = false;\n            var currentLabel, i;\n\n            // Backup lable's positions in case of the need of stacking them later\n            var backupPositions = [];\n            for (i = 0; i < this.labels.length; i++) {\n                backupPositions.push({left: this.labels[i].style.left, top:this.labels[i].style.top});\n            }\n\n            // Detect and move in case of overlapping.\n            for (i = 0; i < this.labels.length && !needToStackLabels; i++) {\n                currentLabel = this.labels[i];\n                needToStackLabels = this.labelsOverlapDetection(currentLabel, this.labels);\n            }\n\n            // If we found out that the labels need to be stacked, restore their positions from the backup first, and then start again.\n            if (needToStackLabels) {\n\n                for (i = 0; i < this.labels.length; i++) {\n                    this.labels[i].style.left = backupPositions[i].left;\n                    this.labels[i].style.top = backupPositions[i].top;\n                }\n\n                this.stackLabels(this.labels);\n\n                for (i = 0; i < this.labels.length; i++) {\n                    currentLabel = this.labels[i];\n                    this.labelsOverlapDetection(currentLabel, this.labels);\n                }\n            }\n        }\n\n        this.labels = [];\n\n    };\n\n    function isLeftIntersect(current, other) {\n        return current.right >= other.left && current.right <= other.right;\n    }\n\n    function isRightIntersect(current, other) {\n        return current.left >= other.left && current.left <= other.right;\n    }\n\n    function isMiddleIntersect(current, other) {\n        return current.left <= other.left && current.right >= other.right;\n    }\n\n    function isVerticalIntersect(current, other) {\n        return current.top < other.bottom && current.bottom > other.top;\n    }\n\n    function moveLeft(currentLabel, currentRect, otherRect) {\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) - (currentRect.right - otherRect.left) + 'px';\n    }\n\n    function moveRight(currentLabel, currentRect, otherRect) {\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) + (otherRect.right - currentRect.left) + 'px';\n    }\n\n    function moveDown(currentLabel, currentRect, otherRect) {\n        currentLabel.style.top = parseInt(currentLabel.style.top, 10) + (otherRect.bottom - currentRect.top) + 'px';\n    }\n\n\n    proto.labelsOverlapDetection = function(staticLabel, labelsList) {\n\n        var needToStackLabels = false;\n\n        for (var i = 0; i < labelsList.length ; i++) {\n\n            var dynamicLabel = labelsList[i];\n            var moved = false;\n\n            if (staticLabel !== dynamicLabel) {\n                var staticRect = staticLabel.getBoundingClientRect();\n                var dynamicRect = dynamicLabel.getBoundingClientRect();\n\n                if (isVerticalIntersect(dynamicRect, staticRect)) {\n\n                    if (isLeftIntersect(dynamicRect, staticRect)) {\n                        moveLeft(dynamicLabel, dynamicRect, staticRect);\n                        moved = true;\n                    }\n                    else if (isRightIntersect(dynamicRect, staticRect)) {\n                        moveRight(dynamicLabel, dynamicRect, staticRect);\n                        moved = true;\n                    }\n                    else if (isMiddleIntersect(dynamicRect, staticRect)) {\n                        moveDown(dynamicLabel, dynamicRect, staticRect);\n                        moved = true;\n                    }\n\n                    if (moved) {\n                        var newList = labelsList.slice(0);\n                        newList.splice(newList.indexOf(staticLabel), 1);\n                        this.labelsOverlapDetection(dynamicLabel, newList);\n\n                        if (dynamicLabel.causeStacking && staticLabel.causeStacking) {\n                            needToStackLabels = true;\n                        }\n\n                        // We don't want that after the labels have been stacked, only one of them will move alone.\n                        if (dynamicLabel.causeStacking && this.labelsStacked) {\n                            this.stackLabels(this.labels);\n                        }\n                    }\n                }\n            }\n        }\n\n        return needToStackLabels;\n    };\n\n    proto.stackLabels = function(labels) {\n        var topLabel = this.topLabel ?? this.lines.xyz.label;\n\n        for (var i = 1; i < labels.length; i++) {\n            if (labels[i].causeStacking) {\n                labels[i].style.left = topLabel.style.left;\n\n                var rect = labels[i-1].getBoundingClientRect();\n                var space = (labels[i-1] == topLabel) ? _labelsSpace : 0;\n                var top = (labels[i] === topLabel) ? topLabel.style.top : labels[i-1].style.top;\n                labels[i].style.top = parseInt(top, 10) + rect.height + space + 'px';\n            }\n            labels[i].style.transform = '';\n        }\n\n        this.labelsStacked = true;\n    };\n\n    proto.drawXYZLine = function(item) {\n        var self = this;\n\n        var p1 = item.p1;\n        var p2 = item.p2;\n\n        if (!p1 || !p2)\n            return;\n\n        item.line = this.drawLineSegment(p1, p2, this.segmentWidth, item.material);\n\n        const tmpPoints = [new THREE.Vector3(), new THREE.Vector3()];\n        const geometry = item.geometry = new THREE.BufferGeometry();\n        var point = MeasureCommon.nearestPointInPointToSegment(self.viewer.navigation.getPosition(), p1, p2);\n        var scale = self.setScale(point);\n\n        var direction;\n        const dimensionOffset = this.measurement.options && this.measurement.options.dimensionOffset;\n        if (dimensionOffset) {\n            const d1 = new THREE.Vector3(dimensionOffset[0].x, dimensionOffset[0].y, dimensionOffset[0].z);\n            const d2 = new THREE.Vector3(dimensionOffset[1].x, dimensionOffset[1].y, dimensionOffset[1].z);\n            direction = new THREE.Vector3().subVectors(p1, d1);\n            this.segments.push({ line: this.drawLineSegment(d1, p1, this.segmentWidth, item.material), p1: d1, p2: p1 });\n            this.segments.push({ line: this.drawLineSegment(p2, d2, this.segmentWidth, item.material), p1: p2, p2: d2 });\n            p1 = d1;\n            p2 = d2;\n        } else {\n            direction = new THREE.Vector3().subVectors(p2, p1);\n        }\n        var normal = direction.cross(self.viewer.navigation.getEyeVector()).normalize();\n        item.visible = true;\n\n        this.segments.push(item);\n\n        const dashedLeader = this.measurement.options && this.measurement.options.dashedLeader;\n        if (dashedLeader) {\n            const l1 = new THREE.Vector3(dashedLeader[0].x, dashedLeader[0].y, dashedLeader[0].z);\n            const l2 = new THREE.Vector3(dashedLeader[1].x, dashedLeader[1].y, dashedLeader[1].z);\n            this.drawLineSegment(l1, l2, this.segmentWidth, item.material, true);\n        }\n\n        function drawTip(p) {\n            // Edge\n            tmpPoints[0].addVectors(p, normal.clone().multiplyScalar(_tipHeight * scale));\n            tmpPoints[1].subVectors(p, normal.clone().multiplyScalar(_tipHeight * scale));\n            geometry.setFromPoints(tmpPoints);\n\n            var line = self.drawLineAsCylinder(geometry, item.material, _tipWidth, self.overlayName);\n            self.setCylinderScale(line, p1 ,p2);\n            line.visible = true;\n            item.tips.push(line);\n        }\n\n        if (self.showMeasureResult) {\n            item.tips = [];\n\n            drawTip(p1);\n            drawTip(p2);\n        }\n    };\n\n    proto.redrawDashedLine = function(dashedLine) {\n        if (!dashedLine.p1 || !dashedLine.p2)\n            return;\n\n        this.viewer.impl.removeMultipleOverlays(this.overlayName, dashedLine.line, true);\n\n        var p1Scale = this.setScale(dashedLine.p2);\n        var dashSize = _dashSize * p1Scale;\n        var gapSize = _gapSize * p1Scale;\n        dashedLine.line = this.drawDashedLine(dashedLine.p2, dashedLine.p1, dashSize, gapSize, this.lines.xyz.material, _dashedSegmentWidth, this.overlayName);\n\n        return dashedLine.line;\n    };\n\n    proto.redrawDashedLines = function() {\n        this.dashedLines.forEach(this.redrawDashedLine.bind(this));\n    };\n\n    proto.drawLineSegment = function(p1, p2, width, material, isDashedLine) {\n        var line;\n\n        if (isDashedLine) {\n            const dashedLine = {};\n            dashedLine.p1 = p1;\n            dashedLine.p2 = p2;\n            this.dashedLines.push(dashedLine);\n            line = this.redrawDashedLine(dashedLine);\n        } else {\n            const geometry = new THREE.BufferGeometry().setFromPoints([p1, p2]);\n            line = this.drawLineAsCylinder(geometry, material, width, this.overlayName);\n            this.setCylinderScale(line, p1, p2);\n        }\n\n        line.visible = true;\n\n        return line;\n    };\n\n    proto.drawSurface = function(points) {\n\n        const cg = Autodesk.Viewing.Extensions.CompGeom;\n\n        let cset = new cg.ContourSet();\n\n        cset.addContour(points);\n\n        cset.triangulate();\n\n        if (cset.triangulationFailed)\n            return false;\n\n        let bufferGeometry = cset.toPolygonMesh();\n\n        var face = new THREE.Mesh(bufferGeometry, this.surfaceColor);\n        this.applyLineColor(this.surfaceColor);\n\n        this.viewer.impl.addOverlay(this.overlayName, face);\n\n        return true;\n    };\n\n    proto.drawSegmentAndPush = function(p1, p2, isDashedLine) {\n        if (!p1 || !p2) {\n            return;\n        }\n\n        var line = this.drawLineSegment(p1, p2, this.segmentWidth, this.lines.xyz.material, isDashedLine);\n\n        if (!isDashedLine) {\n            var item = { line: line, p1: p1, p2: p2 };\n            this.segments.push(item);\n        }\n    };\n\n\n    proto.renderAreaMeasurementFromPoints = function(pickPositions) {\n        let p1, p2;\n        let firstPoint;\n\n        const points = [];\n        this.applyLineColor(this.lines.xyz.material);\n        this.applyLineColor(this.surfaceColor);\n\n        const keys = Object.keys(pickPositions);\n\n        for (var i = 0; i < keys.length - 1; i++) {\n            const key = parseFloat(keys[i]);\n            const position1 = pickPositions[key];\n            const position2 = pickPositions[key+1];\n\n            if (i === 0) {\n                firstPoint = new THREE.Vector3(position1.x, position1.y, position1.z);\n            }\n\n            p1 = new THREE.Vector3(position1.x, position1.y, position1.z);\n            p2 = new THREE.Vector3(position2.x, position2.y, position2.z);\n\n            this.drawSegmentAndPush(p1, p2);\n            points.push(p1);\n        }\n\n        if (keys.length > 2) {\n            // Draw last line\n            this.drawSegmentAndPush(firstPoint, p2, !this.measurement.closedArea);\n\n            if(!MeasureCommon.isEqualVectors(firstPoint,p2,MeasureCommon.EPSILON)){\n                points.push(p2);\n            }\n\n            if (this.measurement.area !== 0) {\n                //Draw surface will return false if it failed to triangulate the polygon (e.g. it has self-intersections)\n                if (this.drawSurface(points)) {\n                    this.showAreaLabel(getPolygonVisualCenter(points));\n                    this.updateArea();\n                }\n            }\n        }\n    };\n\n    proto.renderAreaMeasurement = function(picks) {\n\n        var count = this.measurement.countPicks();\n        var p1, p2;\n\n        var points = [];\n\n        for (var i = 1; i < count; i++) {\n            p1 = MeasureCommon.getSnapResultPosition(picks[i], this.viewer);\n            p2 = MeasureCommon.getSnapResultPosition(picks[i + 1], this.viewer);\n\n            this.drawSegmentAndPush(p1, p2);\n            points.push(p1);\n        }\n\n        if (count > 2) {\n            // Draw last line\n            p1 = MeasureCommon.getSnapResultPosition(picks[1], this.viewer);\n            this.drawSegmentAndPush(p1, p2, !this.measurement.closedArea);\n\n            if(!MeasureCommon.isEqualVectors(p1,p2,MeasureCommon.EPSILON)){\n                points.push(p2);\n            }\n\n            if (this.measurement.area !== 0) {\n                //Draw surface will return false if it failed to triangulate the polygon (e.g. it has self-intersections)\n                if (this.drawSurface(points)) {\n                    this.showAreaLabel(getPolygonVisualCenter(points));\n                    this.updateArea();\n                }\n            }\n        }\n    };\n\n    proto.clearAngleMeshes = function() {\n        if (this.angleArc) {\n            this.viewer.impl.removeOverlay(this.overlayName, this.angleArc, true);\n            this.angleArc = null;\n        }\n        if (this.angleOutline.length > 0) {\n            this.viewer.impl.removeMultipleOverlays(this.overlayName, this.angleOutline, true);\n            this.angleOutline.length = 0;\n        }\n    };\n\n    proto.drawAngle = function(p, ep1, ep2, n, angle, midPoint, _radius) {\n\n        var smallNum = 0.001;\n\n        if (!this.materialAngle) {\n\n            this.materialAngle = new THREE.MeshPhongMaterial({\n                    color: 0x999999,\n                    opacity: 0.5,\n                    transparent: true,\n                    depthTest: false,\n                    depthWrite: false,\n                    side: THREE.DoubleSide\n                }\n            );\n\n            this.materialAngleOutline = new THREE.MeshBasicMaterial({\n                color: 0xFF9900,\n                depthTest: false,\n                depthWrite: false\n            });\n\n        }\n\n        this.applyLineColor(this.lines.xyz.material);\n        this.applyLineColor(this.surfaceColor);\n\n        MeasureCommon.createCommonOverlay(this.viewer, this.overlayName);\n        this.clearAngleMeshes();\n\n        // draw arc of angle\n        var radius = _radius || Math.min(p.distanceTo(ep1), p.distanceTo(ep2)) / 4;\n        var segments = 100;\n        //angle = angle * Math.PI / 180;\n\n        var circleGeometry = new THREE.CircleBufferGeometry(radius, segments, 0, angle * Math.PI / 180);\n        var arc = new THREE.Mesh(circleGeometry, this.surfaceColor);\n        this.applyLineColor(this.surfaceColor);\n\n        const arcGeomPosition = arc.geometry.getAttribute('position');\n        {\n            const untypedPositions = Array.from(arcGeomPosition.array); // convert from Float32Array to Array to use concat\n            const untypedCenter = untypedPositions.slice(0, arcGeomPosition.itemSize); // get the x,y,z of the center\n            arcGeomPosition.array = Float32Array.from(untypedPositions.concat(untypedCenter)); // concat the center x,y,z and convert back to Float32Array\n            arcGeomPosition.count++;\n            arcGeomPosition.needsUpdate = true;\n        }\n\n        // Translate and rotate the arc to the plane where it should lie in\n        arc.position.set(p.x, p.y, p.z);\n        var V = arc.position.clone();\n        V.add(n);\n        arc.lookAt(V);\n        arc.updateMatrixWorld();\n\n\n        // Rotate the arc in the plane to the right place\n        let vA = new THREE.Vector3().fromBufferAttribute(arcGeomPosition, 1);\n        let vB = new THREE.Vector3().fromBufferAttribute(arcGeomPosition, arcGeomPosition.count - 2);\n        vA.applyMatrix4(arc.matrixWorld);\n        vB.applyMatrix4(arc.matrixWorld);\n\n        var v1 = new THREE.Vector3();\n        var v2 = new THREE.Vector3();\n        var v3 = new THREE.Vector3();\n        var v4 = new THREE.Vector3();\n        v1.subVectors(vA, p);\n        v2.subVectors(vB, p);\n        v3.subVectors(ep1, p);\n        v4.subVectors(ep2, p);\n\n        var a13 = v1.angleTo(v3);\n        var a14 = v1.angleTo(v4);\n        var a23 = v2.angleTo(v3);\n        var a24 = v2.angleTo(v4);\n\n        //console.log(a13 * 180 / Math.PI + \" \" + a14 * 180 / Math.PI + \" \" + a23 * 180 / Math.PI + \" \" + a24 * 180 / Math.PI);\n\n        var ra;\n        // The arc is in the right place\n        if (((a13 <= smallNum && a13 >= -smallNum) || (a14 <= smallNum && a14 >= -smallNum))\n            && ((a23 <= smallNum && a23 >= -smallNum) || (a24 <= smallNum && a24 >= -smallNum))) {\n\n            ra =0;\n        }\n        // The arc needs to be rotated 180 degree to the right place\n        else if (((a13 <= Math.PI + smallNum && a13 >= Math.PI - smallNum) || (a14 <= Math.PI + smallNum && a14 >= Math.PI - smallNum))\n            && ((a23 <= Math.PI + smallNum && a23 >= Math.PI - smallNum) || (a24 <= Math.PI + smallNum && a24 >= Math.PI - smallNum))) {\n\n            ra = Math.PI;\n        }\n        // The arc needs to be rotated a13 radian\n        else if ((a13 <= a23 + smallNum && a13 >= a23 - smallNum) || (a13 <= a24 + smallNum && a13 >= a24 - smallNum)) {\n\n            ra = a13;\n        }\n        // The arc needs to be rotated a14 radian\n        else {\n\n            ra = a14;\n        }\n\n        var rotWorldMatrix = new THREE.Matrix4();\n        rotWorldMatrix.makeRotationAxis(n, ra);\n        //arc.matrix.multiply(rotWorldMatrix);\n        rotWorldMatrix.multiply(arc.matrix);\n        arc.matrix = rotWorldMatrix;\n        arc.rotation.setFromRotationMatrix(arc.matrix);\n\n        // Check if rotate to the wrong direction, if so, rotate back twice of the degree\n        arc.updateMatrixWorld();\n        vA = new THREE.Vector3().fromBufferAttribute(arcGeomPosition, 1);\n        vB = new THREE.Vector3().fromBufferAttribute(arcGeomPosition, arcGeomPosition.count - 2);\n        vA.applyMatrix4(arc.matrixWorld);\n        vB.applyMatrix4(arc.matrixWorld);\n\n        v1.subVectors(vA, p);\n        v2.subVectors(vB, p);\n\n        a13 = v1.angleTo(v3);\n        a14 = v1.angleTo(v4);\n        a23 = v2.angleTo(v3);\n        a24 = v2.angleTo(v4);\n\n        //console.log(a13 * 180 / Math.PI + \" \" + a14 * 180 / Math.PI + \" \" + a23 * 180 / Math.PI + \" \" + a24 * 180 / Math.PI);\n\n        if (a13 >= smallNum && a14 >= smallNum) {\n\n            rotWorldMatrix = new THREE.Matrix4();\n            rotWorldMatrix.makeRotationAxis(n, - ra * 2);\n            //arc.matrix.multiply(rotWorldMatrix);\n            rotWorldMatrix.multiply(arc.matrix);\n            arc.matrix = rotWorldMatrix;\n            arc.rotation.setFromRotationMatrix(arc.matrix);\n        }\n\n        // draw outline of the arc\n        const outlineGeometry = new THREE.CircleBufferGeometry(radius, segments, 0, angle * Math.PI / 180);\n        {\n            const outlineGeomPosition = outlineGeometry.getAttribute('position');\n            outlineGeomPosition.array = outlineGeomPosition.array.slice(outlineGeomPosition.itemSize); // skip the first position's x,y,z\n            outlineGeomPosition.count--;\n            outlineGeomPosition.needsUpdate = true;\n        }\n        arc.updateMatrixWorld();\n        outlineGeometry.applyMatrix4(arc.matrixWorld);\n        this.angleOutline = this.drawEdgeAsCylinder(outlineGeometry, this.lines.xyz.material, _angleArcWidth, 0, this.getNewCylinderGeometry());\n\n        this.angleArc = arc;\n        this.viewer.impl.addOverlay(this.overlayName, this.angleArc);\n        this.viewer.impl.addMultipleOverlays(this.overlayName, this.angleOutline);\n\n        // This is used for angle label's position\n        midPoint.fromBufferAttribute(arcGeomPosition, Math.round(arcGeomPosition.count / 2) - 1);\n        midPoint.applyMatrix4(arc.matrixWorld);\n        if (!_radius) {\n            var dir = new THREE.Vector3();\n            dir.subVectors(midPoint, p).normalize();\n            dir.multiplyScalar(radius / 2);\n            midPoint.add(dir);\n        }\n    };\n\n    proto.createArcLabel = function() {\n        var label = this.createMeasurementLabel();\n        this.viewer.container.appendChild(label);\n        this._addEventListener(label);\n        return label;\n    };\n\n    proto.clearArcMeshes = function() {\n        if(this.arcOutline && this.arcOutline.length > 0) {\n            this.viewer.impl.removeMultipleOverlays(this.overlayName, this.arcOutline, true);\n            this.arcOutline.length = 0;\n        }\n    };\n\n    proto.drawCircularArc = function(point1, point2, center, radius, drawTips=true) {\n        var segments = 100;\n        var edgeGeomtry = new THREE.BufferGeometry();\n        const tmpPoints = [new THREE.Vector3(), new THREE.Vector3()];\n        var nearPoint = MeasureCommon.nearestPointInPointToSegment(this.viewer.navigation.getPosition(), point1, point2);\n        var scale = this.setScale(nearPoint);\n\n        var point1Relative = new THREE.Vector3();\n        point1Relative.subVectors(point1, center);\n        var startAngle = Math.atan2(point1Relative.y, point1Relative.x);\n\n        var point2Relative = new THREE.Vector3();\n        point2Relative.subVectors(point2, center);\n        var endAngle = Math.atan2(point2Relative.y, point2Relative.x);\n\n        // Set this.lines with the points to rotabte the label\n        this.arcLabel.point1Relative = point1Relative.clone();\n        this.arcLabel.point2Relative = point2Relative.clone().normalize().multiplyScalar(radius);\n\n        var arcAngle = endAngle - startAngle;\n        if(arcAngle > Math.PI) {\n            arcAngle -= 2 * Math.PI;\n        } else if (arcAngle < -Math.PI) {\n            arcAngle += 2 * Math.PI;\n        }\n\n        var circleGeometry = new THREE.CircleBufferGeometry(radius, segments, startAngle, arcAngle);\n        var arc = new THREE.Mesh(circleGeometry, this.lines.xyz.material);\n\n        // Translate and rotate the arc to the plane where it should lie in\n        arc.position.set(center.x, center.y, center.z);\n        {\n            const circleGeomPosition = circleGeometry.getAttribute('position');\n            circleGeomPosition.array = circleGeomPosition.array.slice(circleGeomPosition.itemSize); // skip the first position's x,y,z\n            circleGeomPosition.count--;\n            circleGeomPosition.needsUpdate = true;\n        }\n\n        arc.updateMatrixWorld();\n        circleGeometry.applyMatrix4(arc.matrixWorld);\n\n        MeasureCommon.createCommonOverlay(this.viewer, this.overlayName);\n        this.clearArcMeshes();\n        this.arcOutline = this.drawEdgeAsCylinder(circleGeometry, this.lines.xyz.material, this.segmentWidth, 0, this.getNewCylinderGeometry());\n\n        this.viewer.impl.addMultipleOverlays(this.overlayName, this.arcOutline);\n\n        function drawArcTip(p, normal) {\n            tmpPoints[0].addVectors(p, normal.clone().multiplyScalar(_tipHeight * scale));\n            tmpPoints[1].subVectors(p, normal.clone().multiplyScalar(_tipHeight * scale));\n\n            edgeGeomtry.setFromPoints(tmpPoints);\n\n            var line = this.drawLineAsCylinder(edgeGeomtry, this.lines.xyz.material, _tipWidth, this.overlayName);\n            this.arcTip.push(line);\n        }\n\n        // Draw arc's tip lines\n        if(drawTips) {\n            drawArcTip.call(this, point1, point1Relative.normalize());\n            drawArcTip.call(this, point2, point2Relative.normalize());\n        }\n\n        var midPoint = new THREE.Vector3();\n\n        // Calculate midpoint position\n        var midAngle = startAngle + (arcAngle * 0.5);\n        midPoint.x = Math.cos(midAngle) * radius;\n        midPoint.y = Math.sin(midAngle) * radius;\n        this.arcLabel.midPointRelative = midPoint.clone();\n        midPoint.applyMatrix4(arc.matrixWorld);\n\n        this.showArcLabel(midPoint);\n    };\n\n    proto.renderAngleMeasurementFromPoints = function(pickPositions) {\n        var points = [];\n\n        const keys = Object.keys(pickPositions);\n        for (var i = 0; i < keys.length; i++) {\n            const key = parseFloat(keys[i]);\n            const position = pickPositions[key];\n\n            points.push(new THREE.Vector3(position.x, position.y, position.z));\n        }\n\n        if (points.length === 3) {\n            let arcRadius;\n            const options = this.measurement.options;\n            if (options && options.offset) {\n                const o0 = new THREE.Vector3(options.offset.x, options.offset.y, options.offset.z);\n                const o1 = o0.clone().add(points[1]);\n                o0.add(points[0]);\n                this.drawSegmentAndPush(o0, o1);\n                this.drawSegmentAndPush(points[1], points[2]);\n                this.drawSegmentAndPush(points[0], o0, true);\n                this.drawSegmentAndPush(points[1], o1, true);\n                arcRadius = o1.clone().sub(o0).length();\n            } else {\n                this.drawSegmentAndPush(points[0], points[1]);\n                this.drawSegmentAndPush(points[1], points[2]);\n            }\n\n            if (this.measurement.angle) {\n                var n = new THREE.Vector3();\n                var v1 = new THREE.Vector3();\n                var v2 = new THREE.Vector3();\n                v1.subVectors(points[0], points[1]);\n                v2.subVectors(points[1], points[2]);\n                n.crossVectors(v1, v2);\n                n.normalize();\n\n                var midPoint = new THREE.Vector3();\n                this.drawAngle(points[1], points[0], points[2], n, this.measurement.angle, midPoint, arcRadius);\n                this.showAngleLabel(midPoint);\n                this.updateAngle();\n            }\n        }\n    };\n\n    proto.renderAngleMeasurement = function(picks) {\n\n        var count = this.measurement.countPicks();\n        var p1, p2;\n\n        var points = [];\n        this.applyLineColor(this.lines.xyz.material);\n        this.applyLineColor(this.surfaceColor);\n\n        for (var i = 1; i < count; i++) {\n            p1 = MeasureCommon.getSnapResultPosition(picks[i], this.viewer);\n            p2 = MeasureCommon.getSnapResultPosition(picks[i + 1], this.viewer);\n\n            this.drawSegmentAndPush(p1, p2);\n\n            if (p1) {\n                points.push(p1);\n            }\n        }\n\n        if (p2) {\n            points.push(p2);\n        }\n\n        if (points.length === 3 && this.measurement.angle) {\n            var n = new THREE.Vector3();\n            var v1 = new THREE.Vector3();\n            var v2 = new THREE.Vector3();\n            v1.subVectors(points[0], points[1]);\n            v2.subVectors(points[1], points[2]);\n            n.crossVectors(v1, v2);\n            n.normalize();\n\n            var midPoint = new THREE.Vector3();\n            this.drawAngle(points[1], points[0], points[2], n, this.measurement.angle, midPoint);\n            this.showAngleLabel(midPoint);\n            this.updateAngle();\n        }\n    };\n\n    proto.renderArcMeasurementFromPoints = function(p1, p2, center, radius) {\n        if (!p1 || !p2 || !center || !radius) {\n            return;\n        }\n        this.drawCircularArc(p1, p2, center, radius);\n        this.updateArcLength();\n    };\n\n    proto.renderArcMeasurement = function(p1, p2) {\n\n        if(!p1 || !p2 || !p1.circularArcCenter|| !p1.circularArcRadius) {\n            return;\n        }\n\n        var radius = p1.circularArcRadius;\n        var center = p1.circularArcCenter;\n\n        var point1 = MeasureCommon.getSnapResultPosition(p1);\n        var point2 = MeasureCommon.getSnapResultPosition(p2);\n\n        const drawTips =\n            this.showMeasureResult &&\n            MeasureCommon.isEqualVectors(p1.circularArcCenter, p2.circularArcCenter, 0) &&\n            p1.circularArcRadius === p2.circularArcRadius;\n\n        this.drawCircularArc(point1, point2, center, radius, drawTips);\n        this.updateArcLength();\n\n    };\n\n    proto.renderSpot = function(point) {\n        if (!point)\n            return;\n\n        // add the point marker to the overlay\n        if (!this.spotMesh) {\n            const geometry = new THREE.SphereGeometry(1, 10, 10);\n            const material = this._createLineMaterial(DEFAULT_LINE_COLOR);\n            this.applyLineColor(material, DEFAULT_LINE_COLOR);\n            this.spotMesh = new THREE.Mesh( geometry, material );\n        }\n        const scale = this.setScale(point);\n        this.spotMesh.scale.set(scale, scale, scale);\n        this.spotMesh.position.set(point.x, point.y, point.z);\n        this.viewer.impl.addOverlay(this.overlayName, this.spotMesh);\n        this.segments.push({p1: point, p2: point});\n\n        this.showSpotLabel(point);\n        this.updateSpot();\n    };\n\n    proto.renderSpotMeasurementFromPoints = function(pickPositions) {\n        this.renderSpot(pickPositions[0]);\n    };\n\n    proto.renderSpotMeasurement = function(point) {\n        this.renderSpot(point);\n    };\n\n    proto.renderCalloutMeasurementFromPoints = function(pickPositions) {\n        var p1 = pickPositions[1];\n        var p2 = pickPositions[2];\n        if (!p1 || !p2)\n            return;\n\n        this.applyLineColor(this.lines.xyz.material);\n        this.drawSegmentAndPush(p1, p2);\n\n        this.showCalloutLabel(p2);\n        this.updateCallout();\n    };\n\n    proto.renderCalloutMeasurement = function(picks) {\n        var p1 = picks[1] && picks[1].intersection;\n        var p2 = picks[2] && picks[2].intersection;\n        if (!p1 || !p2)\n            return;\n\n        this.applyLineColor(this.lines.xyz.material);\n        this.drawSegmentAndPush(p1, p2);\n\n        this.showCalloutLabel(p2);\n        this.updateCallout();\n    };\n\n    proto.createDistanceLabel = function(item) {\n        var label = item.label = this.createMeasurementLabel();\n\n        setVisibilityMeasurementLabelText(label, item === this.lines.xyz);\n\n        const _document = this.getDocument();\n        // Override main label when displaying only an axis label (X, Y or Z)\n        if (item.axis) {\n            label.className = item.className;\n            var axisIcon = _document.createElement('div');\n            axisIcon.className = 'measure-label-axis-icon ' + item.iconText;\n            axisIcon.innerText = item.iconText;\n            label.insertBefore(axisIcon, label.firstChild);\n\n            if (!av.isMobileDevice()) {\n                MeasureCommon.safeToggle(label, 'enableTransition', true);\n            }\n        }\n\n        this.viewer.container.appendChild(label);\n\n        return label;\n    };\n\nproto.updateLine = function(item, x1, y1, z1, x2, y2, z2, showAxis, axisLineWidth = _axisLineWidth) {\n        this.applyLineColor(this.lines.xyz.material);\n\n        var line = item.line,\n            label = item.label,\n            p1 = new THREE.Vector3(x1, y1, z1),\n            p2 = new THREE.Vector3(x2, y2, z2);\n\n        // Swap points if needed to have consistent axis directions.\n        var tmpVec;\n        if (item === this.lines.x && p2.x > p1.x) {\n            tmpVec = p1.clone();\n            p1 = p2.clone();\n            p2 = tmpVec.clone();\n        }\n        else if (item === this.lines.y && p2.y > p1.y) {\n            tmpVec = p1.clone();\n            p1 = p2.clone();\n            p2 = tmpVec.clone();\n        }\n        else if (item === this.lines.z && p2.z > p1.z) {\n            tmpVec = p1.clone();\n            p1 = p2.clone();\n            p2 = tmpVec.clone();\n        }\n\n        item.line = null;\n\n        if (!label) {\n            label = this.createDistanceLabel(item);\n        }\n        else {\n            this.hideLabel(label);\n        }\n\n        if (((this.isLeaflet && item !== this.lines.z) || (this.allowShortDistances === true || p1.distanceTo(p2) >= MeasureCommon.EPSILON)) && showAxis) {\n\n            item.p1 = p1;\n            item.p2 = p2;\n\n            if (item === this.lines.xyz) {\n                this.drawXYZLine(item);\n                this.showLabel(label);\n                this.updateDistance();\n            }\n            else {\n                line = item.line = this.drawLineSegment(p1, p2, axisLineWidth, item.material);\n                var show = !this.simple && this.showMeasureResult;\n\n                line.visible = show;\n                item.visible = show;\n\n                if (show) {\n                    this.showLabel(label);\n                }\n                else {\n                    this.hideLabel(label);\n                }\n            }\n        }\n    };\n\n    // Draw distance measurement\n    proto.renderDistanceMeasurementFromPoints = function(p1, p2) {\n\n        this.updateLine(this.lines.xyz, p1.x, p1.y, p1.z, p2.x, p2.y, p2.z, true);\n\n        var up = this.viewer.navigation.getAlignedUpVector(),\n            x = Math.abs(up.x),\n            y = Math.abs(up.y),\n            z = Math.abs(up.z);\n\n        var showAxis = false;\n\n        if (z > x && z > y) { // z up\n            this.updateLine(this.lines.x, p1.x, p1.y, p1.z, p2.x, p1.y, p1.z, showAxis);\n            this.updateLine(this.lines.y, p2.x, p1.y, p1.z, p2.x, p2.y, p1.z, showAxis);\n            this.updateLine(this.lines.z, p2.x, p2.y, p1.z, p2.x, p2.y, p2.z, showAxis);\n\n        } else if (y > x && y > z) { // y up\n            this.updateLine(this.lines.x, p1.x, p1.y, p1.z, p2.x, p1.y, p1.z, showAxis);\n            this.updateLine(this.lines.z, p2.x, p1.y, p1.z, p2.x, p1.y, p2.z, showAxis);\n            this.updateLine(this.lines.y, p2.x, p1.y, p2.z, p2.x, p2.y, p2.z, showAxis);\n\n        } else { // x up - do we ever see this?\n            this.updateLine(this.lines.y, p1.x, p1.y, p1.z, p1.x, p2.y, p1.z, showAxis);\n            this.updateLine(this.lines.z, p1.x, p2.y, p1.z, p1.x, p2.y, p2.z, showAxis);\n            this.updateLine(this.lines.x, p1.x, p2.y, p2.z, p2.x, p2.y, p2.z, showAxis);\n        }\n\n    };\n\n    // Draw distance measurement\n    proto.renderDistanceMeasurement = function(p1, p2)\n    {\n        var self = this;\n\n        // If the line aligns with one of axis, then don't show axis\n        function displayAxis(p1, p2) {\n            self.tmpVector.subVectors(p1, p2);\n            self.tmpVector.normalize();\n\n            return !MeasureCommon.isParallel(self.tmpVector, self.xAxis) && !MeasureCommon.isParallel(self.tmpVector, self.yAxis) && !MeasureCommon.isParallel(self.tmpVector, self.zAxis);\n        }\n\n        this.updateLine(this.lines.xyz, p1.x, p1.y, p1.z, p2.x, p2.y, p2.z, true);\n\n        var up = this.viewer.navigation.getAlignedUpVector(),\n            x = Math.abs(up.x),\n            y = Math.abs(up.y),\n            z = Math.abs(up.z);\n\n        var showAxis = displayAxis(p1, p2);\n\n        if (z > x && z > y) { // z up\n            this.updateLine(this.lines.x, p1.x, p1.y, p1.z, p2.x, p1.y, p1.z, showAxis);\n            this.updateLine(this.lines.y, p2.x, p1.y, p1.z, p2.x, p2.y, p1.z, showAxis);\n            this.updateLine(this.lines.z, p2.x, p2.y, p1.z, p2.x, p2.y, p2.z, showAxis);\n\n        } else if (y > x && y > z) { // y up\n            this.updateLine(this.lines.x, p1.x, p1.y, p1.z, p2.x, p1.y, p1.z, showAxis);\n            this.updateLine(this.lines.z, p2.x, p1.y, p1.z, p2.x, p1.y, p2.z, showAxis);\n            this.updateLine(this.lines.y, p2.x, p1.y, p2.z, p2.x, p2.y, p2.z, showAxis);\n\n        } else { // x up - do we ever see this?\n            this.updateLine(this.lines.y, p1.x, p1.y, p1.z, p1.x, p2.y, p1.z, showAxis);\n            this.updateLine(this.lines.z, p1.x, p2.y, p1.z, p1.x, p2.y, p2.z, showAxis);\n            this.updateLine(this.lines.x, p1.x, p2.y, p2.z, p2.x, p2.y, p2.z, showAxis);\n        }\n\n    };\n\n    proto.updateResults = function() {\n        this.updateDistance();\n        this.updateAngle();\n        this.updateArea();\n        this.updateArcLength();\n        this.updateSpot();\n\n        setTimeout(function(){\n            // This can get called after the viewer is unloaded\n            if (this.viewer.impl)\n                this.updateLabelsPosition();\n        }.bind(this), 0);\n    };\n\n    // Update distance measurement label\n    proto.updateDistance = function() {\n\n        function setWidth(label, value) {\n            if (!label) return;\n            label.style.width = value;\n        }\n\n        function getWidth(label) {\n            return label ? label.clientWidth : 0;\n        }\n\n        Object.keys(this.lines).forEach(function(name) {\n            setWidth(this.lines[name].label, '');\n        }.bind(this));\n\n        setDeltaMeasurementLabelText(this.lines.x.label, \"~ \" + this.measureTool.getDistanceX(this.measurement));\n        setDeltaMeasurementLabelText(this.lines.y.label, \"~ \" + this.measureTool.getDistanceY(this.measurement));\n        setDeltaMeasurementLabelText(this.lines.z.label, \"~ \" + this.measureTool.getDistanceZ(this.measurement));\n        setValueMeasurementLabelText(this.lines.xyz.label, \"~ \" + this.measureTool.getDistanceXYZ(this.measurement));\n\n        if (this.viewer.model && this.viewer.model.is3d()) {\n            setTimeout(function(){\n                var maxWidth = Math.max(getWidth(this.lines.x.label), getWidth(this.lines.y.label), getWidth(this.lines.z.label), getWidth(this.lines.xyz.label));\n                Object.keys(this.lines).forEach(function(name) {\n                    setWidth(this.lines[name].label, maxWidth + 'px');\n                }.bind(this));\n            }.bind(this), 0);\n        }\n    };\n\n    // Update angle measurement label\n    proto.updateAngle = function() {\n        setValueMeasurementLabelText(this.angleLabel.label, \"~ \" + this.measureTool.getAngle(this.measurement));\n    };\n\n    // Update spot measurement label\n    proto.updateSpot = function() {\n        setValueMeasurementLabelText(this.spotLabel.label,\n            // Replace space with non-breaking space to prevent wrapping\n            (\"~ \" + this.measureTool.getSpot(this.measurement)).split('\\n').join('\\n~ ').replaceAll(' ', '\\xA0'));\n    };\n\n    // Update callout measurement label\n    proto.updateCallout = function() {\n        setValueMeasurementLabelCallout(this.calloutLabel.label, this.measureTool.getCallout(this.measurement));\n    };\n\n    // Update area measurement label\n    proto.updateArea = function() {\n        setValueMeasurementLabelText(this.areaLabel.label, \"~ \" + this.measureTool.getArea(this.measurement));\n    };\n\n    // Update arc measurement label\n    proto.updateArcLength = function() {\n        setValueMeasurementLabelText(this.arcLabel.label, \"~ \" + this.measureTool.getArc(this.measurement));\n    };\n\n    // Set if collapse or expand the xyz delta distance\n    proto.setSimple = function(simple) {\n        if (this.simple != simple) {\n            this.simple = simple;\n\n            var isVisible = !simple;\n            this.setLineVisible(this.lines.x, isVisible);\n            this.setLineVisible(this.lines.y, isVisible);\n            this.setLineVisible(this.lines.z, isVisible);\n\n            this.updateLabelsPosition();\n\n            this.viewer.impl.invalidate(false, false, /*overlayDirty=*/true);\n        }\n    };\n\n    proto.setLineVisible = function(item, isVisible) {\n        if (item.line) {\n            item.line.visible = isVisible;\n            item.visible = isVisible;\n\n            if (item.label) {\n                if (isVisible) {\n                    this.showLabel(item.label);\n                }\n                else {\n                    this.hideLabel(item.label);\n                    item.label.style.opacity = 0;\n                }\n            }\n        }\n    };\n\n    proto.enableLabelsTouchEvents = function(enable) {\n        var value = enable ? 'all' : 'none';\n\n        if (this.lines.xyz.label) {\n            this.lines.xyz.label.style.pointerEvents = value;\n        }\n\n        if (this.angleLabel.label) {\n            this.angleLabel.label.style.pointerEvents = value;\n        }\n\n        if (this.areaLabel.label) {\n            this.areaLabel.label.style.pointerEvents = value;\n        }\n\n        if (this.arcLabel.label) {\n            this.arcLabel.label.style.pointerEvents = value;\n        }\n\n        if (this.spotLabel.label) {\n            this.spotLabel.label.style.pointerEvents = value;\n        }\n    };\n\n    proto.setLabelsZIndex = function(zIndex) {\n        for (var name in this.lines) {\n            if (Object.prototype.hasOwnProperty.call(this.lines, name)) {\n                var item = this.lines[name];\n                if (item.label) {\n                    item.label.style.zIndex = zIndex;\n                }\n            }\n        }\n\n        if (this.angleLabel && this.angleLabel.label) {\n            this.angleLabel.label.style.zIndex = zIndex;\n        }\n\n        if (this.spotLabel && this.spotLabel.label) {\n            this.spotLabel.label.style.zIndex = zIndex;\n        }\n\n        if (this.calloutLabel && this.calloutLabel.label) {\n            this.calloutLabel.label.style.zIndex = zIndex;\n        }\n\n        if (this.areaLabel && this.areaLabel.label) {\n            this.areaLabel.label.style.zIndex = zIndex;\n        }\n\n        if (this.arcLabel && this.arcLabel.label) {\n            this.arcLabel.label.style.zIndex = zIndex;\n        }\n\n        for (name in this.endpoints) {\n            if (Object.prototype.hasOwnProperty.call(this.endpoints, name)) {\n                var endpoint = this.endpoints[name];\n                if (endpoint.label) {\n                    endpoint.label.style.zIndex = zIndex - 1;\n                }\n            }\n        }\n    };\n\n    proto.focusLabels = function() {\n        this.setLabelsZIndex(3);\n    };\n\n    proto.unfocusLabels = function() {\n        this.setLabelsZIndex(2);\n    };\n\n    proto.clear = function() {\n        var name;\n\n        for (name in this.endpoints) {\n            if (Object.prototype.hasOwnProperty.call(this.endpoints, name)) {\n                var endpoint = this.endpoints[name];\n                if (endpoint.label) {\n                    this.hideLabel(endpoint.label);\n                }\n            }\n        }\n\n        for (name in this.lines) {\n            if (Object.prototype.hasOwnProperty.call(this.lines, name)) {\n                var item = this.lines[name];\n                if (item.line) {\n                    item.line.visible = false;\n                    item.visible = false;\n\n                    item.tips && item.tips.forEach(function(tip) {\n                        tip.visible = false;\n                    });\n                }\n                if (item.label) {\n                    this.hideLabel(item.label);\n                    item.label.style.opacity = 0;\n                    item.label.style.zIndex = 2;\n                }\n            }\n        }\n\n        if (this.angleLabel && this.angleLabel.label) {\n            this.hideLabel(this.angleLabel.label);\n        }\n\n        if (this.spotLabel && this.spotLabel.label) {\n            this.hideLabel(this.spotLabel.label);\n        }\n\n        if (this.calloutLabel && this.calloutLabel.label) {\n            this.hideLabel(this.calloutLabel.label);\n        }\n\n        if (this.areaLabel && this.areaLabel.label) {\n            this.hideLabel(this.areaLabel.label);\n        }\n\n        if (this.arcLabel && this.arcLabel.label) {\n          this.hideLabel(this.arcLabel.label);\n        }\n\n        this.clearSelectionAreas();\n\n        this.segments = [];\n        this.dashedLines = [];\n\n        this.viewer.impl.clearOverlay(this.overlayName, true);\n        MeasureCommon.createCommonOverlay(this.viewer, this.overlayName);\n    };\n\n    proto.hideClick = function(pickNumber) {\n\n        Indicator.prototype.hideClick.call(this, pickNumber);\n\n        for (var name in this.lines) {\n            if (Object.prototype.hasOwnProperty.call(this.lines, name)) {\n                var item = this.lines[name];\n                if (item.line) {\n                    item.line.visible = false;\n                    item.visible = false;\n\n                    item.tips && item.tips.forEach(function(tip) {\n                        tip.visible = false;\n                    });\n                }\n                if (item.label) {\n                    this.hideLabel(item.label);\n                    item.label.style.opacity = 0;\n                }\n            }\n        }\n\n        if (this.angleLabel && this.angleLabel.label) {\n            this.hideLabel(this.angleLabel.label);\n        }\n\n        if (this.areaLabel && this.areaLabel.label) {\n            this.hideLabel(this.areaLabel.label);\n        }\n\n        if (this.arcLabel && this.arcLabel.label) {\n            this.hideLabel(this.arcLabel.label);\n        }\n\n        this.enableSelectionAreas(item.selectionArea, false);\n    };\n\n    proto.destroy = function() {\n        var name;\n\n        Indicator.prototype.destroy.call(this);\n\n        for (name in this.lines) {\n            if (Object.prototype.hasOwnProperty.call(this.lines, name)) {\n                var item = this.lines[name];\n                if (item.line) {\n                    this.viewer.impl.clearOverlay(self.overlayName, true);\n                    item.material = item.line = item.geometry = null;\n                }\n\n                if (item.label) {\n                    if (name === 'xyz') {\n                        this._removeEventListener(item.label);\n                    }\n\n                    item.label.parentNode.removeChild(item.label);\n                    item.label = null;\n                }\n                item.material = item.line = item.geometry = item.label = item.p1 = item.p2 = null;\n            }\n        }\n\n        this.clearAngleMeshes();\n\n        if (this.angleLabel && this.angleLabel.label) {\n            this.angleLabel.label.parentNode.removeChild(this.angleLabel.label);\n            this._removeEventListener(this.angleLabel.label);\n            this.angleLabel.label = this.angleLabel.p1 = this.angleLabel.p2 = null;\n        }\n\n\n        this.clearArcMeshes();\n\n        if (this.arcLabel && this.arcLabel.label) {\n            this.arcLabel.label.parentNode.removeChild(this.arcLabel.label);\n            this._removeEventListener(this.arcLabel.label);\n            this.arcLabel.label = this.arcLabel.midPoint = null;\n        }\n\n        this.clearSpotMesh();\n\n        if (this.spotLabel && this.spotLabel.label) {\n            this.spotLabel.label.parentNode.removeChild(this.spotLabel.label);\n            this._removeEventListener(this.spotLabel.label);\n            this.spotLabel.label = this.spotLabel.p = null;\n        }\n\n\n        if (this.calloutLabel && this.calloutLabel.label) {\n            this.calloutLabel.label.parentNode.removeChild(this.calloutLabel.label);\n            this.calloutLabel.label.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            this.calloutLabel.label.removeEventListener('mouseover', this.onMeasurementHoveredBinded);\n            //this.calloutLabel.label.removeEventListener('click', this.onSelectionAreaClickedBinded);\n            this.calloutLabel.label = this.calloutLabel.p = null;\n        }\n\n\n        if (this.areaLabel && this.areaLabel.label) {\n            this.areaLabel.label.parentNode.removeChild(this.areaLabel.label);\n            this._removeEventListener(this.areaLabel.label);\n            this.areaLabel.label = this.areaLabel.p1 = this.areaLabel.p2 = null;\n        }\n\n\n\n        if (this.viewer.impl.overlayScenes[this.overlayName]){\n            this.viewer.impl.removeOverlayScene(this.overlayName);\n        }\n\n        this.viewer.removeEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n        this.removeWindowEventListener('mouseup', this.handleButtonUpBinded);\n    };\n\n    proto.clearXYZLine = function() {\n        this.viewer.impl.removeOverlay(this.overlayName, this.lines.xyz.line, true);\n\n        this.lines.xyz.tips && this.lines.xyz.tips.forEach(function(tip) {\n            this.viewer.impl.removeOverlay(this.overlayName, tip, true);\n        }.bind(this));\n    };\n\n    proto.clearSpotMesh = function() {\n        if (this.spotMesh) {\n            this.viewer.impl.removeOverlay(this.overlayName, this.spotMesh, true);\n        }\n    };\n\n    // Update scale for vertex, edge, line and extension dash line\n    proto.updateScale = function() {\n        var name;\n\n        this.angleOutline.forEach(cylinderMesh => this.setCylinderScale(cylinderMesh));\n\n        this.arcOutline.forEach(cylinderMesh => this.setCylinderScale(cylinderMesh));\n\n        for (name in this.lines) {\n            if (Object.prototype.hasOwnProperty.call(this.lines, name)) {\n                var item = this.lines[name];\n                if (item.line && item !== this.lines.xyz) {\n                    this.setCylinderScale(item.line, item.p1, item.p2);\n                }\n            }\n        }\n\n        for (name in this.segments) {\n            if (Object.prototype.hasOwnProperty.call(this.segments, name)) {\n                var segment = this.segments[name];\n                if (segment.line) {\n                    this.setCylinderScale(segment.line, segment.p1, segment.p2);\n                }\n            }\n        }\n\n        if (this.measurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE) {\n            if (this.measurement.isComplete()) {\n                this.clearXYZLine();\n                this.drawXYZLine(this.lines.xyz);\n            }\n        }\n\n        if (this.measurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_ARC) {\n            this.arcTip.forEach(cylinderMesh =>\n            {\n                var scale = this.setScale(cylinderMesh.position);\n                if (Object.prototype.hasOwnProperty.call(cylinderMesh, \"lmv_line_width\")) {\n                    var scaleXZ = scale * cylinderMesh.lmv_line_width;\n                    cylinderMesh.scale.x = scaleXZ;\n                    cylinderMesh.scale.z = scaleXZ;\n                }\n                var scaleY = scale * (2 * _tipHeight);\n                cylinderMesh.scale.y = scaleY;\n            });\n        }\n\n        if (this.measurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_SPOT) {\n            if (this.spotMesh) {\n                const scale = this.setScale(this.spotMesh.position);\n                this.spotMesh.scale.set(scale, scale, scale);\n            }\n        }\n    };\n\n    proto.setNoTopology = function(){\n        this.topologyStatus = TOPOLOGY_NOT_AVAILABLE;\n        if (this.lines.xyz.label) {\n            setVisibilityMeasurementLabelSpinner(this.lines.xyz.label, false, this.topologyStatus);\n            this.lines.xyz.label.classList.remove('fetching-topology');\n        }\n    };\n    proto.setFetchingTopology = function() {\n        this.topologyStatus = TOPOLOGY_FETCHING;\n        if (this.lines.xyz.label) {\n            setVisibilityMeasurementLabelSpinner(this.lines.xyz.label, true, this.topologyStatus);\n                this.lines.xyz.label.classList.add('fetching-topology');\n        }\n    };\n    proto.setTopologyAvailable = function() {\n        this.topologyStatus = TOPOLOGY_AVAILABLE;\n        if (this.lines.xyz.label) {\n            setVisibilityMeasurementLabelSpinner(this.lines.xyz.label, false, this.topologyStatus);\n            this.lines.xyz.label.classList.remove('fetching-topology');\n        }\n    };\n\n    proto.createMeasurementLabel = function() {\n\n        const _document = this.getDocument();\n\n        var label = _document.createElement('div');\n        label.className = 'measure-length';\n\n        var spinner = _document.createElement('div');\n        spinner.className = 'measure-fetching-topology';\n        spinner.style.display = 'none';\n        label.appendChild(spinner);\n\n        var text = _document.createElement('div');\n        text.className = 'measure-length-text';\n        label.appendChild(text);\n\n        var delta = _document.createElement('div');\n        delta.className = 'measure-delta-text';\n        label.appendChild(delta);\n\n        label.causeStacking = true;\n\n        if (!av.isMobileDevice()) {\n            MeasureCommon.safeToggle(label, 'enable-hover', true);\n        }\n\n        return label;\n    };\n\n    // Receives an object created with createMeasurementLabel()\n    function setVisibilityMeasurementLabelText(label, isVisible) {\n        var div = label.querySelector('.measure-length-text');\n        div && (div.style.display = isVisible ? '' : 'none');\n    }\n\n    // Receives an object created with createMeasurementLabel()\n    function setValueMeasurementLabelText(label, strValue) {\n        if (!label) return;\n        var div = label.querySelector('.measure-length-text');\n        div && (div.textContent = strValue);\n    }\n\n    // Escape special characters in HTML and convert \\n to <br>\n    function escapeHtml(str) {\n        return str\n             .replace(/&/g, \"&amp;\")\n             .replace(/</g, \"&lt;\")\n             .replace(/>/g, \"&gt;\")\n             .replace(/\"/g, \"&quot;\")\n             .replace(/'/g, \"&#039;\")\n             .replace(/\\n/g, '<br>');\n    }\n\n    // Create a space with formatting from format\n    function createSpan(format) {\n        // If format is a string, no formatting - just return the escaped string\n        if (typeof format === 'string')\n            return escapeHtml(format);\n\n        // Build the style parameters for font-size and font-weight\n        let space = '';\n        let fontSize = format.fontSize;\n        if (format.fontSize !== undefined && format.fontSize !== 10) {\n            // Base the fontSize on 10 === 100% which is ADRs default\n            // LMV uses 12 as the default.\n            fontSize = `font-size: ${0 | (fontSize * 10)}%;`;\n            space = ' ';    // Put a space between font-size and bold\n        } else\n            fontSize = '';\n        let bold = format.bold;\n        if (bold !== undefined)\n            bold = `${space}font-weight: ${bold ? 'bold' : 'normal'};`;\n        else\n            bold = '';\n        // Escape the string.\n        const str = escapeHtml(format.text);\n        // Include bold and fontSize styles if present.\n        if (bold || fontSize)\n            return `<span style=\"${fontSize}${bold}\">${str}</span>`;\n        // return escaped string if no formatting\n        return str;\n    }\n\n    function setValueMeasurementLabelCallout(label, calloutValue) {\n        // If the calloutValue is just a string, then set it as text.\n        if (typeof calloutValue === 'string') {\n            setValueMeasurementLabelText(label, calloutValue);\n            return;\n        }\n\n        var div = label.querySelector('.measure-length-text');\n        if (div) {\n            // construct and set the html for the callout.\n            if (!Array.isArray(calloutValue))\n                div.innerHTML = createSpan(calloutValue);\n            else\n                div.innerHTML = calloutValue.map(createSpan).join('');\n        }\n    }\n\n    // Receives an object created with createMeasurementLabel()\n    function setDeltaMeasurementLabelText(label, strValue) {\n        if (!label) return;\n        var div = label.querySelector('.measure-delta-text');\n        div && (div.textContent = strValue);\n    }\n\n    // Receives an object created with createMeasurementLabel()\n    function setVisibilityMeasurementLabelSpinner(label, isVisible, topologyStatus) {\n        if (!label) return;\n        var div = label.querySelector('.measure-fetching-topology');\n        div && (div.style.display =\n            (isVisible && topologyStatus === TOPOLOGY_FETCHING) ? 'inline-block' : 'none');\n    }\n\n    /**\n     * Helper function that creates the label used for (1) and (2),\n     * which are the 2 mouse clicks for the measurement.\n     */\n    proto.createSnapResultLabel = function(pointNumber) {\n        const _document = this.getDocument();\n\n        var label = _document.createElement('div');\n        label.className = 'measure-label';\n        label.id = 'measure-label';\n\n        var label_icon = _document.createElement('div');\n        label_icon.className = 'measure-label-icon';\n        label.appendChild(label_icon);\n\n        if (av.isTouchDevice()) {\n            this.initLabelMobileGestures(label, pointNumber, this.measureTool);\n            var hitArea = _document.createElement('div');\n            hitArea.className = 'measure-label-hit-area';\n            label.appendChild(hitArea);\n        }\n\n        if (!av.isMobileDevice()) {\n            this.initMouseEvent(label, pointNumber);\n\n            label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            MeasureCommon.safeToggle(label, 'enable-hover', true);\n        }\n\n\n        label.causeStacking = false;\n\n        return label;\n    };\n\n    proto.showAngleLabel = function(midPoint) {\n\n            var label = this.angleLabel.label;\n\n            if (!label) {\n                label = this.angleLabel.label = this.createMeasurementLabel();\n                this.viewer.container.appendChild(label);\n                this._addEventListener(label);\n            }\n\n            this.updateAngle();\n            this.showLabel(label);\n\n            this.angleLabel.p1 = midPoint.clone();\n            this.angleLabel.p2 = midPoint.clone();\n\n    };\n\n    proto.showArcLabel  = function(midPoint) {\n\n        var label = this.arcLabel.label;\n\n        if (!label) {\n            this.arcLabel.label = label = this.createArcLabel();\n        }\n        else {\n            this.hideLabel(label);\n        }\n        this.updateArcLength();\n        this.showLabel(label);\n\n        this.arcLabel.p1 = midPoint.clone();\n        this.arcLabel.p2 = midPoint.clone();\n\n    };\n\n    proto.showSpotLabel = function(p) {\n\n        var label = this.spotLabel.label;\n\n        if (!label) {\n            label = this.spotLabel.label = this.createMeasurementLabel();\n            label.id = 'measurement-spot-label';\n            label.style.whiteSpace = 'pre-line';\n            label.style.height = 'auto';\n            label.style.textAlign = 'start';\n            label.querySelector('.measure-delta-text').style.display = 'none';\n            this.viewer.container.appendChild(label);\n            this._addEventListener(label);\n        }\n\n        this.updateSpot();\n        this.showLabel(label);\n\n        this.spotLabel.p = p.clone();\n    };\n\n    proto.showCalloutLabel = function(p) {\n\n        var label = this.calloutLabel.label;\n\n        if (!label) {\n            label = this.calloutLabel.label = this.createMeasurementLabel();\n            label.style.whiteSpace = 'pre-line';\n            label.style.height = 'auto';\n            label.style.textAlign = 'start';\n            if (this.measurement.options && this.measurement.options.width)\n                label.style.width = this.measurement.options.width + 'px';\n            label.querySelector('.measure-delta-text').style.display = 'none';\n            this.viewer.container.appendChild(label);\n            label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            label.addEventListener('mouseover', this.onMeasurementHoveredBinded);\n            //label.addEventListener('click', this.onSelectionAreaClickedBinded);\n        }\n\n        this.updateCallout();\n        this.showLabel(label);\n\n        this.calloutLabel.p = p.clone();\n\n    };\n\n    proto.showAreaLabel = function(midPoint) {\n\n        var label = this.areaLabel.label;\n\n        if (!label) {\n            label = this.areaLabel.label = this.createMeasurementLabel();\n            this.viewer.container.appendChild(label);\n            this._addEventListener(label);\n        }\n\n        this.updateArea();\n        this.showLabel(label);\n\n        this.areaLabel.p1 = midPoint;\n        this.areaLabel.p2 = midPoint;\n\n    };\n\n    proto.onMeasurementHovered = function() {\n        this.measureTool.hoverMeasurementById(this.measurement.id);\n    };\n\n    proto.onSelectionAreaClicked = function() {\n        this.viewer.dispatchEvent({ type: MeasureCommon.Events.SELECT_MEASUREMENT, data: { id: this.measurement.id }});\n        this.measureTool.selectMeasurementById(this.measurement.id);\n    };\n\n    proto.createSelectionArea = function() {\n        const _document = this.getDocument();\n        var selectionArea = _document.createElement('div');\n        selectionArea.id = 'measurement-selection-area-' + this.measurement.id;\n        this.viewer.container.appendChild(selectionArea);\n        selectionArea.className = 'measure-selection-area';\n        selectionArea.style.display = 'none';\n        this._addEventListener(selectionArea);\n        return selectionArea;\n    };\n\n    proto.updateSelectionArea = function() {\n\n        this.segments.forEach(function(item)\n        {\n            if (item.p1 && item.p2) {\n                var p1 = MeasureCommon.project(item.p1, this.viewer);\n                var p2 = MeasureCommon.project(item.p2, this.viewer);\n\n                if (!item.selectionArea) {\n                    item.selectionArea = this.createSelectionArea();\n                }\n\n                var selectionArea = item.selectionArea;\n\n                var v = new THREE.Vector2();\n\n                selectionArea.style.top = (p1.y - (_selectorAreaSize / 2)) + 'px';\n                selectionArea.style.left = p1.x  + 'px';\n                selectionArea.style.width = v.subVectors(p1, p2).length() + 'px';\n                selectionArea.style.height = _selectorAreaSize + 'px';\n\n                if (this.measurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_SPOT) {\n                    selectionArea.style.left = (p1.x + (_selectorAreaSize / 2)) + 'px';\n                    selectionArea.style.width = _selectorAreaSize + 'px';\n                }\n\n                var angle = null;\n                var deltaX = p1.x - p2.x;\n                var deltaY = p1.y - p2.y;\n\n                angle =  Math.atan2(-deltaY , -deltaX) * 180 / Math.PI;\n\n                selectionArea.style.transform = 'rotate('+ angle +'deg)';\n                selectionArea.style.transformOrigin = '0px ' + (_selectorAreaSize / 2) + 'px';\n            }\n        }.bind(this));\n\n        if (this.measureTool.areAllPicksSet()) {\n            this.enableSelectionAreas(true);\n        }\n    };\n\n    proto.clearSelectionAreas = function() {\n        const _document = this.getDocument();\n        this.segments.forEach(function(item)\n        {\n            if (item.selectionArea) {\n                this._removeEventListener(item.selectionArea);\n                var element = _document.getElementById('measurement-selection-area-' + this.measurement.id);\n                if (element) {\n                    element.parentNode.removeChild(element);\n                }\n                item.selectionArea = null;\n            }\n        }.bind(this));\n    };\n\n    proto.enableSelectionAreas = function(enable) {\n        this.segments.forEach(function(item)\n        {\n            if (item.selectionArea) {\n                if (enable) {\n                    item.selectionArea.style.display = 'block';\n                }\n                else {\n                    item.selectionArea.style.display = 'none';\n                }\n            }\n        }.bind(this));\n    };\n\n    proto.render = function(picks, showMeasureResult) {\n        Indicator.prototype.render.call(this, picks, showMeasureResult);\n\n        this.updateSelectionArea();\n    };\n\n    proto.renderFromPoints = function(pointData, showMeasureResult) {\n        Indicator.prototype.renderFromPoints.call(this, pointData, showMeasureResult);\n\n        this.updateSelectionArea();\n    };\n\n    proto.onCameraChange = function() {\n        this.redrawDashedLines();\n        this.updateSelectionArea();\n        this.hideLabelsOutsideOfView();\n        this.updateLabelsPosition();\n    };\n\n    proto.handleResize = function() {\n        this.redrawDashedLines();\n        this.updateSelectionArea();\n        this.updateLabelsPosition();\n    };\n\n","    \"use strict\";\n    /**\n     * Fired when the ESC key is pressed.\n     * @event Autodesk.Viewing#ESCAPE_EVENT\n     */\n    export const ESCAPE_EVENT                   = 'escape';\n    /**\n     * Fired repeatedly throughout the process of opening a model/drawing.\n     * @event Autodesk.Viewing#PROGRESS_UPDATE_EVENT\n     * @property {number} percent - Estimated progress.\n     * @property {number} state - Value from Autodesk.Viewing.ProgressState, providing details on the progress state.\n     * @property {object} model - Model being loaded.\n     */\n    export const PROGRESS_UPDATE_EVENT          = 'progress';\n    /**\n     * Fired when the screen mode changes.\n     * @event Autodesk.Viewing#FULLSCREEN_MODE_EVENT\n     * @property {Autodesk.Viewing.ScreenMode} mode - New screen mode.\n     */\n    export const FULLSCREEN_MODE_EVENT          = 'fullScreenMode';\n    /**\n     * Fired then the navigation tool changes.\n     * @event Autodesk.Viewing#NAVIGATION_MODE_CHANGED_EVENT\n     * @property {string} id - Tool identifier.\n     */\n    export const NAVIGATION_MODE_CHANGED_EVENT  = 'navmode';\n    /**\n     * Fired when the viewer state is restored.\n     * @event Autodesk.Viewing#VIEWER_STATE_RESTORED_EVENT\n     * @property {boolean} value - Success of the state restoration.\n     */\n    export const VIEWER_STATE_RESTORED_EVENT    = 'viewerStateRestored';\n    /**\n     * Fired when the viewer size changes.\n     * @event Autodesk.Viewing#VIEWER_RESIZE_EVENT\n     * @property {number} width - New width of the viewer.\n     * @property {number} height - New height of the viewer.\n     */\n    export const VIEWER_RESIZE_EVENT            = 'viewerResize';\n    /**\n     * Fired when the viewer is fully initialized.\n     * @event Autodesk.Viewing#VIEWER_INITIALIZED\n     */\n    export const VIEWER_INITIALIZED             = 'viewerInitialized';\n    /**\n     * Fired when the viewer is fully uninitialized.\n     * @event Autodesk.Viewing#VIEWER_UNINITIALIZED\n     */\n    export const VIEWER_UNINITIALIZED           = 'viewerUninitialized';\n\n    /**\n     * Fired when the viewer begins loading a model, before the\n     * Model instance gets created.\n     *\n     * @event Autodesk.Viewing#LOADER_LOAD_FILE_EVENT\n     * @property {object} loader - Instance of the Loader class\n     */\n    export const LOADER_LOAD_FILE_EVENT = 'loaderLoadFile';\n\n    /**\n     * Fired when an error is detected during a load.\n     *\n     * @event Autodesk.Viewing#LOADER_LOAD_ERROR_EVENT\n     * @property {object} loader - Instance of the Loader class\n     * @property {object} error - The error reported by the loader.\n     */\n    export const LOADER_LOAD_ERROR_EVENT = 'loaderLoadError';\n\n    /**\n     * Fired when a loader thinks its time to repaint the model while loading\n     *\n     * @event Autodesk.Viewing#LOADER_REPAINT_REQUEST_EVENT\n     * @property {Object} loader - Instance of the Loader class\n     * @property {Model} model - Loaded model\n     */\n    export const LOADER_REPAINT_REQUEST_EVENT = 'loaderRepaint';\n\n    /**\n     * Fired when the viewer receives and parses the initial model manifest.\n     * @event Autodesk.Viewing#MODEL_ROOT_LOADED_EVENT\n     * @property {object} svf - Parsed SVF/F2D JSON.\n     * @property {object} model - Model data.\n     */\n    export const MODEL_ROOT_LOADED_EVENT        = 'svfLoaded';\n\n    /**\n     * Fired when the model/drawing finishes loading.\n     * @event Autodesk.Viewing#GEOMETRY_LOADED_EVENT\n     * @property {object} model - Model data.\n     */\n    export const GEOMETRY_LOADED_EVENT          = 'geometryLoaded';\n\n     /**\n     * Fired when the model/drawing textures finish loading.\n     * @event Autodesk.Viewing#TEXTURES_LOADED_EVENT\n     * @property {object} model - Model data.\n     */\n    export const TEXTURES_LOADED_EVENT          = 'texturesLoaded';\n    /**\n     * Fired when the instance tree is successfully created.\n     * @event Autodesk.Viewing#OBJECT_TREE_CREATED_EVENT\n     * @property {object} svf - Parsed SVF/F2D JSON.\n     * @property {object} model - Model data.\n     */\n    export const OBJECT_TREE_CREATED_EVENT      = 'propertyDbLoaded';\n    /**\n     * Fired when there's an error while parsing the instance tree.\n     * @event Autodesk.Viewing#OBJECT_TREE_UNAVAILABLE_EVENT\n     * @property {object} svf - Parsed SVF/F2D JSON.\n     * @property {object} model - Model data.\n     */\n    export const OBJECT_TREE_UNAVAILABLE_EVENT  = 'propertyDbUnavailable';\n    /**\n     * Fired when there's a progress event during propertyDB loading.\n     * @event Autodesk.Viewing#OBJECT_TREE_LOAD_PROGRESS_EVENT\n     * @property {object} svf - Parsed SVF/F2D JSON.\n     * @property {object} model - Model data.\n     */\n    export const OBJECT_TREE_LOAD_PROGRESS_EVENT  = 'propertyDbLoadProgress';\n\n    /**\n     * Fired when a model is removed from the viewer.\n     * Note that this event fires _after_ destructor. If\n     * you need to access the model, e.g. via model.getData(), use\n     * BEFORE_MODEL_UNLOADED instead.\n     * @event Autodesk.Viewing#MODEL_UNLOADED_EVENT\n     * @property {object} model - Model data (after disposing data)\n     */\n    export const MODEL_UNLOADED_EVENT           = 'modelUnloaded';\n\n    /**\n     * Fired if a model unload is about to happen, but the model is still fully available.\n     * @event Autodesk.Viewing#BEFORE_MODEL_UNLOAD_EVENT\n     * @property {object} model - Model data.\n     */\n    export const BEFORE_MODEL_UNLOAD_EVENT = 'beforeModelUnload';\n\n    /**\n     * Fired when a model is added to model queue so as to be visible.\n     * @event Autodesk.Viewing#MODEL_ADDED_EVENT\n     * @property {object} model - Model data.\n     */\n    export const MODEL_ADDED_EVENT              = 'modelAdded';\n\n    /**\n     * Fired when a model is removed from model queue, i.e. changed to invisible.\n     * @event Autodesk.Viewing#MODEL_REMOVED_EVENT\n     * @property {object} model - Model data.\n     */\n    export const MODEL_REMOVED_EVENT            = 'modelRemoved';\n\n    /**\n     * Fired when the layers of the model are successfully loaded.\n     * @event Autodesk.Viewing#MODEL_LAYERS_LOADED_EVENT\n     * @property {object} root - Model layers root.\n     * @property {object} model - Model data.\n     */\n    export const MODEL_LAYERS_LOADED_EVENT = 'modelLayersLoaded';\n\n    /**\n     * Fired a when model transform matrix has been changed. This usually happens if either placement or globalOffset\n     * has changed for a model.\n     * @event Autodesk.Viewing#MODEL_TRANSFORM_CHANGED_EVENT\n     * @property {object} model - Model data.\n     * @property {object} matrix - Transform matrix.\n     */\n    export const MODEL_TRANSFORM_CHANGED_EVENT = 'modelTransformChanged';\n\n    /**\n     * Fired if placementTransform was changed.\n     */\n    export const MODEL_PLACEMENT_CHANGED_EVENT = 'placementTransformChanged';\n\n    /**\n     * Fired if viewportBounds was changed.\n     */\n    export const MODEL_VIEWPORT_BOUNDS_CHANGED_EVENT = 'viewportBoundsChanged';\n\n    /**\n     * Fired if fragment bounding boxes are explicitly set on the model.\n     */\n     export const MODEL_FRAGMENT_BOUNDING_BOXES_SET_EVENT = 'fragmentBoundingBoxesSet';\n\n    /**\n     * Fired if a new traversal controller is added to the model.\n     */\n     export const MODEL_TRAVERSAL_CONTROLLER_ADDED = 'traversalControllerAdded';\n\n    /**\n     * Fired before a viewer extension is loaded.\n     * @event Autodesk.Viewing#EXTENSION_PRE_LOADED_EVENT\n     * @property {string} extensionId - Extension identifier.\n     */\n    export const EXTENSION_PRE_LOADED_EVENT    = 'extensionPreLoaded';\n    /**\n     * Fired when a viewer extension is successfully loaded.\n     * @event Autodesk.Viewing#EXTENSION_LOADED_EVENT\n     * @property {string} extensionId - Extension identifier.\n     */\n    export const EXTENSION_LOADED_EVENT         = 'extensionLoaded';\n    /**\n     * Fired before a viewer extension is unloaded.\n     * @event Autodesk.Viewing#EXTENSION_PRE_UNLOADED_EVENT\n     * @property {string} extensionId - Extension identifier.\n     */\n    export const EXTENSION_PRE_UNLOADED_EVENT    = 'extensionPreUnloaded';\n    /**\n     * Fired when a viewer extension is successfully unloaded.\n     * @event Autodesk.Viewing#EXTENSION_UNLOADED_EVENT\n     * @property {string} extensionId - Extension identifier.\n     */\n    export const EXTENSION_UNLOADED_EVENT       = 'extensionUnloaded';\n    /**\n     * Fired before a viewer extension is activated.\n     * @event Autodesk.Viewing#EXTENSION_PRE_ACTIVATED_EVENT\n     * @property {string} extensionId - Extension identifier.\n     * @property {string} mode - Activated mode.\n     */\n    export const EXTENSION_PRE_ACTIVATED_EVENT      = 'extensionPreActivated';\n    /**\n     * Fired after a viewer extension is activated.\n     * @event Autodesk.Viewing#EXTENSION_ACTIVATED_EVENT\n     * @property {string} extensionId - Extension identifier.\n     * @property {string} mode - Activated mode.\n     */\n    export const EXTENSION_ACTIVATED_EVENT      = 'extensionActivated';\n    /**\n     * Fired before a viewer extension is deactivated.\n     * @event Autodesk.Viewing#EXTENSION_PRE_DEACTIVATED_EVENT\n     * @property {string} extensionId - Extension identifier.\n     */\n    export const EXTENSION_PRE_DEACTIVATED_EVENT      = 'extensionPreDeactivated';\n    /**\n     * Fired after a viewer extension is deactivated.\n     * @event Autodesk.Viewing#EXTENSION_DEACTIVATED_EVENT\n     * @property {string} extensionId - Extension identifier.\n     */\n    export const EXTENSION_DEACTIVATED_EVENT      = 'extensionDeactivated';\n    /**\n     * Fired when the list of selected objects changes.\n     * @event Autodesk.Viewing#SELECTION_CHANGED_EVENT\n     * @property {number[]} fragIdsArray - Fragment IDs of selected objects.\n     * @property {number[]} dbIdArray - dbIDs of selected objects.\n     * @property {number[]} nodeArray - Same as dbIdArray.\n     * @property {object} model - Model data.\n     */\n    export const SELECTION_CHANGED_EVENT     = 'selection';\n    /**\n     * Fired when the list of selected objects changes in a multi-model context.\n     * @event Autodesk.Viewing#AGGREGATE_SELECTION_CHANGED_EVENT\n     * @property {object[]} selections - List of objects containing the typical selection properties\n     *   of {@link Autodesk.Viewing#SELECTION_CHANGED_EVENT} for each model.\n     */\n    export const AGGREGATE_SELECTION_CHANGED_EVENT = 'aggregateSelection';\n    /**\n     * Fired when the viewer isolates a set of objects (i.e., makes everything else invisible or ghosted).\n     * @event Autodesk.Viewing#ISOLATE_EVENT\n     * @property {number[]} nodeIdArray - List of isolated node IDs.\n     * @property {object} model - Model data.\n     */\n    export const ISOLATE_EVENT               = 'isolate';\n    /**\n     * Fired when the list of isolated objects changes in a multi-model context.\n     * @event Autodesk.Viewing#AGGREGATE_ISOLATION_CHANGED_EVENT\n     * @property {object[]} isolation - List of objects containing the typical selection properties\n     *   of {@link Autodesk.Viewing#ISOLATE_EVENT} for each model.\n     */\n    export const AGGREGATE_ISOLATION_CHANGED_EVENT = 'aggregateIsolation';\n    /**\n     * Fired when the viewer hides a set of objects.\n     * @event Autodesk.Viewing#HIDE_EVENT\n     * @property {number[]} nodeIdArray - List of hidden node IDs.\n     * @property {object} model - Model data.\n     */\n    export const HIDE_EVENT                  = 'hide';\n    /**\n     * Fired when the list of hidden objects changes in a multi-model context.\n     * @event Autodesk.Viewing#AGGREGATE_HIDDEN_CHANGED_EVENT\n     * @property {object[]} hidden - List of objects containing the typical selection properties\n     *   of {@link Autodesk.Viewing#HIDE_EVENT} for each model.\n     */\n    export const AGGREGATE_HIDDEN_CHANGED_EVENT = 'aggregateHidden';\n\n    /**\n     * Fired when the viewer shows a set of objects.\n     * @event Autodesk.Viewing#SHOW_EVENT\n     * @property {number[]} nodeIdArray - List of shown node IDs.\n     * @property {object} model - Model data.\n     */\n    export const SHOW_EVENT                  = 'show';\n\n    /**\n     * Fired to show the properties of the object.\n     * @event Autodesk.Viewing#SHOW_PROPERTIES_EVENT\n     * @property {number} dbId - dbId of the object.\n     * @property {object} model - Model data.\n     */\n    export const SHOW_PROPERTIES_EVENT       = 'showProperties';\n\n    /**\n     * Fired whenever `viewer.showAll()` is used.\n     *\n     * @event Autodesk.Viewing#SHOW_ALL_EVENT\n     */\n    export const SHOW_ALL_EVENT                  = 'showAll';\n\n     /**\n     * Fired whenever `viewer.hideAll()` is used.\n     *\n     * @event Autodesk.Viewing#HIDE_ALL_EVENT\n     */\n    export const HIDE_ALL_EVENT                  = 'hideAll';\n\n    /**\n     * Fired when a camera changes.\n     * @event Autodesk.Viewing#CAMERA_CHANGE_EVENT\n     * @property {object} camera - Affected camera.\n     */\n    export const CAMERA_CHANGE_EVENT         = 'cameraChanged';\n    /**\n     * Fired whenever the Explode tool is used.\n     * @event Autodesk.Viewing#EXPLODE_CHANGE_EVENT\n     * @property {number} scale - Scale of the current exploded state.\n     * @property {object} options - Optional values of the current exploded state.\n     */\n    export const EXPLODE_CHANGE_EVENT        = 'explodeChanged';\n    /**\n     * Fired when a ``fitToView`` operation is applied.\n     * @event Autodesk.Viewing#FIT_TO_VIEW_EVENT\n     * @property {boolean} immediate - True if the change was immediate.\n     * @property {number[]} nodeIdArray - List of node IDs fitted. Array is empty when fitting to the whole model.\n     * @property {object} model - Model data.\n     */\n    export const FIT_TO_VIEW_EVENT           = 'fitToView';\n    /**\n     * Fired when ``fitToView`` operation is applied, supports multi-model contexts.\n     * @event Autodesk.Viewing#AGGREGATE_FIT_TO_VIEW_EVENT\n     * @property {object[]} selection - List of objects each containing a ``model`` instance and a ``selection`` array of ids.\n     */\n    export const AGGREGATE_FIT_TO_VIEW_EVENT = 'aggregateFitToView';\n    /**\n     * Fired when the cutting planes change.\n     * @event Autodesk.Viewing#CUTPLANES_CHANGE_EVENT\n     * @property {object[]} planes - List of cutplanes.\n     */\n    export const CUTPLANES_CHANGE_EVENT      = 'cutplanesChanged';\n    /**\n     * Fired when a tool is activated or deactivated.\n     * @event Autodesk.Viewing#TOOL_CHANGE_EVENT\n     * @property {string} toolName - Name of a specific mode of a tool.\n     * @property {object} tool - Tool object.\n     * @property {boolean} active - Current status of the tool.\n     */\n    export const TOOL_CHANGE_EVENT           = 'toolChanged';\n    /**\n     * Fired when rendering options change.\n     * @event Autodesk.Viewing#RENDER_OPTION_CHANGED_EVENT\n     */\n    export const RENDER_OPTION_CHANGED_EVENT = 'renderOptionChanged';\n    /**\n     * Fired when the render frame shown by the Viewer is final or complete (it has\n     * no more pending geometry or post processing effects which delay incoming frames),\n     * or when the Viewer stops showing final frames. The name refers to when the\n     * state changes from busy to idle for the renderer, or vice versa. To know\n     * when all geometry is fully displayed, also check for GEOMETRY_LOADED_EVENT.\n     *\n     * @event Autodesk.Viewing#FINAL_FRAME_RENDERED_CHANGED_EVENT\n     * @property {boolean} finalFrame - final frame is displayed this tick.\n     */\n    export const FINAL_FRAME_RENDERED_CHANGED_EVENT = 'finalFrameRenderedChanged';\n    /**\n     * Fired when the render has presented to the screen.\n     * @event Autodesk.Viewing#RENDER_PRESENTED_EVENT\n     */\n    export const RENDER_PRESENTED_EVENT = 'renderPresented';\n    /**\n     * Fired when visibility of a 2D layer changes.\n     * @event Autodesk.Viewing#LAYER_VISIBILITY_CHANGED_EVENT\n     */\n    export const LAYER_VISIBILITY_CHANGED_EVENT  = 'layerVisibility';\n\n    /**\n     * Fired when a user preference property changes.\n     * @event Autodesk.Viewing#PREF_CHANGED_EVENT\n     * @property {string} name - Property name.\n     * @property {object} value - New property value.\n     */\n    export const PREF_CHANGED_EVENT = 'PrefChanged';\n    /**\n     * Fired when a user preference property is reset.\n     * @event Autodesk.Viewing#PREF_RESET_EVENT\n     * @property {string} name - Property name.\n     * @property {object} value - New property value.\n     */\n    export const PREF_RESET_EVENT = 'PrefReset';\n\n    /**\n     * Fired as a result of invoking `viewer.restoreDefaultSettings()` to restore default settings.\n     * Will get fired after all other Autodesk.Viewing.PREF_CHANGED_EVENT get fired.\n     * @event Autodesk.Viewing#RESTORE_DEFAULT_SETTINGS_EVENT\n     */\n    export const RESTORE_DEFAULT_SETTINGS_EVENT = 'restoreDefaultSettings';\n\n    /**\n     * Fired when animations are successfully initialized.\n     * @event Autodesk.Viewing#ANIMATION_READY_EVENT\n     */\n    export const ANIMATION_READY_EVENT = 'animationReady';\n\n    /**\n     * Fired whenever a camera transition is finished, such as Focus, Go to Home View,\n     * Restore State, restore Named Views, and others.\n     * @event Autodesk.Viewing#CAMERA_TRANSITION_COMPLETED\n     */\n    export const CAMERA_TRANSITION_COMPLETED = 'cameraTransitionCompleted';\n\n    /**\n     * Fired when user clicks on a hyperlink embedded in the model.\n     * @event Autodesk.Viewing#HYPERLINK_EVENT\n     * @property {object} data - Hyperlink data.\n     */\n    export const HYPERLINK_EVENT = 'hyperlink';\n\n    export const HYPERLINK_NAVIGATE = 'hyperlink_navigate';\n\n    export const LOAD_GEOMETRY_EVENT = 'load_geometry';\n\n     /**\n     * Fired when something in the view changes that may expose missing geometry.\n     * @event Autodesk.Viewing#LOAD_MISSING_GEOMETRY\n     * @property {boolean} [delay] - A flag used to aggregate multiple events during user interactions.\n     *                               Defaults to true.\n     */\n    export const LOAD_MISSING_GEOMETRY           = 'loadMissingGeometry';\n\n    /**\n     * Fired when the drawing buffer associated with a WebGLRenderingContext object has been lost\n     *\n     * @event Autodesk.Viewing#WEBGL_CONTEXT_LOST_EVENT\n     */\n    export const WEBGL_CONTEXT_LOST_EVENT  = 'webglcontextlost';\n\n    /**\n     * Fired when the WebGLRenderingContext was restored\n     *\n     * @event Autodesk.Viewing#WEBGL_CONTEXT_RESTORED_EVENT\n     */\n    export const WEBGL_CONTEXT_RESTORED_EVENT  = 'webglcontextrestored';\n\n    /**\n     * Fired when a leaflet screenshot needs to be canceled before downloading all required / pending tiles.\n     *\n     * @event Autodesk.Viewing#CANCEL_LEAFLET_SCREENSHOT\n     */\n    export const CANCEL_LEAFLET_SCREENSHOT  = 'cancelLeafletScreenshot';\n\n\n    /**\n     * Fired after a successful call into {Autodesk.Viewing.Viewer3D#setView}.\n     *\n     * @event Autodesk.Viewing#SET_VIEW_EVENT\n     * @property {Autodesk.Viewing.BubbleNode} view - The view object that was applied.\n     */\n    export const SET_VIEW_EVENT  = 'setView';\n\n\n    /**\n     * Fired when the first pixel of the model is ready to be rendered.\n     *\n     * @event Autodesk.Viewing#RENDER_FIRST_PIXEL\n     */\n    export const RENDER_FIRST_PIXEL = 'renderFirstPixel';\n\n    /**\n     * Fired when new geometry has been added to the scene\n     *\n     * @event Autodesk.Viewing#NEW_GEOMETRY_ADDED\n     */\n    export const NEW_GEOMETRY_ADDED = 'newGeometryAdded';\n\n    /**\n     * Fired when a new material has been added to the scene\n     *\n     * @event Autodesk.Viewing#NEW_MATERIAL_ADDED\n     */\n    export const NEW_MATERIAL_ADDED = 'newMaterialAdded';\n    /**\n     * Fired when a profile is added to the viewer.profileManager\n     * @event Autodesk.Viewing#PROFILE_CHANGE_EVENT\n     */\n    export const PROFILE_CHANGE_EVENT = 'profileChanged';\n\n    /**\n     * Fired when a scene part is about to be rendered\n     * @event Autodesk.Viewing#PROFILE_CHANGE_EVENT\n     */\n    export const RENDER_SCENE_PART = 'renderScenePart';\n\n    /**\n     * Fired when object under mouse changed.\n     * @event Autodesk.Viewing#OBJECT_UNDER_MOUSE_CHANGED\n     */\n    export const OBJECT_UNDER_MOUSE_CHANGED = 'hoverObjectChanged';\n\n    /**\n     * Fired when AnimController calls Autodesk.Viewing.Private.fadeValue\n     * @event Autodesk.Viewing#ANIM_ENDED\n     */\n    export const ANIM_ENDED = 'animEnded';\n\n    /** Fired when transition started\n     * @event Autodesk.Viewing#TRANSITION_STARTED\n     * @property {object} sceneAnimState // scene state of transition\n     */\n    export const TRANSITION_STARTED = 'transitionStarted';\n\n    /** Fired when transition ended\n     * @event Autodesk.Viewing#TRANSITION_ENDED\n     * @property {object} sceneAnimState // scene state of transition, this will be null for models that do not have any clusters or animations\n     */\n    export const TRANSITION_ENDED = 'transitionEnded';\n\n    /**\n     * Fired when fragments are loaded after the initial model load.\n     * @event Autodesk.Viewing#FRAGMENTS_LOADED_EVENT\n     * @property {object} model - Model data.\n     */\n    export const FRAGMENTS_LOADED_EVENT      = 'fragmentsLoaded';\n\n    /**\n     * Fired when fragments are unloaded.\n     * @event Autodesk.Viewing#FRAGMENTS_UNLOADED_EVENT\n     * @property {object} model - Model data.\n     */\n    export const FRAGMENTS_UNLOADED_EVENT   = 'fragmentsUnloaded';\n\n    /**\n     * Fired when scene is updated\n     * @event Autodesk.Viewing#SCENE_UPDATED_EVENT\n     * @property {object} model - Model data.\n     */\n    export const SCENE_UPDATED_EVENT   = 'sceneUpdated';\n\n    /**\n     * Fired when the viewer triggers a refresh of the custom properties/attributes from PropertyDb.\n     * @event Autodesk.Viewing#REFRESH_CUSTOM_PROPERTIES\n     * @property {object} model - Model data.\n     */\n    export const REFRESH_CUSTOM_PROPERTIES = 'refreshCustomProperties';\n\n\n    /**\n     * Event for new custom properties/attributes value from PropertyDb.\n     * @event Autodesk.Viewing#REFRESH_CUSTOM_PROPERTIES_VALUES\n     * @property {object} model - Model data.\n     */\n    export const REFRESH_CUSTOM_PROPERTIES_VALUES = 'refreshCustomPropertiesValues';\n\n    /**\n     * Fired when the viewers visibility has changed (i.e. a viewer window\n     * got shown or hidden).\n     *\n     * NOTE: This event relies on the checkVisibility method being available on DOM elements in the browser.\n     *       If this feature is missing, the event will not be fired.\n     *       This should be the case in all up-to-date browsers. Most browsers have added it in 2022,\n     *       but Safari only at the beginning of 2024.\n     *\n     * @event Autodesk.Viewing#VIEWER_VISIBILITY_CHANGED\n     * @property {boolean} visible - True if the viewer is visible, false otherwise.\n     */\n    export const VIEWER_VISIBILITY_CHANGED = 'viewerVisibilityChanged';\n","const __WEBPACK_NAMESPACE_OBJECT__ = THREE;","\n/**\n * An enumeration of supported snapping types.\n *\n * @enum {number}\n * @memberof Autodesk.Viewing.MeasureCommon\n * @alias Autodesk.Viewing.MeasureCommon.SnapType\n *\n */\nexport var SnapType = {\n    SNAP_VERTEX: 0,\n    SNAP_MIDPOINT: 1,\n    SNAP_CIRCLE_CENTER: 2,\n    SNAP_EDGE: 3,\n    SNAP_FACE: 4,\n    SNAP_CIRCULARARC: 5,\n    SNAP_CURVEDEDGE: 6,\n    SNAP_CURVEDFACE: 7,\n    RASTER_PIXEL: 8,\n    SNAP_INTERSECTION: 9\n};\n","\nimport { SnapType } from \"./SnapTypes\";\n\n/**\n * Encapsulates the result of a Snap operation performed by the {@link Snapper}.\n *\n * @memberof Autodesk.Viewing.MeasureCommon\n * @alias Autodesk.Viewing.MeasureCommon.SnapResult\n *\n * @class\n * @class\n */\nexport function SnapResult() {\n    this.clear();\n}\n\n/**\n * Resets the object to its non-snapping state.\n *\n * @alias Autodesk.Viewing.MeasureCommon.SnapResult#clear\n */\nSnapResult.prototype.clear = function() {\n\n    this.geomType = null;    // int, such as { \"NONE: -1\", \"VERTEX\": 0, \"EDGE\": 1, \"FACE\": 2, ... }\n    this.modelId = null;               // string, model's internal id. null when snapping to overlay geometry.\n    this.fragId = null;                // Id of the fragment\n    this.fragPos = null;\n    this.snapNode = null;              // int, the dbId\n    this.geomVertex = null;            // THREE.Vector3\n    this.geomEdge = null;              // THREE.Geometry\n    this.geomFace = null;              // THREE.Geometry\n    this.radius = null;                // Number\n    this.intersectPoint = null;        // THREE.Vector3\n    this.faceNormal = null;            // THREE.Vector3\n    this.viewportIndex2d = null;       // int\n    this.circularArcCenter = null;\n    this.circularArcRadius = null;\n    this.fromTopology = false;\n    this.isPerpendicular = false;\n    this.snapPoint = null;\n};\n\n/**\n * Copies the current state of the object into another.\n *\n * @param {SnapResult} destiny - target for the copy operation.\n *\n * @alias Autodesk.Viewing.MeasureCommon.SnapResult#copyTo\n */\nSnapResult.prototype.copyTo = function(destiny) {\n    // Shallow copies of THREE objects should be fine.\n    destiny.modelId = this.modelId;\n    destiny.fragId = this.fragId;\n    destiny.fragPos = this.fragPos;\n    destiny.snapNode = this.snapNode;\n    destiny.geomVertex = this.geomVertex;\n    destiny.geomFace = this.geomFace;\n    destiny.geomEdge = this.geomEdge;\n    destiny.radius = this.radius;\n    destiny.geomType = this.geomType;\n    destiny.intersectPoint = this.intersectPoint;\n    destiny.faceNormal = this.faceNormal;\n    destiny.viewportIndex2d = this.viewportIndex2d;\n    destiny.circularArcCenter = this.circularArcCenter;\n    destiny.circularArcRadius = this.circularArcRadius;\n    destiny.fromTopology = this.fromTopology;\n    destiny.isPerpendicular = this.isPerpendicular;\n    destiny.snapPoint = this.snapPoint;\n};\n\n/**\n * Creates a new instance and copies the current state into it.\n *\n * @returns {SnapResult}\n *\n * @alias Autodesk.Viewing.MeasureCommon.SnapResult#clone\n */\nSnapResult.prototype.clone = function() {\n    var theClone = new SnapResult();\n    this.copyTo(theClone);\n    return theClone;\n};\n\n/**\n * @returns {boolean} true only when snapping information is available.\n *\n * @alias Autodesk.Viewing.MeasureCommon.SnapResult#isEmpty\n */\nSnapResult.prototype.isEmpty = function() {\n    return !this.getGeometry();\n};\n\nlet tmpMatrix = null;\nlet tmpVec1 = null;\nlet tmpVec2 = null;\n\n// Note that we assume here that matrix preserves spheres. Otherwise, transforming lengths is not possible\nconst transformRadius = (radius, matrix) => {\n    tmpVec1 = tmpVec1 || new THREE.Vector3();\n    tmpVec2 = tmpVec2 || new THREE.Vector3();\n\n    tmpVec1.set(0,0,0);\n    tmpVec2.set(radius,0,0);\n\n    // transform both vectors\n    tmpVec1.applyMatrix4(matrix);\n    tmpVec2.applyMatrix4(matrix);\n\n    return tmpVec1.distanceTo(tmpVec2);\n};\n\n// Transform SnapResult to another coordinate system.\n//\n// Note that we assume matrix to preserve spheres, which works for a composition of translation, uniform scaling, and rotation.\nSnapResult.prototype.applyMatrix4 = function(matrix) {\n\n    // transform THREE.Geometry\n    this.geomEdge && this.geomEdge.applyMatrix4(matrix);\n    this.geomFace && this.geomFace.applyMatrix4(matrix);\n\n    // transform points (Vector3)\n    this.geomVertex && this.geomVertex.applyMatrix4(matrix);\n    this.intersectPoint && this.intersectPoint.applyMatrix4(matrix);\n    this.circularArcCenter && this.circularArcCenter.applyMatrix4(matrix);\n    this.snapPoint && this.snapPoint.applyMatrix4(matrix);\n\n    // transform normal\n    if (this.faceNormal) {\n        tmpMatrix = tmpMatrix || new THREE.Matrix4();\n        const normalMatrix = tmpMatrix.getNormalMatrix(matrix);\n        this.faceNormal.applyMatrix4(normalMatrix);\n    }\n\n    // Transform radii\n    this.radius = transformRadius(this.radius, matrix);\n    this.circularArcRadius = transformRadius(this.circularArcRadius, matrix);\n};\n\n/**\n * Gets the snapped face, when available.\n *\n * @alias Autodesk.Viewing.MeasureCommon.SnapResult#getFace\n */\nSnapResult.prototype.getFace = function() {\n    return this.geomFace;\n};\n\n/**\n * Gets the snapped edge, when available.\n *\n * @alias Autodesk.Viewing.MeasureCommon.SnapResult#getEdge\n */\nSnapResult.prototype.getEdge = function() {\n    return this.geomEdge;\n};\n\n/**\n * Gets the snapped vertex, when available.\n *\n * @alias Autodesk.Viewing.MeasureCommon.SnapResult#getVertex\n */\nSnapResult.prototype.getVertex = function() {\n    return this.geomVertex;\n};\n\n/**\n * Gets the snapped element, which differs depending on what kind of\n * element it was snapped to, see {@link SnapType}.\n *\n * @alias Autodesk.Viewing.MeasureCommon.SnapResult#getGeometry\n */\nSnapResult.prototype.getGeometry = function() {\n\n    switch (this.geomType) {\n        case SnapType.SNAP_VERTEX: return this.geomVertex;\n        case SnapType.SNAP_MIDPOINT: return this.geomVertex;\n        case SnapType.SNAP_INTERSECTION: return this.geomVertex;\n        case SnapType.SNAP_CIRCLE_CENTER: return this.geomVertex;\n        case SnapType.RASTER_PIXEL: return this.geomVertex;\n        case SnapType.SNAP_EDGE: return this.geomEdge;\n        case SnapType.SNAP_FACE: return this.geomFace;\n        case SnapType.SNAP_CIRCULARARC: return this.geomEdge;\n        case SnapType.SNAP_CURVEDEDGE: return this.geomEdge;\n        case SnapType.SNAP_CURVEDFACE: return this.geomFace;\n        default: break;\n    }\n    return null;\n};\n\n/**\n * @param {SnapType} type\n * @param {THREE.Geometry|THREE.BufferGeometry} geometry\n * @private\n */\nSnapResult.prototype.setGeometry = function(type, geometry) {\n\n    switch (type) {\n        case SnapType.SNAP_VERTEX:          this.geomVertex = geometry; break;\n        case SnapType.SNAP_MIDPOINT:        this.geomVertex = geometry; break;\n        case SnapType.SNAP_INTERSECTION:    this.geomVertex = geometry; break;\n        case SnapType.SNAP_CIRCLE_CENTER:   this.geomVertex = geometry; break;\n        case SnapType.RASTER_PIXEL:         this.geomVertex = geometry; break;\n        case SnapType.SNAP_EDGE:            this.geomEdge = geometry; break;\n        case SnapType.SNAP_FACE:            this.geomFace = geometry; break;\n        case SnapType.SNAP_CIRCULARARC:     this.geomEdge = geometry; break;\n        case SnapType.SNAP_CURVEDEDGE:      this.geomEdge = geometry; break;\n        case SnapType.SNAP_CURVEDFACE:      this.geomFace = geometry; break;\n        default: return;\n    }\n    this.geomType = type;\n};\n\n","\n//TODO_TS: Rename this to singular\nexport var MeasurementTypes = {\n    MEASUREMENT_DISTANCE:  1, // Measurement from point to point, not matter what geometry it is.\n    MEASUREMENT_ANGLE: 2,\n    MEASUREMENT_AREA: 3,\n    CALIBRATION: 4,\n    MEASUREMENT_CALLOUT: 5,\n    MEASUREMENT_SPOT: 6,\n    MEASUREMENT_ARC: 7\n};\n\nexport var MeasurementTypesToAnalytics = {\n    [MeasurementTypes.MEASUREMENT_DISTANCE]: 'Distance',\n    [MeasurementTypes.MEASUREMENT_ANGLE]: 'Angle',\n    [MeasurementTypes.MEASUREMENT_AREA]: 'Area',\n    [MeasurementTypes.CALIBRATION]: 'Calibration',\n    [MeasurementTypes.MEASUREMENT_CALLOUT]: 'Callout',\n    [MeasurementTypes.MEASUREMENT_SPOT]: 'Spot',\n    [MeasurementTypes.MEASUREMENT_ARC]: 'Arc'\n};\n","export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}","import _typeof from \"./typeof.js\";\nexport default function toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? Object(arguments[i]) : {};\n    var ownKeys = Object.keys(source);\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys.push.apply(ownKeys, Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n  return target;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return assertThisInitialized(self);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import _typeof from '@babel/runtime/helpers/esm/typeof';\nimport _objectSpread from '@babel/runtime/helpers/esm/objectSpread';\nimport _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/esm/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/esm/getPrototypeOf';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inherits from '@babel/runtime/helpers/esm/inherits';\n\nvar consoleLogger = {\n  type: 'logger',\n  log: function log(args) {\n    this.output('log', args);\n  },\n  warn: function warn(args) {\n    this.output('warn', args);\n  },\n  error: function error(args) {\n    this.output('error', args);\n  },\n  output: function output(type, args) {\n    if (console && console[type]) console[type].apply(console, args);\n  }\n};\n\nvar Logger = function () {\n  function Logger(concreteLogger) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Logger);\n\n    this.init(concreteLogger, options);\n  }\n\n  _createClass(Logger, [{\n    key: \"init\",\n    value: function init(concreteLogger) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.prefix = options.prefix || 'i18next:';\n      this.logger = concreteLogger || consoleLogger;\n      this.options = options;\n      this.debug = options.debug;\n    }\n  }, {\n    key: \"setDebug\",\n    value: function setDebug(bool) {\n      this.debug = bool;\n    }\n  }, {\n    key: \"log\",\n    value: function log() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return this.forward(args, 'log', '', true);\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return this.forward(args, 'warn', '', true);\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      return this.forward(args, 'error', '');\n    }\n  }, {\n    key: \"deprecate\",\n    value: function deprecate() {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      return this.forward(args, 'warn', 'WARNING DEPRECATED: ', true);\n    }\n  }, {\n    key: \"forward\",\n    value: function forward(args, lvl, prefix, debugOnly) {\n      if (debugOnly && !this.debug) return null;\n      if (typeof args[0] === 'string') args[0] = \"\".concat(prefix).concat(this.prefix, \" \").concat(args[0]);\n      return this.logger[lvl](args);\n    }\n  }, {\n    key: \"create\",\n    value: function create(moduleName) {\n      return new Logger(this.logger, _objectSpread({}, {\n        prefix: \"\".concat(this.prefix, \":\").concat(moduleName, \":\")\n      }, this.options));\n    }\n  }]);\n\n  return Logger;\n}();\n\nvar baseLogger = new Logger();\n\nvar EventEmitter = function () {\n  function EventEmitter() {\n    _classCallCheck(this, EventEmitter);\n\n    this.observers = {};\n  }\n\n  _createClass(EventEmitter, [{\n    key: \"on\",\n    value: function on(events, listener) {\n      var _this = this;\n\n      events.split(' ').forEach(function (event) {\n        _this.observers[event] = _this.observers[event] || [];\n\n        _this.observers[event].push(listener);\n      });\n      return this;\n    }\n  }, {\n    key: \"off\",\n    value: function off(event, listener) {\n      if (!this.observers[event]) return;\n\n      if (!listener) {\n        delete this.observers[event];\n        return;\n      }\n\n      this.observers[event] = this.observers[event].filter(function (l) {\n        return l !== listener;\n      });\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(event) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      if (this.observers[event]) {\n        var cloned = [].concat(this.observers[event]);\n        cloned.forEach(function (observer) {\n          observer.apply(void 0, args);\n        });\n      }\n\n      if (this.observers['*']) {\n        var _cloned = [].concat(this.observers['*']);\n\n        _cloned.forEach(function (observer) {\n          observer.apply(observer, [event].concat(args));\n        });\n      }\n    }\n  }]);\n\n  return EventEmitter;\n}();\n\nfunction defer() {\n  var res;\n  var rej;\n  var promise = new Promise(function (resolve, reject) {\n    res = resolve;\n    rej = reject;\n  });\n  promise.resolve = res;\n  promise.reject = rej;\n  return promise;\n}\nfunction makeString(object) {\n  if (object == null) return '';\n  return '' + object;\n}\nfunction copy(a, s, t) {\n  a.forEach(function (m) {\n    if (s[m]) t[m] = s[m];\n  });\n}\n\nfunction getLastOfPath(object, path, Empty) {\n  function cleanKey(key) {\n    return key && key.indexOf('###') > -1 ? key.replace(/###/g, '.') : key;\n  }\n\n  function canNotTraverseDeeper() {\n    return !object || typeof object === 'string';\n  }\n\n  var stack = typeof path !== 'string' ? [].concat(path) : path.split('.');\n\n  while (stack.length > 1) {\n    if (canNotTraverseDeeper()) return {};\n    var key = cleanKey(stack.shift());\n    if (!object[key] && Empty) object[key] = new Empty();\n\n    if (Object.prototype.hasOwnProperty.call(object, key)) {\n      object = object[key];\n    } else {\n      object = {};\n    }\n  }\n\n  if (canNotTraverseDeeper()) return {};\n  return {\n    obj: object,\n    k: cleanKey(stack.shift())\n  };\n}\n\nfunction setPath(object, path, newValue) {\n  var _getLastOfPath = getLastOfPath(object, path, Object),\n      obj = _getLastOfPath.obj,\n      k = _getLastOfPath.k;\n\n  obj[k] = newValue;\n}\nfunction pushPath(object, path, newValue, concat) {\n  var _getLastOfPath2 = getLastOfPath(object, path, Object),\n      obj = _getLastOfPath2.obj,\n      k = _getLastOfPath2.k;\n\n  obj[k] = obj[k] || [];\n  if (concat) obj[k] = obj[k].concat(newValue);\n  if (!concat) obj[k].push(newValue);\n}\nfunction getPath(object, path) {\n  var _getLastOfPath3 = getLastOfPath(object, path),\n      obj = _getLastOfPath3.obj,\n      k = _getLastOfPath3.k;\n\n  if (!obj) return undefined;\n  return obj[k];\n}\nfunction getPathWithDefaults(data, defaultData, key) {\n  var value = getPath(data, key);\n\n  if (value !== undefined) {\n    return value;\n  }\n\n  return getPath(defaultData, key);\n}\nfunction deepExtend(target, source, overwrite) {\n  for (var prop in source) {\n    if (prop !== '__proto__' && prop !== 'constructor') {\n      if (prop in target) {\n        if (typeof target[prop] === 'string' || target[prop] instanceof String || typeof source[prop] === 'string' || source[prop] instanceof String) {\n          if (overwrite) target[prop] = source[prop];\n        } else {\n          deepExtend(target[prop], source[prop], overwrite);\n        }\n      } else {\n        target[prop] = source[prop];\n      }\n    }\n  }\n\n  return target;\n}\nfunction regexEscape(str) {\n  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\nvar _entityMap = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n  '/': '&#x2F;'\n};\nfunction escape(data) {\n  if (typeof data === 'string') {\n    return data.replace(/[&<>\"'\\/]/g, function (s) {\n      return _entityMap[s];\n    });\n  }\n\n  return data;\n}\nvar isIE10 = typeof window !== 'undefined' && window.navigator && window.navigator.userAgent && window.navigator.userAgent.indexOf('MSIE') > -1;\n\nfunction deepFind(obj, path) {\n  var keySeparator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '.';\n  if (!obj) return undefined;\n  if (obj[path]) return obj[path];\n  var paths = path.split(keySeparator);\n  var current = obj;\n\n  for (var i = 0; i < paths.length; ++i) {\n    if (!current) return undefined;\n\n    if (typeof current[paths[i]] === 'string' && i + 1 < paths.length) {\n      return undefined;\n    }\n\n    if (current[paths[i]] === undefined) {\n      var j = 2;\n      var p = paths.slice(i, i + j).join(keySeparator);\n      var mix = current[p];\n\n      while (mix === undefined && paths.length > i + j) {\n        j++;\n        p = paths.slice(i, i + j).join(keySeparator);\n        mix = current[p];\n      }\n\n      if (mix === undefined) return undefined;\n      if (typeof mix === 'string') return mix;\n      if (p && typeof mix[p] === 'string') return mix[p];\n      var joinedPath = paths.slice(i + j).join(keySeparator);\n      if (joinedPath) return deepFind(mix, joinedPath, keySeparator);\n      return undefined;\n    }\n\n    current = current[paths[i]];\n  }\n\n  return current;\n}\n\nvar ResourceStore = function (_EventEmitter) {\n  _inherits(ResourceStore, _EventEmitter);\n\n  function ResourceStore(data) {\n    var _this;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      ns: ['translation'],\n      defaultNS: 'translation'\n    };\n\n    _classCallCheck(this, ResourceStore);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ResourceStore).call(this));\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    _this.data = data || {};\n    _this.options = options;\n\n    if (_this.options.keySeparator === undefined) {\n      _this.options.keySeparator = '.';\n    }\n\n    if (_this.options.ignoreJSONStructure === undefined) {\n      _this.options.ignoreJSONStructure = true;\n    }\n\n    return _this;\n  }\n\n  _createClass(ResourceStore, [{\n    key: \"addNamespaces\",\n    value: function addNamespaces(ns) {\n      if (this.options.ns.indexOf(ns) < 0) {\n        this.options.ns.push(ns);\n      }\n    }\n  }, {\n    key: \"removeNamespaces\",\n    value: function removeNamespaces(ns) {\n      var index = this.options.ns.indexOf(ns);\n\n      if (index > -1) {\n        this.options.ns.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"getResource\",\n    value: function getResource(lng, ns, key) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var ignoreJSONStructure = options.ignoreJSONStructure !== undefined ? options.ignoreJSONStructure : this.options.ignoreJSONStructure;\n      var path = [lng, ns];\n      if (key && typeof key !== 'string') path = path.concat(key);\n      if (key && typeof key === 'string') path = path.concat(keySeparator ? key.split(keySeparator) : key);\n\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n      }\n\n      var result = getPath(this.data, path);\n      if (result || !ignoreJSONStructure || typeof key !== 'string') return result;\n      return deepFind(this.data && this.data[lng] && this.data[lng][ns], key, keySeparator);\n    }\n  }, {\n    key: \"addResource\",\n    value: function addResource(lng, ns, key, value) {\n      var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {\n        silent: false\n      };\n      var keySeparator = this.options.keySeparator;\n      if (keySeparator === undefined) keySeparator = '.';\n      var path = [lng, ns];\n      if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);\n\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n        value = ns;\n        ns = path[1];\n      }\n\n      this.addNamespaces(ns);\n      setPath(this.data, path, value);\n      if (!options.silent) this.emit('added', lng, ns, key, value);\n    }\n  }, {\n    key: \"addResources\",\n    value: function addResources(lng, ns, resources) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {\n        silent: false\n      };\n\n      for (var m in resources) {\n        if (typeof resources[m] === 'string' || Object.prototype.toString.apply(resources[m]) === '[object Array]') this.addResource(lng, ns, m, resources[m], {\n          silent: true\n        });\n      }\n\n      if (!options.silent) this.emit('added', lng, ns, resources);\n    }\n  }, {\n    key: \"addResourceBundle\",\n    value: function addResourceBundle(lng, ns, resources, deep, overwrite) {\n      var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {\n        silent: false\n      };\n      var path = [lng, ns];\n\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n        deep = resources;\n        resources = ns;\n        ns = path[1];\n      }\n\n      this.addNamespaces(ns);\n      var pack = getPath(this.data, path) || {};\n\n      if (deep) {\n        deepExtend(pack, resources, overwrite);\n      } else {\n        pack = _objectSpread({}, pack, resources);\n      }\n\n      setPath(this.data, path, pack);\n      if (!options.silent) this.emit('added', lng, ns, resources);\n    }\n  }, {\n    key: \"removeResourceBundle\",\n    value: function removeResourceBundle(lng, ns) {\n      if (this.hasResourceBundle(lng, ns)) {\n        delete this.data[lng][ns];\n      }\n\n      this.removeNamespaces(ns);\n      this.emit('removed', lng, ns);\n    }\n  }, {\n    key: \"hasResourceBundle\",\n    value: function hasResourceBundle(lng, ns) {\n      return this.getResource(lng, ns) !== undefined;\n    }\n  }, {\n    key: \"getResourceBundle\",\n    value: function getResourceBundle(lng, ns) {\n      if (!ns) ns = this.options.defaultNS;\n      if (this.options.compatibilityAPI === 'v1') return _objectSpread({}, {}, this.getResource(lng, ns));\n      return this.getResource(lng, ns);\n    }\n  }, {\n    key: \"getDataByLanguage\",\n    value: function getDataByLanguage(lng) {\n      return this.data[lng];\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return this.data;\n    }\n  }]);\n\n  return ResourceStore;\n}(EventEmitter);\n\nvar postProcessor = {\n  processors: {},\n  addPostProcessor: function addPostProcessor(module) {\n    this.processors[module.name] = module;\n  },\n  handle: function handle(processors, value, key, options, translator) {\n    var _this = this;\n\n    processors.forEach(function (processor) {\n      if (_this.processors[processor]) value = _this.processors[processor].process(value, key, options, translator);\n    });\n    return value;\n  }\n};\n\nvar checkedLoadedFor = {};\n\nvar Translator = function (_EventEmitter) {\n  _inherits(Translator, _EventEmitter);\n\n  function Translator(services) {\n    var _this;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Translator);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Translator).call(this));\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    copy(['resourceStore', 'languageUtils', 'pluralResolver', 'interpolator', 'backendConnector', 'i18nFormat', 'utils'], services, _assertThisInitialized(_this));\n    _this.options = options;\n\n    if (_this.options.keySeparator === undefined) {\n      _this.options.keySeparator = '.';\n    }\n\n    _this.logger = baseLogger.create('translator');\n    return _this;\n  }\n\n  _createClass(Translator, [{\n    key: \"changeLanguage\",\n    value: function changeLanguage(lng) {\n      if (lng) this.language = lng;\n    }\n  }, {\n    key: \"exists\",\n    value: function exists(key) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        interpolation: {}\n      };\n\n      if (key === undefined || key === null) {\n        return false;\n      }\n\n      var resolved = this.resolve(key, options);\n      return resolved && resolved.res !== undefined;\n    }\n  }, {\n    key: \"extractFromKey\",\n    value: function extractFromKey(key, options) {\n      var nsSeparator = options.nsSeparator !== undefined ? options.nsSeparator : this.options.nsSeparator;\n      if (nsSeparator === undefined) nsSeparator = ':';\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var namespaces = options.ns || this.options.defaultNS;\n\n      if (nsSeparator && key.indexOf(nsSeparator) > -1) {\n        var m = key.match(this.interpolator.nestingRegexp);\n\n        if (m && m.length > 0) {\n          return {\n            key: key,\n            namespaces: namespaces\n          };\n        }\n\n        var parts = key.split(nsSeparator);\n        if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1) namespaces = parts.shift();\n        key = parts.join(keySeparator);\n      }\n\n      if (typeof namespaces === 'string') namespaces = [namespaces];\n      return {\n        key: key,\n        namespaces: namespaces\n      };\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(keys, options, lastKey) {\n      var _this2 = this;\n\n      if (_typeof(options) !== 'object' && this.options.overloadTranslationOptionHandler) {\n        options = this.options.overloadTranslationOptionHandler(arguments);\n      }\n\n      if (!options) options = {};\n      if (keys === undefined || keys === null) return '';\n      if (!Array.isArray(keys)) keys = [String(keys)];\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n\n      var _this$extractFromKey = this.extractFromKey(keys[keys.length - 1], options),\n          key = _this$extractFromKey.key,\n          namespaces = _this$extractFromKey.namespaces;\n\n      var namespace = namespaces[namespaces.length - 1];\n      var lng = options.lng || this.language;\n      var appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;\n\n      if (lng && lng.toLowerCase() === 'cimode') {\n        if (appendNamespaceToCIMode) {\n          var nsSeparator = options.nsSeparator || this.options.nsSeparator;\n          return namespace + nsSeparator + key;\n        }\n\n        return key;\n      }\n\n      var resolved = this.resolve(keys, options);\n      var res = resolved && resolved.res;\n      var resUsedKey = resolved && resolved.usedKey || key;\n      var resExactUsedKey = resolved && resolved.exactUsedKey || key;\n      var resType = Object.prototype.toString.apply(res);\n      var noObject = ['[object Number]', '[object Function]', '[object RegExp]'];\n      var joinArrays = options.joinArrays !== undefined ? options.joinArrays : this.options.joinArrays;\n      var handleAsObjectInI18nFormat = !this.i18nFormat || this.i18nFormat.handleAsObject;\n      var handleAsObject = typeof res !== 'string' && typeof res !== 'boolean' && typeof res !== 'number';\n\n      if (handleAsObjectInI18nFormat && res && handleAsObject && noObject.indexOf(resType) < 0 && !(typeof joinArrays === 'string' && resType === '[object Array]')) {\n        if (!options.returnObjects && !this.options.returnObjects) {\n          if (!this.options.returnedObjectHandler) {\n            this.logger.warn('accessing an object - but returnObjects options is not enabled!');\n          }\n\n          return this.options.returnedObjectHandler ? this.options.returnedObjectHandler(resUsedKey, res, _objectSpread({}, options, {\n            ns: namespaces\n          })) : \"key '\".concat(key, \" (\").concat(this.language, \")' returned an object instead of string.\");\n        }\n\n        if (keySeparator) {\n          var resTypeIsArray = resType === '[object Array]';\n          var copy = resTypeIsArray ? [] : {};\n          var newKeyToUse = resTypeIsArray ? resExactUsedKey : resUsedKey;\n\n          for (var m in res) {\n            if (Object.prototype.hasOwnProperty.call(res, m)) {\n              var deepKey = \"\".concat(newKeyToUse).concat(keySeparator).concat(m);\n              copy[m] = this.translate(deepKey, _objectSpread({}, options, {\n                joinArrays: false,\n                ns: namespaces\n              }));\n              if (copy[m] === deepKey) copy[m] = res[m];\n            }\n          }\n\n          res = copy;\n        }\n      } else if (handleAsObjectInI18nFormat && typeof joinArrays === 'string' && resType === '[object Array]') {\n        res = res.join(joinArrays);\n        if (res) res = this.extendTranslation(res, keys, options, lastKey);\n      } else {\n        var usedDefault = false;\n        var usedKey = false;\n        var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n        var hasDefaultValue = Translator.hasDefaultValue(options);\n        var defaultValueSuffix = needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count) : '';\n        var defaultValue = options[\"defaultValue\".concat(defaultValueSuffix)] || options.defaultValue;\n\n        if (!this.isValidLookup(res) && hasDefaultValue) {\n          usedDefault = true;\n          res = defaultValue;\n        }\n\n        if (!this.isValidLookup(res)) {\n          usedKey = true;\n          res = key;\n        }\n\n        var missingKeyNoValueFallbackToKey = options.missingKeyNoValueFallbackToKey || this.options.missingKeyNoValueFallbackToKey;\n        var resForMissing = missingKeyNoValueFallbackToKey && usedKey ? undefined : res;\n        var updateMissing = hasDefaultValue && defaultValue !== res && this.options.updateMissing;\n\n        if (usedKey || usedDefault || updateMissing) {\n          this.logger.log(updateMissing ? 'updateKey' : 'missingKey', lng, namespace, key, updateMissing ? defaultValue : res);\n\n          if (keySeparator) {\n            var fk = this.resolve(key, _objectSpread({}, options, {\n              keySeparator: false\n            }));\n            if (fk && fk.res) this.logger.warn('Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.');\n          }\n\n          var lngs = [];\n          var fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);\n\n          if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {\n            for (var i = 0; i < fallbackLngs.length; i++) {\n              lngs.push(fallbackLngs[i]);\n            }\n          } else if (this.options.saveMissingTo === 'all') {\n            lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);\n          } else {\n            lngs.push(options.lng || this.language);\n          }\n\n          var send = function send(l, k, fallbackValue) {\n            if (_this2.options.missingKeyHandler) {\n              _this2.options.missingKeyHandler(l, namespace, k, updateMissing ? fallbackValue : resForMissing, updateMissing, options);\n            } else if (_this2.backendConnector && _this2.backendConnector.saveMissing) {\n              _this2.backendConnector.saveMissing(l, namespace, k, updateMissing ? fallbackValue : resForMissing, updateMissing, options);\n            }\n\n            _this2.emit('missingKey', l, namespace, k, res);\n          };\n\n          if (this.options.saveMissing) {\n            if (this.options.saveMissingPlurals && needsPluralHandling) {\n              lngs.forEach(function (language) {\n                _this2.pluralResolver.getSuffixes(language).forEach(function (suffix) {\n                  send([language], key + suffix, options[\"defaultValue\".concat(suffix)] || defaultValue);\n                });\n              });\n            } else {\n              send(lngs, key, defaultValue);\n            }\n          }\n        }\n\n        res = this.extendTranslation(res, keys, options, resolved, lastKey);\n        if (usedKey && res === key && this.options.appendNamespaceToMissingKey) res = \"\".concat(namespace, \":\").concat(key);\n        if ((usedKey || usedDefault) && this.options.parseMissingKeyHandler) res = this.options.parseMissingKeyHandler(res);\n      }\n\n      return res;\n    }\n  }, {\n    key: \"extendTranslation\",\n    value: function extendTranslation(res, key, options, resolved, lastKey) {\n      var _this3 = this;\n\n      if (this.i18nFormat && this.i18nFormat.parse) {\n        res = this.i18nFormat.parse(res, options, resolved.usedLng, resolved.usedNS, resolved.usedKey, {\n          resolved: resolved\n        });\n      } else if (!options.skipInterpolation) {\n        if (options.interpolation) this.interpolator.init(_objectSpread({}, options, {\n          interpolation: _objectSpread({}, this.options.interpolation, options.interpolation)\n        }));\n        var skipOnVariables = options.interpolation && options.interpolation.skipOnVariables || this.options.interpolation.skipOnVariables;\n        var nestBef;\n\n        if (skipOnVariables) {\n          var nb = res.match(this.interpolator.nestingRegexp);\n          nestBef = nb && nb.length;\n        }\n\n        var data = options.replace && typeof options.replace !== 'string' ? options.replace : options;\n        if (this.options.interpolation.defaultVariables) data = _objectSpread({}, this.options.interpolation.defaultVariables, data);\n        res = this.interpolator.interpolate(res, data, options.lng || this.language, options);\n\n        if (skipOnVariables) {\n          var na = res.match(this.interpolator.nestingRegexp);\n          var nestAft = na && na.length;\n          if (nestBef < nestAft) options.nest = false;\n        }\n\n        if (options.nest !== false) res = this.interpolator.nest(res, function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          if (lastKey && lastKey[0] === args[0] && !options.context) {\n            _this3.logger.warn(\"It seems you are nesting recursively key: \".concat(args[0], \" in key: \").concat(key[0]));\n\n            return null;\n          }\n\n          return _this3.translate.apply(_this3, args.concat([key]));\n        }, options);\n        if (options.interpolation) this.interpolator.reset();\n      }\n\n      var postProcess = options.postProcess || this.options.postProcess;\n      var postProcessorNames = typeof postProcess === 'string' ? [postProcess] : postProcess;\n\n      if (res !== undefined && res !== null && postProcessorNames && postProcessorNames.length && options.applyPostProcessor !== false) {\n        res = postProcessor.handle(postProcessorNames, res, key, this.options && this.options.postProcessPassResolved ? _objectSpread({\n          i18nResolved: resolved\n        }, options) : options, this);\n      }\n\n      return res;\n    }\n  }, {\n    key: \"resolve\",\n    value: function resolve(keys) {\n      var _this4 = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var found;\n      var usedKey;\n      var exactUsedKey;\n      var usedLng;\n      var usedNS;\n      if (typeof keys === 'string') keys = [keys];\n      keys.forEach(function (k) {\n        if (_this4.isValidLookup(found)) return;\n\n        var extracted = _this4.extractFromKey(k, options);\n\n        var key = extracted.key;\n        usedKey = key;\n        var namespaces = extracted.namespaces;\n        if (_this4.options.fallbackNS) namespaces = namespaces.concat(_this4.options.fallbackNS);\n        var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n        var needsContextHandling = options.context !== undefined && (typeof options.context === 'string' || typeof options.context === 'number') && options.context !== '';\n        var codes = options.lngs ? options.lngs : _this4.languageUtils.toResolveHierarchy(options.lng || _this4.language, options.fallbackLng);\n        namespaces.forEach(function (ns) {\n          if (_this4.isValidLookup(found)) return;\n          usedNS = ns;\n\n          if (!checkedLoadedFor[\"\".concat(codes[0], \"-\").concat(ns)] && _this4.utils && _this4.utils.hasLoadedNamespace && !_this4.utils.hasLoadedNamespace(usedNS)) {\n            checkedLoadedFor[\"\".concat(codes[0], \"-\").concat(ns)] = true;\n\n            _this4.logger.warn(\"key \\\"\".concat(usedKey, \"\\\" for languages \\\"\").concat(codes.join(', '), \"\\\" won't get resolved as namespace \\\"\").concat(usedNS, \"\\\" was not yet loaded\"), 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n          }\n\n          codes.forEach(function (code) {\n            if (_this4.isValidLookup(found)) return;\n            usedLng = code;\n            var finalKey = key;\n            var finalKeys = [finalKey];\n\n            if (_this4.i18nFormat && _this4.i18nFormat.addLookupKeys) {\n              _this4.i18nFormat.addLookupKeys(finalKeys, key, code, ns, options);\n            } else {\n              var pluralSuffix;\n              if (needsPluralHandling) pluralSuffix = _this4.pluralResolver.getSuffix(code, options.count);\n              if (needsPluralHandling && needsContextHandling) finalKeys.push(finalKey + pluralSuffix);\n              if (needsContextHandling) finalKeys.push(finalKey += \"\".concat(_this4.options.contextSeparator).concat(options.context));\n              if (needsPluralHandling) finalKeys.push(finalKey += pluralSuffix);\n            }\n\n            var possibleKey;\n\n            while (possibleKey = finalKeys.pop()) {\n              if (!_this4.isValidLookup(found)) {\n                exactUsedKey = possibleKey;\n                found = _this4.getResource(code, ns, possibleKey, options);\n              }\n            }\n          });\n        });\n      });\n      return {\n        res: found,\n        usedKey: usedKey,\n        exactUsedKey: exactUsedKey,\n        usedLng: usedLng,\n        usedNS: usedNS\n      };\n    }\n  }, {\n    key: \"isValidLookup\",\n    value: function isValidLookup(res) {\n      return res !== undefined && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === '');\n    }\n  }, {\n    key: \"getResource\",\n    value: function getResource(code, ns, key) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      if (this.i18nFormat && this.i18nFormat.getResource) return this.i18nFormat.getResource(code, ns, key, options);\n      return this.resourceStore.getResource(code, ns, key, options);\n    }\n  }], [{\n    key: \"hasDefaultValue\",\n    value: function hasDefaultValue(options) {\n      var prefix = 'defaultValue';\n\n      for (var option in options) {\n        if (Object.prototype.hasOwnProperty.call(options, option) && prefix === option.substring(0, prefix.length) && undefined !== options[option]) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }]);\n\n  return Translator;\n}(EventEmitter);\n\nfunction capitalize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nvar LanguageUtil = function () {\n  function LanguageUtil(options) {\n    _classCallCheck(this, LanguageUtil);\n\n    this.options = options;\n    this.whitelist = this.options.supportedLngs || false;\n    this.supportedLngs = this.options.supportedLngs || false;\n    this.logger = baseLogger.create('languageUtils');\n  }\n\n  _createClass(LanguageUtil, [{\n    key: \"getScriptPartFromCode\",\n    value: function getScriptPartFromCode(code) {\n      if (!code || code.indexOf('-') < 0) return null;\n      var p = code.split('-');\n      if (p.length === 2) return null;\n      p.pop();\n      if (p[p.length - 1].toLowerCase() === 'x') return null;\n      return this.formatLanguageCode(p.join('-'));\n    }\n  }, {\n    key: \"getLanguagePartFromCode\",\n    value: function getLanguagePartFromCode(code) {\n      if (!code || code.indexOf('-') < 0) return code;\n      var p = code.split('-');\n      return this.formatLanguageCode(p[0]);\n    }\n  }, {\n    key: \"formatLanguageCode\",\n    value: function formatLanguageCode(code) {\n      if (typeof code === 'string' && code.indexOf('-') > -1) {\n        var specialCases = ['hans', 'hant', 'latn', 'cyrl', 'cans', 'mong', 'arab'];\n        var p = code.split('-');\n\n        if (this.options.lowerCaseLng) {\n          p = p.map(function (part) {\n            return part.toLowerCase();\n          });\n        } else if (p.length === 2) {\n          p[0] = p[0].toLowerCase();\n          p[1] = p[1].toUpperCase();\n          if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n        } else if (p.length === 3) {\n          p[0] = p[0].toLowerCase();\n          if (p[1].length === 2) p[1] = p[1].toUpperCase();\n          if (p[0] !== 'sgn' && p[2].length === 2) p[2] = p[2].toUpperCase();\n          if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n          if (specialCases.indexOf(p[2].toLowerCase()) > -1) p[2] = capitalize(p[2].toLowerCase());\n        }\n\n        return p.join('-');\n      }\n\n      return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;\n    }\n  }, {\n    key: \"isWhitelisted\",\n    value: function isWhitelisted(code) {\n      this.logger.deprecate('languageUtils.isWhitelisted', 'function \"isWhitelisted\" will be renamed to \"isSupportedCode\" in the next major - please make sure to rename it\\'s usage asap.');\n      return this.isSupportedCode(code);\n    }\n  }, {\n    key: \"isSupportedCode\",\n    value: function isSupportedCode(code) {\n      if (this.options.load === 'languageOnly' || this.options.nonExplicitSupportedLngs) {\n        code = this.getLanguagePartFromCode(code);\n      }\n\n      return !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(code) > -1;\n    }\n  }, {\n    key: \"getBestMatchFromCodes\",\n    value: function getBestMatchFromCodes(codes) {\n      var _this = this;\n\n      if (!codes) return null;\n      var found;\n      codes.forEach(function (code) {\n        if (found) return;\n\n        var cleanedLng = _this.formatLanguageCode(code);\n\n        if (!_this.options.supportedLngs || _this.isSupportedCode(cleanedLng)) found = cleanedLng;\n      });\n\n      if (!found && this.options.supportedLngs) {\n        codes.forEach(function (code) {\n          if (found) return;\n\n          var lngOnly = _this.getLanguagePartFromCode(code);\n\n          if (_this.isSupportedCode(lngOnly)) return found = lngOnly;\n          found = _this.options.supportedLngs.find(function (supportedLng) {\n            if (supportedLng.indexOf(lngOnly) === 0) return supportedLng;\n          });\n        });\n      }\n\n      if (!found) found = this.getFallbackCodes(this.options.fallbackLng)[0];\n      return found;\n    }\n  }, {\n    key: \"getFallbackCodes\",\n    value: function getFallbackCodes(fallbacks, code) {\n      if (!fallbacks) return [];\n      if (typeof fallbacks === 'function') fallbacks = fallbacks(code);\n      if (typeof fallbacks === 'string') fallbacks = [fallbacks];\n      if (Object.prototype.toString.apply(fallbacks) === '[object Array]') return fallbacks;\n      if (!code) return fallbacks[\"default\"] || [];\n      var found = fallbacks[code];\n      if (!found) found = fallbacks[this.getScriptPartFromCode(code)];\n      if (!found) found = fallbacks[this.formatLanguageCode(code)];\n      if (!found) found = fallbacks[this.getLanguagePartFromCode(code)];\n      if (!found) found = fallbacks[\"default\"];\n      return found || [];\n    }\n  }, {\n    key: \"toResolveHierarchy\",\n    value: function toResolveHierarchy(code, fallbackCode) {\n      var _this2 = this;\n\n      var fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);\n      var codes = [];\n\n      var addCode = function addCode(c) {\n        if (!c) return;\n\n        if (_this2.isSupportedCode(c)) {\n          codes.push(c);\n        } else {\n          _this2.logger.warn(\"rejecting language code not found in supportedLngs: \".concat(c));\n        }\n      };\n\n      if (typeof code === 'string' && code.indexOf('-') > -1) {\n        if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code));\n        if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly') addCode(this.getScriptPartFromCode(code));\n        if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));\n      } else if (typeof code === 'string') {\n        addCode(this.formatLanguageCode(code));\n      }\n\n      fallbackCodes.forEach(function (fc) {\n        if (codes.indexOf(fc) < 0) addCode(_this2.formatLanguageCode(fc));\n      });\n      return codes;\n    }\n  }]);\n\n  return LanguageUtil;\n}();\n\nvar sets = [{\n  lngs: ['ach', 'ak', 'am', 'arn', 'br', 'fil', 'gun', 'ln', 'mfe', 'mg', 'mi', 'oc', 'pt', 'pt-BR', 'tg', 'tl', 'ti', 'tr', 'uz', 'wa'],\n  nr: [1, 2],\n  fc: 1\n}, {\n  lngs: ['af', 'an', 'ast', 'az', 'bg', 'bn', 'ca', 'da', 'de', 'dev', 'el', 'en', 'eo', 'es', 'et', 'eu', 'fi', 'fo', 'fur', 'fy', 'gl', 'gu', 'ha', 'hi', 'hu', 'hy', 'ia', 'it', 'kk', 'kn', 'ku', 'lb', 'mai', 'ml', 'mn', 'mr', 'nah', 'nap', 'nb', 'ne', 'nl', 'nn', 'no', 'nso', 'pa', 'pap', 'pms', 'ps', 'pt-PT', 'rm', 'sco', 'se', 'si', 'so', 'son', 'sq', 'sv', 'sw', 'ta', 'te', 'tk', 'ur', 'yo'],\n  nr: [1, 2],\n  fc: 2\n}, {\n  lngs: ['ay', 'bo', 'cgg', 'fa', 'ht', 'id', 'ja', 'jbo', 'ka', 'km', 'ko', 'ky', 'lo', 'ms', 'sah', 'su', 'th', 'tt', 'ug', 'vi', 'wo', 'zh'],\n  nr: [1],\n  fc: 3\n}, {\n  lngs: ['be', 'bs', 'cnr', 'dz', 'hr', 'ru', 'sr', 'uk'],\n  nr: [1, 2, 5],\n  fc: 4\n}, {\n  lngs: ['ar'],\n  nr: [0, 1, 2, 3, 11, 100],\n  fc: 5\n}, {\n  lngs: ['cs', 'sk'],\n  nr: [1, 2, 5],\n  fc: 6\n}, {\n  lngs: ['csb', 'pl'],\n  nr: [1, 2, 5],\n  fc: 7\n}, {\n  lngs: ['cy'],\n  nr: [1, 2, 3, 8],\n  fc: 8\n}, {\n  lngs: ['fr'],\n  nr: [1, 2],\n  fc: 9\n}, {\n  lngs: ['ga'],\n  nr: [1, 2, 3, 7, 11],\n  fc: 10\n}, {\n  lngs: ['gd'],\n  nr: [1, 2, 3, 20],\n  fc: 11\n}, {\n  lngs: ['is'],\n  nr: [1, 2],\n  fc: 12\n}, {\n  lngs: ['jv'],\n  nr: [0, 1],\n  fc: 13\n}, {\n  lngs: ['kw'],\n  nr: [1, 2, 3, 4],\n  fc: 14\n}, {\n  lngs: ['lt'],\n  nr: [1, 2, 10],\n  fc: 15\n}, {\n  lngs: ['lv'],\n  nr: [1, 2, 0],\n  fc: 16\n}, {\n  lngs: ['mk'],\n  nr: [1, 2],\n  fc: 17\n}, {\n  lngs: ['mnk'],\n  nr: [0, 1, 2],\n  fc: 18\n}, {\n  lngs: ['mt'],\n  nr: [1, 2, 11, 20],\n  fc: 19\n}, {\n  lngs: ['or'],\n  nr: [2, 1],\n  fc: 2\n}, {\n  lngs: ['ro'],\n  nr: [1, 2, 20],\n  fc: 20\n}, {\n  lngs: ['sl'],\n  nr: [5, 1, 2, 3],\n  fc: 21\n}, {\n  lngs: ['he', 'iw'],\n  nr: [1, 2, 20, 21],\n  fc: 22\n}];\nvar _rulesPluralsTypes = {\n  1: function _(n) {\n    return Number(n > 1);\n  },\n  2: function _(n) {\n    return Number(n != 1);\n  },\n  3: function _(n) {\n    return 0;\n  },\n  4: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  5: function _(n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5);\n  },\n  6: function _(n) {\n    return Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2);\n  },\n  7: function _(n) {\n    return Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  8: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3);\n  },\n  9: function _(n) {\n    return Number(n >= 2);\n  },\n  10: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4);\n  },\n  11: function _(n) {\n    return Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3);\n  },\n  12: function _(n) {\n    return Number(n % 10 != 1 || n % 100 == 11);\n  },\n  13: function _(n) {\n    return Number(n !== 0);\n  },\n  14: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3);\n  },\n  15: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  16: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2);\n  },\n  17: function _(n) {\n    return Number(n == 1 || n % 10 == 1 && n % 100 != 11 ? 0 : 1);\n  },\n  18: function _(n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : 2);\n  },\n  19: function _(n) {\n    return Number(n == 1 ? 0 : n == 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3);\n  },\n  20: function _(n) {\n    return Number(n == 1 ? 0 : n == 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2);\n  },\n  21: function _(n) {\n    return Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0);\n  },\n  22: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : (n < 0 || n > 10) && n % 10 == 0 ? 2 : 3);\n  }\n};\n\nfunction createRules() {\n  var rules = {};\n  sets.forEach(function (set) {\n    set.lngs.forEach(function (l) {\n      rules[l] = {\n        numbers: set.nr,\n        plurals: _rulesPluralsTypes[set.fc]\n      };\n    });\n  });\n  return rules;\n}\n\nvar PluralResolver = function () {\n  function PluralResolver(languageUtils) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, PluralResolver);\n\n    this.languageUtils = languageUtils;\n    this.options = options;\n    this.logger = baseLogger.create('pluralResolver');\n    this.rules = createRules();\n  }\n\n  _createClass(PluralResolver, [{\n    key: \"addRule\",\n    value: function addRule(lng, obj) {\n      this.rules[lng] = obj;\n    }\n  }, {\n    key: \"getRule\",\n    value: function getRule(code) {\n      return this.rules[code] || this.rules[this.languageUtils.getLanguagePartFromCode(code)];\n    }\n  }, {\n    key: \"needsPlural\",\n    value: function needsPlural(code) {\n      var rule = this.getRule(code);\n      return rule && rule.numbers.length > 1;\n    }\n  }, {\n    key: \"getPluralFormsOfKey\",\n    value: function getPluralFormsOfKey(code, key) {\n      return this.getSuffixes(code).map(function (suffix) {\n        return key + suffix;\n      });\n    }\n  }, {\n    key: \"getSuffixes\",\n    value: function getSuffixes(code) {\n      var _this = this;\n\n      var rule = this.getRule(code);\n\n      if (!rule) {\n        return [];\n      }\n\n      return rule.numbers.map(function (number) {\n        return _this.getSuffix(code, number);\n      });\n    }\n  }, {\n    key: \"getSuffix\",\n    value: function getSuffix(code, count) {\n      var _this2 = this;\n\n      var rule = this.getRule(code);\n\n      if (rule) {\n        var idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));\n        var suffix = rule.numbers[idx];\n\n        if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n          if (suffix === 2) {\n            suffix = 'plural';\n          } else if (suffix === 1) {\n            suffix = '';\n          }\n        }\n\n        var returnSuffix = function returnSuffix() {\n          return _this2.options.prepend && suffix.toString() ? _this2.options.prepend + suffix.toString() : suffix.toString();\n        };\n\n        if (this.options.compatibilityJSON === 'v1') {\n          if (suffix === 1) return '';\n          if (typeof suffix === 'number') return \"_plural_\".concat(suffix.toString());\n          return returnSuffix();\n        } else if (this.options.compatibilityJSON === 'v2') {\n          return returnSuffix();\n        } else if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n          return returnSuffix();\n        }\n\n        return this.options.prepend && idx.toString() ? this.options.prepend + idx.toString() : idx.toString();\n      }\n\n      this.logger.warn(\"no plural rule found for: \".concat(code));\n      return '';\n    }\n  }]);\n\n  return PluralResolver;\n}();\n\nvar Interpolator = function () {\n  function Interpolator() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Interpolator);\n\n    this.logger = baseLogger.create('interpolator');\n    this.options = options;\n\n    this.format = options.interpolation && options.interpolation.format || function (value) {\n      return value;\n    };\n\n    this.init(options);\n  }\n\n  _createClass(Interpolator, [{\n    key: \"init\",\n    value: function init() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (!options.interpolation) options.interpolation = {\n        escapeValue: true\n      };\n      var iOpts = options.interpolation;\n      this.escape = iOpts.escape !== undefined ? iOpts.escape : escape;\n      this.escapeValue = iOpts.escapeValue !== undefined ? iOpts.escapeValue : true;\n      this.useRawValueToEscape = iOpts.useRawValueToEscape !== undefined ? iOpts.useRawValueToEscape : false;\n      this.prefix = iOpts.prefix ? regexEscape(iOpts.prefix) : iOpts.prefixEscaped || '{{';\n      this.suffix = iOpts.suffix ? regexEscape(iOpts.suffix) : iOpts.suffixEscaped || '}}';\n      this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';\n      this.unescapePrefix = iOpts.unescapeSuffix ? '' : iOpts.unescapePrefix || '-';\n      this.unescapeSuffix = this.unescapePrefix ? '' : iOpts.unescapeSuffix || '';\n      this.nestingPrefix = iOpts.nestingPrefix ? regexEscape(iOpts.nestingPrefix) : iOpts.nestingPrefixEscaped || regexEscape('$t(');\n      this.nestingSuffix = iOpts.nestingSuffix ? regexEscape(iOpts.nestingSuffix) : iOpts.nestingSuffixEscaped || regexEscape(')');\n      this.nestingOptionsSeparator = iOpts.nestingOptionsSeparator ? iOpts.nestingOptionsSeparator : iOpts.nestingOptionsSeparator || ',';\n      this.maxReplaces = iOpts.maxReplaces ? iOpts.maxReplaces : 1000;\n      this.alwaysFormat = iOpts.alwaysFormat !== undefined ? iOpts.alwaysFormat : false;\n      this.resetRegExp();\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      if (this.options) this.init(this.options);\n    }\n  }, {\n    key: \"resetRegExp\",\n    value: function resetRegExp() {\n      var regexpStr = \"\".concat(this.prefix, \"(.+?)\").concat(this.suffix);\n      this.regexp = new RegExp(regexpStr, 'g');\n      var regexpUnescapeStr = \"\".concat(this.prefix).concat(this.unescapePrefix, \"(.+?)\").concat(this.unescapeSuffix).concat(this.suffix);\n      this.regexpUnescape = new RegExp(regexpUnescapeStr, 'g');\n      var nestingRegexpStr = \"\".concat(this.nestingPrefix, \"(.+?)\").concat(this.nestingSuffix);\n      this.nestingRegexp = new RegExp(nestingRegexpStr, 'g');\n    }\n  }, {\n    key: \"interpolate\",\n    value: function interpolate(str, data, lng, options) {\n      var _this = this;\n\n      var match;\n      var value;\n      var replaces;\n      var defaultData = this.options && this.options.interpolation && this.options.interpolation.defaultVariables || {};\n\n      function regexSafe(val) {\n        return val.replace(/\\$/g, '$$$$');\n      }\n\n      var handleFormat = function handleFormat(key) {\n        if (key.indexOf(_this.formatSeparator) < 0) {\n          var path = getPathWithDefaults(data, defaultData, key);\n          return _this.alwaysFormat ? _this.format(path, undefined, lng, _objectSpread({}, options, data, {\n            interpolationkey: key\n          })) : path;\n        }\n\n        var p = key.split(_this.formatSeparator);\n        var k = p.shift().trim();\n        var f = p.join(_this.formatSeparator).trim();\n        return _this.format(getPathWithDefaults(data, defaultData, k), f, lng, _objectSpread({}, options, data, {\n          interpolationkey: k\n        }));\n      };\n\n      this.resetRegExp();\n      var missingInterpolationHandler = options && options.missingInterpolationHandler || this.options.missingInterpolationHandler;\n      var skipOnVariables = options && options.interpolation && options.interpolation.skipOnVariables || this.options.interpolation.skipOnVariables;\n      var todos = [{\n        regex: this.regexpUnescape,\n        safeValue: function safeValue(val) {\n          return regexSafe(val);\n        }\n      }, {\n        regex: this.regexp,\n        safeValue: function safeValue(val) {\n          return _this.escapeValue ? regexSafe(_this.escape(val)) : regexSafe(val);\n        }\n      }];\n      todos.forEach(function (todo) {\n        replaces = 0;\n\n        while (match = todo.regex.exec(str)) {\n          value = handleFormat(match[1].trim());\n\n          if (value === undefined) {\n            if (typeof missingInterpolationHandler === 'function') {\n              var temp = missingInterpolationHandler(str, match, options);\n              value = typeof temp === 'string' ? temp : '';\n            } else if (skipOnVariables) {\n              value = match[0];\n              continue;\n            } else {\n              _this.logger.warn(\"missed to pass in variable \".concat(match[1], \" for interpolating \").concat(str));\n\n              value = '';\n            }\n          } else if (typeof value !== 'string' && !_this.useRawValueToEscape) {\n            value = makeString(value);\n          }\n\n          var safeValue = todo.safeValue(value);\n          str = str.replace(match[0], safeValue);\n\n          if (skipOnVariables) {\n            todo.regex.lastIndex += safeValue.length;\n            todo.regex.lastIndex -= match[0].length;\n          } else {\n            todo.regex.lastIndex = 0;\n          }\n\n          replaces++;\n\n          if (replaces >= _this.maxReplaces) {\n            break;\n          }\n        }\n      });\n      return str;\n    }\n  }, {\n    key: \"nest\",\n    value: function nest(str, fc) {\n      var _this2 = this;\n\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var match;\n      var value;\n\n      var clonedOptions = _objectSpread({}, options);\n\n      clonedOptions.applyPostProcessor = false;\n      delete clonedOptions.defaultValue;\n\n      function handleHasOptions(key, inheritedOptions) {\n        var sep = this.nestingOptionsSeparator;\n        if (key.indexOf(sep) < 0) return key;\n        var c = key.split(new RegExp(\"\".concat(sep, \"[ ]*{\")));\n        var optionsString = \"{\".concat(c[1]);\n        key = c[0];\n        optionsString = this.interpolate(optionsString, clonedOptions);\n        optionsString = optionsString.replace(/'/g, '\"');\n\n        try {\n          clonedOptions = JSON.parse(optionsString);\n          if (inheritedOptions) clonedOptions = _objectSpread({}, inheritedOptions, clonedOptions);\n        } catch (e) {\n          this.logger.warn(\"failed parsing options string in nesting for key \".concat(key), e);\n          return \"\".concat(key).concat(sep).concat(optionsString);\n        }\n\n        delete clonedOptions.defaultValue;\n        return key;\n      }\n\n      while (match = this.nestingRegexp.exec(str)) {\n        var formatters = [];\n        var doReduce = false;\n\n        if (match[0].indexOf(this.formatSeparator) !== -1 && !/{.*}/.test(match[1])) {\n          var r = match[1].split(this.formatSeparator).map(function (elem) {\n            return elem.trim();\n          });\n          match[1] = r.shift();\n          formatters = r;\n          doReduce = true;\n        }\n\n        value = fc(handleHasOptions.call(this, match[1].trim(), clonedOptions), clonedOptions);\n        if (value && match[0] === str && typeof value !== 'string') return value;\n        if (typeof value !== 'string') value = makeString(value);\n\n        if (!value) {\n          this.logger.warn(\"missed to resolve \".concat(match[1], \" for nesting \").concat(str));\n          value = '';\n        }\n\n        if (doReduce) {\n          value = formatters.reduce(function (v, f) {\n            return _this2.format(v, f, options.lng, _objectSpread({}, options, {\n              interpolationkey: match[1].trim()\n            }));\n          }, value.trim());\n        }\n\n        str = str.replace(match[0], value);\n        this.regexp.lastIndex = 0;\n      }\n\n      return str;\n    }\n  }]);\n\n  return Interpolator;\n}();\n\nfunction remove(arr, what) {\n  var found = arr.indexOf(what);\n\n  while (found !== -1) {\n    arr.splice(found, 1);\n    found = arr.indexOf(what);\n  }\n}\n\nvar Connector = function (_EventEmitter) {\n  _inherits(Connector, _EventEmitter);\n\n  function Connector(backend, store, services) {\n    var _this;\n\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n    _classCallCheck(this, Connector);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Connector).call(this));\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    _this.backend = backend;\n    _this.store = store;\n    _this.services = services;\n    _this.languageUtils = services.languageUtils;\n    _this.options = options;\n    _this.logger = baseLogger.create('backendConnector');\n    _this.state = {};\n    _this.queue = [];\n\n    if (_this.backend && _this.backend.init) {\n      _this.backend.init(services, options.backend, options);\n    }\n\n    return _this;\n  }\n\n  _createClass(Connector, [{\n    key: \"queueLoad\",\n    value: function queueLoad(languages, namespaces, options, callback) {\n      var _this2 = this;\n\n      var toLoad = [];\n      var pending = [];\n      var toLoadLanguages = [];\n      var toLoadNamespaces = [];\n      languages.forEach(function (lng) {\n        var hasAllNamespaces = true;\n        namespaces.forEach(function (ns) {\n          var name = \"\".concat(lng, \"|\").concat(ns);\n\n          if (!options.reload && _this2.store.hasResourceBundle(lng, ns)) {\n            _this2.state[name] = 2;\n          } else if (_this2.state[name] < 0) ; else if (_this2.state[name] === 1) {\n            if (pending.indexOf(name) < 0) pending.push(name);\n          } else {\n            _this2.state[name] = 1;\n            hasAllNamespaces = false;\n            if (pending.indexOf(name) < 0) pending.push(name);\n            if (toLoad.indexOf(name) < 0) toLoad.push(name);\n            if (toLoadNamespaces.indexOf(ns) < 0) toLoadNamespaces.push(ns);\n          }\n        });\n        if (!hasAllNamespaces) toLoadLanguages.push(lng);\n      });\n\n      if (toLoad.length || pending.length) {\n        this.queue.push({\n          pending: pending,\n          loaded: {},\n          errors: [],\n          callback: callback\n        });\n      }\n\n      return {\n        toLoad: toLoad,\n        pending: pending,\n        toLoadLanguages: toLoadLanguages,\n        toLoadNamespaces: toLoadNamespaces\n      };\n    }\n  }, {\n    key: \"loaded\",\n    value: function loaded(name, err, data) {\n      var s = name.split('|');\n      var lng = s[0];\n      var ns = s[1];\n      if (err) this.emit('failedLoading', lng, ns, err);\n\n      if (data) {\n        this.store.addResourceBundle(lng, ns, data);\n      }\n\n      this.state[name] = err ? -1 : 2;\n      var loaded = {};\n      this.queue.forEach(function (q) {\n        pushPath(q.loaded, [lng], ns);\n        remove(q.pending, name);\n        if (err) q.errors.push(err);\n\n        if (q.pending.length === 0 && !q.done) {\n          Object.keys(q.loaded).forEach(function (l) {\n            if (!loaded[l]) loaded[l] = [];\n\n            if (q.loaded[l].length) {\n              q.loaded[l].forEach(function (ns) {\n                if (loaded[l].indexOf(ns) < 0) loaded[l].push(ns);\n              });\n            }\n          });\n          q.done = true;\n\n          if (q.errors.length) {\n            q.callback(q.errors);\n          } else {\n            q.callback();\n          }\n        }\n      });\n      this.emit('loaded', loaded);\n      this.queue = this.queue.filter(function (q) {\n        return !q.done;\n      });\n    }\n  }, {\n    key: \"read\",\n    value: function read(lng, ns, fcName) {\n      var _this3 = this;\n\n      var tried = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var wait = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 350;\n      var callback = arguments.length > 5 ? arguments[5] : undefined;\n      if (!lng.length) return callback(null, {});\n      return this.backend[fcName](lng, ns, function (err, data) {\n        if (err && data && tried < 5) {\n          setTimeout(function () {\n            _this3.read.call(_this3, lng, ns, fcName, tried + 1, wait * 2, callback);\n          }, wait);\n          return;\n        }\n\n        callback(err, data);\n      });\n    }\n  }, {\n    key: \"prepareLoading\",\n    value: function prepareLoading(languages, namespaces) {\n      var _this4 = this;\n\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var callback = arguments.length > 3 ? arguments[3] : undefined;\n\n      if (!this.backend) {\n        this.logger.warn('No backend was added via i18next.use. Will not load resources.');\n        return callback && callback();\n      }\n\n      if (typeof languages === 'string') languages = this.languageUtils.toResolveHierarchy(languages);\n      if (typeof namespaces === 'string') namespaces = [namespaces];\n      var toLoad = this.queueLoad(languages, namespaces, options, callback);\n\n      if (!toLoad.toLoad.length) {\n        if (!toLoad.pending.length) callback();\n        return null;\n      }\n\n      toLoad.toLoad.forEach(function (name) {\n        _this4.loadOne(name);\n      });\n    }\n  }, {\n    key: \"load\",\n    value: function load(languages, namespaces, callback) {\n      this.prepareLoading(languages, namespaces, {}, callback);\n    }\n  }, {\n    key: \"reload\",\n    value: function reload(languages, namespaces, callback) {\n      this.prepareLoading(languages, namespaces, {\n        reload: true\n      }, callback);\n    }\n  }, {\n    key: \"loadOne\",\n    value: function loadOne(name) {\n      var _this5 = this;\n\n      var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      var s = name.split('|');\n      var lng = s[0];\n      var ns = s[1];\n      this.read(lng, ns, 'read', undefined, undefined, function (err, data) {\n        if (err) _this5.logger.warn(\"\".concat(prefix, \"loading namespace \").concat(ns, \" for language \").concat(lng, \" failed\"), err);\n        if (!err && data) _this5.logger.log(\"\".concat(prefix, \"loaded namespace \").concat(ns, \" for language \").concat(lng), data);\n\n        _this5.loaded(name, err, data);\n      });\n    }\n  }, {\n    key: \"saveMissing\",\n    value: function saveMissing(languages, namespace, key, fallbackValue, isUpdate) {\n      var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n\n      if (this.services.utils && this.services.utils.hasLoadedNamespace && !this.services.utils.hasLoadedNamespace(namespace)) {\n        this.logger.warn(\"did not save key \\\"\".concat(key, \"\\\" as the namespace \\\"\").concat(namespace, \"\\\" was not yet loaded\"), 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n        return;\n      }\n\n      if (key === undefined || key === null || key === '') return;\n\n      if (this.backend && this.backend.create) {\n        this.backend.create(languages, namespace, key, fallbackValue, null, _objectSpread({}, options, {\n          isUpdate: isUpdate\n        }));\n      }\n\n      if (!languages || !languages[0]) return;\n      this.store.addResource(languages[0], namespace, key, fallbackValue);\n    }\n  }]);\n\n  return Connector;\n}(EventEmitter);\n\nfunction get() {\n  return {\n    debug: false,\n    initImmediate: true,\n    ns: ['translation'],\n    defaultNS: ['translation'],\n    fallbackLng: ['dev'],\n    fallbackNS: false,\n    whitelist: false,\n    nonExplicitWhitelist: false,\n    supportedLngs: false,\n    nonExplicitSupportedLngs: false,\n    load: 'all',\n    preload: false,\n    simplifyPluralSuffix: true,\n    keySeparator: '.',\n    nsSeparator: ':',\n    pluralSeparator: '_',\n    contextSeparator: '_',\n    partialBundledLanguages: false,\n    saveMissing: false,\n    updateMissing: false,\n    saveMissingTo: 'fallback',\n    saveMissingPlurals: true,\n    missingKeyHandler: false,\n    missingInterpolationHandler: false,\n    postProcess: false,\n    postProcessPassResolved: false,\n    returnNull: true,\n    returnEmptyString: true,\n    returnObjects: false,\n    joinArrays: false,\n    returnedObjectHandler: false,\n    parseMissingKeyHandler: false,\n    appendNamespaceToMissingKey: false,\n    appendNamespaceToCIMode: false,\n    overloadTranslationOptionHandler: function handle(args) {\n      var ret = {};\n      if (_typeof(args[1]) === 'object') ret = args[1];\n      if (typeof args[1] === 'string') ret.defaultValue = args[1];\n      if (typeof args[2] === 'string') ret.tDescription = args[2];\n\n      if (_typeof(args[2]) === 'object' || _typeof(args[3]) === 'object') {\n        var options = args[3] || args[2];\n        Object.keys(options).forEach(function (key) {\n          ret[key] = options[key];\n        });\n      }\n\n      return ret;\n    },\n    interpolation: {\n      escapeValue: true,\n      format: function format(value, _format, lng, options) {\n        return value;\n      },\n      prefix: '{{',\n      suffix: '}}',\n      formatSeparator: ',',\n      unescapePrefix: '-',\n      nestingPrefix: '$t(',\n      nestingSuffix: ')',\n      nestingOptionsSeparator: ',',\n      maxReplaces: 1000,\n      skipOnVariables: false\n    }\n  };\n}\nfunction transformOptions(options) {\n  if (typeof options.ns === 'string') options.ns = [options.ns];\n  if (typeof options.fallbackLng === 'string') options.fallbackLng = [options.fallbackLng];\n  if (typeof options.fallbackNS === 'string') options.fallbackNS = [options.fallbackNS];\n\n  if (options.whitelist) {\n    if (options.whitelist && options.whitelist.indexOf('cimode') < 0) {\n      options.whitelist = options.whitelist.concat(['cimode']);\n    }\n\n    options.supportedLngs = options.whitelist;\n  }\n\n  if (options.nonExplicitWhitelist) {\n    options.nonExplicitSupportedLngs = options.nonExplicitWhitelist;\n  }\n\n  if (options.supportedLngs && options.supportedLngs.indexOf('cimode') < 0) {\n    options.supportedLngs = options.supportedLngs.concat(['cimode']);\n  }\n\n  return options;\n}\n\nfunction noop() {}\n\nvar I18n = function (_EventEmitter) {\n  _inherits(I18n, _EventEmitter);\n\n  function I18n() {\n    var _this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var callback = arguments.length > 1 ? arguments[1] : undefined;\n\n    _classCallCheck(this, I18n);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(I18n).call(this));\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    _this.options = transformOptions(options);\n    _this.services = {};\n    _this.logger = baseLogger;\n    _this.modules = {\n      external: []\n    };\n\n    if (callback && !_this.isInitialized && !options.isClone) {\n      if (!_this.options.initImmediate) {\n        _this.init(options, callback);\n\n        return _possibleConstructorReturn(_this, _assertThisInitialized(_this));\n      }\n\n      setTimeout(function () {\n        _this.init(options, callback);\n      }, 0);\n    }\n\n    return _this;\n  }\n\n  _createClass(I18n, [{\n    key: \"init\",\n    value: function init() {\n      var _this2 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 ? arguments[1] : undefined;\n\n      if (typeof options === 'function') {\n        callback = options;\n        options = {};\n      }\n\n      if (options.whitelist && !options.supportedLngs) {\n        this.logger.deprecate('whitelist', 'option \"whitelist\" will be renamed to \"supportedLngs\" in the next major - please make sure to rename this option asap.');\n      }\n\n      if (options.nonExplicitWhitelist && !options.nonExplicitSupportedLngs) {\n        this.logger.deprecate('whitelist', 'options \"nonExplicitWhitelist\" will be renamed to \"nonExplicitSupportedLngs\" in the next major - please make sure to rename this option asap.');\n      }\n\n      this.options = _objectSpread({}, get(), this.options, transformOptions(options));\n      this.format = this.options.interpolation.format;\n      if (!callback) callback = noop;\n\n      function createClassOnDemand(ClassOrObject) {\n        if (!ClassOrObject) return null;\n        if (typeof ClassOrObject === 'function') return new ClassOrObject();\n        return ClassOrObject;\n      }\n\n      if (!this.options.isClone) {\n        if (this.modules.logger) {\n          baseLogger.init(createClassOnDemand(this.modules.logger), this.options);\n        } else {\n          baseLogger.init(null, this.options);\n        }\n\n        var lu = new LanguageUtil(this.options);\n        this.store = new ResourceStore(this.options.resources, this.options);\n        var s = this.services;\n        s.logger = baseLogger;\n        s.resourceStore = this.store;\n        s.languageUtils = lu;\n        s.pluralResolver = new PluralResolver(lu, {\n          prepend: this.options.pluralSeparator,\n          compatibilityJSON: this.options.compatibilityJSON,\n          simplifyPluralSuffix: this.options.simplifyPluralSuffix\n        });\n        s.interpolator = new Interpolator(this.options);\n        s.utils = {\n          hasLoadedNamespace: this.hasLoadedNamespace.bind(this)\n        };\n        s.backendConnector = new Connector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);\n        s.backendConnector.on('*', function (event) {\n          for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            args[_key - 1] = arguments[_key];\n          }\n\n          _this2.emit.apply(_this2, [event].concat(args));\n        });\n\n        if (this.modules.languageDetector) {\n          s.languageDetector = createClassOnDemand(this.modules.languageDetector);\n          s.languageDetector.init(s, this.options.detection, this.options);\n        }\n\n        if (this.modules.i18nFormat) {\n          s.i18nFormat = createClassOnDemand(this.modules.i18nFormat);\n          if (s.i18nFormat.init) s.i18nFormat.init(this);\n        }\n\n        this.translator = new Translator(this.services, this.options);\n        this.translator.on('*', function (event) {\n          for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n            args[_key2 - 1] = arguments[_key2];\n          }\n\n          _this2.emit.apply(_this2, [event].concat(args));\n        });\n        this.modules.external.forEach(function (m) {\n          if (m.init) m.init(_this2);\n        });\n      }\n\n      if (this.options.fallbackLng && !this.services.languageDetector && !this.options.lng) {\n        var codes = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n        if (codes.length > 0 && codes[0] !== 'dev') this.options.lng = codes[0];\n      }\n\n      if (!this.services.languageDetector && !this.options.lng) {\n        this.logger.warn('init: no languageDetector is used and no lng is defined');\n      }\n\n      var storeApi = ['getResource', 'hasResourceBundle', 'getResourceBundle', 'getDataByLanguage'];\n      storeApi.forEach(function (fcName) {\n        _this2[fcName] = function () {\n          var _this2$store;\n\n          return (_this2$store = _this2.store)[fcName].apply(_this2$store, arguments);\n        };\n      });\n      var storeApiChained = ['addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle'];\n      storeApiChained.forEach(function (fcName) {\n        _this2[fcName] = function () {\n          var _this2$store2;\n\n          (_this2$store2 = _this2.store)[fcName].apply(_this2$store2, arguments);\n\n          return _this2;\n        };\n      });\n      var deferred = defer();\n\n      var load = function load() {\n        var finish = function finish(err, t) {\n          if (_this2.isInitialized && !_this2.initializedStoreOnce) _this2.logger.warn('init: i18next is already initialized. You should call init just once!');\n          _this2.isInitialized = true;\n          if (!_this2.options.isClone) _this2.logger.log('initialized', _this2.options);\n\n          _this2.emit('initialized', _this2.options);\n\n          deferred.resolve(t);\n          callback(err, t);\n        };\n\n        if (_this2.languages && _this2.options.compatibilityAPI !== 'v1' && !_this2.isInitialized) return finish(null, _this2.t.bind(_this2));\n\n        _this2.changeLanguage(_this2.options.lng, finish);\n      };\n\n      if (this.options.resources || !this.options.initImmediate) {\n        load();\n      } else {\n        setTimeout(load, 0);\n      }\n\n      return deferred;\n    }\n  }, {\n    key: \"loadResources\",\n    value: function loadResources(language) {\n      var _this3 = this;\n\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n      var usedCallback = callback;\n      var usedLng = typeof language === 'string' ? language : this.language;\n      if (typeof language === 'function') usedCallback = language;\n\n      if (!this.options.resources || this.options.partialBundledLanguages) {\n        if (usedLng && usedLng.toLowerCase() === 'cimode') return usedCallback();\n        var toLoad = [];\n\n        var append = function append(lng) {\n          if (!lng) return;\n\n          var lngs = _this3.services.languageUtils.toResolveHierarchy(lng);\n\n          lngs.forEach(function (l) {\n            if (toLoad.indexOf(l) < 0) toLoad.push(l);\n          });\n        };\n\n        if (!usedLng) {\n          var fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n          fallbacks.forEach(function (l) {\n            return append(l);\n          });\n        } else {\n          append(usedLng);\n        }\n\n        if (this.options.preload) {\n          this.options.preload.forEach(function (l) {\n            return append(l);\n          });\n        }\n\n        this.services.backendConnector.load(toLoad, this.options.ns, usedCallback);\n      } else {\n        usedCallback(null);\n      }\n    }\n  }, {\n    key: \"reloadResources\",\n    value: function reloadResources(lngs, ns, callback) {\n      var deferred = defer();\n      if (!lngs) lngs = this.languages;\n      if (!ns) ns = this.options.ns;\n      if (!callback) callback = noop;\n      this.services.backendConnector.reload(lngs, ns, function (err) {\n        deferred.resolve();\n        callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"use\",\n    value: function use(module) {\n      if (!module) throw new Error('You are passing an undefined module! Please check the object you are passing to i18next.use()');\n      if (!module.type) throw new Error('You are passing a wrong module! Please check the object you are passing to i18next.use()');\n\n      if (module.type === 'backend') {\n        this.modules.backend = module;\n      }\n\n      if (module.type === 'logger' || module.log && module.warn && module.error) {\n        this.modules.logger = module;\n      }\n\n      if (module.type === 'languageDetector') {\n        this.modules.languageDetector = module;\n      }\n\n      if (module.type === 'i18nFormat') {\n        this.modules.i18nFormat = module;\n      }\n\n      if (module.type === 'postProcessor') {\n        postProcessor.addPostProcessor(module);\n      }\n\n      if (module.type === '3rdParty') {\n        this.modules.external.push(module);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"changeLanguage\",\n    value: function changeLanguage(lng, callback) {\n      var _this4 = this;\n\n      this.isLanguageChangingTo = lng;\n      var deferred = defer();\n      this.emit('languageChanging', lng);\n\n      var done = function done(err, l) {\n        if (l) {\n          _this4.language = l;\n          _this4.languages = _this4.services.languageUtils.toResolveHierarchy(l);\n\n          _this4.translator.changeLanguage(l);\n\n          _this4.isLanguageChangingTo = undefined;\n\n          _this4.emit('languageChanged', l);\n\n          _this4.logger.log('languageChanged', l);\n        } else {\n          _this4.isLanguageChangingTo = undefined;\n        }\n\n        deferred.resolve(function () {\n          return _this4.t.apply(_this4, arguments);\n        });\n        if (callback) callback(err, function () {\n          return _this4.t.apply(_this4, arguments);\n        });\n      };\n\n      var setLng = function setLng(lngs) {\n        if (!lng && !lngs && _this4.services.languageDetector) lngs = [];\n        var l = typeof lngs === 'string' ? lngs : _this4.services.languageUtils.getBestMatchFromCodes(lngs);\n\n        if (l) {\n          if (!_this4.language) {\n            _this4.language = l;\n            _this4.languages = _this4.services.languageUtils.toResolveHierarchy(l);\n          }\n\n          if (!_this4.translator.language) _this4.translator.changeLanguage(l);\n          if (_this4.services.languageDetector) _this4.services.languageDetector.cacheUserLanguage(l);\n        }\n\n        _this4.loadResources(l, function (err) {\n          done(err, l);\n        });\n      };\n\n      if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {\n        setLng(this.services.languageDetector.detect());\n      } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {\n        this.services.languageDetector.detect(setLng);\n      } else {\n        setLng(lng);\n      }\n\n      return deferred;\n    }\n  }, {\n    key: \"getFixedT\",\n    value: function getFixedT(lng, ns, keyPrefix) {\n      var _this5 = this;\n\n      var fixedT = function fixedT(key, opts) {\n        var options;\n\n        if (_typeof(opts) !== 'object') {\n          for (var _len3 = arguments.length, rest = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n            rest[_key3 - 2] = arguments[_key3];\n          }\n\n          options = _this5.options.overloadTranslationOptionHandler([key, opts].concat(rest));\n        } else {\n          options = _objectSpread({}, opts);\n        }\n\n        options.lng = options.lng || fixedT.lng;\n        options.lngs = options.lngs || fixedT.lngs;\n        options.ns = options.ns || fixedT.ns;\n        var keySeparator = _this5.options.keySeparator || '.';\n        var resultKey = keyPrefix ? \"\".concat(keyPrefix).concat(keySeparator).concat(key) : key;\n        return _this5.t(resultKey, options);\n      };\n\n      if (typeof lng === 'string') {\n        fixedT.lng = lng;\n      } else {\n        fixedT.lngs = lng;\n      }\n\n      fixedT.ns = ns;\n      fixedT.keyPrefix = keyPrefix;\n      return fixedT;\n    }\n  }, {\n    key: \"t\",\n    value: function t() {\n      var _this$translator;\n\n      return this.translator && (_this$translator = this.translator).translate.apply(_this$translator, arguments);\n    }\n  }, {\n    key: \"exists\",\n    value: function exists() {\n      var _this$translator2;\n\n      return this.translator && (_this$translator2 = this.translator).exists.apply(_this$translator2, arguments);\n    }\n  }, {\n    key: \"setDefaultNamespace\",\n    value: function setDefaultNamespace(ns) {\n      this.options.defaultNS = ns;\n    }\n  }, {\n    key: \"hasLoadedNamespace\",\n    value: function hasLoadedNamespace(ns) {\n      var _this6 = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (!this.isInitialized) {\n        this.logger.warn('hasLoadedNamespace: i18next was not initialized', this.languages);\n        return false;\n      }\n\n      if (!this.languages || !this.languages.length) {\n        this.logger.warn('hasLoadedNamespace: i18n.languages were undefined or empty', this.languages);\n        return false;\n      }\n\n      var lng = this.languages[0];\n      var fallbackLng = this.options ? this.options.fallbackLng : false;\n      var lastLng = this.languages[this.languages.length - 1];\n      if (lng.toLowerCase() === 'cimode') return true;\n\n      var loadNotPending = function loadNotPending(l, n) {\n        var loadState = _this6.services.backendConnector.state[\"\".concat(l, \"|\").concat(n)];\n\n        return loadState === -1 || loadState === 2;\n      };\n\n      if (options.precheck) {\n        var preResult = options.precheck(this, loadNotPending);\n        if (preResult !== undefined) return preResult;\n      }\n\n      if (this.hasResourceBundle(lng, ns)) return true;\n      if (!this.services.backendConnector.backend) return true;\n      if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;\n      return false;\n    }\n  }, {\n    key: \"loadNamespaces\",\n    value: function loadNamespaces(ns, callback) {\n      var _this7 = this;\n\n      var deferred = defer();\n\n      if (!this.options.ns) {\n        callback && callback();\n        return Promise.resolve();\n      }\n\n      if (typeof ns === 'string') ns = [ns];\n      ns.forEach(function (n) {\n        if (_this7.options.ns.indexOf(n) < 0) _this7.options.ns.push(n);\n      });\n      this.loadResources(function (err) {\n        deferred.resolve();\n        if (callback) callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"loadLanguages\",\n    value: function loadLanguages(lngs, callback) {\n      var deferred = defer();\n      if (typeof lngs === 'string') lngs = [lngs];\n      var preloaded = this.options.preload || [];\n      var newLngs = lngs.filter(function (lng) {\n        return preloaded.indexOf(lng) < 0;\n      });\n\n      if (!newLngs.length) {\n        if (callback) callback();\n        return Promise.resolve();\n      }\n\n      this.options.preload = preloaded.concat(newLngs);\n      this.loadResources(function (err) {\n        deferred.resolve();\n        if (callback) callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"dir\",\n    value: function dir(lng) {\n      if (!lng) lng = this.languages && this.languages.length > 0 ? this.languages[0] : this.language;\n      if (!lng) return 'rtl';\n      var rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ug', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam'];\n      return rtlLngs.indexOf(this.services.languageUtils.getLanguagePartFromCode(lng)) >= 0 ? 'rtl' : 'ltr';\n    }\n  }, {\n    key: \"createInstance\",\n    value: function createInstance() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 ? arguments[1] : undefined;\n      return new I18n(options, callback);\n    }\n  }, {\n    key: \"cloneInstance\",\n    value: function cloneInstance() {\n      var _this8 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n\n      var mergedOptions = _objectSpread({}, this.options, options, {\n        isClone: true\n      });\n\n      var clone = new I18n(mergedOptions);\n      var membersToCopy = ['store', 'services', 'language'];\n      membersToCopy.forEach(function (m) {\n        clone[m] = _this8[m];\n      });\n      clone.services = _objectSpread({}, this.services);\n      clone.services.utils = {\n        hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n      };\n      clone.translator = new Translator(clone.services, clone.options);\n      clone.translator.on('*', function (event) {\n        for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n          args[_key4 - 1] = arguments[_key4];\n        }\n\n        clone.emit.apply(clone, [event].concat(args));\n      });\n      clone.init(mergedOptions, callback);\n      clone.translator.options = clone.options;\n      clone.translator.backendConnector.services.utils = {\n        hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n      };\n      return clone;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return {\n        options: this.options,\n        store: this.store,\n        language: this.language,\n        languages: this.languages\n      };\n    }\n  }]);\n\n  return I18n;\n}(EventEmitter);\n\nvar i18next = new I18n();\n\nexport default i18next;\n","import i18n from \"i18next\";\n\n// Display units for the user to choose from\nconst DisplayUnits =  [\n    { name: 'File units', type: '' },\n    { name: 'Millimeters', type: 'mm', matches: ['millimeter', 'millimeters'] },\n    { name: 'Centimeters', type: 'cm', matches: ['centimeter', 'centimeters'] },\n    { name: 'Meters', type: 'm' },\n    { name: 'Inches', type: 'in', matches: ['inch', 'inches'] },\n    { name: 'Feet', type: 'ft', matches: ['foot'] },\n    { name: 'Feet and fractional inches', type: 'ft-and-fractional-in' },\n    { name: 'Feet and decimal inches', type: 'ft-and-decimal-in' },\n    { name: 'Decimal inches', type: 'decimal-in' },\n    { name: 'Decimal feet', type: 'decimal-ft' },\n    { name: 'Fractional inches', type: 'fractional-in' },\n    { name: 'Meters and centimeters', type: 'm-and-cm' },\n    { name: 'Points', type: 'pt', matches: ['point', 'points'] },\n];\n\nconst Precision = [\n  { name: 'File precision', value: '' },\n  { name: '0 (1)', value: 0 },\n  { name: '0.1 (1/2)', value: 1 },\n  { name: '0.01 (1/4)', value: 2 },\n  { name: '0.001 (1/8)', value: 3 },\n  { name: '0.0001 (1/16)', value: 4 },\n    { name: '0.00001 (1/32)', value: 5 },\n    { name: '0.000001 (1/64)', value: 6 }\n];\n\nexport const displayUnits = DisplayUnits.map(x => x.name);\nexport const displayUnitsEnum = DisplayUnits.map(x => x.type);\n\nexport const displayUnitsPrecision = Precision.map(x => x.name);\nexport const displayUnitsPrecisionEnum = Precision.map(x => x.value);\n\n\n// Include translated names in the match\n// This is to support variations such as mm, millimeters or millimeter, or their translated counterparts\nDisplayUnits.forEach((unitDef) => {\n    if (unitDef.matches) {\n        const traslated = unitDef.matches.map(x => i18n.t(x));\n        unitDef.matches = unitDef.matches.concat(traslated);\n    }\n});\n\nconst displayUnitsSet = new Set(displayUnitsEnum);\n\nexport function getUnitEnum(unit) {\n    unit = unit && unit.toLocaleLowerCase();\n    if (displayUnitsSet.has(unit)) {\n        return unit;\n    }\n\n    // find a good enum match for the unit\n    for (let i in DisplayUnits) {\n        const unitDef = DisplayUnits[i];\n        const matches = unitDef.matches;\n        if (matches && matches.indexOf(unit) > -1) {\n            return unitDef.type;\n        }\n    }\n\n    return null;\n}","\nimport i18n from \"i18next\";\nimport {default as FORGE_UNITS} from \"./units-compact.json\";\nimport { getUnitEnum } from './DisplayUnits';\n\n/**\n * Model units enum\n * @memberof Autodesk.Viewing.Private\n * @alias Autodesk.Viewing.Private#ModelUnits\n */\nexport var ModelUnits = {\n    METER       : 'm',\n    CENTIMETER  : 'cm',\n    MILLIMETER  : 'mm',\n    FOOT        : 'ft',\n    INCH        : 'in',\n    POINT       : 'pt'\n};\n\nconst UnitScales = {\n    [ModelUnits.METER]          : 1.0,\n    [ModelUnits.CENTIMETER]     : 0.01,\n    [ModelUnits.MILLIMETER]     : 0.001,\n    [ModelUnits.FOOT]           : 0.3048,\n    [ModelUnits.INCH]           : 0.0254,\n    [ModelUnits.POINT]          : 0.0254 / 72 //A typographical point is 1/72 of an international inch\n};\n\nfunction getExponentSymbol(exponent) {\n    let exponentSymbol = '';\n    if (exponent === 2) {\n        exponentSymbol = String.fromCharCode(0xb2);\n    } else if (exponent === 3) {\n        exponentSymbol = String.fromCharCode(0xb3);\n    }\n    return exponentSymbol;\n}\n\nfunction modf(x) {\n    var intPart = (0 <= x) ? Math.floor(x) : Math.ceil(x),\n        fracPart = x - intPart;\n    return {intPart: intPart, fracPart: fracPart};\n}\n\nfunction formatNumber(x, precision, needMinusSign) {\n    var result = '';\n\n    if (needMinusSign && x === 0) {\n        result += '-';\n    }\n\n    //According to Shawn's request, do not truncate trailing .0's\n    //if (modf(x).fracPart === 0) {\n    //\n    //    // No fractional part.\n    //    //\n    //    result += x;\n    //\n    //} else if (0 < precision) {\n    if (0 < precision) {\n\n        // Truncate any trailing .0's.\n        //\n        //var s = x.toFixed(precision);\n        //var re = /^\\-?([0-9]+)\\.0+$/;\n        //var m = re.exec(s);\n        //if (m !== null) {\n        //    result += m[1];\n        //} else {\n        //    result += s;\n        //}\n\n        result += x.toFixed(precision);\n\n    } else {\n        result += x.toFixed(0);\n    }\n\n    return result;\n}\n\nfunction formatFeet(value, precision, inchesOnly, symbols) {\n\n    // Borrowed from AdCoreUnits PrimeDoublePrimeSymbol2::Format\n\n    var result = '',\n        radix = 12.0,\n        denominator = 1.0,\n        isNegative = (value < 0);\n\n    for (var i = 0; i < precision; ++i) {\n        denominator *= 2.0;\n    }\n\n    // round to the nearest 1/denominator\n    if (value > 0) {\n        value += 0.5/denominator;\n    } else {\n        value -= 0.5/denominator;\n    }\n\n    var primeValue, doublePrimeValue;\n\n    if (!inchesOnly) {\n        primeValue = modf(value/radix).intPart;\n        result += formatNumber(primeValue, 0, isNegative) + symbols.feet + ' ';\n        doublePrimeValue = value - (primeValue * radix);\n        if (doublePrimeValue < 0) {\n            doublePrimeValue = -doublePrimeValue;\n        }\n\n    } else {\n        doublePrimeValue = value;\n    }\n\n    var intPart = modf(doublePrimeValue).intPart;\n    var numerator = modf((doublePrimeValue - intPart) * denominator).intPart;\n\n    if (numerator === 0 || intPart !== 0) {\n        result += formatNumber(intPart, 0);\n    }\n\n    if (numerator !== 0) {\n        if (intPart < 0 && numerator < 0) {\n            numerator = -numerator;\n        }\n        while (numerator % 2 === 0) {\n            numerator /= 2;\n            denominator /= 2;\n        }\n        if (intPart !== 0) {\n            result += '-';\n        }\n        result += formatNumber(numerator, 0) + '/' + formatNumber(denominator, 0);\n    }\n\n    result += symbols.inches;\n    return result;\n}\n\nfunction formatMeterAndCentimeter(value, precision, exponent = 1) {\n    var sign = '';\n    if (value < 0) {\n        sign = '-';\n        value = Math.abs(value);\n    }\n    var modfValue = modf(value),\n        mValue = modfValue.intPart,\n        cmValue = modfValue.fracPart * Math.pow(100.0, exponent);\n\n    const exponentSymbol = getExponentSymbol(exponent);\n\n    let formattedMValue = formatNumber(mValue, 0);\n    let formattedCmValue = formatNumber(cmValue, precision);\n\n    if (formattedCmValue.startsWith(Math.pow(100.0, exponent).toString())) {\n        formattedMValue = formatNumber(mValue + 1, 0);\n        formattedCmValue = formatNumber(0, precision);\n    }\n\n    return sign + formattedMValue + ` m${exponentSymbol} ` + formattedCmValue + ` cm${exponentSymbol}`;\n}\n\nfunction formatFeetAndDecimalInches(value, precision, symbols, exponent = 1) {\n    var sign = '';\n    if (value < 0) {\n        sign = '-';\n        value = Math.abs(value);\n    }\n    var modfValue = modf(value),\n        ftValue = modfValue.intPart,\n        inValue = modfValue.fracPart * Math.pow(12.0, exponent);\n\n    const exponentSymbol = getExponentSymbol(exponent);\n\n    let formattedFtValue = formatNumber(ftValue, 0);\n    let formattedInValue = formatNumber(inValue, precision);\n\n    if (formattedInValue.startsWith(Math.pow(12.0, exponent).toString())) {\n        formattedFtValue = formatNumber(ftValue + 1, 0);\n        formattedInValue = formatNumber(0, precision);\n    }\n\n    return sign\n        + formattedFtValue + symbols.feet + exponentSymbol + ' '\n        + formattedInValue + symbols.inches + exponentSymbol;\n}\n\n\n//Hardcoded Forge units that imply specific symbol formatting\n//TODO: Not all of these are supported by the formatting code in LMV,\n//so some are commented out.\nconst customFormattingMap = {\n    feetFractionalInches: \"ft-and-fractional-in\",\n    fractionalInches: \"fractional-in\",\n    feet: \"feet\",\n    inches: \"inches\",\n    /*\n    metersCentimeters: \"meters\",\n    degreesMinutes: \"degrees\",\n    slopeDegrees: \"degrees\",\n    */\n    stationingFeet: \"feet\",\n    /*\n    stationingMeters: \"meters\",\n    stationingSurveyFeet: \"usSurveyFeet\"\n     */\n};\n\nfunction forgeUnitToSymbol(units) {\n\n    /**\n     * The Forge unit mapping file (units.json and units-compact.json) is generated from the Forge schema files.\n     * The script that does that is located here: https://git.autodesk.com/constructwin/dt-schemas\n     */\n\n    if (!units || !units.startsWith(\"autodesk.unit.unit:\"))\n        return units;\n\n    let schemaName = units.split(\":\")[1];\n    let unitId = schemaName.split(\"-\")[0];\n    let unitDef = FORGE_UNITS.unit[unitId];\n    if (unitDef) {\n        let customFormattingStyle = customFormattingMap[unitId];\n        if (customFormattingStyle) {\n            return customFormattingStyle;\n        }\n        //If there is no custom formatting for this unit, use its schema symbol\n        if (!unitDef.symbols) {\n            console.warn(\"Unit without symbols.\", unitDef);\n            return \"\";\n        }\n        //If there is a default symbol for this unit, use it\n        if (unitDef.defaultSymbol && unitDef.symbols[unitDef.defaultSymbol]) {\n            return unitDef.symbols[unitDef.defaultSymbol];\n        }\n        //There can be multiple symbols, we pick the first one.\n        for (let s in unitDef.symbols) {\n            return unitDef.symbols[s];\n        }\n    } else {\n        console.warn(\"Failed to find Forge unit schema for\", units);\n        return units;\n    }\n\n}\n\nfunction formatWithSymbol(value, symbol) {\n    const spacing = symbol.space ? ' ' : '';\n    if (symbol.placement === 'Prefix') {\n        return symbol.text + spacing + value;\n    } else { // Assuming 'Suffix' placement by default\n        return value + spacing + symbol.text;\n    }\n}\n\n\n/**\n * Formats a value with units\n * @param {number} value\n * @param {string} units - GNU units format or Forge Unit ID (see https://git.autodesk.com/forge/HFDMSchemas/tree/master/schemas/autodesk/unit)\n * @param {number} type - For example: 1=boolean, 2=integer, 3=double, 20=string, 24=Position\n * @param {number} precision - required precision.\n * @param {Object} [options] - An optional dictionary of options.\n * @param {boolean} [options.noMixedArea] - For mixed area units such as 'm-and-cm', fallback to the larger unit.\n * @param {boolean} [options.noMixedVolume] - For mixed volume units such as 'm-and-cm', fallback to the larger unit.\n * @param {boolean} [options.preferLetters] - For inches and feet, use 'in' and 'ft' over ' and \" respectively.\n * see https://git.autodesk.com/A360/platform-translation-propertydb/blob/master/propertydb/PropertyDatabase.h\n * @returns {string} formatted value\n */\nexport function formatValueWithUnits(value, units, type, precision, options) {\n\n    var result;\n\n    if (precision === null || precision === undefined) {\n        precision = 3;\n    }\n\n    options = options || {};\n    const feetAndInchesSymbols = options.preferLetters ? { feet: ' ft', inches: ' in' } : { feet: '\\'', inches: '\"'};\n\n    //Is it a Forge unit?\n    units = forgeUnitToSymbol(units);\n\n    // TODO(go) - 20150504: Ideally this would be handled better: according to the git file at the top property types can be 0,1,2,3,10,11,20,21,22,23,24\n    // TODO(go) - 20150504: The code below only handle Boolean (1) Integer (2) and double (3). Not sure how well the property types are assigned so using\n    // TODO(go) - 20150504: try catch for now.\n    try {\n\n        if (type === 1) { // Boolean\n            result = i18n.t(value ? 'Yes' : 'No');\n\n        } else if (type === 24) { // Position\n            var position = value.split(' ');\n            result = [];\n\n            for(var i = 0; i < position.length; ++i) {\n                result.push(formatValueWithUnits(parseFloat(position[i]), units, 3, precision));\n            }\n\n            result = result.join(', ');\n\n        } else if ((type === 2 || type === 3) && isNaN(value)) {\n            result = 'NaN';\n\n        } else if (units === 'ft-and-fractional-in') {\n            result = formatFeet(value * 12.0, precision, false, feetAndInchesSymbols);\n\n        } else if (units === 'ft-and-fractional-in^2') {\n            result = options.noMixedArea\n                ? formatNumber(value, precision) + ' ft' + getExponentSymbol(2)\n                : formatFeet(value * 12.0, precision, false, feetAndInchesSymbols) + ' ' + getExponentSymbol(2);\n\n        } else if (units === 'ft-and-fractional-in^3') {\n            result = options.noMixedVolume\n                ? formatNumber(value, precision) + ' ft' + getExponentSymbol(3)\n                : formatFeet(value * 12.0, precision, false, feetAndInchesSymbols) + ' ' + getExponentSymbol(3);\n\n        } else if (units === 'ft-and-decimal-in') {\n            result = formatFeetAndDecimalInches(value, precision, feetAndInchesSymbols);\n\n        } else if (units === 'ft-and-decimal-in^2') {\n            result = options.noMixedArea\n                ? formatNumber(value, precision) + ' ft' + getExponentSymbol(2)\n                : formatFeetAndDecimalInches(value, precision, feetAndInchesSymbols, 2);\n\n        } else if (units === 'ft-and-decimal-in^3') {\n            result = options.noMixedVolume\n                ? formatNumber(value, precision) + ' ft' + getExponentSymbol(3)\n                : formatFeetAndDecimalInches(value, precision, feetAndInchesSymbols, 3);\n\n        } else if (units === 'decimal-in' || units === 'in' || units === 'inch' || units === 'inches') {\n            result = formatNumber(value, precision) + feetAndInchesSymbols.inches;\n\n        } else if (units === 'decimal-in^2' || units === 'in^2' || units === 'inch^2') {\n            result = formatNumber(value, precision) + ' in' + getExponentSymbol(2);\n\n        } else if (units === 'decimal-in^3' || units === 'in^3' || units === 'inch^3') {\n            result = formatNumber(value, precision) + ' in' + getExponentSymbol(3);\n\n        } else if (units === 'decimal-in-sq' || units === 'fractional-in-sq') {\n            result = formatNumber(value, precision) + ' sq. in';\n\n        } else if (units === 'decimal-ft' || units === 'ft' || units === 'feet' || units === 'foot') {\n            result = formatNumber(value, precision) + feetAndInchesSymbols.feet;\n\n        } else if (units === 'decimal-ft^2' || units === 'ft^2' || units === 'feet^2' || units === 'foot^2') {\n            result = formatNumber(value, precision) + ' ft' + getExponentSymbol(2);\n\n        } else if (units === 'decimal-ft^3' || units === 'ft^3' || units === 'feet^3' || units === 'foot^3') {\n            result = formatNumber(value, precision) + ' ft' + getExponentSymbol(3);\n\n        } else if (units === 'decimal-ft-sq' || units === 'ft-and-fractional-in-sq' || units === 'ft-and-decimal-in-sq') {\n            // Not mixing feet and inches in area measurements for this unit set, instead just show square feet.\n            result = formatNumber(value, precision) + ' sq. ft';\n\n        } else if (units === 'fractional-in') {\n            result = formatFeet(value, precision, true, feetAndInchesSymbols);\n\n        } else if (units === 'fractional-in^2') {\n            result = formatFeet(value, precision, true, feetAndInchesSymbols) + getExponentSymbol(2);\n\n        } else if (units === 'fractional-in^3') {\n            result = formatFeet(value, precision, true, feetAndInchesSymbols) + getExponentSymbol(3);\n\n        } else if (units === 'm-and-cm') {\n            result = formatMeterAndCentimeter(value, precision);\n\n        } else if (units === 'm-and-cm^2') {\n            result = options.noMixedArea\n                ? formatNumber(value, precision) + ' m' + getExponentSymbol(2)\n                : formatMeterAndCentimeter(value, precision, 2);\n\n        } else if (units === 'm-and-cm^3') {\n            result = options.noMixedVolume\n                ? formatNumber(value, precision) + ' m' + getExponentSymbol(3)\n                : formatMeterAndCentimeter(value, precision, 3);\n\n        } else if (units && units.text) {\n            const formattedValue = type === 3 ? formatNumber(value, precision) : value;\n            result = formatWithSymbol(formattedValue, units);\n\n        } else if (type === 3 && units) { // Double, with units\n            units = units.replace(\"^2\", getExponentSymbol(2));\n            units = units.replace(\"^3\", getExponentSymbol(3));\n            result = formatNumber(value, precision) + ' ' + units;\n\n        } else if (units) {\n            result = value + ' ' + units;\n\n        } else if (type === 3) { // Double, no units\n            result = formatNumber(value, precision);\n\n        } else {\n            result = value;\n        }\n\n    } catch (e) {\n\n        if (units) {\n            result = value + ' ' + units;\n        } else {\n            result = value;\n        }\n    }\n\n    return result;\n}\n\n/**\n * @private\n * Converts a unit string from model metadata to standard format. The unit string can vary based on source product\n * and this function normalizes it.\n * @memberof Autodesk.Viewing.Private\n * @alias Autodesk.Viewing.Private#fixUnitString\n */\nexport function fixUnitString(unit) {\n    unit = unit?.toLowerCase();\n    //Why are translators not using standard strings for those?!?!?!?\n    switch (unit) {\n        case 'meter'      :\n        case 'meters'     :\n        case 'm'          :\n            return ModelUnits.METER;\n        case 'foot'       :\n        case 'feet'       :\n        case 'ft'         :\n            return ModelUnits.FOOT;\n        case 'feet and inches':\n        case 'inch'       :\n        case 'inches'     :\n        case 'in'         :\n            return ModelUnits.INCH;\n        case 'centimeter' :\n        case 'centimeters':\n        case 'cm'         :\n            return ModelUnits.CENTIMETER;\n        case 'millimeter' :\n        case 'millimeters':\n        case 'mm'         :\n            return ModelUnits.MILLIMETER;\n        case 'point'       :\n        case 'points'     :\n        case 'pt'         :\n            return ModelUnits.POINT;\n        default:\n            return unit;\n    }\n}\n\n/**\n * Returns an object that contains the standard unit string (unitString) and the scale value (unitScale).\n * @param {string} unit - Unit name from the metadata\n * @returns {object} this object contains the standardized unit string (unitString) and a unit scaling value (unitScale)\n *\n * @memberof Autodesk.Viewing.Private\n * @alias Autodesk.Viewing.Private#getUnitData\n */\nexport function getUnitData(unit)\n{\n    let unitString = fixUnitString(unit);\n    return {\n        unitString: unitString,\n        unitScale: UnitScales[unitString] || 1.0\n    };\n}\n\n/**\n * Convert distance from unit to unit.\n * @param {string} fromUnits - GNU units format - units to convert from\n * @param {string} toUnits - GNU units format - units to convert to\n * @param {number} calibrationFactor - Calibration Factor of the model\n * @param {number} d - distance to convert\n * @param {string} type - default for distance, \"square\" for area\n * @param {string} dpi - Used to convert points units. default is 72 DPI.\n * @memberof Autodesk.Viewing.Private\n * @alias Autodesk.Viewing.Private#convertUnits*\n * @returns {number} - distance after conversion.\n */\nexport function convertUnits(fromUnits, toUnits, calibrationFactor, d, type, dpi) {\n\n    fromUnits = fixUnitString(fromUnits);\n    toUnits = fixUnitString(toUnits);\n\n    calibrationFactor = calibrationFactor ? calibrationFactor : 1;\n    dpi = dpi || 72;\n\n    if (fromUnits === toUnits && calibrationFactor === 1)\n        return d;\n\n    const M = ModelUnits;\n    const U = UnitScales;\n\n    var toFactor = 1;\n    switch (toUnits) {\n        case M.MILLIMETER: toFactor = 1/U[M.MILLIMETER]; break;\n        case M.CENTIMETER: toFactor = 1/U[M.CENTIMETER]; break;\n        case M.METER : toFactor = 1; break;\n        case M.INCH: toFactor = 1/U[M.INCH]; break;\n        case M.FOOT: toFactor = 1/U[M.FOOT]; break;\n        case \"ft-and-fractional-in\": toFactor = 1/U[M.FOOT]; break;\n        case \"ft-and-decimal-in\": toFactor = 1/U[M.FOOT]; break;\n        case \"decimal-in\": toFactor = 1/U[M.INCH]; break;\n        case \"decimal-ft\": toFactor = 1/U[M.FOOT]; break;\n        case \"fractional-in\": toFactor = 1/U[M.INCH]; break;\n        case \"m-and-cm\": toFactor = 1; break;\n        case M.POINT: toFactor = 1/U[M.INCH] * dpi; break;\n    }\n\n    var fromFactor = 1;\n    switch (fromUnits) {\n        case M.MILLIMETER: fromFactor = U[M.MILLIMETER]; break;\n        case M.CENTIMETER: fromFactor = U[M.CENTIMETER]; break;\n        case M.METER : fromFactor = U[M.METER]; break;\n        case M.INCH: fromFactor = U[M.INCH]; break;\n        case M.FOOT: fromFactor = U[M.FOOT]; break;\n        case \"ft-and-fractional-in\": fromFactor = U[M.FOOT]; break;\n        case \"ft-and-decimal-in\": fromFactor = U[M.FOOT]; break;\n        case \"decimal-in\": fromFactor = U[M.INCH]; break;\n        case \"decimal-ft\": fromFactor = U[M.FOOT]; break;\n        case \"fractional-in\": fromFactor = U[M.INCH]; break;\n        case \"m-and-cm\": fromFactor = 1; break;\n        case M.POINT: fromFactor = U[M.INCH] / dpi; break;\n    }\n\n    if (type === \"square\") {\n        return d ? (d * Math.pow(toFactor * fromFactor * calibrationFactor, 2)) : 0;\n    } else if (type === \"cube\") {\n        return d ? (d * Math.pow(toFactor * fromFactor * calibrationFactor, 3)) : 0;\n    }\n    return d ? (d * toFactor * fromFactor * calibrationFactor) : 0;\n}\n\n/**\n * Count the number of digits after the floating point of a given number.\n * If the numer is a fraction, count the power of 2 of the denominator.\n * @param {string | number} number.\n * @returns {number} - number of digits after the floating point of the given number.\n */\n\nexport function calculatePrecision(number) {\n\n    if (!number)\n        return 0;\n\n    var digits = number.toString().split(\".\")[1];\n\n    // Try fractional number\n    if (!digits) {\n        var denominatorStrRaw = number.toString().split(\"/\")[1];\n        var denominatorNumberStr = denominatorStrRaw && denominatorStrRaw.match(/\\d+/);\n        if (denominatorNumberStr) {\n            var denominator = parseFloat(denominatorNumberStr);\n            if (denominator && !isNaN(denominator)) {\n                return Math.floor(Math.log2(denominator));\n            }\n        }\n\n        return 0;\n    }\n    digits = digits.match(/\\d+/);\n    return (digits && digits[0] && digits[0].length) || 0;\n}\n\n\n/**\n * Convert from source to target units\n * Only source units of type distance, area and volume will be converted.\n * For any other type, the source value is returned without conversion\n * @param {number} value\n * @param {number} valueType - For example: 1=boolean, 2=integer, 3=double, 20=string, 24=Position\n * @param {string} sourceUnits\n * @param {string} targetUnits\n */\nexport function convertToDisplayUnits(value, valueType, sourceUnits, targetUnits) {\n    if (!sourceUnits || !targetUnits) {\n        return { displayValue: value, displayUnits: sourceUnits };\n    }\n\n    let baseUnits = sourceUnits;\n    let displayUnits = targetUnits;\n\n    // transform forge units\n    const forgeUnits = forgeUnitToSymbol(baseUnits);\n    if (typeof forgeUnits === 'object' && 'text' in forgeUnits) {\n        baseUnits = forgeUnits.text;\n    }\n\n    if (baseUnits) {\n        // take care of area and volume\n        baseUnits = baseUnits.replace(/$/, '^2').replace(/$/, '^3');\n    }\n\n    // Area or volume?\n    let distanceType;\n    if (/\\^2$/.test(baseUnits)) {\n        baseUnits = baseUnits.replace('^2', '');\n        displayUnits += '^2';\n        distanceType = \"square\";\n    } else if (/\\^3$/.test(baseUnits)) {\n        baseUnits = baseUnits.replace('^3', '');\n        displayUnits += '^3';\n        distanceType = \"cube\";\n    }\n\n    // Skip conversion if source unit is not a supported display unit\n    // for e.g., mass and density\n    baseUnits = getUnitEnum(baseUnits);\n    if (baseUnits === null) {\n        return { displayValue: value, displayUnits: sourceUnits };\n    }\n\n    // Only convert numerical values\n    if (valueType === 2 /*integer*/ || valueType === 3 /*double*/) {\n        const displayValue = convertUnits(baseUnits, targetUnits, 1, value, distanceType, null);\n        return { displayValue: displayValue, displayUnits: displayUnits };\n    } else if (valueType === 24 /*position*/) {\n        const position = value\n          .split(' ')\n          .map(v => convertUnits(baseUnits, targetUnits, 1, v, distanceType, null))\n          .join(' ');\n\n        return { displayValue: position, displayUnits: displayUnits };\n    }\n\n\n    return { displayValue: value, displayUnits: sourceUnits };\n}\n\n// Simplifies combined unit strings to just the main unit alone.\n// Example: \"ft-and-fractional-in\" => \"ft\"\nexport function getMainUnit(unit) {\n    switch(unit) {\n        case 'decimal-ft':\n        case 'ft-and-fractional-in':\n        case 'ft-and-decimal-in':\n            return 'ft';\n\n        case 'decimal-in':\n        case 'fractional-in':\n            return 'in';\n\n        case 'm-and-cm':\n            return 'm';\n    }\n    return unit;\n}\n","\nimport THREE from \"three\";\nimport { SnapType } from \"./SnapTypes\";\nimport { MeasurementTypes } from \"./MeasurementTypes\";\nimport { convertUnits, formatValueWithUnits } from \"./UnitFormatter\";\n\n    export const EPSILON = 0.0001;\n\n    export function getSnapResultPosition(pick, viewer) {\n        if (!pick) {\n            return null;\n        }\n\n        if (pick.isPerpendicular) {\n            return pick.intersectPoint;\n        }\n\n        switch (pick.geomType) {\n            case SnapType.SNAP_VERTEX:\n            case SnapType.RASTER_PIXEL:\n            case SnapType.SNAP_MIDPOINT:\n            case SnapType.SNAP_CIRCLE_CENTER:\n                return pick.getGeometry();\n\n            case SnapType.SNAP_EDGE:\n                var eps = getEndPointsInEdge(pick.getGeometry());\n                var p1 = eps[0].clone();\n                var p2 = eps[1].clone();\n                return nearestPointInPointToLine(pick.intersectPoint, p1, p2);\n\n            case SnapType.SNAP_FACE:\n                return nearestPointInPointToPlane(pick.intersectPoint, pick.getGeometry().vertices[0], pick.faceNormal);\n\n            case SnapType.SNAP_CIRCULARARC:\n                if (viewer && viewer.model && viewer.model.is2d()) {\n                    var point = pick.snapPoint;\n                    pick.geomType = SnapType.SNAP_VERTEX;\n                    pick.geomVertex = point;\n                    return point;\n\n                } else {\n                    // For 3D models, currently we don't have the center geometry of the circle.\n                    // So the only way to select the center is by selecting the perimeter.\n                    return pick.circularArcCenter;\n                }\n\n            case SnapType.SNAP_CURVEDEDGE:\n                return nearestVertexInVertexToEdge(pick.intersectPoint, pick.getGeometry());\n\n            case SnapType.SNAP_CURVEDFACE:\n                return pick.intersectPoint;\n\n            // For snapping intersections, the snapped position is already computed.\n            case SnapType.SNAP_INTERSECTION:\n                return pick.snapPoint;\n\n            default:\n                return null;\n        }\n    };\n\n    export function correctPerpendicularPicks(firstPick, secondPick, viewer, snapper) {\n\n        if (!firstPick || !secondPick || !firstPick.getGeometry() || !secondPick.getGeometry()) {\n            return false;\n        }\n\n        var start = getSnapResultPosition(firstPick, viewer);\n\n        if (snapper && viewer) {\n\n            // Simple _ to Edge - Snap the second pick when it's 90 degrees.\n            if (secondPick.geomType === SnapType.SNAP_EDGE) {\n                var v2 = new THREE.Vector3();\n                var v3 = new THREE.Vector3();\n\n                var secondEdge = secondPick.getGeometry();\n                v2.subVectors(secondPick.intersectPoint, start).normalize(); // rubberband vector\n                v3.subVectors(secondEdge.vertices[0], secondEdge.vertices[1]).normalize();\n\n                if(isPerpendicular(v2, v3, 0.05)) {\n                    var newPoint = nearestPointInPointToSegment(start, secondEdge.vertices[0], secondEdge.vertices[1], true);\n\n                    if (newPoint) {\n                        if (snapper.onMouseMove(project(newPoint, viewer))) {\n                            snapper.setPerpendicular(true);\n                        }\n\n                        secondPick.geomVertex = newPoint;\n                        secondPick.intersectPoint = newPoint;\n                        return true;\n                    }\n                }\n            }\n\n            // Simple _ to Face - Snap the second pick when it's 90 degrees.\n            else if (secondPick.geomType === SnapType.SNAP_FACE) {\n\n                var v = new THREE.Vector3();\n\n                var secondFace = secondPick.getGeometry();\n\n                v.subVectors(secondPick.intersectPoint, start).normalize(); // rubberband vector\n\n                if(isParallel(secondPick.faceNormal, v, 0.05)) {\n\n                    var newPoint = nearestPointInPointToPlane(start, secondFace.vertices[0], secondPick.faceNormal);\n                    if (snapper.onMouseMove(project(newPoint, viewer))) {\n                        snapper.setPerpendicular(true);\n                    }\n\n                    secondPick.geomVertex = newPoint;\n                    secondPick.intersectPoint = newPoint;\n                    return true;\n                }\n            }\n        }\n    };\n\n    function convertCoordinates(point1, point2, viewer, firstPick) {\n        // Convert coords when in 2D\n        if (viewer.model.is2d()) {\n            // Issue is that unsnapped/free measures do not have a viewportIndex, so set to Id if null\n            firstPick.viewportIndex2d = viewer.model.isPdf ? firstPick.viewportIndex2d : (firstPick.viewportIndex2d || firstPick.id);\n            viewer.model.pageToModel(point1, point2, firstPick.viewportIndex2d);\n        }\n    }\n\n    function getUnits(firstPick, viewer) {\n        // The viewport, that was measured in, might use a different unit than the model. So pass it along.\n        let units;\n        const vpId = firstPick.viewportIndex2d;\n        const viewports = viewer?.model?.getData()?.viewports;\n\n        if (viewports && vpId !== undefined) {\n            units = viewports[vpId]?.units;\n        }\n        return units;\n    };\n\n    export function calculateDistance(firstPick, secondPick, dPrecision, viewer) {\n\n        if (!firstPick || !secondPick || !firstPick.getGeometry() || !secondPick.getGeometry()) {\n            return null;\n        }\n\n        var ep1 = getSnapResultPosition(firstPick, viewer).clone();\n        var ep2 = getSnapResultPosition(secondPick, viewer).clone();\n\n        if (!ep1 || !ep2) {\n            return null;\n        }\n\n        if (isEqualVectors(ep1, ep2, EPSILON)) {\n            return null;\n        }\n\n        var distanceXYZ, distanceX, distanceY, distanceZ;\n\n        convertCoordinates(ep1, ep2, viewer, firstPick);\n\n        const units = getUnits(firstPick, viewer);\n\n        // Include resolution limits for high precision 2D-measurements, where available\n        if (dPrecision) {\n\n            dPrecision = processDPrecision(dPrecision);\n\n            // Adjust the distances aligned by the precision\n            var measurementDistance = ep1.distanceTo(ep2);\n            distanceXYZ = applyDPrecision(measurementDistance, dPrecision);\n\n            measurementDistance = Math.abs(ep1.x - ep2.x);\n            distanceX = applyDPrecision(measurementDistance, dPrecision);\n\n            measurementDistance = Math.abs(ep1.y - ep2.y);\n            distanceY = applyDPrecision(measurementDistance, dPrecision);\n\n            return {\n                distanceXYZ: distanceXYZ,\n                distanceX: distanceX,\n                distanceY: distanceY,\n                distanceZ: 0,\n                type: MeasurementTypes.MEASUREMENT_DISTANCE,\n                units\n            };\n        }\n\n        // Calculation for 3D models and 2D models without resolution limits\n        distanceXYZ = ep1.distanceTo(ep2);\n        distanceX = Math.abs(ep1.x - ep2.x);\n        distanceY = Math.abs(ep1.y - ep2.y);\n        distanceZ = Math.abs(ep1.z - ep2.z);\n        return {\n            distanceXYZ: distanceXYZ,\n            distanceX: distanceX,\n            distanceY: distanceY,\n            distanceZ: distanceZ,\n            type: MeasurementTypes.MEASUREMENT_DISTANCE,\n            units\n        };\n    };\n\n    export function getDpiPrecision(model, viewportIndex) {\n\n        // Only do this for 2D models.\n        if (model.is3d()) {\n            return 0;\n        }\n\n        // TODO: The measurement values were returning incorrect results because the logical_width and logical_height is not being exported for PDFs.\n        // This issue was introduced with the PDF viewport changes: PR-3523\n        if (model.isPdf()) {\n            return 0\n        }\n\n        // Include resolution limits for high precision 2D-measurements, where available (TREX-575)\n        var page_width = model.getMetadata('page_dimensions', 'page_width', null);\n        var logical_width = model.getMetadata('page_dimensions', 'logical_width', null);\n        var page_height = model.getMetadata('page_dimensions', 'page_height', null);\n        var logical_height = model.getMetadata('page_dimensions', 'logical_height', null);\n        if (!page_width || !logical_width || !page_height || !logical_height) {\n            return 0;\n        }\n\n        // Retrieve the inverse DPI\n        var invdpix = page_width / logical_width;\n        var invdpiy = page_height / logical_height;\n\n        // Calculate the graininess in model units\n        var p1 = new THREE.Vector3(0.0, 0.0, 0.0);\n        var p2 = new THREE.Vector3(invdpix, invdpiy, 0.0);\n        model.pageToModel(p1, p2, viewportIndex);\n        var dPrecision = p1.distanceTo(p2);\n\n        return dPrecision;\n    };\n\n    function isContainsEqualVectors(points) {\n        for (var i = 0; i < points.length; i++) {\n            for (var j = 0; j < points.length; j++) {\n                if (i !== j && isEqualVectors(points[i], points[j], EPSILON)) {\n                    return true;\n                }\n            }\n        }\n\n        return false;\n    };\n\n    function calculateAngle(picks, viewer) {\n        var points = [];\n\n        for (var key in picks) {\n            if (picks.hasOwnProperty(key)) {\n                var point = getSnapResultPosition(picks[key], viewer);\n                if (point) {\n                    points.push(point);\n                }\n            }\n        }\n\n        if (points.length !== 3 || isContainsEqualVectors(points)) {\n            return null;\n        }\n\n\n        var v1 = new THREE.Vector3();\n        var v2 = new THREE.Vector3();\n\n        v1.subVectors(points[0], points[1]);\n        v2.subVectors(points[2], points[1]);\n\n        return angleVectorToVector(v1, v2);\n    };\n\n    function calculateArea(picks, viewer) {\n        var points = [];\n\n        for (var key in picks) {\n            if (picks.hasOwnProperty(key)) {\n                var point = getSnapResultPosition(picks[key], viewer);\n                if (point) {\n                    points.push(point.clone());\n                }\n            }\n        }\n\n        var firstPoint = getSnapResultPosition(picks[1], viewer);\n        if (firstPoint) {\n            points.push(firstPoint.clone());\n        }\n\n        for (var i = 0; i < points.length; i+=2) {\n            viewer.model.pageToModel(points[i], points[i + 1], picks[1].viewportIndex2d);\n        }\n\n        var sum1 = 0;\n        var sum2 = 0;\n\n        for (var i = 0; i < points.length - 1; i++) {\n            sum1 += points[i].x * points[i+1].y;\n            sum2 += points[i].y * points[i+1].x;\n        }\n\n        var area = Math.abs((sum1 - sum2) / 2);\n\n        let units;\n        const vpId = picks[1].viewportIndex2d;\n        const viewports = viewer?.model?.getData()?.viewports;\n        if (viewports && Number.isInteger(vpId)) {\n            units = viewports[vpId]?.units;\n        }\n\n        return {\n            area,\n            type: MeasurementTypes.MEASUREMENT_AREA,\n            units: units,\n        };\n    };\n    function calculateArcLength(firstPick, secondPick, dPrecision, viewer) {\n\n        if (!firstPick || !secondPick || !firstPick.getGeometry() || !secondPick.getGeometry()) {\n            return null;\n        }\n\n        if(!firstPick.circularArcRadius) {\n            return null;\n        }\n\n        var p1 = getSnapResultPosition(firstPick, viewer).clone();\n        var p2 = getSnapResultPosition(secondPick, viewer).clone();\n\n        const arcCenter = firstPick.circularArcCenter;\n\n        // Get the center point\n        var centerPoint =\n            arcCenter instanceof THREE.Vector3\n                ? arcCenter.clone()\n                : new THREE.Vector3(arcCenter.x, arcCenter.y, arcCenter.z);\n\n\n        if (!p1 || !p2) {\n            return null;\n        }\n\n        if (isEqualVectors(p1, p2, EPSILON)) {\n            return 0;\n        }\n\n        // Convert coords when in 2D\n        if (viewer.model.is2d()) {\n            viewer.model.pageToModel(p1, p2, firstPick.viewportIndex2d);\n            viewer.model.pageToModel(centerPoint, null, firstPick.viewportIndex2d);\n        }\n\n        // calculate the arc length\n        function getArcLength () {\n            var v1 = new THREE.Vector3();\n            var v2 = new THREE.Vector3();\n            v1.subVectors(p1, centerPoint);\n            v2.subVectors(p2, centerPoint);\n\n            // To average decimal values from both the points\n            var lengthProduct = v1.length() * v2.length();\n\n            var dot = v1.dot(v2);\n            var arcAngle = Math.acos(dot / lengthProduct);\n\n            var radius = v1.length();\n\n            return arcAngle * radius;\n        }\n\n        var arcLength = getArcLength();\n\n        // Include resolution limits for high precision 2D-measurements, where available\n        if (dPrecision) {\n            dPrecision = processDPrecision(dPrecision);\n            return applyDPrecision(arcLength, dPrecision);\n        } else {\n            return arcLength;\n        }\n    };\n\n    /**\n     * Calculates the smallest power of 10 such that it is > than the provided precision. For example, 5 will return 10\n     * but 11 will return 100\n     * @param {number} dPrecision Original precision\n     * @returns {number} Closest precision expressed in power of 10\n     */\n    function processDPrecision(dPrecision) {\n        var n = Math.log(dPrecision) / Math.log(10.0);\n        var nd = Math.floor(n);\n\n        // Increase one decimal if the original precision < 10^nd\n        if (1.0 < (dPrecision / Math.pow(10.0, nd)))\n            nd++;\n\n        return Math.pow(10.0, nd);\n    };\n\n    // Apply DPI precision to a measurement to round it to the correct number of digits\n    function applyDPrecision(measurement, dPrecision) {\n        return Math.floor((measurement / dPrecision) + 0.5) * dPrecision;\n    };\n\n    /**\n     * The main function for this file, which calculates a measurement result (either distance\n     * or angle) from a given measurement.\n     */\n    export function computeResult(picks, measurementType, viewer, options) {\n\n        switch (measurementType) {\n            case MeasurementTypes.MEASUREMENT_DISTANCE:\n                var firstPick = picks[1];\n                var secondPick = picks[2];\n                var dPrecision = getDpiPrecision(viewer.model, firstPick.viewportIndex2d);\n\n                return calculateDistance(firstPick, secondPick, dPrecision, viewer);\n\n            case MeasurementTypes.MEASUREMENT_ANGLE:\n                var angle = calculateAngle(picks, viewer);\n                return angle ? {\n                        angle: (!options || !options.angleOuter) ? angle : 360 - angle,\n                        type: measurementType\n                    } : null;\n\n            case MeasurementTypes.MEASUREMENT_AREA:\n                return calculateArea(picks, viewer);\n\n            case MeasurementTypes.MEASUREMENT_ARC:\n                var firstPick = picks[1];\n                var secondPick = picks[2];\n                var dPrecision = getDpiPrecision(viewer.model, firstPick.viewportIndex2d);\n                return {\n                    arc: calculateArcLength(firstPick, secondPick, dPrecision, viewer),\n                    type: measurementType\n                };\n\n            case MeasurementTypes.MEASUREMENT_SPOT: {\n                const spot = getSnapResultPosition(picks[1], viewer);\n                let modelSpot = spot ? spot.clone() : null;\n                const globalOffset = viewer.model.getData().globalOffset;\n                if (modelSpot && globalOffset) {\n                    modelSpot.add(globalOffset);\n                }\n                convertCoordinates(modelSpot, new THREE.Vector3(), viewer, picks[1]);\n                let units = getUnits(picks[1], viewer);\n                return {\n                    spot,\n                    modelSpot,\n                    type: measurementType,\n                    units,\n                };\n            }\n\n            default:\n                return null;\n\n        }\n    };\n\n    export function getFaceArea(viewer, measurement, face, units, precision, calibrationFactor) {\n\n        var area = 0;\n        var V1 = new THREE.Vector3();\n        var V2 = new THREE.Vector3();\n        const verticesLength = face.vertices.length;\n\n        for (var i = 0; i < verticesLength; i += 3) {\n            const p0 = face.vertices[i];\n            const p1 = face.vertices[i + 1];\n            const p2 = face.vertices[i + 2];\n\n            V1.subVectors(p1, p0);\n            V2.subVectors(p2, p0);\n\n            area += V1.length() * V2.length() * Math.sin(V1.angleTo(V2)) / 2;\n        }\n\n        area = convertUnits(viewer.model.getUnitString(), units, calibrationFactor, area, 'square');\n\n        if (units) {\n\n            return formatValueWithUnits(area, units+'^2', 3, precision);\n        }\n        else {\n\n            return formatValueWithUnits(area, null, 3, precision);\n        }\n\n    };\n\n    export function getCircularArcRadius(viewer, measurement, edge, units, precision, calibrationFactor) {\n\n        var radius = edge.radius;\n\n        if (radius) {\n            if (viewer.model.is2d()) {\n                var pt1 = edge.center.clone();\n                const pt2 = edge.vertices[0].clone();\n                viewer.model.pageToModel(pt1, pt2, measurement.getPick(1).viewportIndex2d);\n                radius = pt1.distanceTo(pt2);\n            }\n\n            radius = convertUnits(viewer.model.getUnitString(), units, calibrationFactor, radius);\n            return formatValueWithUnits(radius, units, 3, precision);\n        }\n    };\n\n    export function project(point, viewer, offset) {\n        var camera = viewer.navigation.getCamera(),\n            containerBounds = viewer.navigation.getScreenViewport(),\n            p = new THREE.Vector3(point.x, point.y, point.z);\n\n        p = p.project(camera);\n\n        offset = offset || 0;\n\n        return new THREE.Vector2(Math.round(( p.x + 1) / 2 * containerBounds.width) + offset,\n                Math.round((-p.y + 1) / 2 * containerBounds.height) + offset);\n    };\n\n    export function inverseProject(point, viewer) {\n\n        var camera = viewer.navigation.getCamera(),\n            containerBounds = viewer.navigation.getScreenViewport(),\n            p = new THREE.Vector3();\n\n        p.x = point.x / containerBounds.width * 2 - 1;\n        p.y = -(point.y / containerBounds.height * 2 - 1);\n        p.z = 0;\n\n        p = p.unproject(camera);\n\n        return p;\n    };\n\n    //***** Helper functions for calculations without state: ***** //\n//TODO_TS: Are these used outside the Markup extension? If not, they should move there.\n\n\n    // Get the nearest point on the line from point to line\n    // inLine - whether to force the result to be inside the given line or not.\n    export function nearestPointInPointToLine(point, lineStart, lineEnd) {\n\n        var X0 = new THREE.Vector3();\n        var X1 = new THREE.Vector3();\n        var nearestPoint;\n        var param;\n\n        X0.subVectors(lineStart, point);\n        X1.subVectors(lineEnd, lineStart);\n        param = X0.dot(X1);\n        X0.subVectors(lineEnd, lineStart);\n        param = -param / X0.dot(X0);\n\n        X0.subVectors(lineEnd, lineStart);\n        X0.multiplyScalar(param);\n        nearestPoint = X0.add(lineStart);\n\n        return nearestPoint;\n    };\n\n    // Get the nearest point on the line segment from point to line segment\n    export function nearestPointInPointToSegment(point, lineStart, lineEnd, forcePerpendicular) {\n\n        var X0 = new THREE.Vector3();\n        var X1 = new THREE.Vector3();\n        var nearestPoint;\n        var param;\n\n        X0.subVectors(lineStart, point);\n        X1.subVectors(lineEnd, lineStart);\n        param = X0.dot(X1);\n        X0.subVectors(lineEnd, lineStart);\n        param = -param / X0.dot(X0);\n\n        if (param < 0) {\n            if (forcePerpendicular) {\n                nearestPoint = null;\n            } else {\n                nearestPoint = lineStart;\n            }\n        }\n        else if (param > 1) {\n            if (forcePerpendicular) {\n                nearestPoint = null;\n            } else {\n                nearestPoint = lineEnd;\n            }\n        }\n        else {\n            X0.subVectors(lineEnd, lineStart);\n            X0.multiplyScalar(param);\n            nearestPoint = X0.add(lineStart);\n        }\n\n        return nearestPoint;\n    };\n\n\n\n    export function isEqualVectors(v1, v2, precision) {\n        if (!v1 || !v2) {\n            return false;\n        }\n\n        if (Math.abs(v1.x - v2.x) <= precision && Math.abs(v1.y - v2.y) <= precision && Math.abs(v1.z - v2.z) <= precision) {\n            return true;\n        }\n        return false;\n    };\n\n    export function getEndPointsInEdge(edge) {\n\n        var endPoints = [];\n        const vertices = edge.vertices;\n        const verticesLength = vertices.length;\n\n        for (var i = 0; i < verticesLength; ++i) {\n\n            var duplicate = false;\n            const pt1 = vertices[i];\n            for (var j = 0; j < verticesLength; ++j) {\n                const pt2 = vertices[j];\n                if (j !== i && pt2.equals(pt1)) {\n\n                    duplicate = true;\n                    break;\n                }\n            }\n\n            if (!duplicate) {\n                endPoints.push(pt1);\n            }\n        }\n\n        // If the edge is degenerated, endPoints may be empty here. In this case, just add the first\n        // two vertices of the input edge (different pointers, but equal point values in this case).\n        if (endPoints.length < 2) {\n            endPoints[0] = vertices[0];\n            endPoints[1] = vertices[1];\n        }\n\n        return endPoints;\n    };\n\n    export function angleVectorToVector(v1, v2) {\n        return v1.angleTo(v2) * 180 / Math.PI;\n    };\n\n\n    // Find the nearest point from point to plane\n    function nearestPointInPointToPlane(p1, p2, n) {\n\n        var nearestPoint = new THREE.Vector3();\n        var norm = n.clone();\n        var X0 = new THREE.Vector3();\n        X0.subVectors(p1, p2);\n\n        var sn = -norm.dot(X0);\n        var sd = norm.dot(norm);\n        var sb = sn / sd;\n\n        nearestPoint.addVectors(p1, norm.multiplyScalar(sb));\n        return nearestPoint;\n    };\n\n\n\n    // Returns true if v1 an v2 are parallel\n    export function isParallel(v1, v2, precision) {\n        precision = precision ? precision : EPSILON;\n        return 1 - Math.abs(v1.dot(v2)) < precision;\n    };\n\n    export function isPerpendicular(v1, v2, precision) {\n        precision = precision ? precision : EPSILON;\n        return Math.abs(v1.dot(v2)) < precision;\n    };\n\n\n    // Find the vertex need to draw For circular arc's radius\n    export function nearestVertexInVertexToEdge(vertex, edge) {\n\n        var nearestPoint;\n        var minDist = Number.MAX_VALUE;\n\n        for (var i = 0; i < edge.vertices.length; i++) {\n            const pt = edge.vertices[i];\n            var dist = vertex.distanceTo(pt);\n            if (minDist > dist) {\n                nearestPoint = pt;\n                minDist = dist;\n            }\n        }\n\n        return nearestPoint;\n    };\n\n    export function createCommonOverlay(viewer, name) {\n        if (!viewer.impl.overlayScenes[name])\n            viewer.impl.createOverlayScene(name);\n    }\n\n    export function safeToggle(element, property, show) {\n        // toggle only if it needs to. Necessary for IE11.\n\n        if ((element.classList.contains(property) && !show) || (!element.classList.contains(property) && show)) {\n            element.classList.toggle(property, show);\n        }\n    }","\nimport { SnapResult } from \"./SnapResult\";\nimport { MeasurementTypes } from \"./MeasurementTypes\";\nimport { getSnapResultPosition, isEqualVectors, EPSILON, computeResult } from \"./MeasureCommon\";\n\n/**\n * This is a DATA container class.\n * No rendering should be attached to it.\n * @private\n */\nexport function Measurement(measurementType, id, options) {\n\n    this.measurementType = measurementType;\n    this.id = id;\n    this.picks = [];\n    this.closedArea = false;\n    this.isRestored = false;\n    this.options = options;\n\n    this.resetMeasureValues();\n}\n\n/**\n * Returns a clone of itself.\n */\nMeasurement.prototype.clone = function() {\n    const measurement = new Measurement(this.measurementType, this.id, this.options);\n    measurement.closedArea = this.closedArea;\n    measurement.isRestored = this.isRestored;\n    measurement.picks = this.clonePicks();\n    measurement.angle = this.angle;\n    measurement.distanceX = this.distanceX;\n    measurement.distanceY = this.distanceY;\n    measurement.distanceZ = this.distanceZ;\n    measurement.distanceXYZ = this.distanceXYZ;\n    measurement.arc = this.arc;\n    measurement.spot = this.spot?.clone();\n    measurement.result = Object.assign({}, this.result);\n    return measurement;\n};\n\nMeasurement.prototype.resetMeasureValues = function() {\n\n    this.angle = 0;\n    this.distanceX = 0;\n    this.distanceY = 0;\n    this.distanceZ = 0;\n    this.distanceXYZ = 0;\n    this.arc = 0;\n    this.spot = null;\n    this.result = null;\n};\n\nMeasurement.prototype.setPick = function(index, value) {\n\n    var pick = this.picks[index] = value;\n    pick.id = parseInt(index);\n    return pick;\n};\n\nMeasurement.prototype.getPick = function(index) {\n\n    var pick = this.picks[index];\n\n    if (!pick) {\n        pick = this.setPick(index, new SnapResult());\n    }\n\n    return pick;\n};\n\n\nMeasurement.prototype.clonePicks = function(index) {\n\n    var picks = [];\n    for (var key in this.picks) {\n        if (Object.prototype.hasOwnProperty.call(this.picks, key)) {\n            var pick = this.picks[key];\n            picks.push(pick.clone());\n        }\n    }\n    return picks;\n};\n\n\nMeasurement.prototype.countPicks = function() {\n\n    return Object.keys(this.picks).length;\n};\n\nMeasurement.prototype.getMaxNumberOfPicks = function() {\n\n    switch (this.measurementType) {\n        case MeasurementTypes.MEASUREMENT_SPOT:\n            return 1;\n        case MeasurementTypes.MEASUREMENT_DISTANCE:\n        case MeasurementTypes.MEASUREMENT_CALLOUT:\n        case MeasurementTypes.MEASUREMENT_ARC:\n            return 2;\n\n        case MeasurementTypes.MEASUREMENT_ANGLE:\n            return 3;\n\n        case MeasurementTypes.MEASUREMENT_AREA:\n            return this.closedArea ? this.countPicks() : Number.MAX_VALUE - 1;\n    }\n};\n\nMeasurement.prototype.hasPick = function(pickNumber) {\n\n    return (this.picks[pickNumber] && !this.picks[pickNumber].isEmpty()) || this.isRestored;\n};\n\nMeasurement.prototype.isComplete = function() {\n    var complete = this.countPicks() === this.getMaxNumberOfPicks();\n\n    for (var key in this.picks) {\n        if (Object.prototype.hasOwnProperty.call(this.picks, key)) {\n            complete = complete && this.hasPick(key);\n\n            if (!complete)\n                break;\n        }\n    }\n\n    return complete;\n};\n\nMeasurement.prototype.isEmpty = function() {\n    var empty = true;\n\n    for (var key in this.picks) {\n        if (Object.prototype.hasOwnProperty.call(this.picks, key)) {\n            empty = empty && !this.hasPick(key);\n\n            if(!empty)\n                break;\n        }\n    }\n\n    return empty;\n};\n\nMeasurement.prototype.clearPick = function(pickNumber) {\n\n    if (this.picks[pickNumber]) {\n        this.picks[pickNumber].clear();\n    }\n\n    this.resetMeasureValues();\n};\n\nMeasurement.prototype.clearAllPicks = function() {\n\n    for (var key in this.picks) {\n        if (Object.prototype.hasOwnProperty.call(this.picks, key)) {\n            this.clearPick(key);\n        }\n    }\n};\n\nMeasurement.prototype.hasEqualPicks = function(firstPick, secondPick) {\n    if (!firstPick || !secondPick)\n        return false;\n\n    if (firstPick.geomType === secondPick.geomType) {\n        var first = getSnapResultPosition(firstPick);\n        var second = getSnapResultPosition(secondPick);\n        return isEqualVectors(first, second, EPSILON);\n    }\n\n    return false;\n};\n\n/**\n * Calculates distance/angle based on the values of the picks\n * and stores it in .result\n */\nMeasurement.prototype.computeResult = function(picks, viewer) {\n\n    this.resetMeasureValues();\n\n    if (!viewer.model) {\n        this.result = null;\n        return false;\n    }\n\n    // Compute and check if there's a result\n    var result = this.result = computeResult(picks, this.measurementType, viewer, this.options);\n\n    if (result === null) {\n        return !this.isComplete();\n    }\n\n    switch (result.type) {\n        case MeasurementTypes.MEASUREMENT_DISTANCE:\n            this.distanceXYZ = result.distanceXYZ;\n            this.distanceX = result.distanceX;\n            this.distanceY = result.distanceY;\n            this.distanceZ = result.distanceZ;\n            return true;\n\n        case MeasurementTypes.MEASUREMENT_ANGLE:\n            this.angle = isNaN(result.angle) ? 0 : result.angle;\n            return true;\n\n        case MeasurementTypes.MEASUREMENT_AREA:\n            this.area = result.area;\n            return true;\n\n        case MeasurementTypes.MEASUREMENT_ARC:\n            this.arc = result.arc;\n            return true;\n\n        case MeasurementTypes.MEASUREMENT_SPOT:\n            this.spot = result.spot;\n            this.modelSpot = result.modelSpot;\n            this.units = result.units;\n            return true;\n\n        case MeasurementTypes.MEASUREMENT_CALLOUT:\n            return true;\n\n        default:\n            return false;\n    }\n};\n\nMeasurement.prototype.getGeometry = function (pickNumber) {\n    return {\"type\": this.picks[pickNumber].geomType, \"geometry\": this.picks[pickNumber].getGeometry()};\n};\n\n// TODO: Move this method elsewhere. This is a data-only class.\nMeasurement.prototype.attachIndicator = function (viewer, tool, indicatorClass) {\n    this.indicator = new indicatorClass(viewer, this, tool);\n    this.indicator.init();\n};\n","import { MeasurementsManager } from './MeasurementsManager';\nimport { MeasureToolIndicator } from './MeasureToolIndicator';\nimport { SET_MOUSE_TRACKING } from './EventTypes';\nimport { EXPLODE_CHANGE_EVENT } from \"../../src/application/EventTypes\";\nimport { Matrix4, Vector3 } from \"three\";\nimport { Measurement } from '../../src/measurement/Measurement';\n\nconst av = Autodesk.Viewing;\nconst avp = Autodesk.Viewing.Private;\n\n//\n// /** @constructor */\n//\n//\nexport function MeasureTool( viewer, options, sharedMeasureConfig, snapper )\n{\n    var _viewer  = viewer;\n    var _names  = [\"measure\"];\n    var _priority = 50;\n\n    this.setGlobalManager(viewer.globalManager);\n\n    // Shared State with CalibrationTool and Indicator\n    var _sharedMeasureConfig = sharedMeasureConfig;\n\n    var av = Autodesk.Viewing;\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    // Not shared with Indicator.js\n    var _active = false;\n    var _isDragging = false;\n    var _endpointMoved = false;\n    var _activePoint = 0;\n    var _consumeSingleClick = false;\n    var _singleClickHandled = false;\n    var _downX = null;\n    var _downY = null;\n    var _isolateMeasure = false;\n\n    var _measurementsManager = new MeasurementsManager(_viewer);\n    var _currentMeasurement = null;\n    var _onIndicatorCreatedCB = null;\n    var _fetchingMeasurements = [];\n    var _prevMeasurement = null;\n    var _useLastViewport = false;\n\n    var _cursor = \"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAKZJREFUeNrclLEKwzAQQ9+FgH/Nk7d8ViFT+6cG36IsNXgIdMg5kAoOIw8WSDoDvAEN04BdEhFjgCTR4e6klFxSIgDLSNydbdsAPgRCktRaUylFkfZ0Z2qtVTlnAfugGibwAur3JFrAxoBnYGEy1pGYmQCLLNB6Uqmw182M9eRS0yzqGo+y6D9rytSQR8vM7DKfbtHy4x+/xG8J+d4W9WAi8fxFOwYA8W0ypu2ZfcsAAAAASUVORK5CYII=), auto\";\n\n    // Snapper\n    var _snapper = snapper;\n\n    var _isPressing = false;\n\n    var _picksBackup = [];\n    var _cursorPosition = null;\n\n    var _closeAreaSnapRange = 25;\n    var _preMeasureState = null;\n\n    var _measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE;\n    var _firstMeasurementTypeChange = true;\n\n    var _sessionMeasurements = null;\n\n    var _exploded = false;\n\n    var _customTools = {};\n\n    this.registerCustomTool = function(id, customMeasureTool) {\n        _customTools[id] = customMeasureTool;\n    };\n\n    this.deregisterCustomTool = function(id) {\n        delete _customTools[id];\n    };\n\n    this.getActivePick = function()\n    {\n        if(!_currentMeasurement)\n            return null;\n\n        var index;\n\n        if (_activePoint === 0) {\n            return null;\n        } else if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\n            index = _currentMeasurement.countPicks();\n        } else {\n               index = _activePoint;\n        }\n\n        return _currentMeasurement.getPick(index);\n    };\n\n    this.getPreviousPick = function()\n    {\n        if(!_currentMeasurement)\n            return null;\n\n        var index;\n\n        if (_activePoint === 0) {\n            return null;\n        } else if (_activePoint === 1) {\n            index = _currentMeasurement.countPicks();\n            if (index === _activePoint) {\n                return null;\n            }\n        } else if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\n            index = _currentMeasurement.countPicks() - 1;\n        } else {\n            index = _activePoint - 1;\n        }\n\n        return _currentMeasurement.getPick(index);\n    };\n\n    this.hasPreviousPick = function()\n    {\n        if(!_currentMeasurement)\n            return false;\n\n        var index;\n\n        if (_activePoint === 0) {\n            return false;\n        } else if (_activePoint === 1) {\n            index = _currentMeasurement.countPicks();\n            if (index === _activePoint) {\n                return false;\n            }\n        } else if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\n            index = _currentMeasurement.countPicks() - 1;\n        } else {\n            index = _activePoint - 1;\n        }\n\n        return _currentMeasurement.hasPick(index);\n    };\n\n    this.noPicksSet = function() {\n        _activePoint = 0;\n    };\n\n    this.allPicksSet = function() {\n        _activePoint = _currentMeasurement.countPicks() + 1;\n        enableMeasurementsTouchEvents(true);\n        _currentMeasurement.indicator.enableSelectionAreas(true);\n\n        // Keep track of the previous measurement\n        _prevMeasurement = _currentMeasurement.clone();\n        _viewer.dispatchEvent({\n            type: MeasureCommon.Events.MEASUREMENT_COMPLETED_EVENT,\n            data: { type: _currentMeasurement.measurementType, id: _currentMeasurement.id }\n        });\n    };\n\n    this.isNoPicksSet = function() {\n        return _activePoint === 0 || !_currentMeasurement;\n    };\n\n    this.areAllPicksSet = function() {\n        return _currentMeasurement && (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1);\n    };\n\n    this.setSessionMeasurements = function(measurementList) {\n        // Store the clone of the measurementList\n        _sessionMeasurements = JSON.parse(JSON.stringify(measurementList));\n    };\n\n    this.getSessionMeasurements = function() {\n        return JSON.parse(JSON.stringify(_sessionMeasurements));\n    };\n\n    this.register = function()\n    {\n\n    };\n\n    this.deregister = function()\n    {\n        this.deactivate();\n    };\n\n    this.isActive = function()\n    {\n        return _active;\n    };\n\n    this.getNames = function()\n    {\n        return _names;\n    };\n\n    this.getName = function()\n    {\n        return _names[0];\n    };\n\n    this.getPriority = function()\n    {\n        return _priority;\n    };\n\n    this.getCursor = function() {\n        return _isDragging ? null : _cursor;\n    };\n\n    this.getCurrentMeasurementRaw = function() {\n        return _currentMeasurement;\n    };\n\n    this.getActivePointIndex = function() {\n        return _activePoint;\n    };\n\n    this.setActivePointIndex = function(index) {\n        _activePoint = index;\n    };\n\n    this.getMeasurementsManager = function() {\n        return _measurementsManager;\n    };\n\n    this.shouldConsumeSingleClick = function() {\n        return _consumeSingleClick;\n    };\n\n    this.setConsumeSingleClick = function(bo) {\n        _consumeSingleClick = bo;\n    };\n\n    this.isSingleClickHandled = function() {\n        return _singleClickHandled;\n    };\n\n    this.setSingleClickHandled = function(bo) {\n        _singleClickHandled = bo;\n    };\n\n    this.isPressing = function() {\n        return _isPressing;\n    };\n\n    this.setIsPressing = function(bo) {\n        _isPressing = bo;\n    };\n\n\n    this.startNewMeasurement = function() {\n        const customTool = _customTools[_measurementType];\n        if (customTool) {\n            _measurementsManager.addMeasurement(customTool.createMeasurement());\n            _currentMeasurement = _measurementsManager.getCurrentMeasurement();\n            _currentMeasurement.attachIndicator(_viewer, this, customTool.getIndicatorClass());\n        } else {\n            _currentMeasurement = _measurementsManager.createMeasurement(_measurementType);\n            _currentMeasurement.attachIndicator(_viewer, this, MeasureToolIndicator);\n        }\n\n        if (_onIndicatorCreatedCB instanceof Function) {\n            _onIndicatorCreatedCB();\n            _onIndicatorCreatedCB = null;\n        }\n\n        enableMeasurementsTouchEvents(false);\n    };\n\n    this.changeMeasurementType = function (type) {\n        // Since the initial _measurementType is set to MEASUREMENT_DISTANCE, and we still want to track analytics\n        // when initially entering here with the distance tool, there is a need in this _firstMeasurementTypeChange flag.\n        if (type === _measurementType && !_firstMeasurementTypeChange) {\n            return;\n        }\n\n        this.clearMeasurementPreview();\n\n        _measurementType = type;\n        _firstMeasurementTypeChange = false;\n\n        const customTool = _customTools[type];\n        avp.analytics.track('viewer.measure', {\n            action: 'Enabled',\n            type: customTool ? customTool.getMeasurementName() : MeasureCommon.MeasurementTypesToAnalytics[_measurementType],\n        });\n    };\n\n    this.getCurrentMeasureType = function() {\n        return _measurementType;\n    };\n\n    this.activate = function()\n    {\n        _active = true;\n        _firstMeasurementTypeChange = true;\n        _measurementsManager.reset();\n\n        this.noPicksSet();\n        _isDragging = false;\n        this.isEditingEndpoint = false;\n        this.editByDrag = false;\n\n        _viewer.impl.pauseHighlight(true);\n\n        _viewer.clearSelection();\n        _preMeasureState = _viewer.getState({objectSet: true});\n\n        _viewer.toolController.activateTool(\"snapper\");\n        _viewer.toolController.activateTool(\"magnifyingGlass\");\n\n        this.onMeasurementChangedBinded = this.onMeasurementChanged.bind(this);\n        _viewer.addEventListener(EXPLODE_CHANGE_EVENT, this.onExplodedChange);\n        _viewer.addEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChangedBinded);\n        _viewer.addEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChange);\n        _viewer.addEventListener(av.SHOW_ALL_EVENT, this.onShowAllEvent);\n\n        // Set the stored session measurements only if the preference is enabled\n        const restoreSessionMeasurements = _viewer.prefs.get(av.Private.Prefs.RESTORE_SESSION_MEASUREMENTS);\n        if (restoreSessionMeasurements) {\n            const sessionMeasurements = this.getSessionMeasurements();\n            if (_exploded && !_viewer.model.is2d()) {\n                const localToWorld = new Matrix4();\n                let fragmentList = _viewer.model.getFragmentList();\n                for (let m of sessionMeasurements) {\n                    for (let p of m.picks) {\n                        if ((p.fragId || p.fragId === 0) && p.fragPos) {\n                            fragmentList?.getWorldMatrix(p.fragId, localToWorld);\n                            let fragPos = new Vector3(p.fragPos.x,p.fragPos.y,p.fragPos.z); // isnt a vector when retrieved from session\n                            let fragDiff = (new Vector3()).applyMatrix4(localToWorld).sub(fragPos);\n                            p.intersection = new Vector3(p.intersection.x,p.intersection.y,p.intersection.z).add(fragDiff);\n                            fragPos = (new Vector3()).applyMatrix4(localToWorld);\n                            p.fragPos = {x: fragPos.x, y: fragPos.y, z: fragPos.z};\n                        }\n                    }\n                }\n                _exploded = false;\n            }\n            this.setMeasurements(sessionMeasurements);\n            this.isolateMeasurement();\n        }\n    };\n\n    this.deactivate = function()\n    {\n        if (!_active)\n            return;\n\n        _viewer.dispatchEvent({ type: SET_MOUSE_TRACKING, mode: 'end' });\n\n        const customTool = _customTools[_measurementType];\n        avp.analytics.track('viewer.measure', {\n            action: 'Disabled',\n            type: customTool ? customTool.getMeasurementName() : MeasureCommon.MeasurementTypesToAnalytics[_measurementType],\n        });\n\n        // Store the session measurements only if the preference is enabled\n        const restoreSessionMeasurements = _viewer.prefs.get(av.Private.Prefs.RESTORE_SESSION_MEASUREMENTS);\n        if (restoreSessionMeasurements) {\n            this.clearIncompleteMeasurement();\n            const measurementList = this.getMeasurementList();\n            this.setSessionMeasurements(measurementList);\n        }\n\n        _active = false;\n\n        this.clearMeasurementPreview();\n\n        this.clearIsolate(); // restore initial isolation\n        _preMeasureState = null;\n\n        _prevMeasurement = null;\n        _useLastViewport = false;\n\n        while (Object.keys(_measurementsManager.measurementsList).length > 0) {\n            _currentMeasurement = _measurementsManager.measurementsList[Object.keys(_measurementsManager.measurementsList)[0]];\n            _measurementsManager.changeCurrentMeasurement(_currentMeasurement);\n            this.clearCurrentMeasurement();\n            _currentMeasurement = null;\n        }\n\n        if(_snapper && _snapper.isActive()) {\n            _viewer.toolController.deactivateTool(\"snapper\");\n        }\n\n        _viewer.toolController.deactivateTool(\"magnifyingGlass\");\n\n        _viewer.impl.pauseHighlight(false);\n\n        _measurementsManager.destroy();\n\n        _viewer.removeEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChange);\n        _viewer.removeEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChangedBinded);\n        _viewer.removeEventListener(av.SHOW_ALL_EVENT, this.onShowAllEvent);\n    };\n\n    this.clearIncompleteMeasurement = function() {\n        if (!this.areAllPicksSet()) {\n            if (this.isEditingEndpoint) {\n                this.undoEditEndpoint();\n            } else {\n                this.clearCurrentMeasurement();\n            }\n        }\n    };\n\n    this.update = function()\n    {\n        return false;\n    };\n\n    this.getUnits = function() {\n        return _sharedMeasureConfig.units;\n    };\n\n    this.setUnits = function( units )\n    {\n        if (_sharedMeasureConfig.units !== units ) {\n            _sharedMeasureConfig.units = units;\n\n            for (var key in _measurementsManager.measurementsList) {\n                if (Object.prototype.hasOwnProperty.call(_measurementsManager.measurementsList, key)) {\n                    // Update UI\n                    var measurement = _measurementsManager.measurementsList[key];\n                    if (measurement.indicator) {\n                        measurement.indicator.updateResults();\n                    }\n                }\n            }\n        }\n    };\n\n    this.getPrecision = function() {\n        return _sharedMeasureConfig.precision;\n    };\n\n    this.setPrecision = function( precision ) {\n        if (!Number.isInteger(precision) || precision < 0)\n            return;\n\n        if (_sharedMeasureConfig.precision !== precision ) {\n            _sharedMeasureConfig.precision = precision;\n\n            for (var key in _measurementsManager.measurementsList) {\n                if (Object.prototype.hasOwnProperty.call(_measurementsManager.measurementsList, key)) {\n                    // Update UI\n                    var measurement = _measurementsManager.measurementsList[key];\n                    if (measurement.indicator) {\n                        measurement.indicator.updateResults();\n                    }\n                }\n            }\n        }\n    };\n\n    /**\n     * Prepare the measurement snap result information into a serializable object.\n     * @param {*} measurement\n     */\n    function getPickData(measurement) {\n        measurement = measurement || _currentMeasurement;\n        const picks = measurement.clonePicks();\n        const picksData = [];\n        for (let i = 0; i < picks.length; i++) {\n            const pick = picks[i];\n\n            let pickPoint = MeasureCommon.getSnapResultPosition(pick, _viewer);\n            const model = Object.prototype.hasOwnProperty.call(pick, 'modelId') && pick.modelId ? _viewer.impl.findModel(pick.modelId) : _viewer.model;\n            if (model) {\n                const modelData = model.getData();\n                pickPoint = modelData && Object.prototype.hasOwnProperty.call(modelData, 'globalOffset') ? pickPoint.clone().add(modelData.globalOffset) : pickPoint.clone();\n            }\n\n            const pickData = {\n                intersection: JSON.parse(JSON.stringify(pickPoint)),\n                modelId: pick.modelId,\n                fragId: pick.fragId,\n                fragPos: pick.fragPos,\n                viewportIndex2d: pick.viewportIndex2d,\n                snapNode: pick.snapNode\n            };\n\n            // Add the arc center and arc radius for the measurement\n            if (measurement.arc) {\n                pickData.circularArcCenter = pick.circularArcCenter;\n                pickData.circularArcRadius = pick.circularArcRadius;\n            }\n\n            picksData.push(pickData);\n        }\n\n        return picksData;\n    }\n\n    this.getDistanceXYZ = function(measurement) {\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        return this.getDistanceAux(measurement.distanceXYZ, measurement.result?.units);\n    };\n    this.getDistanceX = function(measurement) {\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        return this.getDistanceAux(measurement.distanceX, measurement.result?.units);\n    };\n    this.getDistanceY = function(measurement) {\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        return this.getDistanceAux(measurement.distanceY, measurement.result?.units);\n    };\n    this.getDistanceZ = function(measurement) {\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        return this.getDistanceAux(measurement.distanceZ, measurement.result?.units);\n    };\n\n    /**\n     * Returns a formatted string for the given distance. The used unit is determined by the model, calibration or\n     * optional viewport unit.\n     * @param {number} measurementDistance\n     * @param {string} [viewportUnits] - Unit string of the viewport that was measured in. Can differ from mode unit.\n     * @returns {string} Distance converted and formatted to the desired unit.\n     *\n     * @private\n     */\n    this.getDistanceAux = function (measurementDistance, viewportUnits) {\n\n        if (_viewer.model) {\n            let units = _viewer.model.getUnitString();\n\n            // In case the viewport, we measured in, defines its own units, use those instead\n            // Caveat: We can do this only for SmartPdfs coming from DS as otherwise the model unit string might not match the\n            // transform stored in the viewport\n            if (_sharedMeasureConfig.useViewportInfo && viewportUnits && _sharedMeasureConfig.calibrationFactor === null)\n                units = viewportUnits;\n\n            const d = Autodesk.Viewing.Private.convertUnits(units, _sharedMeasureConfig.units, _sharedMeasureConfig.calibrationFactor, measurementDistance || 0);\n            return Autodesk.Viewing.Private.formatValueWithUnits(d, _sharedMeasureConfig.units, 3, _sharedMeasureConfig.precision);\n        }\n    };\n\n    this.getAngle = function(measurement) {\n\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        var angle = measurement.angle;\n        return Autodesk.Viewing.Private.formatValueWithUnits(angle, String.fromCharCode(0xb0), 3, _sharedMeasureConfig.precision);\n    };\n\n    this.getArc = function(measurement) {\n\n        if (_viewer.model) {\n            if (!measurement) {\n                measurement = _currentMeasurement;\n            }\n            let units = _viewer.model.getUnitString();\n\n            var arc = measurement.arc;\n            const arcConverted = Autodesk.Viewing.Private.convertUnits(units, _sharedMeasureConfig.units, _sharedMeasureConfig.calibrationFactor, arc || 0);\n\n            return Autodesk.Viewing.Private.formatValueWithUnits(arcConverted, _sharedMeasureConfig.units, 3, _sharedMeasureConfig.precision);\n        }\n    };\n\n\n    this.getSpot = function(measurement) {\n\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        let spot = measurement.modelSpot ? measurement.modelSpot.clone() : new THREE.Vector3();\n\n        return 'X: ' + this.getDistanceAux(spot.x, measurement.units) +\n            '\\nY: ' + this.getDistanceAux(spot.y, measurement.units) +\n            (viewer.model?.is2d() ? '' : ('\\nZ: ' + this.getDistanceAux(spot.z, measurement.units)));\n    };\n\n    this.getCallout = function(measurement) {\n\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        return measurement.text || \"\";\n    };\n\n    this.getArea = function(measurement) {\n\n        if (_viewer.model) {\n\n            if (!measurement) {\n                measurement = _currentMeasurement;\n            }\n\n            let units = _viewer.model.getUnitString();\n\n            const viewportUnits = measurement.result?.units;\n            if (_sharedMeasureConfig.useViewportInfo && viewportUnits && _sharedMeasureConfig.calibrationFactor === null)\n                units = viewportUnits;\n\n            const area = Autodesk.Viewing.Private.convertUnits(units, _sharedMeasureConfig.units, _sharedMeasureConfig.calibrationFactor, measurement.area, 'square');\n\n            if (_sharedMeasureConfig.units) {\n                return Autodesk.Viewing.Private.formatValueWithUnits(area, _sharedMeasureConfig.units+'^2', 3, _sharedMeasureConfig.precision);\n            }\n            else {\n                return Autodesk.Viewing.Private.formatValueWithUnits(area, null, 3, _sharedMeasureConfig.precision);\n            }\n        }\n    };\n\n    this.snapToFirstPick = function(currentPick, forceSnap) {\n        if (_currentMeasurement.hasPick(1) && _activePoint > 3 && !_currentMeasurement.closedArea) {\n            var firstPick = _currentMeasurement.getPick(1);\n            var firstPickPoint = MeasureCommon.getSnapResultPosition(firstPick, _viewer);\n            var firstPickPosition = MeasureCommon.project(firstPickPoint, viewer);\n            var currentPickPoint = MeasureCommon.getSnapResultPosition(currentPick, _viewer);\n            var currentPickPosition = MeasureCommon.project(currentPickPoint, viewer);\n\n            if (forceSnap || currentPickPosition.distanceTo(firstPickPosition) < _closeAreaSnapRange) {\n                _snapper.onMouseMove(firstPickPosition);\n                firstPick.copyTo(currentPick);\n            }\n        }\n    };\n\n    function checkSnapperIndicatorForArc() {\n        if(!_currentMeasurement) {\n            _snapper.setArc(true);\n        }\n\n        if (_currentMeasurement?.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_ARC && viewer.model.is2d()) {\n            var firstPick = _currentMeasurement && _currentMeasurement.getPick(1);\n            var secondPick = _currentMeasurement && _currentMeasurement.hasPick(2) && _currentMeasurement.getPick(2);\n            const isArc = !firstPick || _currentMeasurement.countPicks().length > 2 || (MeasureCommon.isEqualVectors(firstPick.circularArcCenter, secondPick.circularArcCenter, 0) && firstPick.circularArcRadius === secondPick.circularArcRadius);\n            _snapper.setArc(isArc);\n        }\n    }\n\n    /**\n     * Overrides each pick's viewportIndex2d in the current measurement with the passed in viewportIndex.\n     * This function only overrides the viewport index if the current measurement's picks do not have the viewportIndex2d set.\n     * (unless forceOverride is true)\n     */\n    function setMeasurePicksViewport(viewportIndex, forceOverride) {\n        const picks = _currentMeasurement.picks;\n        for (var key in picks) {\n            if (Object.prototype.hasOwnProperty.call(picks, key)) {\n                // If the current measurement has a viewport index do not override the its picks viewport id with the previous measurement's.\n                if (picks[key].viewportIndex2d && !forceOverride) {\n                    return;\n                }\n                picks[key].viewportIndex2d = viewportIndex;\n            }\n        }\n    }\n\n    this.render = function(showResult) {\n        if (this.isCalibrationSetOnPage()) {\n            setMeasurePicksViewport(0, true);\n        } else if (_useLastViewport && _prevMeasurement && _prevMeasurement.picks.length > 0) {\n            // LMV-5498: Set the current measurement's picks viewport to the previous measurement's picks viewport.\n            setMeasurePicksViewport(_prevMeasurement.picks[0].viewportIndex2d);\n        }\n\n        var hasResult = _currentMeasurement.computeResult(_currentMeasurement.picks, _viewer, _snapper);\n        _currentMeasurement.indicator.render(_currentMeasurement.picks, _consumeSingleClick || !!showResult);\n\n        return hasResult;\n    };\n\n    this.setUseLastViewport = function(value) {\n        _useLastViewport = value;\n    };\n\n    this.getUseLastViewport = function() {\n        return _useLastViewport;\n    };\n\n    /**\n     * Sets existing measurements from the passed in measurement list. Reference getMeasurementList.\n     *\n     * @param {Object[]} measurementList - measurements to set.\n     */\n    this.setMeasurements = function(measurementList) {\n        if (!measurementList) return; // Only set the a measurementList is passed in.\n        measurementList = !Array.isArray(measurementList) ? [measurementList] : measurementList;\n\n        if (measurementList.length === 0) return;\n\n        function getMeasureType(measureData) {\n            let measurementType;\n            switch (measureData.type) {\n                case 'Distance':\n                    measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE;\n                    break;\n                case 'Angle':\n                    measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE;\n                    break;\n                case 'Area':\n                    measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_AREA;\n                    break;\n                case 'Arc':\n                    measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_ARC;\n                    break;\n                case 'Spot':\n                    measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_SPOT;\n                    break;\n                case 'Callout':\n                    measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_CALLOUT;\n                    break;\n                default:\n                    measurementType = measureData.type;\n            }\n            return measurementType;\n        }\n\n        // Restore the supplied measurementList.\n        for (let i = 0; i < measurementList.length; i++) {\n            const measureData = measurementList[i];\n            const measurementType = getMeasureType(measureData);\n            if (!measurementType) continue;\n            const customTool = _customTools[measurementType];\n            let customMeasurement = null;\n            let customIndicator = null;\n            if (customTool) {\n                customMeasurement = customTool.createMeasurement(measureData);\n                customIndicator = customTool.getIndicatorClass();\n            }\n\n            const attachIndicatorCb = (measurement) => {\n                _currentMeasurement = measurement; // _currentMeasurement needs to be set for the onMeasurementChanged to work\n                measurement.attachIndicator(_viewer, this, customIndicator ? customIndicator : MeasureToolIndicator);\n\n                if (_onIndicatorCreatedCB instanceof Function) {\n                    _onIndicatorCreatedCB();\n                    _onIndicatorCreatedCB = null;\n                }\n            };\n\n            const initPicksCb = () => {\n                const restoredMeasurements = _measurementsManager.getRestoredMeasurementData();\n                const points = restoredMeasurements[_currentMeasurement.id];\n                _activePoint = points.length;\n            };\n\n            _measurementsManager.createMeasurementFromData(\n                measureData,\n                measurementType,\n                attachIndicatorCb,\n                initPicksCb,\n                customMeasurement\n            );\n        }\n\n        this.deselectAllMeasurements();\n        enableMeasurementsTouchEvents(true);\n    };\n\n    function getMeasurementType(measurement) {\n        measurement = measurement || _currentMeasurement;\n        const types = MeasureCommon.MeasurementTypes;\n        const type = measurement.measurementType;\n        switch (type) {\n            case types.MEASUREMENT_DISTANCE:\n                return 'Distance';\n            case types.MEASUREMENT_ANGLE:\n                return 'Angle';\n            case types.MEASUREMENT_AREA:\n                return 'Area';\n            case types.CALIBRATION:\n                return 'Calibration';\n            case types.MEASUREMENT_ARC:\n                return 'Arc';\n            case types.MEASUREMENT_SPOT:\n                return 'Spot';\n            case types.MEASUREMENT_CALLOUT:\n                return 'Callout';\n            default:\n                return type;\n        }\n    }\n\n    /**\n     * TODO: We need to flesh out the return value here.\n     *\n     * @param unitType\n     * @param precision\n     * @returns {Object}\n     */\n    this.getMeasurement = function(unitType, precision) {\n        if (! _currentMeasurement) {\n            return null;\n        }\n\n        _sharedMeasureConfig.units = unitType || _sharedMeasureConfig.units;\n        _sharedMeasureConfig.precision = precision || _sharedMeasureConfig.precision;\n\n        var geomTypes = ['Vertex', 'Edge', 'Face', 'Circular Arc', 'Curved Edge', 'Curved Face'];\n        var picks = getPickData();\n        var type = getMeasurementType();\n        var measurement = {\n            from: geomTypes[_currentMeasurement.getGeometry(1).type],\n            to: picks.length > 1 ? geomTypes[_currentMeasurement.getGeometry(2).type] : null,\n            distance: this.getDistanceXYZ(),\n            deltaX: this.getDistanceX(),\n            deltaY: this.getDistanceY(),\n            deltaZ: this.getDistanceZ(),\n            angle: this.getAngle(),\n            area: this.getArea(),\n            arc: this.getArc(),\n            location: this.getSpot(),\n            text: this.getCallout(),\n            unitType: _sharedMeasureConfig.units,\n            precision: _sharedMeasureConfig.precision,\n            picks,\n            type\n        };\n\n        return measurement;\n    };\n\n    /**\n     * @returns {SnapResult[]} list of points for the selected measurement.\n     */\n    this.getMeasurementPoints = function() {\n\n        return _currentMeasurement.clonePicks();\n    };\n\n    /**\n     * @param unitType\n     * @param precision\n     * @returns {Array.<Object>}\n     */\n\n    this.getMeasurementList = function(unitType, precision) {\n        var list = [];\n        var measurement = null;\n        // TODO: These need to match the measurement SnapTypes\n        var geomTypes = ['Vertex', 'Edge', 'Face', 'Circular Arc', 'Curved Edge', 'Curved Face'];\n        var measurementList = Object.keys(_measurementsManager.measurementsList);\n\n        for(let i = 0; i < measurementList.length; i++) {\n            measurement = _measurementsManager.measurementsList[measurementList[i]];\n            var picks = getPickData(measurement);\n            var type = getMeasurementType(measurement);\n            var result = {\n              from: geomTypes[measurement.getGeometry(1).type],\n              to: picks.length > 1 ? geomTypes[measurement.getGeometry(2).type] : null,\n              distance: this.getDistanceXYZ(measurement),\n              deltaX: this.getDistanceX(measurement),\n              deltaY: this.getDistanceY(measurement),\n              deltaZ: this.getDistanceZ(measurement),\n              angle: this.getAngle(measurement),\n              area: this.getArea(measurement),\n              arc: this.getArc(measurement),\n              location: this.getSpot(measurement),\n              text: this.getCallout(measurement),\n              unitType: unitType || _sharedMeasureConfig.units,\n              precision: precision || _sharedMeasureConfig.precision,\n              picks,\n              type\n            };\n            if (measurement.options) {\n                const options = result.options = JSON.parse(JSON.stringify(measurement.options));\n                if (!options.modelId && picks[0] && picks[0].modelId)\n                    options.modelId = picks[0].modelId;\n                const model = options.modelId ? _viewer.impl.findModel(options.modelId) : _viewer.model;\n                const globalOffset = model && model.getData().globalOffset;\n                if (globalOffset && (globalOffset.x !== 0 || globalOffset.y !== 0 || globalOffset.z !== 0)) {\n                    const cvtPts = points => {\n                        if (points) {\n                            for (let i = 0; i < points.length; ++i) {\n                                // Tricky way to use Vector3 add on plain objects\n                                THREE.Vector3.prototype.add.call(points[i], globalOffset);\n                            }\n                        }\n                    };\n                    cvtPts(options.dimensionOffset);\n                    cvtPts(options.dashedLeader);\n                    cvtPts(options.arc);\n                }\n            }\n            const customTool = _customTools[type];\n            if (customTool) {\n                customTool.saveSessionMeasurement(measurement, result);\n            }\n            list.push(result);\n        }\n        return list;\n    };\n\n    this.clearCurrentMeasurement = function() {\n        if (_currentMeasurement) {\n            this.noPicksSet();\n\n            for (var key in _currentMeasurement.picks) {\n                if (Object.prototype.hasOwnProperty.call(_currentMeasurement.picks, key)) {\n                    this.clearPick(key);\n                }\n            }\n\n            this.updateViewportId(true);\n\n            if (_isolateMeasure) {\n                this.clearIsolate();\n            }\n\n            _currentMeasurement.indicator?.clear();\n            _currentMeasurement.indicator?.destroy();\n            _measurementsManager.removeCurrentMeasurement();\n            _currentMeasurement = null;\n        }\n\n        enableMeasurementsTouchEvents(true);\n    };\n\n    this.clearPick = function(pickNumber) {\n        if (_currentMeasurement && _currentMeasurement.hasPick(pickNumber)) {\n            _currentMeasurement.clearPick(pickNumber);\n            _currentMeasurement.indicator.hideClick(pickNumber);\n        }\n    };\n\n    this.setIsolateMeasure = function(enable) {\n        _isolateMeasure = enable;\n    };\n\n    this.getIsolateMeasure = function() {\n        return _isolateMeasure;\n    };\n\n    this.isolateMeasurement = function () {\n\n        if (!_active || !_isolateMeasure) {\n            return;\n        }\n\n        var defaultModelId = _viewer.model.id;\n        var isolationGroups = {};\n\n        for (var key in _measurementsManager.measurementsList) {\n            if (Object.prototype.hasOwnProperty.call(_measurementsManager.measurementsList, key)) {\n\n                var measurement = _measurementsManager.measurementsList[key];\n                for (let key in measurement.picks) {\n                    if (Object.prototype.hasOwnProperty.call(measurement.picks, key)) {\n                        var pick = measurement.getPick(key);\n\n                        var modelId = pick.modelId || defaultModelId;\n                        if (!Array.isArray(isolationGroups[modelId])) {\n                            isolationGroups[modelId] = [];\n                        }\n                        if (isolationGroups[modelId].indexOf(pick.snapNode) == -1) {\n                            isolationGroups[modelId].push(pick.snapNode);\n                        }\n                    }\n                }\n\n            }\n        }\n\n\n        // convert to expected format\n        var isolationSet = [];\n        for (let modelId in isolationGroups) {\n            if (Object.prototype.hasOwnProperty.call(isolationGroups, modelId)) {\n\n                var modelInstance = _viewer.impl.findModel(parseInt(modelId));\n                isolationSet.push({\n                    model: modelInstance,\n                    ids: isolationGroups[modelId]\n                });\n            }\n        }\n\n        if (isolationSet.length) {\n            _viewer.impl.visibilityManager.aggregateIsolate(isolationSet);\n        }\n    };\n\n    // It actually restores the isolation state to the one just before\n    // the measure tool was enabled...\n    this.clearIsolate = function() {\n        if (_preMeasureState) {\n            _viewer.restoreState(_preMeasureState, undefined, true);\n        }\n    };\n\n    this.onShowAllEvent = function (event) {\n        _preMeasureState = null;\n    };\n\n    this.deselectAllMeasurements = function() {\n        if (_currentMeasurement && !this.areAllPicksSet()) {\n            if (this.isEditingEndpoint) {\n                this.undoEditEndpoint();\n            }\n            else {\n                this.clearCurrentMeasurement();\n            }\n        }\n\n        for (var key in _measurementsManager.measurementsList) {\n            if (Object.prototype.hasOwnProperty.call(_measurementsManager.measurementsList, key)) {\n                var measurement = _measurementsManager.measurementsList[key];\n                if (measurement.indicator) {\n                    measurement.indicator.setSimple(true);\n                    measurement.indicator.hideEndpoints();\n                    measurement.indicator.unfocusLabels();\n                }\n            }\n        }\n\n        _currentMeasurement = null;\n    };\n\n    this.onExplodedChange = function() {\n        _exploded = true;\n    };\n\n    this.onMeasurementChanged = function() {\n\n        this.deselectAllMeasurements();\n\n        _currentMeasurement = _measurementsManager.getCurrentMeasurement();\n\n        if (_currentMeasurement?.isComplete()) {\n            _currentMeasurement.indicator.setSimple(false);\n            this.allPicksSet();\n            this.render(true);\n            this.updateResults();\n        }\n    };\n\n    this.selectMeasurementById = function(measurementId) {\n        if (!_currentMeasurement) {\n            _currentMeasurement = _measurementsManager.selectMeasurementById(measurementId);\n        }\n\n        if (_currentMeasurement.id !== measurementId) {\n            this.clearIncompleteMeasurement();\n\n            _currentMeasurement = _measurementsManager.selectMeasurementById(measurementId);\n        }\n    };\n\n    this.hoverMeasurementById = function(_measurementId) {\n        this.updateMeasurementPreview(false);\n        _snapper.indicator.clearOverlays();\n    };\n\n    function enableMeasurementsTouchEvents(enable) {\n        for (var key in _measurementsManager.measurementsList) {\n            if (Object.prototype.hasOwnProperty.call(_measurementsManager.measurementsList, key)) {\n                var measurement = _measurementsManager.measurementsList[key];\n                measurement.indicator.changeAllEndpointsEditableStyle(enable);\n                measurement.indicator.enableSelectionAreas(enable);\n                measurement.indicator.enableLabelsTouchEvents(enable);\n            }\n        }\n    }\n\n    this.editEndpoint = function(event, endpointNumber, measurementId) {\n        if (_currentMeasurement.id === measurementId && _activePoint === endpointNumber) {\n            _currentMeasurement.indicator.changeEndpointOnEditStyle(endpointNumber, false);\n            this.undoEditEndpoint();\n            return;\n        }\n\n        this.selectMeasurementById(measurementId);\n        _viewer.dispatchEvent({ type: SET_MOUSE_TRACKING, mode: 'start' });\n\n        _activePoint = endpointNumber;\n        this.isEditingEndpoint = true;\n\n        _currentMeasurement.indicator.changeEndpointOnEditStyle(endpointNumber, true);\n\n        enableMeasurementsTouchEvents(false);\n\n        for (var key in _currentMeasurement.picks) {\n            if (Object.prototype.hasOwnProperty.call(_currentMeasurement.picks, key)) {\n                _picksBackup[key] = _currentMeasurement.getPick(key).clone();\n            }\n        }\n\n        this.updateViewportId();\n\n        if (_isolateMeasure) {\n            this.clearIsolate();\n        }\n\n        if (_currentMeasurement.isRestored) {\n            // populate the existing picks with the new snap result from the snapper\n            _snapper.onMouseMove({x: event.canvasX, y: event.canvasY});\n            const snapResult = _snapper.getSnapResult().clone();\n            const pick = _currentMeasurement.getPick(_activePoint);\n            snapResult.copyTo(pick);\n\n            // Keep track of the pick that was updated.\n            pick.isValid = true;\n\n            // Set isRestored flag back to false if all of the picks have been validated\n            _currentMeasurement.isRestored = !function() {\n                const picks = _currentMeasurement.picks;\n                for (var key in picks) {\n                    if (Object.prototype.hasOwnProperty.call(picks, key)) {\n                        const pick = picks[key];\n                        if (!pick.isValid) {\n                            return false;\n                        }\n                    }\n                }\n                return true;\n            }();\n        }\n\n        if(!av.isMobileDevice()) {\n            this._handleMouseEvent(event);\n        }\n    };\n\n    this.canCloseArea = function() {\n        return _currentMeasurement.countPicks() > 3;\n    };\n\n    this.undoEditEndpoint = function() {\n        _currentMeasurement.indicator.clear();\n\n        for (var key in _currentMeasurement.picks) {\n            if (Object.prototype.hasOwnProperty.call(_currentMeasurement.picks, key)) {\n                _currentMeasurement.setPick(key, _picksBackup[key].clone());\n            }\n        }\n\n        _currentMeasurement.indicator.changeEndpointOnEditStyle(_activePoint, false);\n\n        this.isEditingEndpoint = false;\n        this.updateViewportId(true);\n        this.allPicksSet();\n        this.render(true);\n    };\n\n    this.updateResults = function() {\n\n        _currentMeasurement.indicator.updateResults();\n        _currentMeasurement.indicator.showEndpoints();\n        _currentMeasurement.indicator.focusLabels();\n\n        if (_currentMeasurement.isComplete()) {\n            this.isolateMeasurement();\n        }\n    };\n\n    /**\n     * Delete all measurements.\n     */\n    this.deleteMeasurements = function() {\n        const measurements = _measurementsManager.measurementsList;\n        const keys = Object.keys(measurements);\n        for (let i = 0; i < keys.length; i++) {\n            const key = keys[i];\n            _measurementsManager.currentMeasurement = measurements[key];\n            _currentMeasurement = _measurementsManager.getCurrentMeasurement();\n            this.deleteCurrentMeasurement();\n        }\n    };\n\n    this.deleteCurrentMeasurement = function() {\n        // Keeping a copy of current measurement so send info in event.\n        let _deletedMeasurement = _currentMeasurement ? _currentMeasurement.clone() : null;\n        this.clearCurrentMeasurement();\n        this.isEditingEndpoint = false;\n        this.editByDrag = false;\n        _isDragging = false;\n        this.isolateMeasurement();\n        if(_deletedMeasurement){\n            _viewer.dispatchEvent({\n                type: MeasureCommon.Events.DELETE_MEASUREMENT,\n                data: { type: _deletedMeasurement.measurementType, id: _deletedMeasurement.id }\n            });\n        }\n        _deletedMeasurement = null;\n    };\n\n    this.deleteCurrentPick = function() {\n\n        var pick = this.getActivePick();\n        var id = pick.id;\n\n        while (_currentMeasurement.hasPick(id + 1)) {\n            _currentMeasurement.setPick(id, _currentMeasurement.getPick(id + 1));\n            id++;\n        }\n\n        delete _currentMeasurement.picks[id];\n\n\n\n        var count = _currentMeasurement.countPicks();\n\n        _activePoint--;\n\n        if (_activePoint <= 0) {\n            _activePoint = count;\n        }\n\n        if (this.isEditingEndpoint) {\n            if (count == 2) {\n                this.deleteCurrentMeasurement();\n                return;\n            }\n\n            _currentMeasurement.indicator.changeAllEndpointsOnEditStyle(false);\n            this.isEditingEndpoint = false;\n            this.updateViewportId(true);\n            this.allPicksSet();\n            this.render();\n        } else {\n            this._handleMouseEvent();\n        }\n    };\n\n    this.updateViewportId = function(clear) {\n        if (_viewer.model && _viewer.model.is2d()) {\n            if (clear || this.isNoPicksSet() || this.isCalibrationSetOnPage()) {\n                _viewer.impl.updateViewportId(0);\n                _snapper.setViewportId(null);\n            }\n            else if (!_isPressing) {\n                var viewport = this.getPreviousPick()?.viewportIndex2d || this.getActivePick().viewportIndex2d;\n\n                // Pass viewport Id to LineShader to make all other geometries with different viewport transparent\n                _viewer.impl.updateViewportId(viewport);\n                if (_snapper)\n                    _snapper.setViewportId(viewport);\n\n                // Use desired viewport precision if defined\n                const viewports = _viewer.model.getData()?.viewports;\n                if (_sharedMeasureConfig.useViewportInfo && viewports.length > 1) {\n                    this.setPrecision(viewports[viewport]?.precision);\n                }\n            }\n        }\n    };\n\n    // Setting session measurements before activating measure needed\n    // some special handling for the topology state. The problem was\n    // that the indicators were set to 'fetching', and were cleared from\n    // _currentMeasurement before the the topology fetch could finish.\n    // I changed the logic to track all of the measurements that were\n    // marked as fetching and clear them when the fetch is finished.\n\n    // Clear fetching state in all measurements that were created\n    // while we were fetching topology. The stateSetter is the name\n    // of the method that sets the correct state.\n    function changeFetchingState(stateSetter) {\n        // call setter for all measurements in the list\n        for (let i = 0; i < _fetchingMeasurements.length; ++i) {\n            var measurement = _fetchingMeasurements[i];\n            measurement.indicator[stateSetter]();\n        }\n        // Clear list\n        _fetchingMeasurements.length = 0;\n    }\n\n    this.setNoTopology = function() {\n        // Change existing indicators\n        changeFetchingState(\"setNoTopology\");\n        // Set state for future measurements\n        _onIndicatorCreatedCB = function() { _currentMeasurement.indicator.setNoTopology(); };\n    };\n    this.setFetchingTopology = function() {\n        // Set state for future measurements\n        _onIndicatorCreatedCB = function() {\n            _fetchingMeasurements.push(_currentMeasurement);\n            _currentMeasurement.indicator.setFetchingTopology();\n        };\n        // Change existing indicator\n        if (_currentMeasurement && _currentMeasurement.indicator)\n            _onIndicatorCreatedCB();\n    };\n    this.setTopologyAvailable = function() {\n        // Change existing indicators\n        changeFetchingState(\"setTopologyAvailable\");\n        // Set state for future measurements\n        _onIndicatorCreatedCB = function() { _currentMeasurement.indicator.setTopologyAvailable(); };\n    };\n\n    this.getSnapper = function() {\n        return _snapper;\n    };\n\n    this.correctPickPosition = function() {\n\n        var active = this.getActivePick();\n\n        if (active && !active.getGeometry() && _cursorPosition) {\n            active.geomType = MeasureCommon.SnapType.SNAP_VERTEX;\n            active.geomVertex = _cursorPosition;\n            active.intersectPoint = _cursorPosition;\n        }\n\n        if (this.hasPreviousPick()) {\n            var passive = this.getPreviousPick();\n            var corrected = MeasureCommon.correctPerpendicularPicks(passive, active, viewer, _snapper);\n            if (!corrected) {\n\n                // get next pick in case of closed loop measurement.\n                var id = (active.id + 1) % (_currentMeasurement.countPicks() + 1);\n\n                if (id === 0)\n                    id = 1;\n\n                if (id !== active.id && _currentMeasurement.hasPick(id)) {\n                    var nextPick = _currentMeasurement.getPick(id);\n                    MeasureCommon.correctPerpendicularPicks(nextPick, active, viewer, _snapper);\n                }\n            }\n\n            if (_currentMeasurement.measurementType == MeasureCommon.MeasurementTypes.MEASUREMENT_AREA) {\n                this.snapToFirstPick(active);\n            }\n        }\n    };\n\n    this.clearMeasurementPreview = function() {\n        this.updateMeasurementPreview(false);\n        this.measurementPreview = null;\n    };\n\n    // Method to draw a preview of a measurement before it is even created. This may be implemented for single pick measurements.\n    this.updateMeasurementPreview = function(show = true) {\n        const snapResult = _snapper.getSnapResult();\n\n        const customTool = _customTools[_measurementType];\n        if (customTool) {\n            customTool.updateMeasurementPreview(show ? snapResult : null);\n            return;\n        }\n\n        if (_measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_SPOT) {\n            if (show && snapResult && snapResult.intersectPoint) {\n                if (!this.measurementPreview) {\n                    this.measurementPreview = new Measurement(_measurementType, 'measurementPreview');\n                    this.measurementPreview.attachIndicator(viewer, this, MeasureToolIndicator);\n                }\n\n                // render the preview\n                this.measurementPreview.setPick(1, snapResult);\n                this.measurementPreview.computeResult(this.measurementPreview.picks, viewer, _snapper);\n                this.measurementPreview.indicator.render(this.measurementPreview.picks, true, true);\n\n                // make sure the pointer label is always on top\n                const indicator = this.measurementPreview.indicator;\n                if (indicator.spotLabel.label) {\n                    indicator.spotLabel.label.id = 'measurement-spot-pointer-label';\n                    indicator.spotLabel.label.style.zIndex = 4;\n                }\n                if (indicator.endpoints[1] && this.measurementPreview.indicator.endpoints[1].label) {\n                    indicator.endpoints[1].label.id = 'measure-pointer-label';\n                }\n\n                // remove things we don't want to see on a preview\n                indicator.clearSelectionAreas();\n                indicator.hideEndpoints();\n                indicator.clearSpotMesh();\n            } else {\n                this.measurementPreview?.indicator.clear();\n            }\n        }\n    };\n\n\n    this._handleMouseEvent = function (event) {\n\n        var valid = false;\n\n        if (_snapper.isSnapped()) {\n\n            // User picked a new point after two points where already set (or none) - Start a new measurement.\n            if (this.areAllPicksSet() || this.isNoPicksSet()) {\n                this.startNewMeasurement();\n                _activePoint = 1;\n            }\n\n            _snapper.copyResults(this.getActivePick());\n            if (!_viewer.model.is2d()) {\n                let viewport = _viewer.container.getBoundingClientRect();\n                let x = event.canvasX || event.clientX - viewport.left;\n                let y = event.canvasY || event.clientY - viewport.top; // x and y only used for hitTestViewport method\n                // hitTestViewport doesn't work when measuring from center of a circle\n                let newpick = this.getActivePick();\n                let pick = viewer.impl.hitTestViewport(viewer.impl.clientToViewport(x, y));\n\n                if (newpick) {\n                    const fragList = _viewer.model.getFragmentList();\n                    const matrix = new Matrix4();\n                    if (newpick.geomFace?.fragId || newpick.geomFace?.fragId === 0) {\n                        this.getActivePick().fragId = newpick.geomFace.fragId;\n                    } else {\n                        this.getActivePick().fragId = pick?.fragId;\n                    }\n                    fragList.getWorldMatrix(this.getActivePick().fragId, matrix); // get fragment Local To World Matrix\n                    const fragPos = (new Vector3()).applyMatrix4(matrix); // get Fragment Position\n                    this.getActivePick().fragPos = { x: fragPos.x, y: fragPos.y, z: fragPos.z }; // save fragment position\n                }\n            }\n\n\n            // When user is in the arc measurement mode and the user clicks on a different circle than the first point, then don't do anything\n            if (_consumeSingleClick && _currentMeasurement?.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_ARC) {\n                if(!_currentMeasurement.getPick(1).circularArcCenter ||\n                (_currentMeasurement.hasPick(2) && !(MeasureCommon.isEqualVectors(_currentMeasurement.getPick(1).circularArcCenter, _currentMeasurement.getPick(2).circularArcCenter, 0)\n                && (_currentMeasurement.getPick(1).circularArcRadius === _currentMeasurement.getPick(2).circularArcRadius)))) {\n                    return false;\n                }\n            }\n\n            valid = true;\n\n        }\n        else {\n            // In order to draw rubber-band, set the cursor position, so the indicator will use it as active point.\n            if (event && _viewer.model) {\n                var viewport = _viewer.container.getBoundingClientRect();\n                var x = event.canvasX || event.clientX - viewport.left;\n                var y = event.canvasY || event.clientY - viewport.top;\n\n                if (x && y) {\n                    let canDrawRubberBand;\n                    if (_viewer.impl.is2d) {\n                        canDrawRubberBand = true;\n                    } else {\n                        const renderer = _viewer.impl.renderer();\n                        const res = [];\n                        renderer.idAtPixel(x, y, res);\n                        const modelId = res[1];\n                        if (modelId > 0) {\n                            const model = _viewer.impl.modelQueue().findModel(modelId);\n                            canDrawRubberBand = model?.is2d();\n                        }\n                    }\n\n                    _cursorPosition = canDrawRubberBand ? MeasureCommon.inverseProject({x: x, y: y}, _viewer) : null;\n                }\n            }\n\n            // In case a measurement is set, and the user clicks on a blank spot - don't do nothing.\n            if (_consumeSingleClick && _currentMeasurement && !this.isEditingEndpoint) {\n                if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\n                    return true;\n                }\n            }\n\n            var lastPick = this.getActivePick();\n            if (lastPick) {\n                lastPick.clear();\n            }\n        }\n\n        if (_currentMeasurement) {\n            this.correctPickPosition();\n\n            if (_consumeSingleClick) {\n                this._doConsumeSingleClick();\n            }\n\n            if (!this.isNoPicksSet()) {\n                var renderSucceeded = this.render();\n\n                // If it's the first pick, we don't expect the render of the rubberband to be succeeded.\n                // So enter here only if it's not the first pick.\n                if (_currentMeasurement.hasPick(2)) {\n                    valid &= renderSucceeded;\n                }\n            }\n        }\n\n        // If valid is false, the last pick is not revelant, and will clear it in case of a click.\n        return valid;\n    };\n\n    this._doConsumeSingleClick = function() {\n        // In case the measurement is a closed loop, eliminate the last pick.\n        if (_currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && !_currentMeasurement.closedArea) {\n            var length = _currentMeasurement.countPicks();\n            var firstPick = _currentMeasurement.getPick(1);\n            var lastPick = _currentMeasurement.getPick(length);\n\n            if (length >= 3 && _currentMeasurement.hasEqualPicks(firstPick, lastPick)) {\n                lastPick.clear();\n                delete _currentMeasurement.picks[length];\n                _currentMeasurement.closedArea = true;\n            }\n        }\n\n        this.updateResults();\n\n        var measurementComplete = _currentMeasurement.isComplete();\n        this.updateViewportId(measurementComplete);\n        _viewer.dispatchEvent({ type: SET_MOUSE_TRACKING, mode: measurementComplete ? 'end' : 'start' });\n\n        const customTool = _customTools[_currentMeasurement.measurementType];\n        avp.analytics.track('viewer.measure', {\n            action: 'Measurement',\n            type: customTool ? customTool.getMeasurementName() : MeasureCommon.MeasurementTypesToAnalytics[_currentMeasurement.measurementType],\n            snapping: this.getActivePick()?.geomType !== MeasureCommon.SnapType.RASTER_PIXEL,\n        });\n    };\n\n\n    this.handleButtonDown = function (event, button) {\n        if (av.isMobileDevice())\n            return false;\n\n        _isDragging = true;\n        _viewer.dispatchEvent({ type: SET_MOUSE_TRACKING, mode: 'start' });\n        if (button === 0 && !event.ctrlKey && !event.metaKey && !event.shiftKey && !event.altKey) {\n            _consumeSingleClick = true;\n            _downX = event.canvasX;\n            _downY = event.canvasY;\n        }\n        return false;\n    };\n\n    this.handleMouseMove = function (event) {\n\n        if (av.isMobileDevice())\n            return false;\n\n        if (event.canvasX !== _downX || event.canvasY !== _downY) {\n            _consumeSingleClick = false;\n        }\n\n        _endpointMoved = this.isEditingEndpoint;\n\n        if (!this.isNoPicksSet() && !this.areAllPicksSet()) {\n            this.clearPick(_activePoint);\n            this._handleMouseEvent(event);\n        }\n\n        checkSnapperIndicatorForArc();\n\n        _snapper.indicator.render();\n\n        this.updateMeasurementPreview(!this.isEditingEndpoint);\n        return false;\n    };\n\n    this.restoreMouseListeners = function () {\n\n        // When a press event has happend, the default behavior of firefly.js is to disable other mouse events,\n        // So they won't be triggered as well.\n        // The solution is to enable them after the end of the pressing.\n\n        _viewer.toolController.getTool(\"gestures\").controller.enableMouseButtons(true);\n    };\n\n    this.handlePressHold = function (event) {\n        _consumeSingleClick = false;\n\n        if (av.isTouchDevice()) {\n            switch( event.type )\n            {\n                case \"press\":\n                    _isPressing = true;\n\n                    if (this.areAllPicksSet() || this.isNoPicksSet()) {\n                        this.startNewMeasurement();\n\n                        if (_isolateMeasure) {\n                            this.clearIsolate();\n                        }\n\n                        _activePoint = 1;\n                    }\n\n                    this._handleMouseEvent(event);\n                    _snapper.indicator.render();\n\n                    return true;\n\n                case \"pressup\":\n                    _consumeSingleClick = true;\n                    this.restoreMouseListeners();\n                    _singleClickHandled = !_singleClickHandled;\n                    this.handleSingleClick(event);\n                    _isPressing = false;\n                    return true;\n            }\n        }\n        return false;\n\n    };\n\n\n\n    this.handleGesture = function( event )\n    {\n        if (av.isTouchDevice()){\n\n            _consumeSingleClick = false;\n\n            if (_isPressing) {\n\n                this.clearPick(_activePoint);\n\n                switch( event.type )\n                {\n                    case \"dragstart\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        return true;\n\n                    case \"dragmove\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        return true;\n\n                    case \"dragend\":\n                        _isPressing = false;\n                        _consumeSingleClick = true;\n\n                        if (!this.editByDrag) {\n                            _singleClickHandled = !_singleClickHandled;\n                            this.handleSingleClick(event);\n                        }\n\n                        this.editByDrag = false;\n                        this.restoreMouseListeners();\n                        return true;\n\n                    case \"pinchstart\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        break;\n\n                    case \"pinchmove\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        break;\n\n                    case \"pinchend\":\n                        _consumeSingleClick = true;\n                        _singleClickHandled = !_singleClickHandled;\n                        this.handleSingleClick(event);\n                        this.restoreMouseListeners();\n                        return true;\n                }\n            }\n\n            if (event.type.indexOf('pinch') !== -1) {\n                for (var key in _measurementsManager.measurementsList) {\n                    if (Object.prototype.hasOwnProperty.call(_measurementsManager.measurementsList, key)) {\n                        var measurement = _measurementsManager.measurementsList[key];\n                        measurement.indicator.updateScale();\n                    }\n                }\n            }\n        }\n\n        return false;\n    };\n\n    this.handleButtonUp = function (event, button) {\n        _isDragging = false;\n        _viewer.dispatchEvent({ type: SET_MOUSE_TRACKING, mode: 'end' });\n        _downX = null;\n        _downY = null;\n\n        if (_endpointMoved) {\n            _consumeSingleClick = true;\n            _singleClickHandled = !_singleClickHandled;\n            this.handleSingleClick(event);\n            _endpointMoved = false;\n        }\n\n        return false;\n    };\n\n    this.handleSingleClick = function (event, button) {\n        if (_consumeSingleClick) {\n\n            _snapper.indicator.clearOverlays();\n\n            if (_currentMeasurement) {\n                _currentMeasurement.indicator.changeEndpointOnEditStyle(_activePoint, false);\n            }\n\n            if (this._handleMouseEvent(event)) {\n                this.updateResults();\n                _activePoint++;\n            }\n            else {\n                if (this.isEditingEndpoint) {\n                    this.undoEditEndpoint();\n                }\n                else {\n                    if (_currentMeasurement && _currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && this.canCloseArea()) {\n                        this.snapToFirstPick(this.getActivePick(), true);\n                        this._handleMouseEvent();\n                    } else {\n                        this.clearCurrentMeasurement();\n                    }\n                }\n            }\n\n            if (_currentMeasurement && _currentMeasurement.isComplete()) {\n                this.allPicksSet();\n            }\n\n            _consumeSingleClick = false;\n            _singleClickHandled = !_singleClickHandled;\n            this.isEditingEndpoint = false;\n\n            _snapper.clearSnapped();\n        }\n        return true;\n    };\n\n    this.handleDoubleClick = function(event) {\n        return true;\n    };\n\n    this.onCameraChange = function () {\n        for (var key in _measurementsManager.measurementsList) {\n            if (Object.prototype.hasOwnProperty.call(_measurementsManager.measurementsList, key)) {\n                var measurement = _measurementsManager.measurementsList[key];\n                measurement.indicator.updateScale();\n            }\n        }\n\n        _snapper.indicator.onCameraChange();\n    };\n\n    this.handleSingleTap = function (event) {\n        if (!_singleClickHandled) {\n            _consumeSingleClick = true;\n            _snapper.onMouseDown({x: event.canvasX, y:event.canvasY});\n            this.handleSingleClick(event);\n        }\n        _singleClickHandled = !_singleClickHandled;\n\n        return true;\n    };\n\n    this.handleDoubleTap = function(event) {\n        if (_currentMeasurement && _currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && _currentMeasurement.countPicks() > 2) {\n            // fake single click over the first handle, to close the area.\n            var firstPick = _currentMeasurement.getPick(1);\n            var firstPickPoint = MeasureCommon.getSnapResultPosition(firstPick, _viewer);\n            var firstPickPosition = MeasureCommon.project(firstPickPoint, viewer);\n            event.canvasX = firstPickPosition.x;\n            event.canvasY = firstPickPosition.y;\n            _consumeSingleClick = true;\n            _snapper.onMouseDown(firstPickPosition);\n            this.handleSingleClick(event);\n            _singleClickHandled = !_singleClickHandled;\n        }\n\n        return true;\n    };\n\n    this.handleResize = function() {\n        for (var key in _measurementsManager.measurementsList) {\n            if (Object.prototype.hasOwnProperty.call(_measurementsManager.measurementsList, key)) {\n                var measurement = _measurementsManager.measurementsList[key];\n                if (measurement.indicator) {\n                    measurement.indicator.handleResize();\n                }\n            }\n        }\n    };\n\n    this.handleKeyDown = function(event, keyCode) {\n        switch (keyCode) {\n            case Autodesk.Viewing.KeyCode.BACKSPACE:\n            case Autodesk.Viewing.KeyCode.DELETE:\n            if (_currentMeasurement && _currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && !this.areAllPicksSet()) {\n                if (_currentMeasurement.countPicks() > 2 ) {\n                    this.deleteCurrentPick();\n                } else {\n                    this.deleteCurrentMeasurement();\n                }\n            } else {\n                this.deleteCurrentMeasurement();\n            }\n\n            return true;\n        }\n\n        return false;\n    };\n\n    // When calibration is set on viewport 0, all measurements should be done on it, regardless of where they started\n    this.isCalibrationSetOnPage = function() {\n        return options.calibrateWithPage && _sharedMeasureConfig.calibrationFactor != null;\n    };\n}\n\nav.GlobalManagerMixin.call(MeasureTool.prototype);\n","import { Indicator } from './Indicator';\n\n    var av = Autodesk.Viewing;\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    // /** @constructor */\n    export function CalibrationToolIndicator(viewer, measurement, calibrationTool)\n    {\n        Indicator.call(this, viewer, measurement, calibrationTool);\n        this.calibrationTool = calibrationTool;\n        this.calibrationLabel = null;\n        this.endpoints = null;\n        this.tmpVector = new THREE.Vector3();\n        this.p1 = null;\n        this.p2 = null;\n\n        this.rubberbandDefaultMaterial = new THREE.MeshBasicMaterial({\n            color: 0xe8b22c,\n            opacity: 1,\n            transparent: false,\n            depthTest: false,\n            depthWrite: false,\n            side: THREE.DoubleSide\n        });\n\n        this.rubberbandSnappedMaterial = new THREE.MeshBasicMaterial({\n            color: 0x005BCE,\n            opacity: 1,\n            transparent: false,\n            depthTest: false,\n            depthWrite: false,\n            side: THREE.DoubleSide\n        });\n\n        this.rubberbandTipMaterial = new THREE.MeshBasicMaterial({\n            color: 0x000000,\n            opacity: 1,\n            transparent: false,\n            depthTest: false,\n            depthWrite: false,\n            side: THREE.DoubleSide\n        });\n\n    }\n\n    CalibrationToolIndicator.prototype = Object.create(Indicator.prototype);\n    CalibrationToolIndicator.prototype.constructor = CalibrationToolIndicator;\n    var proto = CalibrationToolIndicator.prototype;\n\n    var kEndpointOffset = 15;\n\n    var kCrossWidth = 1.5;\n    var kTipXWidth = 2;\n    var kLineWidth = 3;\n\n    var kTipXLength = 3;\n    var kCrossLength = 5;\n\n    var kDashSize = 2;\n    var kGapSize = 1;\n\n    proto.createEndpoint = function(name) {\n        this.endpoints[name] = {};\n        this.endpoints[name].position = null;\n\n        const _document = this.getDocument();\n        var label = this.endpoints[name].label = _document.createElement('div');\n        label.className = 'calibration-endpoint';\n\n        this.viewer.container.appendChild(label);\n\n        var text = _document.createElement('div');\n        text.className = 'calibration-endpoint-text';\n        text.textContent = name.toString();\n        label.appendChild(text);\n\n        if (av.isTouchDevice()) {\n            this.initLabelMobileGestures(label, name, this.calibrationTool);\n        }\n        // Disable hover for mobile devices\n        if(!av.isMobileDevice()) {\n            MeasureCommon.safeToggle(label, 'enable-hover', true);\n\n            this.initMouseEvent(label, name);\n\n            label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n\n        }\n    };\n\n    proto.init = function() {\n\n        MeasureCommon.createCommonOverlay(this.viewer, this.overlayName);\n\n        if (!this.calibrationLabel) {\n            const _document = this.getDocument();\n            this.calibrationLabel = _document.createElement('div');\n            this.calibrationLabel.className = 'calibration-label';\n            this.hideLabel(this.calibrationLabel);\n            this.viewer.container.appendChild(this.calibrationLabel);\n            this.calibrationLabel.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n\n            var text = _document.createElement('div');\n            text.className = 'calibration-label-text';\n            this.calibrationLabel.appendChild(text);\n        }\n\n        this.endpoints = [];\n\n        this.handleButtonUpBinded = this.calibrationTool.handleButtonUp.bind(this.calibrationTool);\n        this.addWindowEventListener('mouseup', this.handleButtonUpBinded);\n\n        this.onCameraChangeBinded = this.onCameraChange.bind(this);\n        this.viewer.addEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n    };\n\n    proto.destroy = function() {\n        this.clear();\n\n        Indicator.prototype.destroy.call(this);\n\n        if (this.calibrationLabel) {\n            this.calibrationLabel.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            this.viewer.container.removeChild(this.calibrationLabel);\n            this.calibrationLabel = null;\n        }\n\n\n        this.viewer.impl.clearOverlay(this.overlayName, true);\n        this.viewer.impl.removeOverlayScene(this.overlayName);\n\n        this.removeWindowEventListener('mouseup', this.handleButtonUpBinded);\n        this.viewer.removeEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n    };\n\n    proto.clearRubberband = function() {\n        this.viewer.impl.clearOverlay(this.overlayName, true);\n    };\n\n    proto.clear = function() {\n\n        this.clearRubberband();\n\n        this.hideLabel(this.calibrationLabel);\n\n        for (var name in this.endpoints) {\n            if (Object.prototype.hasOwnProperty.call(this.endpoints, name)) {\n                this.hideClick(name);\n                this.endpoints[name].position = null;\n            }\n        }\n    };\n\n    proto.updateLabelValue = function(text) {\n        if (!text || text === \"\") {\n            this.calibrationLabel.childNodes[0].textContent = null;\n            this.hideLabel(this.calibrationLabel);\n        }\n        else {\n            this.calibrationLabel.childNodes[0].setAttribute(\"data-i18n\", text);\n            this.calibrationLabel.childNodes[0].textContent = av.i18n.translate(text);\n            this.showLabel(this.calibrationLabel);\n            this.calibrationTool.render();\n        }\n    };\n\n    proto.changeLabelClickableMode = function(clickable) {\n        if (clickable) {\n            this.calibrationLabel.childNodes[0].style.pointerEvents='all';\n        }\n        else {\n            this.calibrationLabel.childNodes[0].style.pointerEvents='none';\n        }\n    };\n\n    proto.showAddCalibrationLabel = function() {\n        var self = this;\n        this.updateLabelValue(\"Add Calibration\");\n        this.changeLabelClickableMode(true);\n        this.calibrationTool.render();\n\n        this.calibrationLabel.addEventListener(\"click\", function onClick() {\n            self.calibrationLabel.childNodes[0].style.pointerEvents = 'none';\n            self.calibrationTool.render();\n            self.updateLabelValue(null);\n            self.calibrationTool.showPanel();\n            self.calibrationLabel.removeEventListener(\"click\", onClick);\n        });\n    };\n\n    proto.updateLabelsPosition = function() {\n        for (var i = 1; i <= Object.keys(this.endpoints).length; i++) {\n            if (this.endpoints[i].position) {\n                var label = this.endpoints[i].label;\n                var pos = MeasureCommon.project(this.endpoints[i].position, this.viewer, kEndpointOffset);\n                label.style.left = (pos.x - parseInt(label.clientWidth) / 2) + 'px';\n                label.style.top = (pos.y - parseInt(label.clientHeight) / 2) + 'px';\n                label.point = this.endpoints[i].position;\n\n                // Detect and move in case of overlapping.\n                this.labelsOverlapDetection(this.endpoints[i].label, this.endpoints);\n            }\n        }\n\n        this.hideLabelsOutsideOfView();\n    };\n\n    function isLeftIntersect(current, other) {\n        return current.right >= other.left && current.right <= other.right;\n    }\n\n    function isRightIntersect(current, other) {\n        return current.left >= other.left && current.left <= other.right;\n    }\n\n    function isMiddleIntersect(current, other) {\n        return current.left <= other.left && current.right >= other.right;\n    }\n\n    function isVerticalIntersect(current, other) {\n        return current.top < other.bottom && current.bottom > other.top;\n    }\n\n    function moveLeft(currentLabel, currentRect, otherRect) {\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) - (currentRect.right - otherRect.left) + 'px';\n    }\n\n    function moveRight(currentLabel, currentRect, otherRect) {\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) + (otherRect.right - currentRect.left) + 'px';\n    }\n\n    function moveDown(currentLabel, currentRect, otherRect) {\n        currentLabel.style.top = parseInt(currentLabel.style.top, 10) + (otherRect.bottom - currentRect.top) + 'px';\n    }\n\n\n    proto.labelsOverlapDetection = function(staticLabel, labelsList) {\n\n        for (var i = 1; i <= Object.keys(labelsList).length ; i++) {\n\n            var dynamicLabel = labelsList[i].label;\n\n            if (staticLabel !== dynamicLabel) {\n                var staticRect = staticLabel.getBoundingClientRect();\n                var dynamicRect = dynamicLabel.getBoundingClientRect();\n\n                if (isVerticalIntersect(dynamicRect, staticRect)) {\n\n                    if (isLeftIntersect(dynamicRect, staticRect)) {\n                        moveLeft(dynamicLabel, dynamicRect, staticRect);\n                    }\n                    else if (isRightIntersect(dynamicRect, staticRect)) {\n                        moveRight(dynamicLabel, dynamicRect, staticRect);\n                    }\n                    else if (isMiddleIntersect(dynamicRect, staticRect)) {\n                        moveDown(dynamicLabel, dynamicRect, staticRect);\n                    }\n                }\n            }\n        }\n    };\n\n    proto.renderCalibrationLabel = function() {\n\n        if (this.showMeasureResult && this.calibrationLabel && this.p1 && this.p2) {\n\n            var point = { x: (this.p1.x + this.p2.x)/2, y: (this.p1.y + this.p2.y)/2, z: (this.p1.z + this.p2.z)/2 };\n            var mid = MeasureCommon.project(point, this.viewer);\n\n            this.labelPosition = new THREE.Vector2(mid.x, mid.y);\n\n            if (this.calibrationLabel.childNodes[0].textContent) {\n                this.showLabel(this.calibrationLabel);\n            }\n\n            this.calibrationLabel.style.top  = this.labelPosition.y - Math.floor(this.calibrationLabel.clientHeight / 2) + 'px';\n            this.calibrationLabel.style.left = this.labelPosition.x - Math.floor(this.calibrationLabel.clientWidth / 2) + 'px' ;\n            this.calibrationLabel.point = point;\n\n            if (this.viewer.model.is2d()) {\n                this.alignLabelWithLine(this.calibrationLabel, this.p1, this.p2, this.calibrationLabel.clientHeight, this.viewer);\n            }\n        }\n    };\n\n    proto.drawMeasurementLineTip = function(point, direction, normal, flip) {\n\n        const tmpPoints = [new THREE.Vector3(), new THREE.Vector3()];\n        const geometry = new THREE.BufferGeometry();\n        var p1Scale = this.setScale(point);\n\n        flip = flip ? -1 : 1;\n\n        var tipMaterial = (this.snapper.isSnapped() && !this.showMeasureResult) ? this.rubberbandSnappedMaterial : this.rubberbandTipMaterial;\n\n        // black tip\n        tmpPoints[0].addVectors(point, normal.clone().multiplyScalar(kCrossLength * p1Scale));\n        tmpPoints[1].subVectors(point, normal.clone().multiplyScalar(kCrossLength * p1Scale));\n        geometry.setFromPoints(tmpPoints);\n        this.drawLineAsCylinder(geometry, tipMaterial, kCrossWidth, this.overlayName);\n\n        tmpPoints[0].copy(point);\n        tmpPoints[1].subVectors(point, direction.clone().multiplyScalar(kCrossLength * p1Scale * flip));\n        geometry.setFromPoints(tmpPoints);\n        this.drawLineAsCylinder(geometry, tipMaterial, kCrossWidth, this.overlayName);\n\n        // yellow tip\n        tmpPoints[0].addVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\n        tmpPoints[1].subVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\n        geometry.setFromPoints(tmpPoints);\n        this.drawLineAsCylinder(geometry, this.rubberbandDefaultMaterial, kTipXWidth, this.overlayName);\n\n        tmpPoints[0].addVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\n        tmpPoints[0].addVectors(tmpPoints[0], direction.clone().multiplyScalar(kTipXLength * p1Scale));\n        tmpPoints[1].subVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\n        tmpPoints[1].subVectors(tmpPoints[1], direction.clone().multiplyScalar(kTipXLength * p1Scale));\n        geometry.setFromPoints(tmpPoints);\n        this.drawLineAsCylinder(geometry, this.rubberbandDefaultMaterial, kTipXWidth, this.overlayName);\n    };\n\n    proto.renderDistanceMeasurement = function(p1, p2) {\n\n        this.viewer.impl.clearOverlay(this.overlayName, true);\n\n        if (!p1 || !p2)\n            return;\n\n        var lineDirection = new THREE.Vector3().subVectors(p2, p1).normalize();\n        var lineNormal = lineDirection.clone().cross(this.viewer.navigation.getEyeVector()).normalize();\n        var p1Scale = this.setScale(p1);\n\n        var dashSize = kDashSize * p1Scale;\n        var gapSize = kGapSize * p1Scale;\n\n        // Main line\n\n        var lineMaterial = ((Math.abs(p1.x - p2.x) <= 0.1 || Math.abs(p1.y - p2.y) <= 0.1\n                            || this.snapper.getSnapResult().isPerpendicular) && !this.showMeasureResult)\n                            ? this.rubberbandSnappedMaterial : this.rubberbandDefaultMaterial;\n\n        if (this.showMeasureResult) {\n            // Single solid line.\n            const geometry = new THREE.BufferGeometry().setFromPoints([p1, p2]);\n            this.drawLineAsCylinder(geometry, lineMaterial, kLineWidth, this.overlayName);\n        }\n        else {\n            this.drawDashedLine(p1, p2, dashSize, gapSize, lineMaterial, kLineWidth, this.overlayName);\n        }\n\n        this.drawMeasurementLineTip(p1, lineDirection, lineNormal, false);\n\n        if (this.showMeasureResult) {\n            this.drawMeasurementLineTip(p2, lineDirection, lineNormal, true);\n        }\n\n        this.p1 = p1;\n        this.p2 = p2;\n\n        this.renderCalibrationLabel();\n    };\n\n    proto.onCameraChange = function() {\n        if (this.measurement.isComplete()) {\n            this.renderDistanceMeasurement(this.p1, this.p2);\n        }\n        this.updateLabelsPosition();\n    };\n\n","\n\n    \"use strict\";\n\n    var av = Autodesk.Viewing,\n        ave = Autodesk.Viewing.Extensions,\n        avp = Autodesk.Viewing.Private,\n        avu = Autodesk.Viewing.UI,\n        MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    // This strange code is there because we\n    // don't want DockingPanel, which is used as a base class later\n    // to be undefined during headless mode.\n    // Simply deriving from undefined will cause an exception (from babel env preset)\n    // even if the class is never instantiated\n    const DockingPanel = (avu && avu.DockingPanel) || class {};\n    // et ViewerPanelMixin to a no-op in headless mode\n    const ViewerPanelMixin = (ave && ave.ViewerPanelMixin) || function () {};\n\n    const _gWindow = av.getGlobal();\n    const _gDocument = _gWindow.document;\n\n    //\n    // /** @constructor */\n    //\n    //\n    export var CalibrationPanel = function(calibrationTool, viewer, id, title, options)\n    {\n        var self = this;\n\n        options = options || {};\n        options.addFooter = false;\n\n        DockingPanel.call(this, viewer.container, id, title, options);\n\n        this.viewer = viewer;\n        this.calibrationTool = calibrationTool;\n        this.parentContainer = viewer.container;\n        this.container.style.left = '0px';\n        this.container.style.top = '0px';\n        this.container.style.resize = 'none';\n\n        this.container.classList.add('calibration-panel');\n\n        this.setGlobalManager && this.setGlobalManager(viewer.globalManager);\n\n        this.addEventListener( this.closer, \"click\", function(e) {\n            self.cancel();\n        });\n\n        if (!options.heightAdjustment)\n            options.heightAdjustment = 40;\n        if (!options.marginTop)\n            options.marginTop = 0;\n        options.left = false;\n\n        this.createScrollContainer(options);\n\n        const _document = (this.getDocument && this.getDocument()) || _gDocument;\n\n        this.calibrationMenu = _document.createElement(\"div\");\n\n        this.scrollContainer.appendChild( this.calibrationMenu );\n\n        // Table\n        this.table = _document.createElement(\"table\");\n        this.table.className = \"adsk-lmv-tftable calibration-table\";\n        this.tbody = _document.createElement(\"tbody\");\n        this.table.appendChild(this.tbody);\n        this.calibrationMenu.appendChild(this.table);\n\n        // Define Size Row\n        this.row = this.tbody.insertRow(0);\n        this.requestedSizeTextbox = _document.createElement('input');\n        this.requestedSizeTextbox.className = 'docking-panel-textbox';\n        this.requestedSizeTextbox.type = 'text';\n        this.requestedSizeTextbox.autofocus= 'true';\n\n        this.addEventListener(this.requestedSizeTextbox, \"keyup\", function(e) {\n            var value = self.requestedSizeTextbox.value;\n            if (value !== \"\" && value.split(\".\")[0] === \"\") {\n                self.requestedSizeTextbox.value = \"0\" + value;\n            }\n            self.updateLabel();\n        });\n\n\n        this.addEventListener(this.requestedSizeTextbox, \"keypress\", function(e) {\n            var key = e.key || String.fromCharCode(e.keyCode);\n            // Handling backspace and arrows for firefox\n            if (key == \"Backspace\" || key == \"ArrowLeft\" || key == \"ArrowRight\"){\n                return;\n            }\n\n            // Escape (For IE11)\n            if (e.keyCode == av.KeyCode.ESCAPE) {\n                self.cancel();\n                return;\n            }\n\n            if (e.keyCode == av.KeyCode.ENTER) {\n                var index = self.unitList.selectedIndex;\n                var requestedUnits = self.units[index].units;\n                self.calibrationTool.calibrate(requestedUnits, self.requestedSizeTextbox.value);\n            }\n\n            var requestedSize = self.requestedSizeTextbox.value;\n            var cursorIndex = self.requestedSizeTextbox.selectionStart;\n            requestedSize = [requestedSize.slice(0, cursorIndex), key, requestedSize.slice(cursorIndex)].join('');\n\n            if (requestedSize == \".\") {\n                return;\n            }\n\n            var isSimple = self.units[self.unitList.selectedIndex].simpleInput;\n\n            if (!isPositiveNumber(requestedSize) || (isSimple && (!isSimpleDecimal(requestedSize) || Autodesk.Viewing.Private.calculatePrecision(requestedSize) > self.calibrationTool.getMaxPrecision()))) {\n                    e.preventDefault();\n            }\n        });\n\n        var caption = \"Define Size\";\n        var cell = this.row.insertCell(0);\n        this.caption = _document.createElement(\"div\");\n        this.caption.setAttribute(\"data-i18n\", caption);\n        this.caption.textContent = av.i18n.translate(caption);\n        cell.appendChild(this.caption);\n\n        cell = this.row.insertCell(1);\n        cell.appendChild(this.requestedSizeTextbox);\n\n        // Unit Type Row\n        this.units = [\n            { name: 'Feet and fractional inches', units: 'ft-and-fractional-in', matches: ['ft-and-fractional-in', 'fractional-in'], simpleInput: false },\n            { name: 'Feet and decimal inches', units: 'ft-and-decimal-in', matches: ['ft', 'decimal-ft', 'in', 'decimal-in', 'ft-and-decimal-in'], simpleInput: false },\n            { name: 'Meters', units: 'm', matches: ['m', 'm-and-cm'], simpleInput: true },\n            { name: 'Centimeters', units: 'cm', matches: ['cm'], simpleInput: true },\n            { name: 'Millimeters', units: 'mm', matches: ['mm'], simpleInput: true }\n        ];\n\n        var unitNames = [];\n        for (var i = 0; i < this.units.length; ++i) {\n            unitNames.push(this.units[i].name);\n        }\n        this.unitList = new avp.OptionDropDown(\"Unit type\", this.tbody, unitNames, 0, null, undefined, { paddingLeft: 0, paddingRight: 0 });\n        this.unitList.setGlobalManager(this.globalManager);\n        this.addEventListener(this.unitList, \"change\", function(e) {\n            self.updateLabel();\n        });\n\n        var buttonsWrapper = _document.createElement('div');\n        buttonsWrapper.classList.add('docking-panel-footer');\n        this.calibrationMenu.appendChild(buttonsWrapper);\n\n        // Cancel button\n        var cancel = _document.createElement('div');\n        cancel.classList.add('docking-panel-secondary-button');\n\n        cancel.setAttribute(\"data-i18n\", \"Cancel\");\n        cancel.textContent = av.i18n.translate(\"Cancel\");\n\n        cancel.addEventListener('click', function () {\n            self.cancel();\n        }, false);\n\n        buttonsWrapper.appendChild(cancel);\n\n        // Set Calibration button\n        var setCalibration = _document.createElement('div');\n        setCalibration.classList.add('docking-panel-primary-button');\n\n        setCalibration.setAttribute(\"data-i18n\", \"Calibrate\");\n        setCalibration.textContent = av.i18n.translate(\"Calibrate\");\n\n        setCalibration.addEventListener('click', function () {\n            var index = self.unitList.selectedIndex;\n            var requestedUnits = self.units[index].units;\n            self.calibrationTool.calibrate(requestedUnits, self.requestedSizeTextbox.value);\n        }, false);\n\n        buttonsWrapper.appendChild(setCalibration);\n    }; // end constructor\n\n    var isPositiveNumber = function (n) {\n        // The first character of the string has to be a digit.\n        return n.match(/^(\\d+)/);\n    };\n\n    var isSimpleDecimal = function (n) {\n        // Add \"0\" to the end of the string, to check if there are trailing spaces.\n        n += '0';\n        return !isNaN(parseFloat(n)) && !isNaN(+n) && parseFloat(n) >= 0;\n    };\n\n    CalibrationPanel.prototype = Object.create(DockingPanel.prototype);\n    ViewerPanelMixin.call(CalibrationPanel.prototype);\n\n\n    CalibrationPanel.prototype.uninitialize = function uninitialize() {\n        this.viewer = null;\n        DockingPanel.prototype.uninitialize.call(this);\n    };\n\n    CalibrationPanel.prototype.cancel = function cancel() {\n        this.setVisible(false);\n        this.calibrationTool.clearSize();\n        this.calibrationTool.showAddCalibrationLabel();\n    };\n\n    CalibrationPanel.prototype.findUnits = function findUnits() {\n        var i,\n            j,\n            selectedUnits = this.calibrationTool.getCurrentUnits();\n        for (i = 0; i < this.units.length; ++i) {\n            var matches = this.units[i].matches;\n            if (matches) {\n                for (j = 0; j < matches.length; ++j) {\n                    if (matches[j] === selectedUnits) {\n                        return i;\n                    }\n                }\n            }\n        }\n        return 0;\n    };\n\n    CalibrationPanel.prototype.setPanelValue = function(size) {\n        this.updateUnits();\n        this.requestedSizeTextbox.value = size;\n    };\n\n    CalibrationPanel.prototype.updateUnits = function() {\n        this.unitList.setSelectedIndex(this.findUnits());\n    };\n\n    CalibrationPanel.prototype.updateLabel = function() {\n        var index = this.unitList.selectedIndex;\n        var requestedUnits = this.units[index].units;\n        var size = this.requestedSizeTextbox.value;\n        var parsedNumber = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(size, requestedUnits);\n        var text = Autodesk.Viewing.Private.formatValueWithUnits(parsedNumber, requestedUnits, 3, Autodesk.Viewing.Private.calculatePrecision(size));\n\n        if (size === \"\") {\n            this.calibrationTool.updateLabelValue(null);\n        } else if (!isNaN(parsedNumber)) {\n            this.calibrationTool.updateLabelValue(text);\n        }\n    };\n\n    CalibrationPanel.prototype.updatePanelPosition = function (labelPosition, p1, p2, labelOffset) {\n\n        var width = parseInt(this.container.getBoundingClientRect().width);\n        var height = parseInt(this.container.getBoundingClientRect().height);\n\n        var cornerX;\n        var cornerY;\n\n        if (!labelPosition || !p1 || !p2) {\n            cornerX = Math.floor((this.viewer.canvas.clientWidth - width) / 2);\n            cornerY = Math.floor((this.viewer.canvas.clientHeight - height) / 2);\n        }\n        else {\n            p1 = MeasureCommon.project(p1, this.viewer);\n            p2 = MeasureCommon.project(p2, this.viewer);\n            var rubberbandDirection = new THREE.Vector2().copy(p1).sub(p2).normalize();\n\n            var normal;\n            if (p1.x < p2.x) {\n                normal = new THREE.Vector2(rubberbandDirection.y, -rubberbandDirection.x);\n            } else {\n                normal = new THREE.Vector2(-rubberbandDirection.y, rubberbandDirection.x);\n            }\n\n            var offset = labelOffset + Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2)) / 2;\n\n            normal = normal.multiplyScalar(offset);\n            var pos =  labelPosition.sub(normal);\n\n            cornerX = pos.x - Math.floor(width / 2);\n            cornerY = pos.y - Math.floor(height / 2);\n\n            // if panel exceeds screen bounds, just put the panel in the center of the screen.\n            if ((cornerX < 0) || (cornerX + width > this.viewer.canvas.clientWidth) || (cornerY < 0) || (cornerY + height > this.viewer.canvas.clientHeight)) {\n                cornerX = Math.floor((this.viewer.canvas.clientWidth - width) / 2);\n                cornerY = Math.floor((this.viewer.canvas.clientHeight - height) / 2);\n            }\n        }\n\n        this.container.style.left = cornerX + 'px';\n        this.container.style.top  = cornerY + 'px';\n    };\n\n    //\n    // /** @constructor */\n    //\n    //\n    export var CalibrationRequiredDialog = function(measureExt, viewer, id, title, options)\n    {\n        var self = this;\n\n        options = options || {};\n        options.addFooter = false;\n\n        DockingPanel.call(this, viewer.container, id, title, options);\n\n        this.viewer = viewer;\n        this.measureExt = measureExt;\n        this.parentContainer = viewer.container;\n        this.container.classList.add('calibration-panel');\n\n        this.setGlobalManager && this.setGlobalManager(viewer.globalManager);\n\n        if (!options.heightAdjustment)\n            options.heightAdjustment = 70;\n        if (!options.marginTop)\n            options.marginTop = 0;\n        options.left = false;\n\n        const _document = (this.getDocument && this.getDocument()) || _gDocument;\n\n        this.createScrollContainer(options);\n        this.dialogBox = _document.createElement(\"div\");\n        this.scrollContainer.appendChild( this.dialogBox );\n\n        // text\n        var calibrateNow = _document.createElement('div');\n        calibrateNow.className = 'calibration-text';\n        var text = \"Calibration Message\";\n        calibrateNow.setAttribute(\"data-i18n\", text);\n        calibrateNow.textContent = av.i18n.translate(text);\n        this.dialogBox.appendChild(calibrateNow);\n\n        var buttonsWrapper = _document.createElement('div');\n        buttonsWrapper.className = 'calibration-buttons-wrapper';\n        this.dialogBox.appendChild(buttonsWrapper);\n\n        // Cancel button\n        var cancel = _document.createElement('div');\n        cancel.classList.add('docking-panel-secondary-button');\n        cancel.classList.add('calibration-button-left');\n        cancel.setAttribute(\"data-i18n\", \"Cancel\");\n        cancel.textContent = av.i18n.translate(\"Cancel\");\n        cancel.addEventListener('click', function () {\n            self.setVisible(false);\n        }, false);\n        buttonsWrapper.appendChild(cancel);\n\n        // Calibrate-Now button\n        var calibrateNowButton = _document.createElement('div');\n        calibrateNowButton.classList.add('docking-panel-primary-button');\n        calibrateNowButton.classList.add('calibration-button-right');\n        calibrateNowButton.setAttribute(\"data-i18n\", \"Calibrate Now\");\n        calibrateNowButton.textContent = av.i18n.translate(\"Calibrate Now\");\n        calibrateNowButton.addEventListener('click', function () {\n            self.measureExt.enableCalibrationTool(true);\n            self.setVisible(false);\n        }, false);\n        buttonsWrapper.appendChild(calibrateNowButton);\n\n\n    }; // end constructor\n\n    CalibrationRequiredDialog.prototype = Object.create(DockingPanel.prototype);\n    ViewerPanelMixin.call(CalibrationRequiredDialog.prototype);\n\n\n    CalibrationRequiredDialog.prototype.uninitialize = function uninitialize() {\n        this.viewer = null;\n        DockingPanel.prototype.uninitialize.call(this);\n    };\n","import { CalibrationToolIndicator } from './CalibrationToolIndicator';\nimport { CalibrationPanel } from './CalibrationPanels';\nimport { SET_MOUSE_TRACKING } from './EventTypes';\n\nconst av = Autodesk.Viewing;\n\n//\n// /** @constructor */\n//\n//\nexport var CalibrationTool = function( viewer, options, sharedMeasureConfig, snapper)\n{\n    var av = Autodesk.Viewing;\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    var _names  = [\"calibration\"];\n    var _priority = 50;\n    var _viewer  = viewer;\n    var _measurement = new MeasureCommon.Measurement(MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE);\n    var _options = options || {};\n\n    this.setGlobalManager(viewer.globalManager);\n\n    // Shared State with MeasureTool and Indicator\n    var _sharedMeasureConfig = sharedMeasureConfig;\n\n    var _maxPrecision = options.maxPrecision || 5;\n    var _isCalibrated = (sharedMeasureConfig.calibrationFactor != null); // True when the user set the calibration, or used a Previous calibration factor.\n\n    var _snapper = snapper;\n\n    var _active = false;\n    var _isDragging = false;\n    var _isPressing = false;\n\n    var _distance = null; // The length of the current measurement.\n    var _calibrationTaken = false; // True when the user selected two valid points and set the calibration.\n    var _selectedSize = null;\n    var _selectedUnits = null;\n    var _selectedP1 = null;\n    var _selectedP2 = null;\n    var _waitingForInput = false; // True when the user selected two valid points.\n    var _picksBackup = [];\n    var _cursorPosition = null;\n\n    var _activePoint = 0;\n\n    var _endpointMoved = false;\n\n    var _consumeSingleClick = false;\n    var _singleClickHandled = false;\n    var _downX = null;\n    var _downY = null;\n\n    // GUI.\n    var _calibrationPanel = null;\n    var _cursor = \"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAYCAYAAAD+vg1LAAAAAXNSR0IArs4c6QAAAwZJREFUSA2tVEtLW0EUvjGJefoqSY0x0WBSiY+oNWiUINkU6ioLaaAlG1eudNVFoT+grgopiCkEIbUK1o0lusmurRSEWmmKG6MNtNhNosWqyU2CZPpN8cr15nFD7YHDzHnON2fOGYZhmHkw4XEW+wD4xkT4lMvl6CE0+Y2ohh+dz+cZn89HVS/5+n/d/wVMkXq9Xor2v5SBgsmymQwZHx+vOqlKpXKDXWI3eU6Tg+kqSjSh3W4/s9lsvzUajaNcAK3xY7Dyci3nd6WXSCS60dHRvMfjSRcKBfWV4SYbrVarB8p0PB5nY7HYmdVq/aDX67WlckpKKcvpOjs7X09OTvoPDw8z2Wy2Bu+imJqa+npycnJXGHOt3YRGoSyVSvvMZrNkYWFBs7GxkaoBAXFJcDJhcCW5rq5ur62trQ/EOhyOBhDT2Nj4qVKMqA31ve1yub7Rfufo/PycDA4OxpuamhqECaouhVqtfuD3+1tqa2uZQCCQDoVCWTwknVQDDvIKE1clI1ja09Ozg0cjx8fHpL+/P+50OhMU8f7+Punt7f2I5NdqXRXi9fV1z9jYWCuIWV5eziSTyWAqlXq1urqaw6AwOMiCG4lOYtEturu732xubhK0FQHSvfr6+lsog4HWPIPvIBqNErRiqCiwkkKpVFowZd8xZSQYDLImk+kJ52+xWJ4tLS3hU8yTkZGRBD2Ms4mu6Nun4XA4f3p6SoaGhuJ0+rgg/Bsmt9udYFmWzM3NZdDT05ztWsE5JV0R1AqUCfTt0fb2tjESiRRmZmaOUOcI3w9DY5mdnb03PDzMoDQ/MZFRzM20lO/E38vl8vt46UdAq0WNJWixlEwmu8B1bXioOxwjpgXJ0hMTE1og1qysrDghf+HnKtoD7c7u7i5ZXFzMGY3GF7iFuRR3dHTMr62tXWxtbZH29vZ3RYmECozu54ODAzpdP2hphHZOVigUVjChvgMDA+85fdm1q6vrrU6n+4WR9Zd1ujQ0Nzc/NBgMScSExXwZ2j5oL5Wo46UD/ZvxUemo+AdW1zJzUYr16wAAAABJRU5ErkJggg==), auto\";\n    var _hasUI = Autodesk.Viewing.GuiViewer3D && viewer instanceof Autodesk.Viewing.GuiViewer3D;\n\n\n    function getActivePick()\n    {\n        switch (_activePoint) {\n            case 0:\n                return null;\n            case 1:\n            case 2:\n                return _measurement.getPick(_activePoint);\n            case 3:\n                return _measurement.getPick(_measurement.countPicks());\n        }\n    }\n\n    function getPreviousPick()\n    {\n        switch (_activePoint) {\n            case 0:\n                return null;\n            case 1:\n                return _measurement.getPick(_measurement.countPicks());\n            case 2:\n            case 3:\n                return _measurement.getPick(1);\n        }\n    }\n\n    function hasPreviousPick()\n    {\n        switch (_activePoint) {\n            case 0:\n                return false;\n            case 1:\n                return _measurement.hasPick(_measurement.countPicks());\n            case 2:\n            case 3:\n                return _measurement.hasPick(1);\n        }\n    }\n\n    function noPicksSet() {\n        _activePoint = 0;\n    }\n\n    function allPicksSet() {\n        _activePoint = 3;\n        _measurement.indicator.changeAllEndpointsEditableStyle(true);\n    }\n\n    function isNoPicksSet() {\n        return _activePoint === 0;\n    }\n\n    function areAllPicksSet() {\n        return _activePoint === 3;\n    }\n\n    this.register = function()\n    {\n        if (_hasUI && !_calibrationPanel) {\n            _calibrationPanel = new CalibrationPanel( this, _viewer, \"calibration-panel\", \"Calibration\", _options );\n            _viewer.addPanel(_calibrationPanel);\n        }\n\n        this.onCameraChangeBinded = this.onCameraChange.bind(this);\n        this.screenSizeChangedBinded = this.screenSizeChanged.bind(this);\n    };\n\n    this.deregister = function()\n    {\n        this.deactivate();\n\n        if (_calibrationPanel) {\n            _viewer.removePanel( _calibrationPanel );\n            _calibrationPanel.uninitialize();\n            _calibrationPanel = null;\n        }\n    };\n\n    this.isActive = function()\n    {\n        return _active;\n    };\n\n    this.getNames = function()\n    {\n        return _names;\n    };\n\n    this.getName = function()\n    {\n        return _names[0];\n    };\n\n    this.getPriority = function()\n    {\n        return _priority;\n    };\n\n    this.getCursor = function() {\n        return _isDragging ? null : _cursor;\n    };\n\n    this.activate = function()\n    {\n        _active = true;\n        _isDragging = false;\n        this.isEditingEndpoint = false;\n        this.editByDrag = false;\n        noPicksSet();\n\n        _viewer.toolController.activateTool(_snapper.getName());\n        _viewer.toolController.activateTool(\"magnifyingGlass\");\n\n\n        if (!_measurement.indicator) {\n            _measurement.attachIndicator(_viewer, this, CalibrationToolIndicator);\n        }\n\n        _measurement.indicator.clear();\n\n        if (_calibrationTaken && _selectedP1 && _selectedP2) {\n            _measurement.setPick(1, _selectedP1.clone());\n            _measurement.setPick(2, _selectedP2.clone());\n\n            allPicksSet();\n\n            var parsedRequestedSize = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(_selectedSize, _selectedUnits);\n            _measurement.indicator.updateLabelValue(Autodesk.Viewing.Private.formatValueWithUnits(parsedRequestedSize, _selectedUnits, 3, _sharedMeasureConfig.precision));\n            _distance = _measurement.distanceXYZ;\n            _measurement.indicator.changeLabelClickableMode(false);\n            _waitingForInput = true;\n            var valid = this.render();\n            _measurement.indicator.changeAllEndpointsEditableStyle(true);\n\n            if (valid) {\n                if (_calibrationPanel) {\n                    _calibrationPanel.setPanelValue(_selectedSize);\n                }\n\n                this.showPanel();\n            }\n        } else if (_hasUI) {\n            const message = {\n                messageKey    : \"Select two points\",\n                messageDefaultValue  : \"Select two points to calibrate drawing\",\n                position: \"top\"\n            };\n            Autodesk.Viewing.Private.HudMessage.displayMessage(_viewer.container, message);\n        }\n\n        _viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n        _viewer.addEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT, this.screenSizeChangedBinded);\n    };\n\n    this.deactivate = function()\n    {\n        if (!_active)\n            return;\n\n        _viewer.dispatchEvent({ type: SET_MOUSE_TRACKING, mode: 'end' });\n\n        _active = false;\n\n        Autodesk.Viewing.Private.HudMessage.dismiss();\n        this.hidePanel();\n        this.updateViewportId(true);\n        _waitingForInput = false;\n        _measurement.clearAllPicks();\n\n        if(_snapper && _snapper.isActive()) {\n            _viewer.toolController.deactivateTool(_snapper.getName());\n        }\n\n        _viewer.toolController.deactivateTool(\"magnifyingGlass\");\n\n        if (_measurement.indicator) {\n            _measurement.indicator.clear();\n            _measurement.indicator.destroy();\n            _measurement.indicator = null;\n        }\n\n        _viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n        _viewer.removeEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT, this.screenSizeChangedBinded);\n    };\n\n    this.getActivePointIndex = function() {\n        return _activePoint;\n    };\n\n    this.setCalibrationFactor = function ( calibrationFactor ) {\n        _sharedMeasureConfig.calibrationFactor = calibrationFactor;\n    };\n\n    this.getCalibrationFactor = function () {\n        return _sharedMeasureConfig.calibrationFactor;\n    };\n\n    this.updateLabelValue = function (value) {\n        _measurement.indicator.updateLabelValue(value);\n    };\n\n    this.isCalibrationValid = function(requestedUnits, requestedSize) {\n        var parsedRequestedSize = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(requestedSize, requestedUnits);\n        return !isNaN(parsedRequestedSize);\n    };\n\n    this.calibrate = function(requestedUnits, requestedSize)\n    {\n\n        var calibrationFactor = null;\n\n        var parsedRequestedSize = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(requestedSize, requestedUnits);\n\n        if (!isNaN(parsedRequestedSize)) {\n            var currentSize = Autodesk.Viewing.Private.convertUnits(_viewer.model.getUnitString(), requestedUnits, 1, _distance);\n            if (currentSize !== 0 && !isNaN(currentSize)) {\n                calibrationFactor = parsedRequestedSize / currentSize;\n                _sharedMeasureConfig.calibrationFactor = calibrationFactor;\n                _sharedMeasureConfig.units = requestedUnits;\n                var defualtPrecision = _viewer.model.is2d() ? 3 : 1;\n                var requestedPrecision = Autodesk.Viewing.Private.calculatePrecision(requestedSize);\n                _sharedMeasureConfig.precision = Math.max((_sharedMeasureConfig.precision ? _sharedMeasureConfig.precision : defualtPrecision), requestedPrecision);\n                _selectedSize = requestedSize;\n                _selectedUnits = requestedUnits;\n                _isCalibrated = true;\n                _calibrationTaken = true;\n                _selectedP1 = _measurement.getPick(1).clone();\n                _selectedP2 = _measurement.getPick(2).clone();\n            }\n        }\n\n        if (calibrationFactor) {\n            _viewer.getExtension('Autodesk.Measure').enableCalibrationTool(false);\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.FINISHED_CALIBRATION , units: requestedUnits , scaleFactor: calibrationFactor, size: requestedSize});\n        }\n    };\n\n    this.calibrateByScale = function(requestedUnits, requestedScale) {\n        _sharedMeasureConfig.calibrationFactor = requestedScale;\n\n        if (_sharedMeasureConfig.units !== requestedUnits ) {\n            _sharedMeasureConfig.units = requestedUnits;\n            _selectedUnits = requestedUnits;\n        }\n\n        _isCalibrated = true;\n    };\n\n    this.getCurrentUnits = function () {\n        return _sharedMeasureConfig.units;\n    };\n\n    this.hidePanel = function() {\n        if (_calibrationPanel) {\n            _calibrationPanel.setVisible(false);\n        }\n        else {\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.CLOSE_CALIBRATION_PANEL_EVENT });\n        }\n    };\n\n    this.showPanel = function() {\n\n        Autodesk.Viewing.Private.HudMessage.dismiss();\n\n        var self = this;\n        const _window = this.getWindow();\n\n        if (_calibrationPanel) {\n            _window.setTimeout(function () { _calibrationPanel.requestedSizeTextbox.focus();}, 0);\n            _calibrationPanel.setVisible(true);\n            _calibrationPanel.updatePanelPosition(_measurement.indicator.labelPosition, _measurement.indicator.p1, _measurement.indicator.p2, _measurement.indicator.calibrationLabel.clientHeight);\n            _calibrationPanel.updateUnits();\n            self.addWindowEventListener(\"keyup\", function onKeyUp(e){\n                var key = e.key || String.fromCharCode(e.keyCode);\n                if (key == \"Escape\" && self.isActive()) {\n                    self.hidePanel();\n                    self.clearSize();\n                    self.showAddCalibrationLabel();\n\n                    self.removeWindowEventListener(\"keyup\", onKeyUp);\n                }\n            });\n        }\n        else {\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.OPEN_CALIBRATION_PANEL_EVENT, data: {size: _selectedSize, units: _selectedUnits } });\n        }\n    };\n\n    this.updateCalibrationPanel = function() {\n        _calibrationPanel && _calibrationPanel.updateUnits();\n    };\n\n    this.showAddCalibrationLabel = function() {\n        _measurement.indicator.showAddCalibrationLabel();\n    };\n\n    this.isCalibrated = function() {\n        return _isCalibrated;\n    };\n\n    this.clearSize = function () {\n        _measurement.indicator.updateLabelValue(null);\n\n        if (_calibrationPanel) {\n            _calibrationPanel.requestedSizeTextbox.value = \"\";\n        }\n        else {\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.CLEAR_CALIBRATION_SIZE_EVENT });\n        }\n    };\n\n    this.getMaxPrecision = function() {\n        return _maxPrecision;\n    };\n\n    this.clearMeasurement = function() {\n\n        noPicksSet();\n\n        this.clearPick(1);\n        this.clearPick(2);\n\n        _measurement.indicator.clear();\n\n        this.updateViewportId(true);\n        this.hidePanel();\n\n        _waitingForInput = false;\n    };\n\n    this.clearPick = function(pickNumber) {\n        if (_measurement.hasPick(pickNumber)) {\n            _measurement.clearPick(pickNumber);\n            _measurement.indicator.hideClick(pickNumber);\n        }\n    };\n\n    this.repickEndpoint = function(pickNumber) {\n        this.clearPick(pickNumber);\n        this.editEndpoint(null, pickNumber);\n    };\n\n    this.getSnapper = function() {\n        return _snapper;\n    };\n\n    this._handleMouseEvent = function (event) {\n\n        var valid = false;\n\n        if (_snapper.isSnapped()) {\n\n            // User picked a new point after two points where already set (or none) - Start a new measurement.\n            if (areAllPicksSet() || isNoPicksSet()) {\n                this.clearMeasurement();\n                _activePoint = 1;\n            }\n\n            _snapper.copyResults(getActivePick());\n\n            valid = true;\n\n        }\n        else {\n            // In order to draw rubber-band, set the cursor position, so the indicator will use it as active point.\n            if (event && _viewer.model.is2d()) {\n                var viewport = _viewer.container.getBoundingClientRect();\n                var x = event.canvasX || event.clientX - viewport.left;\n                var y = event.canvasY || event.clientY - viewport.top;\n\n                if (x && y) {\n                    _cursorPosition = MeasureCommon.inverseProject({ x:x, y:y }, _viewer);\n                }\n            }\n\n            // In case a measurement is set, and the user clicks on a blank spot - don't do nothing.\n            if (_consumeSingleClick && _measurement && !this.isEditingEndpoint) {\n                if (_activePoint === _measurement.getMaxNumberOfPicks() + 1) {\n                    return true;\n                }\n            }\n\n            var lastPick = getActivePick();\n            if (lastPick) {\n                lastPick.clear();\n            }\n        }\n\n        this.correctPickPosition();\n\n        if (_consumeSingleClick) {\n            this._doConsumeSingleClick(valid);\n        }\n\n        if (!isNoPicksSet()) {\n            var renderSucceeded = this.render();\n\n            // If it's the first pick, we don't expect the render of the rubberband to be succeeded.\n            // So enter here only if it's not the first pick.\n            if (_measurement.hasPick(2)) {\n                valid &= renderSucceeded;\n            }\n        }\n\n        if (_consumeSingleClick) {\n            if (_measurement.isComplete() && valid) {\n                _distance = _measurement.distanceXYZ;\n                this.clearSize();\n                this.showPanel();\n                _waitingForInput = true;\n                _viewer.dispatchEvent({ type: SET_MOUSE_TRACKING, mode: 'end' });\n            }\n            else {\n                _viewer.dispatchEvent({ type: SET_MOUSE_TRACKING, mode: 'start' });\n                this.hidePanel();\n                _measurement.indicator.updateLabelValue(null);\n                _waitingForInput = false;\n            }\n        }\n\n        // If valid is false, the last pick is not revelant, and will clear it in case of a click.\n        return valid;\n    };\n\n    this.updateViewportId = function(clear) {\n        if (_viewer.model && _viewer.model.is2d()) {\n            if (clear || isNoPicksSet()) {\n                viewer.impl.updateViewportId(0);\n                _snapper.setViewportId(null);\n            }\n            else if (!_isPressing) {\n                var viewport = getPreviousPick().viewportIndex2d || getActivePick().viewportIndex2d;\n\n                // Pass viewport Id to LineShader to make all other geometries with different viewport transparent\n                viewer.impl.updateViewportId(viewport);\n                if (_snapper)\n                    _snapper.setViewportId(viewport);\n\n            }\n        }\n    };\n\n    this._doConsumeSingleClick = function(valid) {\n\n        this.updateViewportId(_measurement.isComplete());\n\n        _measurement.indicator.clear();\n    };\n\n\n    this.handleButtonDown = function (event, button) {\n        if (av.isMobileDevice())\n            return false;\n\n        _isDragging = true;\n        if (button === 0 && !event.ctrlKey && !event.metaKey && !event.shiftKey && !event.altKey) {\n            _consumeSingleClick = true;\n            _downX = event.canvasX;\n            _downY = event.canvasY;\n        }\n        return false;\n    };\n\n    this.handleMouseMove = function (event) {\n        if (av.isMobileDevice())\n            return false;\n\n        if (event.canvasX !== _downX || event.canvasY !== _downY) {\n            _consumeSingleClick = false;\n        }\n\n        _endpointMoved = this.isEditingEndpoint;\n\n        if (!isNoPicksSet() && !areAllPicksSet()) {\n            this.clearPick(_activePoint);\n            this._handleMouseEvent(event);\n        }\n\n        _snapper.indicator.render();\n\n        return false;\n    };\n\n    this.restoreMouseListeners = function () {\n\n        // When a press event has happend, the default behavior of firefly.js is to disable other mouse events,\n        // So they won't be triggered as well.\n        // The solution is to enable them after the end of the pressing.\n\n        _viewer.toolController.getTool(\"gestures\").controller.enableMouseButtons(true);\n    };\n\n    this.handlePressHold = function (event) {\n        _consumeSingleClick = false;\n\n        if (av.isTouchDevice()) {\n            switch( event.type )\n            {\n                case \"press\":\n                    _isPressing = true;\n                    if (areAllPicksSet()) {\n                        this.clearMeasurement();\n                    } else {\n                        this.clearPick(_activePoint);\n                    }\n                    this._handleMouseEvent(event);\n                    _snapper.indicator.render();\n\n                    return true;\n\n                case \"pressup\":\n                    _consumeSingleClick = true;\n                    this.restoreMouseListeners();\n                    _singleClickHandled = !_singleClickHandled;\n                    this.handleSingleClick(event);\n                    _isPressing = false;\n                    return true;\n            }\n        }\n        return false;\n\n    };\n\n    this.correctPickPosition = function() {\n\n        var active = getActivePick();\n\n        if (active && !active.getGeometry() && _cursorPosition) {\n            active.geomType = MeasureCommon.SnapType.SNAP_VERTEX;\n            active.geomVertex = _cursorPosition;\n            active.intersectPoint = _cursorPosition;\n        }\n\n        if (hasPreviousPick()) {\n            var passive = getPreviousPick();\n            MeasureCommon.correctPerpendicularPicks(passive, active, viewer, _snapper);\n        }\n    };\n\n    this.render = function() {\n\n        var hasResult = _measurement.computeResult(_measurement.picks, _viewer, _snapper);\n        _measurement.indicator.render(_measurement.picks, _consumeSingleClick || _waitingForInput);\n\n        return hasResult;\n    };\n\n    this.editEndpoint = function(event, endpointNumber) {\n        if (_activePoint === endpointNumber) {\n            _measurement.indicator.changeEndpointOnEditStyle(endpointNumber, false);\n            this.undoEditEndpoint();\n            return;\n        }\n\n        _activePoint = endpointNumber;\n        this.isEditingEndpoint = true;\n\n        _measurement.indicator.changeEndpointOnEditStyle(endpointNumber, true);\n        _measurement.indicator.changeAllEndpointsEditableStyle(false);\n\n        for (var key in _measurement.picks) {\n            if (Object.prototype.hasOwnProperty.call(_measurement.picks, key)) {\n                _picksBackup[key] = _measurement.getPick(key).clone();\n            }\n        }\n\n        this.updateViewportId();\n\n        _viewer.dispatchEvent({ type: SET_MOUSE_TRACKING, mode: 'start' });\n        this.hidePanel();\n        _measurement.indicator.updateLabelValue(null);\n        _waitingForInput = false;\n\n        if(!av.isMobileDevice()) {\n            this._handleMouseEvent(event);\n        }\n    };\n\n    this.undoEditEndpoint = function() {\n        _measurement.indicator.clear();\n\n        for (var key in _measurement.picks) {\n            if (Object.prototype.hasOwnProperty.call(_measurement.picks, key)) {\n                _measurement.setPick(key, _picksBackup[key].clone());\n            }\n        }\n\n        this.updateViewportId(true);\n        this.isEditingEndpoint = false;\n        _waitingForInput = true;\n\n        allPicksSet();\n        var valid = this.render();\n\n        if (valid) {\n            this.showPanel();\n        }\n    };\n\n    this.handleGesture = function(event)\n    {\n        if (av.isTouchDevice()){\n\n            _consumeSingleClick = false;\n\n            if (_isPressing) {\n\n                this.clearPick(_activePoint);\n\n                switch( event.type )\n                {\n                    case \"dragstart\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        return true;\n\n                    case \"dragmove\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        return true;\n\n                    case \"dragend\":\n                        _isPressing = false;\n                        _consumeSingleClick = true;\n\n                        if (!this.editByDrag) {\n                            _singleClickHandled = !_singleClickHandled;\n                            this.handleSingleClick(event);\n                        }\n\n                        this.editByDrag = false;\n                        this.restoreMouseListeners();\n                        return true;\n\n                    case \"pinchend\":\n                        _consumeSingleClick = true;\n                        _singleClickHandled = !_singleClickHandled;\n                        this.handleSingleClick(event);\n                        this.restoreMouseListeners();\n                        return true;\n                }\n            }\n        }\n\n        return false;\n    };\n\n    this.handleButtonUp = function (event) {\n        _isDragging = false;\n        _downX = null;\n        _downY = null;\n\n        if (_endpointMoved) {\n            _consumeSingleClick = true;\n            _singleClickHandled = !_singleClickHandled;\n            this.handleSingleClick(event);\n            _endpointMoved = false;\n        }\n\n        return false;\n    };\n\n    this.handleSingleClick = function (event) {\n        if (_consumeSingleClick) {\n\n            _snapper.indicator.clearOverlays();\n\n            _measurement.indicator.changeEndpointOnEditStyle(_activePoint, false);\n\n            if (this._handleMouseEvent(event)) {\n                _measurement.indicator.showEndpoints();\n                _measurement.indicator.updateLabelsPosition();\n                _activePoint++;\n            }\n            else {\n                if (this.isEditingEndpoint) {\n                    this.undoEditEndpoint();\n                }\n                else {\n                    this.clearMeasurement();\n                }\n            }\n\n            if (_measurement.isComplete()) {\n                allPicksSet();\n            }\n\n            _consumeSingleClick = false;\n            _singleClickHandled = !_singleClickHandled;\n            this.isEditingEndpoint = false;\n\n            _snapper.clearSnapped();\n        }\n        return true;\n    };\n\n    this.handleDoubleClick = function() {\n        return true;\n    };\n\n    this.handleSingleTap = function (event) {\n        if (!_singleClickHandled) {\n            _consumeSingleClick = true;\n            _snapper.onMouseDown({x: event.canvasX, y:event.canvasY});\n            this.handleSingleClick(event);\n        }\n        _singleClickHandled = !_singleClickHandled;\n\n        return true;\n    };\n\n    this.handleDoubleTap = function() {\n        return true;\n    };\n\n    this.handleResize = function() {\n        if (_measurement.indicator) {\n            _measurement.indicator.handleResize();\n        }\n    };\n\n    this.onCameraChange = function() {\n        if (_snapper.indicator) {\n            _snapper.indicator.onCameraChange();\n        }\n    };\n\n    this.screenSizeChanged = function(event) {\n        this.onCameraChange();\n    };\n};\n\nav.GlobalManagerMixin.call(CalibrationTool.prototype);","\nconst av = Autodesk.Viewing;\n\nexport var MagnifyingGlass = function(viewer) {\n\n    var _viewer = viewer;\n    var _active = false;\n    var _names = [\"magnifyingGlass\"];\n    var _priority = 70;\n    var _isPressing = false;\n    var _radius = 60;\n    var _zoom = 2;\n    var _offset = 15;\n    var _magnifyingGlassCanvas = null;\n    var _imageData = null;\n    var _imageBuffer = null;\n    var _clientX = null;\n    var _clientY = null;\n    var _needsClear = false;\n    var av = Autodesk.Viewing;\n\n    this.setGlobalManager(viewer.globalManager);\n\n    this.register = function() {\n        this.updateMagnifyingGlassBinded = this.updateMagnifyingGlass.bind(this);\n    };\n\n    this.isActive = function() {\n        return _active;\n    };\n\n    this.activate = function() {\n        _active = true;\n    };\n\n    this.updateMagnifyingGlass = function() {\n        const _window = this.getWindow();\n        const _document = this.getDocument();\n        if (_needsClear) {\n            _magnifyingGlassCanvas && _magnifyingGlassCanvas.classList.remove('visible');\n            _needsClear = false;\n        }\n        else {\n            var pixelRatio = _window.devicePixelRatio;\n            var diameter = 2 * _radius;\n            var normlizedDiameter = diameter * pixelRatio;\n            var x = pixelRatio * (_clientX - (_radius  / _zoom));\n            var y = pixelRatio * (_clientY - (_radius  / _zoom));\n\n            if (!_magnifyingGlassCanvas) {\n                _magnifyingGlassCanvas = _document.createElement(\"canvas\");\n                _magnifyingGlassCanvas.className = 'magnifying-glass';\n                _magnifyingGlassCanvas.width = normlizedDiameter;\n                _magnifyingGlassCanvas.height = normlizedDiameter;\n                _magnifyingGlassCanvas.style.width = diameter + 'px';\n                _magnifyingGlassCanvas.style.height = diameter + 'px';\n\n                // Swap canvas\n                _magnifyingGlassCanvas.getContext(\"2d\").translate(0, normlizedDiameter);\n                _magnifyingGlassCanvas.getContext(\"2d\").scale(1,-1);\n\n                _viewer.container.appendChild(_magnifyingGlassCanvas);\n                _imageData = _magnifyingGlassCanvas.getContext(\"2d\").createImageData(Math.ceil(normlizedDiameter / _zoom), Math.ceil(normlizedDiameter / _zoom));\n                _imageBuffer = new Uint8Array(_imageData.data.buffer);\n            }\n\n            var ctx = _magnifyingGlassCanvas.getContext(\"2d\");\n\n            // Read the pixels from the frame buffer\n            var gl = _viewer.impl.glrenderer().getContext();\n            gl.readPixels(x, _viewer.canvas.height - y - _imageData.height, _imageData.width, _imageData.height, gl.RGBA, gl.UNSIGNED_BYTE, _imageBuffer);\n            // Put the pixel into the magnifying context.\n            ctx.putImageData(_imageData, 0, 0);\n            // Scale the image\n            ctx.drawImage(_magnifyingGlassCanvas, 0, 0, _imageData.width, _imageData.height, 0, 0, normlizedDiameter, normlizedDiameter);\n            this.setGlassPosition(_magnifyingGlassCanvas, _clientX, _clientY, diameter, _offset);\n\n            _magnifyingGlassCanvas.classList.toggle('visible', true);\n        }\n    };\n\n    this.deactivate = function() {\n        this.clearMagnifyingGlass();\n        _active = false;\n    };\n\n    this.getNames = function() {\n\n        return _names;\n    };\n\n    this.getName = function() {\n\n        return _names[0];\n    };\n\n    this.getPriority = function() {\n        return _priority;\n    };\n\n    this.setGlassPosition = function(canvas, x, y, diameter, offset) {\n\n        // check the left border of canvas\n        canvas.style.left = (x - diameter/2) + 'px';\n\n        // check the top border of canvas\n        if (y - diameter - offset > 0) {\n            canvas.style.top  = (y - diameter - offset) + 'px';\n        }\n        else {\n            canvas.style.top = (y + offset) + 'px';\n        }\n    };\n\n    this.requestUpdate = function() {\n        if(!_viewer.hasEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, this.updateMagnifyingGlassBinded)) {\n           _viewer.addEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, this.updateMagnifyingGlassBinded, { once: true });\n        }\n    };\n\n    this.drawMagnifyingGlass = function(clientX, clientY) {\n        _needsClear = false;\n        _clientX = clientX;\n        _clientY = clientY;\n        _viewer.impl.invalidate(false, false, true);\n        this.requestUpdate();\n    };\n\n    this.clearMagnifyingGlass = function () {\n        _needsClear = true;\n        this.requestUpdate();\n    };\n\n    this.handlePressHold = function (event) {\n\n        if (av.isTouchDevice()) {\n            switch( event.type )\n            {\n                case \"press\":\n                    _isPressing = true;\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\n                    break;\n\n                case \"pressup\":\n                    this.clearMagnifyingGlass();\n                    _isPressing = false;\n                    break;\n            }\n        }\n        return false;\n\n    };\n\n    this.handleGesture = function(event) {\n\n        if (_isPressing && av.isTouchDevice()) {\n            switch( event.type )\n            {\n                case \"dragstart\":\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\n                    break;\n\n                case \"dragmove\":\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\n                    break;\n\n                case \"dragend\":\n                    this.clearMagnifyingGlass();\n                    _isPressing = false;\n                    break;\n\n                case \"pinchstart\":\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\n                    break;\n\n                case \"pinchmove\":\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\n                    break;\n\n                case \"pinchend\":\n                    this.clearMagnifyingGlass();\n                    break;\n            }\n        }\n\n        return false;\n    };\n\n    this.handleMouseMove = function (event) {\n        return false;\n    };\n\n    this.handleWheelInput = function (delta) {\n        return false;\n    };\n\n    this.handleButtonUp = function (event, button) {\n        return false;\n    };\n\n};\n\nav.GlobalManagerMixin.call(MagnifyingGlass.prototype);\n","\n    var av = Autodesk.Viewing;\n    var avu = Autodesk.Viewing.UI;\n    var avp = Autodesk.Viewing.Private;\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    // /** @constructor */\n    export function MeasureToolbar(measureExtension)\n    {\n        this.measureExtension = measureExtension;\n        this.measureTool = this.measureExtension.measureTool;\n        this.viewer = this.measureExtension.viewer;\n        this.setGlobalManager(this.viewer.globalManager);\n        this.visible = false;\n        this.buttonsList = [];\n    }\n\n    var proto = MeasureToolbar.prototype;\n    av.GlobalManagerMixin.call(MeasureToolbar.prototype);\n\n    proto.onUnitChange = function(toUnits, selfTriggered) {\n        if (selfTriggered)\n            this.measureTool.setUnits(toUnits);\n        else {\n            this.updateSettingsPanel();\n            avp.logger.track({ category: 'pref_changed', name: 'measure/units', value: toUnits });\n        }\n    };\n\n    proto.onPrecisionChange = function(precision, selfTriggered) {\n        if (selfTriggered)\n        this.measureTool.setPrecision(precision);\n        else {\n            this.updateSettingsPanel();\n            avp.logger.track({ category: 'pref_changed', name: 'measure/precision', value: precision });\n        }\n    };\n\n    proto.init = function() {\n        var self = this;\n\n        const _document = this.getDocument();\n\n        this.onUnitChangeBound = this.onUnitChange.bind(this);\n        this.viewer.addEventListener(MeasureCommon.Events.DISPLAY_UNITS_CHANGED, this.onUnitChangeBound);\n\n        this.onPrecisionChangeBound = this.onPrecisionChange.bind(this);\n        this.viewer.addEventListener(MeasureCommon.Events.PRECISION_CHANGED, this.onPrecisionChangeBound);\n\n        // Add Measure tool toolbar to main toolbar\n        var toolbar = this.viewer.getToolbar();\n        var navigationBar = toolbar.getControl(Autodesk.Viewing.TOOLBAR.NAVTOOLSID);\n        var toolbarOptions = {};\n        toolbarOptions.index = toolbar.indexOf(navigationBar) + 1;\n        this.measureToolbar = new avu.ControlGroup(Autodesk.Viewing.TOOLBAR.MEASURETOOLSID);\n        this.measureToolbar.setGlobalManager(this.globalManager);\n        toolbar.addControl(this.measureToolbar, toolbarOptions);\n\n\n        // Create a button for the measure simple distance.\n        this.measureSimpleDistanceBtn = new avu.Button(\"toolbar-measureTool-simple-distance\");\n        this.measureSimpleDistanceBtn.setGlobalManager(this.globalManager);\n        this.measureSimpleDistanceBtn.setToolTip(\"Distance\");\n        this.measureSimpleDistanceBtn.setIcon(\"adsk-icon-measure-distance-new\");\n        this.measureSimpleDistanceBtn.onClick = function() {\n            var enable = self.measureSimpleDistanceBtn.getState() !== avu.Button.State.ACTIVE;\n            if (enable) {\n                self.measureExtension.activate('distance');\n            } else {\n                self.measureTool.deselectAllMeasurements();\n            }\n        };\n\n        this.measureToolbar.addControl(this.measureSimpleDistanceBtn);\n        this.buttonsList[MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE] = this.measureSimpleDistanceBtn;\n\n\n        // Create a button for the measure Angle.\n        this.measureAngleBtn = new avu.Button(\"toolbar-measureTool-angle\");\n        this.measureAngleBtn.setGlobalManager(this.globalManager);\n        this.measureAngleBtn.setToolTip(\"Angle\");\n        this.measureAngleBtn.setIcon(\"adsk-icon-measure-angle-new\");\n        this.measureAngleBtn.onClick = function () {\n            var enable = self.measureAngleBtn.getState() !== avu.Button.State.ACTIVE;\n            if (enable) {\n                self.measureExtension.activate('angle');\n            } else {\n                self.measureTool.deselectAllMeasurements();\n            }\n        };\n        this.measureToolbar.addControl(this.measureAngleBtn);\n        this.buttonsList[MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE] = this.measureAngleBtn;\n\n        if (this.viewer.model && this.viewer.model.is2d()) {\n            // Create a button for the measure distance.\n            this.measureAreaBtn = new avu.Button(\"toolbar-measureTool-area\");\n            this.measureAreaBtn.setGlobalManager(this.globalManager);\n            this.measureAreaBtn.setToolTip(\"Area\");\n            this.measureAreaBtn.setIcon(\"adsk-icon-measure-area-new\");\n            this.measureAreaBtn.onClick = function() {\n                var enable = self.measureAreaBtn.getState() !== avu.Button.State.ACTIVE;\n                if (enable) {\n                    self.measureExtension.activate('area');\n                } else {\n                    self.measureTool.deselectAllMeasurements();\n                }\n            };\n\n            this.measureToolbar.addControl(this.measureAreaBtn);\n            this.buttonsList[MeasureCommon.MeasurementTypes.MEASUREMENT_AREA] = this.measureAreaBtn;\n        }\n\n        if (this.viewer.model && this.viewer.model.is2d()) {\n            // Create a button for the arc measurement.\n            this.measureArcBtn = new avu.Button(\"toolbar-measureTool-arc\");\n            this.measureArcBtn.setGlobalManager(this.globalManager);\n            this.measureArcBtn.setToolTip(\"Arc\");\n            this.measureArcBtn.setIcon(\"adsk-icon-measure-arc-new\");\n            this.measureArcBtn.onClick = function() {\n                var enable = self.measureArcBtn.getState() !== avu.Button.State.ACTIVE;\n                if (enable) {\n                    self.measureExtension.activate('arc');\n                } else {\n                    self.measureTool.deselectAllMeasurements();\n                }\n            };\n\n            this.measureToolbar.addControl(this.measureArcBtn);\n            this.buttonsList[MeasureCommon.MeasurementTypes.MEASUREMENT_ARC] = this.measureArcBtn;\n        }\n\n        // Create a button for the spot measurement tool only in 3d and when Spot Measurement flag is on\n        if (this.viewer.model && !this.viewer.model.is2d() && av.FeatureFlags.isEnabled(av.PublicFeatureFlags.EnableSpotMeasurement)) {\n            this.measureSpotBtn = new avu.Button(\"toolbar-measureTool-simple-spot\");\n            this.measureSpotBtn.setGlobalManager(this.globalManager);\n            this.measureSpotBtn.setToolTip(\"Spot Coordinate\");\n            this.measureSpotBtn.setIcon(\"adsk-icon-measure-location\");\n            this.measureSpotBtn.onClick = function() {\n                var enable = self.measureSpotBtn.getState() !== avu.Button.State.ACTIVE;\n                if (enable) {\n                    self.measureExtension.activate('spot');\n                } else {\n                    self.measureTool.deselectAllMeasurements();\n                }\n            };\n\n            this.measureToolbar.addControl(this.measureSpotBtn);\n            this.buttonsList[MeasureCommon.MeasurementTypes.MEASUREMENT_SPOT] = this.measureSpotBtn;\n        }\n\n        // Create a button for the Calibration tool.\n        this.calibrationToolBtn = new avu.Button( \"toolbar-calibrationTool\");\n        this.calibrationToolBtn.setGlobalManager(this.globalManager);\n        this.calibrationToolBtn.setToolTip(\"Calibrate\");\n        this.calibrationToolBtn.setIcon(\"adsk-icon-measure-calibration\");\n        this.calibrationToolBtn.onClick = function(e) {\n            var enable = self.calibrationToolBtn.getState() !== avu.Button.State.ACTIVE;\n            if(enable) {\n                self.measureExtension.activate('calibrate');\n            } else  {\n                self.measureExtension.enableCalibrationTool(false);\n            }\n        };\n\n        this.measureToolbar.addControl(this.calibrationToolBtn);\n        this.buttonsList[MeasureCommon.MeasurementTypes.CALIBRATION] = this.calibrationToolBtn;\n\n        var separator = _document.createElement('div');\n        separator.className = 'measure-toolbar-seperator';\n\n        this.measureToolbar.container.appendChild(separator);\n\n\n        // Create a button for the Trash.\n        this.deleteBtn = new avu.Button( \"toolbar-delete\");\n        this.deleteBtn.setGlobalManager(this.globalManager);\n        this.deleteBtn.setToolTip(\"Delete measurement\");\n        this.deleteBtn.setIcon(\"adsk-icon-measure-trash\");\n        this.deleteBtn.onClick = function() {\n            self.measureExtension.deleteCurrentMeasurement();\n        };\n\n        this.measureToolbar.addControl(this.deleteBtn);\n\n        // Create a button for the Settings panel.\n        this.settingsBtn = new avu.Button( \"toolbar-settings\");\n        this.settingsBtn.setGlobalManager(this.globalManager);\n        this.settingsBtn.setToolTip(\"Measure settings\");\n        this.settingsBtn.setIcon(\"adsk-icon-measure-settings\");\n\n        this.settingsControlPanel = _document.createElement('div');\n        this.settingsControlPanel.classList.add('docking-panel');\n        this.settingsControlPanel.classList.add('docking-panel-container-solid-color-b');\n        this.settingsControlPanel.classList.add('measure-settings-popup');\n        this.settingsControlPanel.classList.add('hide');\n\n        this.settingsBtn.onClick = function (event) {\n            if (this.settingsControlPanel.classList.contains('hide')) {\n                this.settingsControlPanel.classList.remove('hide');\n                this.setButtonActive(this.settingsBtn);\n            }\n            else {\n                this.settingsControlPanel.classList.add('hide');\n                this.setButtonInactive(this.settingsBtn);\n            }\n        }.bind(this);\n\n        this.measureToolbar.container.appendChild(this.settingsControlPanel);\n        this.settingsControlPanel.root = this.settingsBtn;\n        this.measureToolbar.addControl(this.settingsBtn);\n\n\n        // Settings Panel\n        this.table = _document.createElement(\"table\");\n        this.table.classList.add(\"adsk-lmv-tftable\");\n        this.table.classList.add(\"calibration-table\");\n\n        this.tbody = _document.createElement(\"tbody\");\n        this.table.appendChild(this.tbody);\n        this.settingsControlPanel.appendChild(this.table);\n\n        this.units = [\n            { name: 'Unknown', units: '', matches: [''] },                                      // localized in OptionDropDown() call below\n            { name: 'Decimal feet', units: 'decimal-ft', matches: ['ft', 'decimal-ft'] },             // localized in OptionDropDown() call below\n            { name: 'Feet and fractional inches', units: 'ft-and-fractional-in', matches: ['ft-and-fractional-in'] },         // localized in OptionDropDown() call below\n            { name: 'Feet and decimal inches', units: 'ft-and-decimal-in', matches: ['ft-and-decimal-in'] }, // localized in OptionDropDown() call below\n            { name: 'Decimal inches', units: 'decimal-in', matches: ['in', 'decimal-in'] },           // localized in OptionDropDown() call below\n            { name: 'Fractional inches', units: 'fractional-in', matches: ['fractional-in'] },  // localized in OptionDropDown() call below\n            { name: 'Meters', units: 'm', matches: ['m'] },                                     // localized in OptionDropDown() call below\n            { name: 'Centimeters', units: 'cm', matches: ['cm'] },                              // localized in OptionDropDown() call below\n            { name: 'Millimeters', units: 'mm', matches: ['mm'] },                              // localized in OptionDropDown() call below\n            { name: 'Meters and centimeters', units: 'm-and-cm', matches: ['m-and-cm'] },        // localized in OptionDropDown() call below\n            { name: 'Points', units: 'pt', matches: ['pt'] }                                    // localized in OptionDropDown() call below\n        ];\n\n        var initialIndex = this.findUnits(),\n            unitNames = [];\n\n        // It is not possible to hide elements in Safari.\n        if (av.isSafari() && this.viewer.model && this.viewer.model.getDisplayUnit()){\n            // We will remove the 'Unknown' unit from the units array.\n            this.units.shift();\n        }\n\n        for (var i = 0; i < this.units.length; ++i) {\n            unitNames.push(this.units[i].name);\n        }\n\n        this.unitList = new avp.OptionDropDown(\"Unit type\", this.tbody, unitNames, initialIndex, null, { paddingLeft: 0, paddingRight: 15 });\n        this.unitList.setGlobalManager(this.globalManager);\n        this.unitList.addEventListener(\"change\", function(e) {\n            var index = self.unitList.selectedIndex;\n            self.onUnitChange(self.units[index].units, true);\n        });\n\n        this.precisionList = new avp.OptionDropDown(\"Precision\", this.tbody, [], -1, null, { paddingLeft: 0, paddingRight: 15 });\n        this.precisionList.setGlobalManager(this.globalManager);\n        this.precisionList.addEventListener(\"change\", function(e) {\n            var index = self.precisionList.selectedIndex;\n            self.onPrecisionChange(index, true);\n        });\n\n        this.isolate = new avp.OptionCheckbox(\"Isolate measurement\", this.tbody, false);\n        this.isolate.setGlobalManager(this.globalManager);\n        this.isolate.addEventListener(\"change\", function(e) {\n            var enable = self.isolate.checked;\n            self.measureTool.setIsolateMeasure(enable);\n            if (enable) {\n                self.measureTool.isolateMeasurement();\n            }\n            else {\n                self.measureTool.clearIsolate();\n            }\n            avp.logger.track({ category: 'pref_changed', name: 'measure/isolate', value: enable });\n        });\n\n        this.freeMeasure = new avp.OptionCheckbox(\"Enable free measure\", this.tbody, this.measureExtension.isFreeMeasureMode());\n        this.freeMeasure.setGlobalManager(this.globalManager);\n        this.freeMeasure.addEventListener(\"change\", function(e) {\n            var enable = self.freeMeasure.checked;\n            self.measureExtension.setFreeMeasureMode(enable);\n            avp.logger.track({ category: 'pref_changed', name: 'measure/freeMeasure', value: enable });\n        });\n\n        this.setupPrecision();\n\n        this.updateSettingsPanel();\n\n        if (this.viewer.model && this.viewer.model.is2d()) {\n            this.isolate.setVisibility(false);\n        }\n\n        // BLMV-6350 - disable only if units are undefined, do not disable if null, since we are going to assign units in Measure.js, `_onModelLoaded`.\n        if (this.measureExtension.sharedMeasureConfig.units === undefined) {\n            this.disableUnitOption();\n        }\n        // Only disable option if the browser is not Safari\n        else if (!Autodesk.Viewing.isSafari()){\n            this.disableUnitOption(0);  // disable \"Unknown\" option when the model has units\n        }\n\n\n        // Create a button for 'Done'.\n        this.measureDoneBtn = new avu.Button(\"toolbar-measureTool-done\");\n        this.measureDoneBtn.setGlobalManager(this.globalManager);\n        var doneText = Autodesk.Viewing.i18n.translate('Done');\n        this.measureDoneBtn.setToolTip(doneText);\n        var cancelLabel = _document.createElement('label');\n        cancelLabel.textContent = doneText;\n        var btnContainer = this.measureDoneBtn.container;\n        btnContainer.appendChild(cancelLabel);\n        btnContainer.classList.add('adsk-label-button');\n        var iconEle = btnContainer.getElementsByClassName('adsk-button-icon');\n        iconEle && iconEle[0] && (iconEle[0].style.display = 'none');\n\n        this.measureDoneBtn.onClick = function() {\n            this.measureExtension.exitMeasurementMode();\n        }.bind(this);\n        this.measureToolbar.addControl(this.measureDoneBtn);\n\n        // this.settingsControlPanel.style.width = this.measureToolbar.container.getBoundingClientRect().width + 'px';\n        this.measureToolbar.setVisible(false);\n\n    };\n\n    proto.addCustomToolButton = function(type, button, index) {\n        this.measureToolbar.addControl(button, { index: index });\n        this.buttonsList[type] = button;\n    };\n\n    proto.removeCustomToolButton = function(type) {\n        var button = this.buttonsList[type];\n        if (button) {\n            this.measureToolbar.removeControl(button);\n            delete this.buttonsList[type];\n        }\n    };\n\n    proto.destroy = function() {\n\n        // If toolbar was open, close it first. Otherwise, we leave ModelTools toolbar in a broken state.\n        if (this.visible) {\n            this.closeToolbar();\n        }\n\n        this.viewer.removeEventListener(MeasureCommon.Events.DISPLAY_UNITS_CHANGED, this.onUnitChangeBound);\n        this.onUnitChangeBound = null;\n        this.viewer.removeEventListener(MeasureCommon.Events.PRECISION_CHANGED, this.onPrecisionChangeBound);\n        this.onPrecisionChangeBound = null;\n\n        if (this.measureToolbar) {\n            this.measureToolbar.removeFromParent();\n            this.measureToolbar = null;\n        }\n    };\n\n    proto.closeToolbar = function() {\n\n        this.measureExtension.enableMeasureTool(false);\n        this.measureExtension.enableCalibrationTool(false);\n        this.toggleVisible();\n\n        var toolbar = this.viewer.getToolbar();\n        var viewerToolbarContainer = toolbar.container;\n        var viewerContainerChildrenCount = viewerToolbarContainer.children.length;\n\n        for(var i = 0; i < viewerContainerChildrenCount; ++i) {\n            viewerToolbarContainer.children[i].style.display = \"\";\n        }\n\n        var modelTools = toolbar.getControl(av.TOOLBAR.MODELTOOLSID);\n        modelTools.addControl(this.measureExtension.measurementToolbarButton, {index: this.measureExtension.measurementToolbarButton.index });\n    };\n\n    proto.toggleVisible = function() {\n        this.visible = !this.visible;\n        this.measureToolbar.setVisible(this.visible);\n        if (!this.visible) {\n            this.settingsControlPanel.classList.add('hide');\n            this.setButtonInactive(this.settingsBtn);\n        }\n    };\n\n    proto.setButtonActive = function(button) {\n        button.setState(avu.Button.State.ACTIVE);\n    };\n\n    proto.setButtonInactive = function(button) {\n        if (button.getState() === avu.Button.State.ACTIVE) {\n            button.setState(avu.Button.State.INACTIVE);\n        }\n    };\n\n    proto.deactivateAllButtons = function() {\n        for (var key in this.buttonsList) {\n            if (Object.prototype.hasOwnProperty.call(this.buttonsList, key)) {\n                var button = this.buttonsList[key];\n                this.setButtonInactive(button);\n            }\n        }\n    };\n\n    proto.activateButtonByType = function(measurementType) {\n        // Check that toolbar button exists - some measurement types don't have UI\n        this.buttonsList[measurementType] && this.setButtonActive(this.buttonsList[measurementType]);\n    };\n\n    proto.setupPrecision = function() {\n        const _document = this.getDocument();\n        while (this.precisionList.dropdownElement.lastChild) {\n            this.precisionList.dropdownElement.removeChild(this.precisionList.dropdownElement.lastChild);\n        }\n\n        var selectedUnits = this.measureTool.getUnits(),\n            precisions;\n\n        if (selectedUnits === 'ft-and-fractional-in' || selectedUnits === 'fractional-in') {\n            precisions = ['1', '1/2', '1/4', '1/8', '1/16', '1/32', '1/64'];\n        } else {\n            precisions = ['0', '0.1', '0.01', '0.001', '0.0001', '0.00001'];\n        }\n\n        for (var i = 0; i < precisions.length; ++i) {\n            var elem = _document.createElement('option');\n            elem.value = i;\n            elem.textContent = precisions[i];\n            this.precisionList.dropdownElement.appendChild(elem);\n        }\n\n        var selectedIndex = this.measureTool.getPrecision();\n        if (precisions.length <= selectedIndex) {\n            selectedIndex = precisions.length - 1;\n            this.measureTool.setPrecision(selectedIndex);\n        }\n        this.precisionList.dropdownElement.selectedIndex = selectedIndex;\n    };\n\n    proto.findUnits = function() {\n        var i,\n            j,\n            selectedUnits = this.measureTool.getUnits();\n        for (i = 0; i < this.units.length; ++i) {\n            var matches = this.units[i].matches;\n            if (matches) {\n                for (j = 0; j < matches.length; ++j) {\n                    if (matches[j] === selectedUnits) {\n                        return i;\n                    }\n                }\n            }\n        }\n        return 0;\n    };\n\n    proto.disableUnitOption = function( index ) {\n        if (index != null) {\n            this.unitList.dropdownElement.children[index].style.display = \"none\";\n        } else {  // disable all options\n            this.unitList.dropdownElement.disabled = true;\n        }\n    };\n\n    proto.updateSettingsPanel = function() {\n        this.unitList.dropdownElement.selectedIndex = this.findUnits();\n        this.precisionList.dropdownElement.selectedIndex = this.measureTool.getPrecision();\n        this.setupPrecision();\n    };\n\n\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[6].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[6].use[2]!../../node_modules/css-unicode-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./Measure.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[6].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[6].use[2]!../../node_modules/css-unicode-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./Measure.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[6].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[6].use[2]!../../node_modules/css-unicode-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./Calibration.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[6].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[6].use[2]!../../node_modules/css-unicode-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./Calibration.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { MeasureTool } from './MeasureTool';\nimport { CalibrationTool } from './CalibrationTool';\nimport { MagnifyingGlass } from './MagnifyingGlass';\nimport { CalibrationRequiredDialog } from './CalibrationPanels';\nimport { MeasureToolbar } from './MeasureToolbar';\n\n\nimport './Measure.css';       // IMPORTANT!!\nimport './Calibration.css';   // IMPORTANT!!\n\n'use strict';\n\nvar avem = AutodeskNamespace('Autodesk.Viewing.Extensions.Measure'),\n    av = Autodesk.Viewing,\n    avp = Autodesk.Viewing.Private,\n    avu = av.UI;\nvar MeasureCommon = Autodesk.Viewing.MeasureCommon; // Comes form main viewer bundle.\n\nvar NONE = 0;\nvar MEASURE_TOOL = 1;\nvar CALIBRATION_TOOL = 2;\n\nvar DEFAULT_MEASUREMENT_TYPE = MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE;\n\n/**\n * Provides UI controls to perform distance and angle measurements for 2D and 3D models.\n *\n * The extension id is: `Autodesk.Measure`\n *\n * @param {Viewer3D} viewer - Viewer instance\n * @param {object} options - Configurations for the extension\n * @example\n * viewer.loadExtension('Autodesk.Measure')\n * @memberof Autodesk.Viewing.Extensions\n * @alias Autodesk.Viewing.Extensions.MeasureExtension\n * @see {@link Autodesk.Viewing.Extension} for common inherited methods.\n * @class\n */\nexport var MeasureExtension = function(viewer, options) {\n    Autodesk.Viewing.Extension.call(this, viewer, options);\n    this.modes = ['distance','angle','area','arc','calibrate', 'spot'];\n    this.name = 'measure';\n    this._onModelLoaded = this._onModelLoaded.bind(this);\n    this._onDisplayUnitsPrefChanged = this._onDisplayUnitsPrefChanged.bind(this);\n    this._onPrecisionPrefChanged = this._onPrecisionPrefChanged.bind(this);\n    this.autosave = true;\n    this.customToolButtons = [];\n};\n\nMeasureExtension.prototype = Object.create(Autodesk.Viewing.Extension.prototype);\nMeasureExtension.prototype.constructor = MeasureExtension;\n\n\n/**\n * Load the measure extension.\n *\n * @returns {boolean} True if measure extension is loaded successfully.\n *\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#load\n */\nMeasureExtension.prototype.load = async function() {\n\n    await this.viewer.loadExtension('Autodesk.Snapping');\n\n    var self   = this;\n    var viewer = this.viewer;\n    this.hasUI = Autodesk.Viewing.GuiViewer3D && viewer instanceof Autodesk.Viewing.GuiViewer3D;\n\n    this.escapeHotkeyId = 'Autodesk.Measure.Hotkeys.Escape';\n\n    // Register the Measure tool\n    if (!viewer.toolController){\n        return false;\n    }\n\n    this.options = this.options || {};\n    var measureToolOptions = {};\n\n    measureToolOptions.onCloseCallback = function() {\n        self.enableMeasureTool(false);\n    };\n\n    // Shared State with measureTool & calibrationTool.\n    // Gets populated when a model is received.\n    // This is wrapped into a proxy to allow change event handling in a central place\n    this.sharedMeasureConfig = new Proxy({\n        units: null,\n        precision: null,\n        calibrationFactor: null,\n        useViewportInfo: false\n    }, {\n        set(target, prop, value, receiver) {\n            target[prop] = value;\n            switch (prop) {\n                case 'units':\n                    viewer.dispatchEvent({ type: MeasureCommon.Events.DISPLAY_UNITS_CHANGED, units: value});\n                    break;\n                case 'precision':\n                    viewer.dispatchEvent({ type: MeasureCommon.Events.PRECISION_CHANGED, precision: value});\n                    break;\n                case 'calibrationFactor':\n                case 'useViewportInfo':\n                    break;\n                default:\n                    console.log('Unknown property', prop, ' added to sharedMeasureConfig');\n            }\n            return true;\n        }\n    });\n\n    measureToolOptions.snapperOptions = this.options.snapperOptions;\n    measureToolOptions.calibrateWithPage = this.options.calibrateWithPage; // True if calibration is done on page and not on viewports (i.e. viewport 0)\n    this.forceCalibrate = this.options.forceCalibrate;\n\n    this.snapper = new Autodesk.Viewing.Extensions.Snapping.Snapper(viewer, {\n        renderSnappedTopology: true\n    });\n    viewer.toolController.registerTool(this.snapper);\n\n    const onToolChangedCb = (enable) => {\n        this.setActive(enable);\n        if (!enable) {\n            this.deactivate();\n        }\n    };\n\n    this.measureTool = new MeasureTool(viewer, measureToolOptions, this.sharedMeasureConfig, this.snapper);\n    viewer.toolController.registerTool(this.measureTool, onToolChangedCb);\n\n    this.calibrationTool = new CalibrationTool(viewer, this.options, this.sharedMeasureConfig, this.snapper);\n    viewer.toolController.registerTool(this.calibrationTool, onToolChangedCb);\n\n    this.magnifyingGlass = new MagnifyingGlass(viewer);\n    viewer.toolController.registerTool(this.magnifyingGlass);\n\n    this.calibration = {};\n    this.onFinishedCalibration = function(event) {\n        if (self.measureToolbar) {\n            self.measureToolbar.updateSettingsPanel();\n        }\n\n        self.activateInitiator && self.activateInitiator();\n\n        // Set the calibration values\n        self.calibration.units = event.units;\n        self.calibration.scaleFactor = event.scaleFactor;\n        self.calibration.size = event.size;\n        self.calibration.precision = self.sharedMeasureConfig.precision;\n    };\n\n    viewer.addEventListener('finished-calibration', this.onFinishedCalibration);\n\n    this.onMeasurementChanged = function(event) {\n        var type = event.data.type;\n        self.changeMeasurementType(type);\n    };\n\n    viewer.addEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChanged);\n\n    if (viewer.model) {\n        this._onModelLoaded({ model: viewer.model });\n    } else {\n        viewer.addEventListener(av.MODEL_ROOT_LOADED_EVENT, this._onModelLoaded, { once: true });\n    }\n\n    // If there is no model anymore, interrupt any ongoing interaction.\n    // We need at least one model to derive things like is2d() and model units.\n    this.onModelRemoved = function() {\n        // If UI was not created yet or destroyed, we don't have to disable anything\n        if (!self.measurementToolbarButton) {\n            return;\n        }\n\n        if (!self.viewer.model) {\n            self.measurementToolbarButton.setState(Autodesk.Viewing.UI.Button.State.DISABLED);\n            self.exitMeasurementMode();\n        }\n    };\n    this.onModelAdded = function() {\n\n        // If UI was not created yet or destroyed, the button will be enabled in next createUI() call\n        if (!self.measurementToolbarButton) {\n            return;\n        }\n\n        // On first model-add, re-enable measure toolbar again\n        var modelCount = self.viewer.getVisibleModels().length;\n        if (modelCount === 1 && self.measurementToolbarButton) {\n            self.measurementToolbarButton.setState(Autodesk.Viewing.UI.Button.State.INACTIVE);\n        }\n    };\n    viewer.addEventListener(av.MODEL_ADDED_EVENT, this.onModelAdded);\n    viewer.addEventListener(av.MODEL_REMOVED_EVENT, this.onModelRemoved);\n\n    this.viewer.prefs.addListeners(avp.Prefs.DISPLAY_UNITS, this._onDisplayUnitsPrefChanged, this._onDisplayUnitsPrefChanged);\n    this.viewer.prefs.addListeners(avp.Prefs.DISPLAY_UNITS_PRECISION, this._onPrecisionPrefChanged, this._onPrecisionPrefChanged);\n\n    this.hasNotEntered = true;\n\n    return true;\n};\n\n/**\n * @param {string} value - unit\n * @private\n */\nMeasureExtension.prototype._onDisplayUnitsPrefChanged = function(value) {\n    if (value !== '') {\n        this.setUnits(value);\n        this.measureToolbar?.updateSettingsPanel();\n        // Also update the units in calibration panel\n        this.calibrationTool.updateCalibrationPanel();\n    }\n};\n\n/**\n * @param {string} value precision\n * @private\n */\nMeasureExtension.prototype._onPrecisionPrefChanged = function (value) {\n   if (typeof value === 'number') {\n       this.setPrecision(value);\n       this.measureToolbar?.updateSettingsPanel();\n   }\n};\n\nMeasureExtension.prototype._onModelLoaded = function(event) {\n    var model = event.model;\n\n    const setPdfUnits = !!model.isPdf(true) && !this.viewer.prefs.get(avp.Prefs2D.FORCE_PDF_CALIBRATION);\n    const setLeafletUnits = !!model.isLeaflet() && !this.viewer.prefs.get(avp.Prefs2D.FORCE_LEAFLET_CALIBRATION);\n\n    // In case of a PDF, look for units and display precision in viewports. PDFs can have multiple viewports, each with a different\n    // unit and precision.\n    // We skip the first one, as it is not defined in the PDF, but added by LmvCanvasContext\n    let viewportUnits;\n    let viewportPrecision = 3; // default precision\n    if ((model.isSmartPdf() || this.viewer.prefs.get(avp.Prefs2D.USE_PDF_VIEWPORT_INFO)) && model.getData().viewports && model.getData().viewports.length > 1) {\n        // skip the first auto-generated viewport (see PDFLoader)\n        const viewport = model.getData().viewports[1];\n\n        // Use the unit of the first viewport as the initial measurement unit.\n        viewportUnits = avp.fixUnitString(viewport.units);\n\n        if (Number.isInteger(viewport.precision) && viewport.precision >= 0)\n            viewportPrecision = viewport.precision;\n\n        this.sharedMeasureConfig.useViewportInfo = true;\n    }\n\n    this.sharedMeasureConfig.units = this.options.calibrationUnits || this.viewer.prefs.get(avp.Prefs.DISPLAY_UNITS) || viewportUnits || model.getDisplayUnit();\n\n    // BLMV-6350 - sometimes, due to race condition, we disable Units Drop down before Measure units has been defined.\n    if (!this.sharedMeasureConfig.units) {\n        this.measureToolbar?.disableUnitOption();\n    }\n\n    // Set the units to points only for pdf and leaflet models that do not contain model units in the metadata.\n    if ((setPdfUnits || setLeafletUnits) && !model.getMetadata('page_dimensions', 'model_units', null) && !viewportUnits) {\n        this.sharedMeasureConfig.units = 'pt';\n    }\n\n    const precisionPreference = this.viewer.prefs.get(avp.Prefs.DISPLAY_UNITS_PRECISION);\n    if (typeof precisionPreference === 'number') {\n        this.sharedMeasureConfig.precision = precisionPreference;\n    } else {\n        this.sharedMeasureConfig.precision = model.is2d() ? viewportPrecision : 1;\n    }\n\n    if (this.options.calibrationUnits && !isNaN(this.options.calibrationFactor)) {\n        this.calibrationTool.calibrateByScale(this.options.calibrationUnits, this.options.calibrationFactor);\n    }\n};\n\n/**\n * Unload the measure extension.\n *\n * @returns {boolean} True if measure extension is unloaded successfully.\n *\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#unload\n */\nMeasureExtension.prototype.unload = function () {\n    var viewer = this.viewer;\n\n    // Remove the ui from the viewer.\n    this.destroyUI();\n    viewer.removeEventListener(MeasureTool.EXPLODE_CHANGE_EVENT, MeasureTool.onExplodedChange);\n    viewer.removeEventListener('finished-calibration', this.onFinishedCalibration);\n    viewer.removeEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChanged);\n    viewer.removeEventListener(av.MODEL_ADDED_EVENT, this.onModelAdded);\n    viewer.removeEventListener(av.MODEL_REMOVED_EVENT, this.onModelRemoved);\n    viewer.removeEventListener(av.MODEL_ROOT_LOADED_EVENT, this._onModelLoaded);\n\n    viewer.toolController.deregisterTool(this.snapper);\n    this.snapper = null;\n\n    viewer.toolController.deregisterTool(this.measureTool);\n    this.measureTool = null;\n\n    viewer.toolController.deregisterTool(this.calibrationTool);\n    this.calibrationTool = null;\n\n    viewer.toolController.deregisterTool(this.magnifyingGlass);\n    this.magnifyingGlass = null;\n\n    this.unloaded = true;\n\n    viewer.prefs.removeListeners(avp.Prefs.DISPLAY_UNITS, this._onDisplayUnitsPrefChanged, this._onDisplayUnitsPrefChanged);\n    viewer.prefs.removeListeners(avp.Prefs.DISPLAY_UNITS_PRECISION, this._onPrecisionPrefChanged, this._onPrecisionPrefChanged);\n\n    return true;\n};\n\n/**\n * Enable/disable the measure tool.\n * It does not update the toolbar UI.\n *\n * @param {boolean} active - True to activate, false to deactivate.\n * @returns {boolean} True if a change in activeness occurred.\n */\nMeasureExtension.prototype.setActive = function(active) {\n    return this.enableMeasureTool(active);\n};\n\n/**\n * Toggles activeness of the measure tool.\n * It does not update the toolbar UI.\n *\n * @returns {boolean} Whether the tool is active.\n */\nMeasureExtension.prototype.toggle = function() {\n    if (this.isActive()) {\n        this.enableMeasureTool(false);\n    } else {\n        this.enableMeasureTool(true);\n    }\n    return this.isActive();\n};\n\n/**\n * Get the current measurement in the measure tool.\n *\n * @param {string} [unitType] - Either: \"decimal-ft\", \"ft\", \"ft-and-decimal-in\", \"decimal-in\", \"fractional-in\", \"m\", \"cm\", \"mm\" or \"m-and-cm\".\n * @param {number} [precision] - precision index (0: 0, 1: 0.1, 2: 0.01, 3: 0.001, 4: 0.0001, 5: 0.00001).\n * When units type is \"ft\", \"in\" or \"fractional-in\", then the precisions are 0: 1, 1: 1/2, 2: 1/4, 3: 1/8, 4: 1/16, 5: 1/32, 6: 1/64.\n * @returns {object|null} Object with properties of the current measurement, or null.\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#getMeasurement\n */\nMeasureExtension.prototype.getMeasurement = function(unitType, precision) {\n    var measurement = null;\n    if (this.measureTool.isActive()) {\n        measurement = this.measureTool.getMeasurement(unitType, precision);\n    }\n    return measurement;\n};\n\n/**\n * Get a list of all the measurements that are currently on the screen.\n *\n * @param {string} [unitType] - Either: \"decimal-ft\", \"ft\", \"ft-and-decimal-in\", \"decimal-in\", \"fractional-in\", \"m\", \"cm\", \"mm\" or \"m-and-cm\".\n * @param {number} [precision] - precision index (0: 0, 1: 0.1, 2: 0.01, 3: 0.001, 4: 0.0001, 5: 0.00001).\n * When units type is \"ft\", \"in\" or \"fractional-in\", then the precisions are 0: 1, 1: 1/2, 2: 1/4, 3: 1/8, 4: 1/16, 5: 1/32, 6: 1/64.\n * @returns {Array.<object>} An array of measurement objects with properties of the measurement.\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#getMeasurementList\n */\n\nMeasureExtension.prototype.getMeasurementList = function(unitType, precision) {\n  var measurementList = [];\n  if(this.measureTool.isActive()) {\n      measurementList = this.measureTool.getMeasurementList(unitType, precision);\n  }\n  return measurementList;\n};\n\n/**\n * Restores existing measurements. The `measurements` object should be generated by either the {@link Autodesk.Viewing.Extensions.MeasureExtension#getMeasurementList|getMeasurementList} or the {@link Autodesk.Viewing.Extensions.MeasureExtension#getMeasurement|getMeasurement} methods.\n *\n * @param {object[] | object} measurements - An array of measurement objects\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#setMeasurements\n */\nMeasureExtension.prototype.setMeasurements = function(measurements) {\n    if (this.measureTool.isActive()) {\n        this.measureTool.setMeasurements(measurements);\n    }\n};\n\n\n/**\n * Get all available units in measure tool.\n *\n * @returns {object[]} Array of all available units.\n */\nMeasureExtension.prototype.getUnitOptions = function() {\n    var units = [\n        { name: 'Unknown', type: '' },\n        { name: 'Decimal feet', type: 'decimal-ft' },\n        { name: 'Feet and fractional inches', type: 'ft' },\n        { name: 'Feet and decimal inches', type: 'ft-and-decimal-in' },\n        { name: 'Decimal inches', type: 'decimal-in' },\n        { name: 'Fractional inches', type: 'fractional-in' },\n        { name: 'Meters', type: 'm' },\n        { name: 'Centimeters', type: 'cm' },\n        { name: 'Millimeters', type: 'mm' },\n        { name: 'Meters and centimeters', type: 'm-and-cm' },\n        { name: 'Points', type: 'pt' }\n    ];\n\n    return units;\n};\n\n/**\n * Get all available precisions in measure tool.\n *\n * @param {boolean} isFractional - Set true to get fractional precisions.\n * @returns {string[]} List of all available precisions.\n */\nMeasureExtension.prototype.getPrecisionOptions = function(isFractional) {\n\n    var precisions;\n\n    if (isFractional)\n        precisions = ['1', '1/2', '1/4', '1/8', '1/16', '1/32', '1/64'];\n    else\n        precisions = ['0', '0.1', '0.01', '0.001', '0.0001', '0.00001'];\n\n    return precisions;\n};\n\n/**\n * Get the default measure unit in measure tool.\n *\n * @returns {string} The default measure unit.\n */\nMeasureExtension.prototype.getDefaultUnit = function() {\n    var unit = this.viewer.model.getDisplayUnit();\n\n    return unit;\n};\n\nMeasureExtension.prototype.openCalibrationRequiredDialog = function (initiator) {\n    if (this.hasUI) {\n        if (!this.CalibrationRequiredDialog) {\n            this.CalibrationRequiredDialog = new CalibrationRequiredDialog(this, this.viewer, \"calibration-required\", \"Calibration Required\", this.options );\n        }\n\n        this.CalibrationRequiredDialog.setVisible(true);\n    }\n    else {\n        this.viewer.dispatchEvent({ type: MeasureCommon.Events.CALIBRATION_REQUIRED_EVENT });\n    }\n\n    if (initiator === 'measure') {\n        this.activateInitiator = function() {\n            this.enableMeasureTool(true, DEFAULT_MEASUREMENT_TYPE);\n            this.activateInitiator = null;\n        };\n    } else if (initiator === 'dimension') {\n        this.activateInitiator = function() {\n            this.viewer.dispatchEvent({ type: MeasureCommon.Events.FINISHED_CALIBRATION_FOR_DIMENSION_EVENT });\n            this.activateInitiator = null;\n        };\n    }\n};\n\n/**\n * Get the calibration size, unit type and the calibration Factor of the model\n *\n * @returns {object}\n */\nMeasureExtension.prototype.getCalibration = function() {\n    return this.calibration;\n};\n\n\n/**\n * @param mode Measurement Mode\n * @returns {boolean}\n */\n\n /**\n  * Activates the tool and UI to start measuring.\n  *\n  * @param {string} [mode] - Either 'distance', 'angle', 'area' (2D only), 'arc' (2D only), 'calibrate' or 'custom'. Default is 'distance'.\n  * @param {string} [type] - Custom measurement type. Required when mode is 'custom'.\n  *\n  * @alias Autodesk.Viewing.Extensions.MeasureExtension#activate\n  */\nMeasureExtension.prototype.activate = function (mode, type = null) {\n    if (this.activeStatus && this.mode === mode) {\n        return true;\n    }\n\n    this.enterMeasurementMode();\n\n    var success;\n\n    switch (mode) {\n        default:\n            mode = 'distance';\n            // falls through\n        case 'distance':\n            success = this.enableMeasureTool(true, MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE);\n            break;\n        case 'angle':\n            success = this.enableMeasureTool(true, MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE);\n            break;\n        case 'area':\n            if(!this.viewer.model.is2d()) {\n                console.warn('Area mode is applicable on 2D models only');\n            } else {\n                success = this.enableMeasureTool(true, MeasureCommon.MeasurementTypes.MEASUREMENT_AREA);\n            }\n            break;\n        case 'arc':\n            if(!this.viewer.model.is2d() || this.viewer.model.isPdf()) {\n                console.warn('Arc mode is applicable on 2D models only');\n            } else {\n                success = this.enableMeasureTool(true, MeasureCommon.MeasurementTypes.MEASUREMENT_ARC);\n            }\n            break;\n        case 'calibrate':\n            success = this.enableCalibrationTool(true);\n            break;\n        case 'custom':\n            success = this.enableMeasureTool(true, type);\n            break;\n        case 'spot':\n            success = this.enableMeasureTool(true, MeasureCommon.MeasurementTypes.MEASUREMENT_SPOT);\n            break;\n    }\n\n    this.mode = success ? mode : '';\n    this.activeStatus = true;\n    return true;\n};\n\n/**\n * Deactivates measuring tool and UI.\n *\n * @returns {boolean}\n *\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#deactivate\n */\nMeasureExtension.prototype.deactivate = function () {\n    if(this.activeStatus) {\n        this.exitMeasurementMode();\n        this.enableMeasureTool(false);\n        this.activeStatus = false;\n    }\n    return true;\n};\n\n/**\n * Force the calibration panel for pdf models\n *\n * @param {boolean} enable - true to force the calibration panel\n */\nMeasureExtension.prototype.setForcePDFCalibrate = function(enable) {\n    this.viewer.prefs.set(avp.Prefs2D.FORCE_PDF_CALIBRATION, enable);\n};\n\n/**\n * Force the calibration panel for leaflet models\n *\n * @param {boolean} enable - true to force the calibration panel\n */\nMeasureExtension.prototype.setForceLeafletCalibrate = function(enable) {\n    this.viewer.prefs.set(avp.Prefs2D.FORCE_LEAFLET_CALIBRATION, enable);\n};\n\n/**\n * Restore session measurements when enabling the measure tool.\n *\n * @param {boolean} enable - true to restore session measurements.\n */\nMeasureExtension.prototype.setRestoreSessionMeasurements = function(enable) {\n    this.viewer.prefs.set(avp.Prefs.RESTORE_SESSION_MEASUREMENTS, enable);\n};\n\n/**\n * Enable/disable the measure tool.\n *\n * @param {boolean} enable - True to enable, false to disable.\n * @param measurementType\n * @returns {boolean} True if the tool state was changed.\n * @private\n */\nMeasureExtension.prototype.enableMeasureTool = function(enable, measurementType) {\n    if (measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && this.viewer.model && !this.viewer.model.is2d()) {\n        return false;\n    }\n\n    // arc measurement is not supported for 3D models\n    if (measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_ARC && this.viewer.model && !this.viewer.model.is2d()) {\n        return false;\n    }\n\n    const snapToArc = (measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_ARC && this.viewer.model?.is2d());\n    this.snapper.setSnapToArc(snapToArc);\n\n    var toolController = this.viewer.toolController,\n        isActive = (this.selectedTool === MEASURE_TOOL);\n\n    if (!this.viewer.model || (!enable && isActive)) {\n        if (this.measureTool.isActive()) {\n            toolController.deactivateTool(\"measure\");\n\n            if (this.measureToolbar) {\n                this.measureToolbar.deactivateAllButtons();\n            }\n\n            // No tool is active anymore. Only do this if measureTool was really the active one before.\n            // If not, changing selectedTool would produce an inconsistent state, e.g., CalibrationTool\n            // may still be active, but enableCalibrationTool(false) would not properly close it.\n            this.selectedTool = NONE;\n        }\n\n        return true;\n    }\n\n    const is2d = this.viewer.impl.is2d;\n    const forcePDFCalibration = is2d && this.viewer.model.isPdf(true) && this.viewer.prefs.get(avp.Prefs2D.FORCE_PDF_CALIBRATION);\n    const forceLeafletCalibration = is2d && this.viewer.model.isLeaflet() && this.viewer.prefs.get(avp.Prefs2D.FORCE_LEAFLET_CALIBRATION);\n\n    this.forceCalibrate |= forceLeafletCalibration || forcePDFCalibration;\n\n    if (!measurementType) {\n        measurementType = DEFAULT_MEASUREMENT_TYPE;\n    }\n\n    if (enable && !isActive) {\n        // Fetch topology when opening Measure tool for the first time.\n        this.checkAndFetchTopology(toolController.getTool('measure'));\n\n        if (!this.forceCalibrate || (this.forceCalibrate && this.calibrationTool.isCalibrated()) || measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE) {\n            if (this.calibrationTool.isActive()) {\n                toolController.deactivateTool(\"calibration\");\n            }\n\n            if (this.measureToolbar) {\n                this.measureToolbar.updateSettingsPanel();\n            }\n\n            toolController.activateTool(\"measure\");\n\n            this.selectedTool = MEASURE_TOOL;\n\n            this.changeMeasurementType(measurementType);\n            return true;\n        }\n        else {\n            this.viewer.addEventListener(avem.OPEN_TOOL_AFTER_CALIBRAION, function(){\n                this.enableMeasureTool(true);\n            }.bind(this), {once: true});\n\n            this.openCalibrationRequiredDialog('measure');\n            return false;\n        }\n\n    } else if (enable && isActive) {\n        // if a measurement of a different type was started beforehand, we need to clear it first\n        if (this.mode !== measurementType && this.measureTool.isActive() && !this.measureTool.isNoPicksSet()) {\n            // for measurements that are being edited instead of created the behavior depends on where the mouse pointer is\n            // if the mouse pointer is over a valid new pick for the measurement this new spot will be picked\n            // if the mouse pointer is not over a valid new pick for the measurement the measurement will be reset to its previous state\n            this.measureTool.clearIncompleteMeasurement();\n        }\n        if (!this.forceCalibrate || (this.forceCalibrate && this.calibrationTool.isCalibrated()) || measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE) {\n            this.changeMeasurementType(measurementType);\n            return true;\n        }\n        else {\n            this.openCalibrationRequiredDialog('measure');\n            return false;\n        }\n    }\n\n    return false;\n};\n\nMeasureExtension.prototype.changeMeasurementType = function(measurementType) {\n    this.measureTool.changeMeasurementType(measurementType);\n    if (this.measureToolbar) {\n        this.measureToolbar.deactivateAllButtons();\n        this.measureToolbar.activateButtonByType(measurementType);\n    }\n\n    switch (measurementType) {\n        case MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE:\n            this.mode = 'distance';\n            break;\n        case MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE:\n            this.mode = 'angle';\n            break;\n        case MeasureCommon.MeasurementTypes.MEASUREMENT_AREA:\n            this.mode = 'area';\n            break;\n        case MeasureCommon.MeasurementTypes.MEASUREMENT_ARC:\n            this.mode = 'arc';\n            break;\n        case MeasureCommon.MeasurementTypes.MEASUREMENT_SPOT:\n            this.mode = 'spot';\n            break;\n        default:\n            this.mode = '';\n    }\n};\n\n/**\n * When enabled, the Viewer will only render model parts that are included in\n * measurements.\n *\n * @param {boolean} enable - true to render only nodes being measured.\n *\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#setIsolateMeasure\n */\nMeasureExtension.prototype.setIsolateMeasure = function(enable) {\n    this.measureTool.setIsolateMeasure(enable);\n    if (enable) {\n        this.measureTool.isolateMeasurement();\n    } else {\n        this.measureTool.clearIsolate();\n    }\n};\n\n/**\n * Enable/disable the measure tool.\n *\n * @param {boolean} enable - True to enable, false to disable.\n * @returns {boolean} True if the tool state was changed.\n * @private\n */\nMeasureExtension.prototype.enableCalibrationTool = function(enable) {\n    var toolController = this.viewer.toolController,\n        isActive = (this.selectedTool == CALIBRATION_TOOL);\n\n    if (enable && !isActive) {\n        if (this.measureTool.isActive()) {\n            toolController.deactivateTool(\"measure\");\n        }\n\n        toolController.activateTool(\"calibration\");\n        this.viewer.dispatchEvent({ type: MeasureCommon.Events.UNITS_CALIBRATION_STARTS_EVENT });\n\n        if (this.measureToolbar) {\n            this.measureToolbar.deactivateAllButtons();\n            this.measureToolbar.activateButtonByType(MeasureCommon.MeasurementTypes.CALIBRATION);\n        }\n\n        this.selectedTool = CALIBRATION_TOOL;\n        return true;\n\n    } else if (!enable && isActive) {\n        if (this.calibrationTool.isActive()) {\n            this.mode = '';\n            toolController.deactivateTool(\"calibration\");\n            if (this.measureToolbar) {\n                this.measureToolbar.deactivateAllButtons();\n            }\n        }\n\n        this.selectedTool = NONE;\n        return true;\n    }\n    return false;\n};\n\n/**\n * @private\n */\nMeasureExtension.prototype.enterMeasurementMode = function() {\n\n    if (this._measurementMode) return;\n    this._measurementMode = true;\n\n    this.viewer.dispatchEvent({type: MeasureCommon.Events.MEASUREMENT_MODE_ENTER});\n\n    if (!this.viewer.getToolbar) {\n        return; // Adds support for Viewer3D instance\n    }\n\n    var toolbar = this.viewer.getToolbar();\n    var viewerToolbarContainer = toolbar.container;\n    var viewerContainerChildrenCount = viewerToolbarContainer.children.length;\n    for(var i = 0; i < viewerContainerChildrenCount; ++i) {\n        viewerToolbarContainer.children[i].style.display = \"none\";\n    }\n\n    this.navigationControls = toolbar.getControl(Autodesk.Viewing.TOOLBAR.NAVTOOLSID);\n    this.navigationControls.setVisible(true);\n    this.navigationControls.container.style.display = '';\n\n    this.measureControls = toolbar.getControl(Autodesk.Viewing.TOOLBAR.MEASURETOOLSID);\n    this.measureControls.setVisible(true);\n    this.measureControls.container.style.display = '';\n\n    var measureButtonId = this.measurementToolbarButton.getId();\n    this.measurementToolbarButton.index = this.measurementToolbarButton.parent.indexOf(measureButtonId);\n    this.measurementToolbarButton.parent.removeControl(measureButtonId);\n\n    this.measureToolbar.toggleVisible();\n\n    if (this.viewer.centerToolBar) {\n        this.viewer.centerToolBar();\n    }\n\n    this.enableMeasureTool(true, DEFAULT_MEASUREMENT_TYPE);\n    if (this.hasNotEntered) {\n        this.viewer.dispatchEvent({type: MeasureCommon.Events.MEASURE_TOOL_ACTIVE});\n        this.hasNotEntered = false;\n    }\n};\n\n/**\n * @private\n */\nMeasureExtension.prototype.exitMeasurementMode = function() {\n    if (!this._measurementMode) return;\n\n    this.viewer.dispatchEvent({type: MeasureCommon.Events.MEASUREMENT_MODE_LEAVE});\n\n    this.measureToolbar && this.measureToolbar.closeToolbar();\n    if (this.CalibrationRequiredDialog && this.CalibrationRequiredDialog.isVisible()) {\n        this.CalibrationRequiredDialog.setVisible(false);\n    }\n    this._measurementMode = false;\n    this.activeStatus = false;\n};\n\n/**\n * Create measure button in toolbar.\n *\n * @param toolbar\n * @private\n */\nMeasureExtension.prototype.onToolbarCreated = function(toolbar)\n{\n    if (this.measureToolbar) {\n        return;\n    }\n\n    var self   = this;\n    var viewer = this.viewer;\n\n    // Add Measure button to toolbar\n    var modelTools = toolbar.getControl(av.TOOLBAR.MODELTOOLSID);\n    this.measurementToolbarButton = new avu.Button('toolbar-measurementSubmenuTool');\n    this.measurementToolbarButton.setToolTip('Measure');\n    this.measurementToolbarButton.setIcon(\"adsk-icon-measure\");\n    modelTools.measurementToolbarButton = this.measurementToolbarButton;\n    modelTools.addControl(this.measurementToolbarButton, {index:0});\n\n    // Set button enabled if and only if there is >=1 visible model. Otherwise, it will remain disabled until next model-add event.\n    var state = this.viewer.model ? Autodesk.Viewing.UI.Button.State.INACTIVE : Autodesk.Viewing.UI.Button.State.DISABLED;\n    this.measurementToolbarButton.setState(state);\n\n    this.measureToolbar = new MeasureToolbar(this);\n    this.measureToolbar.init();\n\n    this.customToolButtons.forEach((button) => {\n        this.measureToolbar.addCustomToolButton(button.measurementType, button.button, button.buttonIndex);\n    });\n    this.customToolButtons = [];\n\n    this.measurementToolbarButton.onClick = this.activate.bind(this);\n\n    // Escape hotkey to exit tool.\n    //\n    var hotkeys = [{\n        keycodes: [\n            Autodesk.Viewing.KeyCode.ESCAPE\n        ],\n        onRelease: function () {\n            if (self._measurementMode) {\n                self.exitMeasurementMode();\n                return true;\n            }\n        }\n    }];\n    viewer.getHotkeyManager().pushHotkeys(this.escapeHotkeyId, hotkeys);\n};\n\n\n/**\n * @param tool\n * @private\n */\nMeasureExtension.prototype.checkAndFetchTopology = function(tool) {\n\n    if (this._checkedTopology) {\n        return;\n    }\n\n    this._checkedTopology = true;\n    if (!this.viewer.model.is3d()) {\n        tool && tool.setNoTopology();\n        return;\n    }\n\n    if (this.viewer.modelHasTopology()){\n        tool && tool.setTopologyAvailable();\n        return;\n    }\n\n    // Fetch topology from backend.\n    tool && tool.setFetchingTopology();\n    this.viewer.model.fetchTopology()\n    .then(function(){\n        tool && tool.setTopologyAvailable();\n    })\n    .catch(function(err){\n        avp.logger.log(err); // No topology\n        tool && tool.setNoTopology();\n    });\n};\n\n/**\n * Destroy measure button in toolbar.\n *\n * @private\n */\nMeasureExtension.prototype.destroyUI = function()\n{\n    var viewer = this.viewer;\n\n    if (this.measureToolbar) {\n         this.measureToolbar.destroy();\n         this.measureToolbar = null;\n    }\n\n    if (this.measurementToolbarButton) {\n        this.measurementToolbarButton.removeFromParent();\n        this.measurementToolbarButton = null;\n    }\n\n    viewer.getHotkeyManager().popHotkeys(this.escapeHotkeyId);\n};\n\nMeasureExtension.prototype.setUnits = function(units) {\n    this.measureTool.setUnits(units);\n};\n\nMeasureExtension.prototype.getUnits = function() {\n    return this.measureTool.getUnits();\n};\n\nMeasureExtension.prototype.setPrecision = function(precision) {\n    this.measureTool.setPrecision(precision);\n};\n\nMeasureExtension.prototype.getPrecision = function() {\n    return this.measureTool.getPrecision();\n};\n\nMeasureExtension.prototype.calibrate = function(requestedUnits, requestedSize) {\n    this.calibrationTool.calibrate(requestedUnits, requestedSize);\n};\n\nMeasureExtension.prototype.calibrateByScale = function(requestedUnits, requestedScale) {\n    this.calibrationTool.calibrateByScale(requestedUnits, requestedScale);\n};\n\nMeasureExtension.prototype.isCalibrationValid = function(requestedUnits, requestedSize) {\n    return this.calibrationTool.isCalibrationValid(requestedUnits, requestedSize);\n};\n\nMeasureExtension.prototype.getCalibrationFactor = function() {\n    return this.calibrationTool.getCalibrationFactor();\n};\n\nMeasureExtension.prototype.showAddCalibrationLabel = function() {\n    this.calibrationTool.showAddCalibrationLabel();\n};\n\n/**\n * Delete all measurements.\n *\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#deleteAllMeasurements\n */\nMeasureExtension.prototype.deleteMeasurements = function() {\n    this.measureTool.deleteMeasurements();\n};\n\n/**\n * Deletes the selected measurement.\n *\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#deleteCurrentMeasurement\n */\nMeasureExtension.prototype.deleteCurrentMeasurement = function() {\n    this.measureTool.deleteCurrentMeasurement();\n};\n\nMeasureExtension.prototype.selectMeasurementById = function(id) {\n    this.measureTool.selectMeasurementById(id);\n};\n\n/**\n * Enable measuring on non snapped locations.\n *\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#setFreeMeasureMode\n * @param {boolean} allow - true to allow measuring on non snapped locations, otherwise false;\n * @param {boolean} useLastViewport - override the free measurement's viewport with a previously created measurement's viewport.\n */\nMeasureExtension.prototype.setFreeMeasureMode = function(allow, useLastViewport) {\n    this.snapper.setSnapToPixel(allow);\n    this.measureTool.setUseLastViewport(!!useLastViewport);\n};\n\n/**\n * Checks whether measuring can be performed from non snapped locations.\n *\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#isFreeMeasureMode\n *\n * @returns {boolean} true is users can measure from any location.\n */\nMeasureExtension.prototype.isFreeMeasureMode = function() {\n    return this.snapper.getSnapToPixel();\n};\n\nMeasureExtension.prototype.getState = function(viewerState) {\n    if (this.measureTool.isActive()) {\n        viewerState['measurements'] = this.getMeasurementList();\n    }\n};\n\nMeasureExtension.prototype.restoreState = function(viewerState) {\n    if (!this.measureTool.isActive() && viewerState['measurements']) {\n        this.measureTool.setSessionMeasurements(viewerState['measurements']);\n    }\n};\n\n/**\n * Register a custom measurement tool.\n * Be aware that the measure tool is unloaded and reloaded when the viewer UI is created, so you need to make sure\n * to re-register the custom tool afterwords again. The Autodesk.Viewing.EXTENSION_LOADED_EVENT can be used to detect when the measure\n * extension is reloaded.\n * @param {number} measurementType - the type of the measurement (should not conflict with the built-in types)\n * @param {CustomMeasureTool} customMeasureTool - An object implementing the CustomMeasureTool interface\n * @param {Autodesk.Viewing.UI.Button} button - A button that will be added to the measurement toolbar to activate the custom tool\n * @param {number} buttonIndex - The index at which the button should be added in the toolbar\n * @private\n */\nMeasureExtension.prototype.registerCustomTool = function(measurementType, customMeasureTool, button, buttonIndex) {\n    this.measureTool.registerCustomTool(measurementType, customMeasureTool);\n    if (this.measureToolbar) {\n        this.measureToolbar.addCustomToolButton(measurementType, button, buttonIndex);\n    } else {\n        this.customToolButtons.push({measurementType, button, buttonIndex});\n    }\n};\n\n/**\n * Deregister a custom measurement tool.\n * @param {number} measurementType - The type of the custom measurement tool to deregister\n * @private\n */\nMeasureExtension.prototype.deregisterCustomTool = function(measurementType) {\n    if (this.measureTool.getCurrentMeasureType() === measurementType) {\n        this.changeMeasurementType(DEFAULT_MEASUREMENT_TYPE);\n    }\n    this.measureTool.deregisterCustomTool(measurementType);\n    if (this.measureToolbar) {\n        this.measureToolbar.removeCustomToolButton(measurementType);\n    } else {\n        this.customToolButtons.filter(button => button.measurementType !== measurementType);\n    }\n};\n\nav.theExtensionManager.registerExtension('Autodesk.Measure', MeasureExtension);\n\n\n"],"names":["module","exports","___CSS_LOADER_EXPORT___","push","id","cssWithMappingToString","list","toString","this","map","item","content","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","stylesInDOM","getIndexByIdentifier","identifier","result","modulesToDom","options","idCountMap","identifiers","base","count","indexByIdentifier","obj","css","sourceMap","references","updater","addElementStyle","byIndex","splice","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","memo","insert","style","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","appendChild","element","createElement","setAttributes","attributes","styleElement","nonce","setAttribute","insertStyleElement","styleTagTransform","apply","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","nc","MeasureCommon","Autodesk","Viewing","MeasurementsManager","constructor","viewer","currentMeasurement","measurementsList","measurementsCounter","restoredMeasurementData","getCurrentMeasurement","getRestoredMeasurementData","slice","selectMeasurementById","measurement","changeCurrentMeasurement","createMeasurement","measurementType","Measurement","addMeasurement","createMeasurementFromData","measurementData","createIndicatorCb","preparePicksCb","arguments","parse","model","modelId","impl","findModel","globalOffset","getData","x","y","z","cvtPts","points","THREE","Vector3","sub","dimensionOffset","dashedLeader","arc","Function","initPicks","picks","MeasurementTypes","MEASUREMENT_AREA","closedArea","MEASUREMENT_CALLOUT","text","indicator","changeAllEndpointsEditableStyle","enableSelectionAreas","enableLabelsTouchEvents","activatePicks","computeResult","renderFromPoints","preparePointData","keys","pointData","intersection","circularArcRadius","circularArcCenter","isRestored","pickData","pick","pickPoint","modelData","clone","viewportId","viewportIndex2d","hasTopology","fragId","fragPos","snapNode","getPick","pointInfo","p","getGeometry","geomType","SnapType","SNAP_VERTEX","geomVertex","intersectPoint","dispatchEvent","type","Events","MEASUREMENT_CHANGED_EVENT","removeCurrentMeasurement","destroy","reset","av","Indicator","tool","setGlobalManager","globalManager","snapper","getSnapper","materialExtensionLine","materialExtensionFace","extensionLines","extensionFaces","grayOutPlane","materialPoint","materialLine","materialAngle","materialAngleOutline","materialGreyOutPlane","materialFace","angleArc","angleOutline","arcOutline","arcTip","showMeasureResult","visibleLabels","overlayName","xAxis","autocam","getWorldRightVector","yAxis","getWorldUpVector","zAxis","getWorldFrontVector","proto","getPolygonVisualCenter","polygon","Cell","h","inside","minDistSq","Infinity","ring","len","j","b","Math","min","getSegDistSq","sqrt","pointToPolygonDist","max","SQRT2","px","py","dx","dy","t","TinyQueue","compare","_down","_up","pop","top","peek","pos","parent","current","halfLength","left","right","best","centroid","add","multiplyScalar","getCentroidOfPolygon","minX","minY","maxX","maxY","width","height","cellSize","cellQueue","bestCell","area","f","getCentroidCell","bboxCell","cell","GlobalManagerMixin","init","updateDistance","updateAngle","clear","updateLabelsPosition","endpoints","createEndpoint","position","showClick","renderRubberbandFromPoints","render","hasPick","renderPick","renderRubberband","changeEndpointOnEditStyle","endpointNumber","isEditing","handleResize","setNoTopology","setFetchingTopology","setTopologyAvailable","clientToCanvasCoords","event","rect","getCanvasBoundingClientRect","res","canvasX","center","canvasY","pointers","clientX","clientY","initLabelMobileGestures","label","pointNumber","magnifyingGlass","toolController","getTool","hammer","Hammer","Manager","recognizers","GestureRecognizers","drag","singletap","handlePointerEventMouse","inputClass","TouchInput","onSingleTapBinded","onMouseDown","editEndpoint","bind","onDragStartBinded","editByDrag","handlePressHold","handleGesture","onDragMoveBinded","onDragEndBinded","handleButtonUp","on","clearLabelMobileGestures","off","updateVisibleLabelsArray","isVisible","indexOf","hideEndpoints","name","endpoint","hideLabel","showEndpoints","showLabel","safeToggle","changeEndpointEditableStyle","isEditable","changeAllEndpointsOnEditStyle","hideLabelsOutsideOfView","is2d","forEach","point","show","navigation","isPointVisible","classList","contains","toggle","pickNumber","getActivePointIndex","hideClick","renderEndpointGeometry","geometry","getSnapResultPosition","drawEdgeAsCylinder","geom","material","linewidth","cylinderGeometry","cylinder","edge","getAttribute","v0","v1","fromBufferAttribute","cylinderMesh","setCylinderScale","drawDashedLine","p1","p2","dashSize","gapSize","BufferGeometry","line","subVectors","lineLength","lineDirection","normalize","currLength","addVectors","setFromPoints","getNewCylinderGeometry","addMultipleOverlays","drawLineAsCylinder","p0","addOverlay","CylinderGeometry","pointX","pointY","direction","orientation","Matrix4","lookAt","Object3D","up","multiply","set","Mesh","applyMatrix4","lmv_line_width","scale","nearestPointInPointToSegment","getPosition","setScale","navapi","camera","getCamera","distance","isPerspective","getEyeVector","fov","getVerticalFov","tan","degToRad","getScreenViewport","alignLabelWithLine","offset","camUpVector","getCameraUpVector","cameraAngle","angleTo","PI","angle","deltaX","deltaY","atan2","abs","transform","isTouchDevice","endPoint","removeEventListener","isSafari","onMouseClickBinded","mousewheel","intersectionPoints","MEASUREMENT_DISTANCE","start","end","renderDistanceMeasurementFromPoints","MEASUREMENT_ANGLE","renderAngleMeasurementFromPoints","renderAreaMeasurementFromPoints","MEASUREMENT_ARC","radius","renderArcMeasurementFromPoints","MEASUREMENT_SPOT","renderSpotMeasurementFromPoints","renderCalloutMeasurementFromPoints","previewsPick","activePick","renderDistanceMeasurement","renderAngleMeasurement","renderAreaMeasurement","renderArcMeasurement","renderSpotMeasurement","renderCalloutMeasurement","initMouseEvent","pointerType","addEventListener","DEFAULT_LINE_COLOR","X_AXIS_COLOR","Y_AXIS_COLOR","Z_AXIS_COLOR","tmpColor","Color","numToColor","num","getHexString","MeasureToolIndicator","measureTool","lines","xyz","axis","_createLineMaterial","className","iconText","applyLineColor","segments","dashedLines","simple","angleLabel","areaLabel","arcLabel","spotLabel","calloutLabel","labels","isLeaflet","topologyStatus","TOPOLOGY_NOT_AVAILABLE","tmpVector","surfaceColor","MeshBasicMaterial","color","parseInt","opacity","transparent","depthTest","depthWrite","side","DoubleSide","topLabel","allowShortDistances","segmentWidth","create","isLeftIntersect","other","isRightIntersect","isMiddleIntersect","moveRight","currentLabel","currentRect","otherRect","moveDown","bottom","setValueMeasurementLabelText","strValue","div","textContent","escapeHtml","str","replace","createSpan","format","space","fontSize","bold","setDeltaMeasurementLabelText","setVisibilityMeasurementLabelSpinner","display","currLabel","onSelectionAreaClickedBinded","onSelectionAreaClicked","onMeasurementHoveredBinded","onMeasurementHovered","createMeasurementLabel","_addEventListener","container","onCameraChangeBinded","onCameraChange","CAMERA_CHANGE_EVENT","handleButtonUpBinded","addWindowEventListener","_removeEventListener","_hexToCorrectedColor","correctedColor","getHex","createSnapResultLabel","lineColor","TEXTCOLOR","Enabled","FILLCOLOR","LINECOLOR","UIntValue","applyLabelColors","hasColor","bg","backgroundColor","xy","placeLabel","xOff","yOff","project","getBoundingClientRect","visible","floor","clientHeight","clientWidth","p1Projected","p2Projected","distanceTo","invalidate","xyzDirection","itemDirection","cross","dot","point1Relative","point2Relative","midPointProjected","midPointRelative","centerProjected","needToStackLabels","labelsStacked","backupPositions","labelsOverlapDetection","stackLabels","staticLabel","labelsList","dynamicLabel","moved","staticRect","dynamicRect","causeStacking","drawXYZLine","self","drawLineSegment","tmpPoints","d1","d2","normal","l1","l2","drawTip","tips","redrawDashedLine","dashedLine","removeMultipleOverlays","p1Scale","redrawDashedLines","isDashedLine","drawSurface","cset","Extensions","CompGeom","ContourSet","addContour","triangulate","triangulationFailed","bufferGeometry","toPolygonMesh","face","drawSegmentAndPush","pickPositions","firstPoint","parseFloat","position1","position2","isEqualVectors","EPSILON","showAreaLabel","updateArea","countPicks","clearAngleMeshes","removeOverlay","drawAngle","ep1","ep2","midPoint","_radius","smallNum","MeshPhongMaterial","createCommonOverlay","circleGeometry","CircleBufferGeometry","arcGeomPosition","untypedPositions","Array","from","array","untypedCenter","itemSize","Float32Array","needsUpdate","V","updateMatrixWorld","vA","vB","matrixWorld","v2","v3","v4","ra","a13","a14","a23","a24","rotWorldMatrix","makeRotationAxis","matrix","rotation","setFromRotationMatrix","outlineGeometry","outlineGeomPosition","round","dir","createArcLabel","clearArcMeshes","drawCircularArc","point1","point2","drawTips","edgeGeomtry","nearPoint","startAngle","endAngle","arcAngle","circleGeomPosition","drawArcTip","midAngle","cos","sin","showArcLabel","arcRadius","o0","o1","crossVectors","showAngleLabel","updateArcLength","renderSpot","spotMesh","SphereGeometry","showSpotLabel","updateSpot","showCalloutLabel","updateCallout","createDistanceLabel","setVisibilityMeasurementLabelText","_document","getDocument","axisIcon","innerText","insertBefore","isMobileDevice","updateLine","x1","y1","z1","x2","y2","z2","showAxis","axisLineWidth","tmpVec","getAlignedUpVector","isParallel","displayAxis","updateResults","setTimeout","setWidth","getWidth","getDistanceX","getDistanceY","getDistanceZ","getDistanceXYZ","is3d","maxWidth","getAngle","getSpot","split","replaceAll","calloutValue","isArray","innerHTML","setValueMeasurementLabelCallout","getCallout","getArea","getArc","setSimple","setLineVisible","enable","pointerEvents","setLabelsZIndex","zIndex","focusLabels","unfocusLabels","tip","clearSelectionAreas","clearOverlay","selectionArea","clearSpotMesh","overlayScenes","removeOverlayScene","removeWindowEventListener","clearXYZLine","updateScale","segment","isComplete","scaleXZ","scaleY","spinner","delta","label_icon","hitArea","whiteSpace","textAlign","hoverMeasurementById","SELECT_MEASUREMENT","createSelectionArea","updateSelectionArea","v","Vector2","_selectorAreaSize","transformOrigin","areAllPicksSet","getElementById","SNAP_MIDPOINT","SNAP_CIRCLE_CENTER","SNAP_EDGE","SNAP_FACE","SNAP_CIRCULARARC","SNAP_CURVEDEDGE","SNAP_CURVEDFACE","RASTER_PIXEL","SNAP_INTERSECTION","SnapResult","geomEdge","geomFace","faceNormal","fromTopology","isPerpendicular","snapPoint","copyTo","destiny","theClone","isEmpty","tmpMatrix","tmpVec1","tmpVec2","transformRadius","normalMatrix","getNormalMatrix","getFace","getEdge","getVertex","setGeometry","CALIBRATION","_typeof","iterator","toPropertyKey","toPrimitive","TypeError","String","Number","_defineProperty","configurable","writable","_objectSpread","source","ownKeys","getOwnPropertySymbols","filter","sym","getOwnPropertyDescriptor","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","_assertThisInitialized","ReferenceError","_possibleConstructorReturn","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","_inherits","subClass","superClass","consoleLogger","log","args","output","warn","error","console","Logger","concreteLogger","prefix","logger","debug","bool","_len","_key","forward","_len2","_key2","_len3","_key3","_len4","_key4","lvl","debugOnly","moduleName","baseLogger","EventEmitter","observers","events","listener","_this","l","observer","defer","rej","promise","Promise","resolve","reject","makeString","object","getLastOfPath","path","Empty","cleanKey","canNotTraverseDeeper","stack","shift","setPath","newValue","_getLastOfPath","getPath","_getLastOfPath3","getPathWithDefaults","defaultData","deepExtend","overwrite","regexEscape","_entityMap","s","isIE10","navigator","userAgent","deepFind","keySeparator","paths","mix","joinedPath","ResourceStore","_EventEmitter","ns","defaultNS","ignoreJSONStructure","lng","silent","addNamespaces","emit","resources","m","addResource","deep","pack","hasResourceBundle","removeNamespaces","getResource","compatibilityAPI","postProcessor","processors","addPostProcessor","handle","translator","processor","process","checkedLoadedFor","Translator","services","language","interpolation","resolved","nsSeparator","namespaces","match","interpolator","nestingRegexp","parts","lastKey","_this2","overloadTranslationOptionHandler","_this$extractFromKey","extractFromKey","namespace","appendNamespaceToCIMode","toLowerCase","resUsedKey","usedKey","resExactUsedKey","exactUsedKey","resType","joinArrays","handleAsObjectInI18nFormat","i18nFormat","handleAsObject","returnObjects","returnedObjectHandler","resTypeIsArray","copy","newKeyToUse","deepKey","translate","extendTranslation","usedDefault","needsPluralHandling","hasDefaultValue","defaultValueSuffix","pluralResolver","getSuffix","defaultValue","isValidLookup","resForMissing","missingKeyNoValueFallbackToKey","updateMissing","fk","lngs","fallbackLngs","languageUtils","getFallbackCodes","fallbackLng","saveMissingTo","toResolveHierarchy","send","fallbackValue","missingKeyHandler","backendConnector","saveMissing","saveMissingPlurals","getSuffixes","suffix","appendNamespaceToMissingKey","parseMissingKeyHandler","_this3","usedLng","usedNS","skipInterpolation","nestBef","skipOnVariables","nb","defaultVariables","interpolate","na","nest","context","postProcess","postProcessorNames","applyPostProcessor","postProcessPassResolved","i18nResolved","found","_this4","extracted","fallbackNS","needsContextHandling","codes","utils","hasLoadedNamespace","code","pluralSuffix","possibleKey","finalKey","finalKeys","addLookupKeys","contextSeparator","returnNull","returnEmptyString","resourceStore","option","substring","capitalize","string","charAt","toUpperCase","LanguageUtil","whitelist","supportedLngs","formatLanguageCode","specialCases","lowerCaseLng","part","cleanCode","deprecate","isSupportedCode","load","nonExplicitSupportedLngs","getLanguagePartFromCode","cleanedLng","lngOnly","find","supportedLng","fallbacks","getScriptPartFromCode","fallbackCode","fallbackCodes","addCode","c","fc","sets","nr","_rulesPluralsTypes","PluralResolver","rules","numbers","plurals","rule","getRule","number","idx","noAbs","simplifyPluralSuffix","returnSuffix","prepend","compatibilityJSON","Interpolator","escapeValue","iOpts","escape","useRawValueToEscape","prefixEscaped","suffixEscaped","formatSeparator","unescapePrefix","unescapeSuffix","nestingPrefix","nestingPrefixEscaped","nestingSuffix","nestingSuffixEscaped","nestingOptionsSeparator","maxReplaces","alwaysFormat","resetRegExp","regexpStr","regexp","RegExp","regexpUnescapeStr","regexpUnescape","nestingRegexpStr","replaces","regexSafe","val","handleFormat","interpolationkey","trim","missingInterpolationHandler","regex","safeValue","todo","exec","temp","lastIndex","clonedOptions","handleHasOptions","inheritedOptions","sep","optionsString","formatters","doReduce","test","elem","reduce","Connector","backend","store","state","queue","languages","callback","toLoad","pending","toLoadLanguages","toLoadNamespaces","hasAllNamespaces","reload","loaded","errors","err","addResourceBundle","q","_getLastOfPath2","arr","what","done","fcName","tried","wait","read","queueLoad","loadOne","prepareLoading","_this5","isUpdate","transformOptions","nonExplicitWhitelist","noop","I18n","external","isInitialized","isClone","initImmediate","createClassOnDemand","ClassOrObject","preload","pluralSeparator","partialBundledLanguages","ret","tDescription","_format","lu","languageDetector","detection","_this2$store","_this2$store2","deferred","finish","initializedStoreOnce","changeLanguage","usedCallback","append","isLanguageChangingTo","setLng","getBestMatchFromCodes","cacheUserLanguage","loadResources","async","detect","keyPrefix","fixedT","opts","rest","resultKey","_this$translator","_this$translator2","exists","_this6","lastLng","loadNotPending","loadState","precheck","preResult","_this7","preloaded","newLngs","_this8","mergedOptions","DisplayUnits","matches","Precision","displayUnitsEnum","unitDef","traslated","i18n","Set","ModelUnits","METER","CENTIMETER","MILLIMETER","FOOT","INCH","POINT","eps","endPoints","vertices","verticesLength","duplicate","pt1","pt2","equals","getEndPointsInEdge","lineStart","lineEnd","param","X0","X1","nearestPointInPointToLine","nearestPointInPointToPlane","vertex","nearestPoint","minDist","MAX_VALUE","pt","dist","nearestVertexInVertexToEdge","convertCoordinates","firstPick","isPdf","pageToModel","getUnits","_viewer$model","units","vpId","viewports","_viewports$vpId","getDpiPrecision","viewportIndex","page_width","getMetadata","logical_width","page_height","logical_height","invdpix","invdpiy","calculateAngle","isContainsEqualVectors","angleVectorToVector","calculateArcLength","secondPick","dPrecision","arcCenter","centerPoint","arcLength","lengthProduct","acos","getArcLength","applyDPrecision","processDPrecision","nd","pow","measurementDistance","distanceXYZ","distanceX","distanceY","distanceZ","calculateDistance","angleOuter","_viewer$model2","sum1","sum2","_viewports$vpId2","isInteger","calculateArea","spot","modelSpot","precision","norm","sb","resetMeasureValues","_this$spot","clonePicks","assign","setPick","getMaxNumberOfPicks","complete","empty","clearPick","clearAllPicks","hasEqualPicks","isNaN","attachIndicator","indicatorClass","avp","Private","MeasureTool","sharedMeasureConfig","_viewer","_names","_sharedMeasureConfig","_active","_isDragging","_endpointMoved","_activePoint","_consumeSingleClick","_singleClickHandled","_downX","_downY","_isolateMeasure","_measurementsManager","_currentMeasurement","_onIndicatorCreatedCB","_fetchingMeasurements","_prevMeasurement","_useLastViewport","_snapper","_isPressing","_picksBackup","_cursorPosition","_preMeasureState","_measurementType","_firstMeasurementTypeChange","_sessionMeasurements","_exploded","_customTools","getPickData","picksData","setMeasurePicksViewport","forceOverride","getMeasurementType","types","enableMeasurementsTouchEvents","changeFetchingState","stateSetter","registerCustomTool","customMeasureTool","deregisterCustomTool","getActivePick","getPreviousPick","hasPreviousPick","noPicksSet","allPicksSet","MEASUREMENT_COMPLETED_EVENT","isNoPicksSet","setSessionMeasurements","measurementList","getSessionMeasurements","register","deregister","deactivate","isActive","getNames","getName","getPriority","getCursor","getCurrentMeasurementRaw","setActivePointIndex","getMeasurementsManager","shouldConsumeSingleClick","setConsumeSingleClick","bo","isSingleClickHandled","setSingleClickHandled","isPressing","setIsPressing","startNewMeasurement","customTool","getIndicatorClass","changeMeasurementType","clearMeasurementPreview","analytics","track","action","getMeasurementName","MeasurementTypesToAnalytics","getCurrentMeasureType","activate","isEditingEndpoint","pauseHighlight","clearSelection","getState","objectSet","activateTool","onMeasurementChangedBinded","onMeasurementChanged","onExplodedChange","SHOW_ALL_EVENT","onShowAllEvent","prefs","Prefs","RESTORE_SESSION_MEASUREMENTS","sessionMeasurements","localToWorld","fragmentList","getFragmentList","getWorldMatrix","fragDiff","setMeasurements","isolateMeasurement","SET_MOUSE_TRACKING","mode","clearIncompleteMeasurement","getMeasurementList","clearIsolate","clearCurrentMeasurement","deactivateTool","undoEditEndpoint","setUnits","getPrecision","setPrecision","_measurement$result","getDistanceAux","_measurement$result2","_measurement$result3","_measurement$result4","viewportUnits","getUnitString","useViewportInfo","calibrationFactor","convertUnits","formatValueWithUnits","fromCharCode","arcConverted","_measurement$result5","snapToFirstPick","currentPick","forceSnap","firstPickPoint","firstPickPosition","currentPickPoint","currentPickPosition","onMouseMove","showResult","isCalibrationSetOnPage","hasResult","setUseLastViewport","getUseLastViewport","measureData","getMeasureType","customMeasurement","customIndicator","attachIndicatorCb","initPicksCb","deselectAllMeasurements","getMeasurement","unitType","geomTypes","to","deltaZ","location","getMeasurementPoints","saveSessionMeasurement","_currentMeasurement$i","_currentMeasurement$i2","updateViewportId","setIsolateMeasure","getIsolateMeasure","defaultModelId","isolationGroups","isolationSet","modelInstance","ids","visibilityManager","aggregateIsolate","restoreState","_currentMeasurement3","measurementId","_measurementId","updateMeasurementPreview","clearOverlays","snapResult","getSnapResult","isValid","_handleMouseEvent","canCloseArea","deleteMeasurements","measurements","deleteCurrentMeasurement","_deletedMeasurement","DELETE_MEASUREMENT","deleteCurrentPick","setViewportId","_this$getPreviousPick","_viewer$model$getData","viewport","_viewports$viewport","correctPickPosition","active","passive","correctPerpendicularPicks","nextPick","measurementPreview","_this$measurementPrev","valid","isSnapped","_currentMeasurement4","copyResults","newpick","hitTestViewport","clientToViewport","_newpick$geomFace","_newpick$geomFace2","fragList","canDrawRubberBand","renderer","idAtPixel","modelQueue","inverseProject","lastPick","_doConsumeSingleClick","renderSucceeded","_this$getActivePick","measurementComplete","snapping","handleButtonDown","button","ctrlKey","metaKey","shiftKey","altKey","handleMouseMove","_currentMeasurement2","setArc","isArc","checkSnapperIndicatorForArc","restoreMouseListeners","controller","enableMouseButtons","handleSingleClick","clearSnapped","handleDoubleClick","handleSingleTap","handleDoubleTap","handleKeyDown","keyCode","KeyCode","BACKSPACE","DELETE","calibrateWithPage","CalibrationToolIndicator","calibrationTool","calibrationLabel","rubberbandDefaultMaterial","rubberbandSnappedMaterial","rubberbandTipMaterial","clearRubberband","updateLabelValue","childNodes","changeLabelClickableMode","clickable","showAddCalibrationLabel","onClick","showPanel","renderCalibrationLabel","mid","labelPosition","drawMeasurementLineTip","flip","tipMaterial","lineNormal","lineMaterial","ave","avu","UI","DockingPanel","ViewerPanelMixin","_gDocument","getGlobal","CalibrationPanel","title","addFooter","parentContainer","resize","closer","cancel","heightAdjustment","marginTop","createScrollContainer","calibrationMenu","scrollContainer","table","tbody","row","insertRow","requestedSizeTextbox","autofocus","updateLabel","ESCAPE","ENTER","unitList","selectedIndex","requestedUnits","calibrate","requestedSize","cursorIndex","selectionStart","isSimple","simpleInput","isPositiveNumber","isSimpleDecimal","calculatePrecision","getMaxPrecision","preventDefault","caption","insertCell","unitNames","OptionDropDown","paddingLeft","paddingRight","buttonsWrapper","setCalibration","uninitialize","setVisible","clearSize","findUnits","selectedUnits","getCurrentUnits","setPanelValue","size","updateUnits","setSelectedIndex","parsedNumber","UnitParser","parsePositiveNumber","updatePanelPosition","labelOffset","cornerX","cornerY","rubberbandDirection","canvas","CalibrationRequiredDialog","measureExt","dialogBox","calibrateNow","calibrateNowButton","enableCalibrationTool","CalibrationTool","_measurement","_options","_maxPrecision","maxPrecision","_isCalibrated","_distance","_calibrationTaken","_selectedSize","_selectedUnits","_selectedP1","_selectedP2","_waitingForInput","_calibrationPanel","_hasUI","GuiViewer3D","addPanel","screenSizeChangedBinded","screenSizeChanged","removePanel","parsedRequestedSize","message","messageKey","messageDefaultValue","HudMessage","displayMessage","VIEWER_RESIZE_EVENT","dismiss","hidePanel","setCalibrationFactor","getCalibrationFactor","isCalibrationValid","currentSize","defualtPrecision","requestedPrecision","getExtension","FINISHED_CALIBRATION","scaleFactor","calibrateByScale","requestedScale","CLOSE_CALIBRATION_PANEL_EVENT","_window","getWindow","focus","onKeyUp","OPEN_CALIBRATION_PANEL_EVENT","updateCalibrationPanel","isCalibrated","CLEAR_CALIBRATION_SIZE_EVENT","clearMeasurement","repickEndpoint","MagnifyingGlass","_magnifyingGlassCanvas","_imageData","_imageBuffer","_clientX","_clientY","_needsClear","updateMagnifyingGlassBinded","updateMagnifyingGlass","pixelRatio","devicePixelRatio","diameter","normlizedDiameter","getContext","createImageData","ceil","Uint8Array","buffer","ctx","gl","glrenderer","readPixels","RGBA","UNSIGNED_BYTE","putImageData","drawImage","setGlassPosition","clearMagnifyingGlass","requestUpdate","hasEventListener","RENDER_PRESENTED_EVENT","once","drawMagnifyingGlass","handleWheelInput","MeasureToolbar","measureExtension","buttonsList","onUnitChange","toUnits","selfTriggered","updateSettingsPanel","category","onPrecisionChange","onUnitChangeBound","DISPLAY_UNITS_CHANGED","onPrecisionChangeBound","PRECISION_CHANGED","toolbar","getToolbar","navigationBar","getControl","TOOLBAR","NAVTOOLSID","toolbarOptions","measureToolbar","ControlGroup","MEASURETOOLSID","addControl","measureSimpleDistanceBtn","Button","setToolTip","setIcon","State","ACTIVE","measureAngleBtn","measureAreaBtn","measureArcBtn","FeatureFlags","isEnabled","PublicFeatureFlags","EnableSpotMeasurement","measureSpotBtn","calibrationToolBtn","separator","deleteBtn","settingsBtn","settingsControlPanel","setButtonActive","setButtonInactive","root","initialIndex","getDisplayUnit","precisionList","isolate","OptionCheckbox","checked","freeMeasure","isFreeMeasureMode","setFreeMeasureMode","setupPrecision","setVisibility","disableUnitOption","measureDoneBtn","doneText","cancelLabel","btnContainer","iconEle","getElementsByClassName","exitMeasurementMode","addCustomToolButton","removeCustomToolButton","removeControl","closeToolbar","removeFromParent","enableMeasureTool","toggleVisible","viewerToolbarContainer","viewerContainerChildrenCount","children","MODELTOOLSID","measurementToolbarButton","setState","INACTIVE","deactivateAllButtons","activateButtonByType","dropdownElement","lastChild","precisions","disabled","locals","avem","AutodeskNamespace","DEFAULT_MEASUREMENT_TYPE","MeasureExtension","Extension","modes","_onModelLoaded","_onDisplayUnitsPrefChanged","_onPrecisionPrefChanged","autosave","customToolButtons","loadExtension","hasUI","escapeHotkeyId","measureToolOptions","Proxy","receiver","snapperOptions","forceCalibrate","Snapping","Snapper","renderSnappedTopology","registerTool","onToolChangedCb","setActive","calibration","onFinishedCalibration","activateInitiator","MODEL_ROOT_LOADED_EVENT","onModelRemoved","DISABLED","onModelAdded","getVisibleModels","MODEL_ADDED_EVENT","MODEL_REMOVED_EVENT","addListeners","DISPLAY_UNITS","DISPLAY_UNITS_PRECISION","hasNotEntered","_this$measureToolbar","_this$measureToolbar2","setPdfUnits","Prefs2D","FORCE_PDF_CALIBRATION","setLeafletUnits","FORCE_LEAFLET_CALIBRATION","viewportPrecision","isSmartPdf","USE_PDF_VIEWPORT_INFO","fixUnitString","_this$measureToolbar3","calibrationUnits","precisionPreference","unload","destroyUI","EXPLODE_CHANGE_EVENT","deregisterTool","unloaded","removeListeners","getUnitOptions","getPrecisionOptions","isFractional","getDefaultUnit","openCalibrationRequiredDialog","initiator","CALIBRATION_REQUIRED_EVENT","FINISHED_CALIBRATION_FOR_DIMENSION_EVENT","getCalibration","activeStatus","success","enterMeasurementMode","setForcePDFCalibrate","setForceLeafletCalibrate","setRestoreSessionMeasurements","_this$viewer$model","snapToArc","setSnapToArc","selectedTool","forcePDFCalibration","forceLeafletCalibration","checkAndFetchTopology","OPEN_TOOL_AFTER_CALIBRAION","UNITS_CALIBRATION_STARTS_EVENT","_measurementMode","MEASUREMENT_MODE_ENTER","navigationControls","measureControls","measureButtonId","getId","centerToolBar","MEASURE_TOOL_ACTIVE","MEASUREMENT_MODE_LEAVE","onToolbarCreated","modelTools","buttonIndex","hotkeys","keycodes","onRelease","getHotkeyManager","pushHotkeys","_checkedTopology","modelHasTopology","fetchTopology","then","catch","popHotkeys","allow","useLastViewport","setSnapToPixel","getSnapToPixel","viewerState","theExtensionManager","registerExtension"],"sourceRoot":""}