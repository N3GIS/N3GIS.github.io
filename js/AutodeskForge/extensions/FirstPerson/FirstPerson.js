/*!
 * LMV v7.105.0
 *
 * Copyright 2025 Autodesk, Inc.
 * All rights reserved.
 *
 * This computer source code and related instructions and comments are the
 * unpublished confidential and proprietary information of Autodesk, Inc.
 * and are protected under Federal copyright and state trade secret law.
 * They may not be disclosed to, copied or used by any third party without
 * the prior written consent of Autodesk, Inc.
 *
 * Autodesk Viewer SDK Usage Limitations:
 *
 * The Autodesk Viewer SDK JavaScript must be delivered from an
 * Autodesk-hosted URL.
 */
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	// runtime can't be in strict mode because a global variable is assign and maybe created.
/******/ 	var __webpack_modules__ = ({

/***/ "./extensions/FirstPerson/FirstPerson.js":
/*!***********************************************!*\
  !*** ./extensions/FirstPerson/FirstPerson.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FirstPersonExtension: () => (/* binding */ FirstPersonExtension)\n/* harmony export */ });\n/* harmony import */ var _FirstPersonTool__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FirstPersonTool */ \"./extensions/FirstPerson/FirstPersonTool.js\");\n\n\n//\n// First Person\n//\n\n'use strict';\n\n/**\n * First Person navigation tool, similar to those found in videogames.\n *\n * It will also replace the default walk tool button when {@link Autodesk.Viewing.GuiViewer3D} is present.\n * @constructor\n * @see {@link Autodesk.Viewing.Extension} for common inherited methods.\n * @param {Autodesk.Viewing.Viewer3D} viewer - Viewer instance.\n * @param {object} options - Not used.\n */\nfunction FirstPersonExtension(viewer, options) {\n  Autodesk.Viewing.Extension.call(this, viewer, options);\n  this.name = \"firstperson\";\n}\n\nFirstPersonExtension.prototype = Object.create(Autodesk.Viewing.Extension.prototype);\nFirstPersonExtension.prototype.constructor = FirstPersonExtension;\n\nvar proto = FirstPersonExtension.prototype;\n\nproto.load = function () {\n  var self = this;\n  var viewer = this.viewer;\n  var avu = Autodesk.Viewing.UI;\n\n  // Register tool\n  this.tool = new _FirstPersonTool__WEBPACK_IMPORTED_MODULE_0__.FirstPersonTool(viewer);\n  viewer.toolController.registerTool(this.tool);\n\n  // Add the ui to the viewer.\n  this.createUI();\n  // Register listeners\n  this.onToolChanged = function (e) {\n    if (e.toolName.indexOf('firstperson') === -1) {\n      return;\n    }\n    if (self.firstPersonToolButton) {\n      var state = e.active ? avu.Button.State.ACTIVE : avu.Button.State.INACTIVE;\n      self.firstPersonToolButton.setState(state);\n    }\n  };\n\n  viewer.addEventListener(Autodesk.Viewing.TOOL_CHANGE_EVENT, this.onToolChanged);\n\n  return true;\n};\n\nproto.createUI = function ()\n{\n  var viewer = this.viewer;\n  if (!viewer.getToolbar) return; // Adds support for Viewer3D instance\n\n  var self = this;\n  var avu = Autodesk.Viewing.UI;\n  var toolbar = viewer.getToolbar();\n  var navTools = toolbar.getControl(Autodesk.Viewing.TOOLBAR.NAVTOOLSID);\n\n  // Create a button for the tool.\n  this.firstPersonToolButton = new avu.Button('toolbar-firstPersonTool');\n  this.firstPersonToolButton.setToolTip('First person');\n  this.firstPersonToolButton.onClick = function () {\n    if (self.activeStatus) {\n      self.deactivate();\n    } else\n    {\n      self.activate();\n    }\n  };\n  this.firstPersonToolButton.setIcon(\"adsk-icon-first-person\");\n\n  var cameraSubmenuTool = navTools.getControl('toolbar-cameraSubmenuTool');\n  if (cameraSubmenuTool) {\n    navTools.addControl(this.firstPersonToolButton, { index: navTools.indexOf(cameraSubmenuTool.getId()) });\n  } else {\n    navTools.addControl(this.firstPersonToolButton);\n  }\n};\n\nproto.unload = function () {\n  var viewer = this.viewer;\n\n  // Remove listeners\n  viewer.removeEventListener(Autodesk.Viewing.TOOL_CHANGE_EVENT, this.onToolChanged);\n  this.onToolChanged = undefined;\n\n  // Remove hotkey\n  viewer.getHotkeyManager().popHotkeys(this.HOTKEYS_ID);\n\n  // Remove the UI\n  if (this.firstPersonToolButton) {\n    var toolbar = viewer.getToolbar();\n    if (toolbar) {\n      this.firstPersonToolButton.removeFromParent();\n    }\n    this.firstPersonToolButton = null;\n  }\n\n  //Uh, why does the viewer need to keep track of this in addition to the tool stack?\n  if (viewer.getActiveNavigationTool() == this.tool.getName())\n  viewer.setActiveNavigationTool();\n\n  // Deregister tool\n  viewer.toolController.deregisterTool(this.tool);\n  this.tool = null;\n\n  return true;\n};\n\nproto.activate = function () {\n  if (!this.activeStatus) {\n    this.viewer.setActiveNavigationTool(\"firstperson\");\n    this.activeStatus = true;\n  }\n  return true;\n};\nproto.deactivate = function () {\n  if (this.activeStatus) {\n    this.viewer.setActiveNavigationTool();\n    this.activeStatus = false;\n  }\n  return true;\n};\n\nAutodesk.Viewing.theExtensionManager.registerExtension('Autodesk.FirstPerson', FirstPersonExtension);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O01BQ1QsSUFBSSxDQUFDWCxxQkFBcUIsQ0FBQ2dDLGdCQUFnQixDQUFDLENBQUM7SUFDakQ7SUFDQSxJQUFJLENBQUNoQyxxQkFBcUIsR0FBRyxJQUFJO0VBQ3JDOztFQUVBO0VBQ0EsSUFBSXhCLE1BQU0sQ0FBQ3lELHVCQUF1QixDQUFDLENBQUMsSUFBSSxJQUFJLENBQUN6QyxJQUFJLENBQUMwQyxPQUFPLENBQUMsQ0FBQztFQUN2RDFELE1BQU0sQ0FBQzJELHVCQUF1QixDQUFDLENBQUM7O0VBRXBDO0VBQ0EzRCxNQUFNLENBQUNpQixjQUFjLENBQUMyQyxjQUFjLENBQUMsSUFBSSxDQUFDNUMsSUFBSSxDQUFDO0VBQy9DLElBQUksQ0FBQ0EsSUFBSSxHQUFHLElBQUk7O0VBRWhCLE9BQU8sSUFBSTtBQUNmLENBQUM7O0FBRURMLEtBQUssQ0FBQ2lDLFFBQVEsR0FBRyxZQUFZO0VBQ3pCLElBQUcsQ0FBQyxJQUFJLENBQUNGLFlBQVksRUFBRTtJQUNuQixJQUFJLENBQUMxQyxNQUFNLENBQUMyRCx1QkFBdUIsQ0FBQyxhQUFhLENBQUM7SUFDbEQsSUFBSSxDQUFDakIsWUFBWSxHQUFHLElBQUk7RUFDNUI7RUFDQSxPQUFPLElBQUk7QUFDZixDQUFDO0FBQ0QvQixLQUFLLENBQUNnQyxVQUFVLEdBQUUsWUFBVztFQUN6QixJQUFHLElBQUksQ0FBQ0QsWUFBWSxFQUFFO0lBQ2xCLElBQUksQ0FBQzFDLE1BQU0sQ0FBQzJELHVCQUF1QixDQUFDLENBQUM7SUFDckMsSUFBSSxDQUFDakIsWUFBWSxHQUFHLEtBQUs7RUFDN0I7RUFDQSxPQUFPLElBQUk7QUFDZixDQUFDOztBQUVEeEMsUUFBUSxDQUFDQyxPQUFPLENBQUMwRCxtQkFBbUIsQ0FBQ0MsaUJBQWlCLENBQUMsc0JBQXNCLEVBQUUvRCxvQkFBb0IsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL0F1dG9kZXNrLkV4dGVuc2lvbnMvLi9leHRlbnNpb25zL0ZpcnN0UGVyc29uL0ZpcnN0UGVyc29uLmpzP2MzNWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmlyc3RQZXJzb25Ub29sIH0gZnJvbSAnLi9GaXJzdFBlcnNvblRvb2wnO1xuXG4vL1xuLy8gRmlyc3QgUGVyc29uXG4vL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogRmlyc3QgUGVyc29uIG5hdmlnYXRpb24gdG9vbCwgc2ltaWxhciB0byB0aG9zZSBmb3VuZCBpbiB2aWRlb2dhbWVzLlxuICpcbiAqIEl0IHdpbGwgYWxzbyByZXBsYWNlIHRoZSBkZWZhdWx0IHdhbGsgdG9vbCBidXR0b24gd2hlbiB7QGxpbmsgQXV0b2Rlc2suVmlld2luZy5HdWlWaWV3ZXIzRH0gaXMgcHJlc2VudC5cbiAqIEBjb25zdHJ1Y3RvclxuICogQHNlZSB7QGxpbmsgQXV0b2Rlc2suVmlld2luZy5FeHRlbnNpb259IGZvciBjb21tb24gaW5oZXJpdGVkIG1ldGhvZHMuXG4gKiBAcGFyYW0ge0F1dG9kZXNrLlZpZXdpbmcuVmlld2VyM0R9IHZpZXdlciAtIFZpZXdlciBpbnN0YW5jZS5cbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gTm90IHVzZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBGaXJzdFBlcnNvbkV4dGVuc2lvbih2aWV3ZXIsIG9wdGlvbnMpIHtcbiAgICBBdXRvZGVzay5WaWV3aW5nLkV4dGVuc2lvbi5jYWxsKHRoaXMsIHZpZXdlciwgb3B0aW9ucyk7XG4gICAgdGhpcy5uYW1lID0gXCJmaXJzdHBlcnNvblwiO1xufVxuXG5GaXJzdFBlcnNvbkV4dGVuc2lvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEF1dG9kZXNrLlZpZXdpbmcuRXh0ZW5zaW9uLnByb3RvdHlwZSk7XG5GaXJzdFBlcnNvbkV4dGVuc2lvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBGaXJzdFBlcnNvbkV4dGVuc2lvbjtcblxudmFyIHByb3RvID0gRmlyc3RQZXJzb25FeHRlbnNpb24ucHJvdG90eXBlO1xuXG5wcm90by5sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciB2aWV3ZXIgPSB0aGlzLnZpZXdlcjtcbiAgICB2YXIgYXZ1ID0gQXV0b2Rlc2suVmlld2luZy5VSTtcblxuICAgIC8vIFJlZ2lzdGVyIHRvb2xcbiAgICB0aGlzLnRvb2wgPSBuZXcgRmlyc3RQZXJzb25Ub29sKHZpZXdlcik7XG4gICAgdmlld2VyLnRvb2xDb250cm9sbGVyLnJlZ2lzdGVyVG9vbCh0aGlzLnRvb2wpO1xuXG4gICAgLy8gQWRkIHRoZSB1aSB0byB0aGUgdmlld2VyLlxuICAgIHRoaXMuY3JlYXRlVUkoKTtcbiAgICAvLyBSZWdpc3RlciBsaXN0ZW5lcnNcbiAgICB0aGlzLm9uVG9vbENoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoZS50b29sTmFtZS5pbmRleE9mKCdmaXJzdHBlcnNvbicpID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmZpcnN0UGVyc29uVG9vbEJ1dHRvbikge1xuICAgICAgICAgICAgdmFyIHN0YXRlID0gZS5hY3RpdmUgPyBhdnUuQnV0dG9uLlN0YXRlLkFDVElWRSA6IGF2dS5CdXR0b24uU3RhdGUuSU5BQ1RJVkU7XG4gICAgICAgICAgICBzZWxmLmZpcnN0UGVyc29uVG9vbEJ1dHRvbi5zZXRTdGF0ZShzdGF0ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmlld2VyLmFkZEV2ZW50TGlzdGVuZXIoQXV0b2Rlc2suVmlld2luZy5UT09MX0NIQU5HRV9FVkVOVCwgdGhpcy5vblRvb2xDaGFuZ2VkKTtcblxuICAgIHJldHVybiB0cnVlO1xufTtcblxucHJvdG8uY3JlYXRlVUkgPSBmdW5jdGlvbigpXG57XG4gICAgdmFyIHZpZXdlciA9IHRoaXMudmlld2VyO1xuICAgIGlmICghdmlld2VyLmdldFRvb2xiYXIpIHJldHVybjsgLy8gQWRkcyBzdXBwb3J0IGZvciBWaWV3ZXIzRCBpbnN0YW5jZVxuXG4gICAgdmFyIHNlbGYgICA9IHRoaXM7XG4gICAgdmFyIGF2dSA9IEF1dG9kZXNrLlZpZXdpbmcuVUk7XG4gICAgdmFyIHRvb2xiYXIgPSB2aWV3ZXIuZ2V0VG9vbGJhcigpO1xuICAgIHZhciBuYXZUb29scyA9IHRvb2xiYXIuZ2V0Q29udHJvbChBdXRvZGVzay5WaWV3aW5nLlRPT0xCQVIuTkFWVE9PTFNJRCk7XG5cbiAgICAvLyBDcmVhdGUgYSBidXR0b24gZm9yIHRoZSB0b29sLlxuICAgIHRoaXMuZmlyc3RQZXJzb25Ub29sQnV0dG9uID0gbmV3IGF2dS5CdXR0b24oJ3Rvb2xiYXItZmlyc3RQZXJzb25Ub29sJyk7XG4gICAgdGhpcy5maXJzdFBlcnNvblRvb2xCdXR0b24uc2V0VG9vbFRpcCgnRmlyc3QgcGVyc29uJyk7XG4gICAgdGhpcy5maXJzdFBlcnNvblRvb2xCdXR0b24ub25DbGljayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZihzZWxmLmFjdGl2ZVN0YXR1cykge1xuICAgICAgICAgICAgc2VsZi5kZWFjdGl2YXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZWxmLmFjdGl2YXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuZmlyc3RQZXJzb25Ub29sQnV0dG9uLnNldEljb24oXCJhZHNrLWljb24tZmlyc3QtcGVyc29uXCIpO1xuXG4gICAgdmFyIGNhbWVyYVN1Ym1lbnVUb29sID0gbmF2VG9vbHMuZ2V0Q29udHJvbCgndG9vbGJhci1jYW1lcmFTdWJtZW51VG9vbCcpO1xuICAgIGlmIChjYW1lcmFTdWJtZW51VG9vbCkge1xuICAgICAgICBuYXZUb29scy5hZGRDb250cm9sKHRoaXMuZmlyc3RQZXJzb25Ub29sQnV0dG9uLCB7aW5kZXg6IG5hdlRvb2xzLmluZGV4T2YoY2FtZXJhU3VibWVudVRvb2wuZ2V0SWQoKSl9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBuYXZUb29scy5hZGRDb250cm9sKHRoaXMuZmlyc3RQZXJzb25Ub29sQnV0dG9uKTtcbiAgICB9XG59O1xuXG5wcm90by51bmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdmlld2VyID0gdGhpcy52aWV3ZXI7XG5cbiAgICAvLyBSZW1vdmUgbGlzdGVuZXJzXG4gICAgdmlld2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIoQXV0b2Rlc2suVmlld2luZy5UT09MX0NIQU5HRV9FVkVOVCwgdGhpcy5vblRvb2xDaGFuZ2VkKTtcbiAgICB0aGlzLm9uVG9vbENoYW5nZWQgPSB1bmRlZmluZWQ7XG5cbiAgICAvLyBSZW1vdmUgaG90a2V5XG4gICAgdmlld2VyLmdldEhvdGtleU1hbmFnZXIoKS5wb3BIb3RrZXlzKHRoaXMuSE9US0VZU19JRCk7XG5cbiAgICAvLyBSZW1vdmUgdGhlIFVJXG4gICAgaWYgKHRoaXMuZmlyc3RQZXJzb25Ub29sQnV0dG9uKSB7XG4gICAgICAgIHZhciB0b29sYmFyID0gdmlld2VyLmdldFRvb2xiYXIoKTtcbiAgICAgICAgaWYgKHRvb2xiYXIpIHtcbiAgICAgICAgICAgIHRoaXMuZmlyc3RQZXJzb25Ub29sQnV0dG9uLnJlbW92ZUZyb21QYXJlbnQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZpcnN0UGVyc29uVG9vbEJ1dHRvbiA9IG51bGw7XG4gICAgfVxuXG4gICAgLy9VaCwgd2h5IGRvZXMgdGhlIHZpZXdlciBuZWVkIHRvIGtlZXAgdHJhY2sgb2YgdGhpcyBpbiBhZGRpdGlvbiB0byB0aGUgdG9vbCBzdGFjaz9cbiAgICBpZiAodmlld2VyLmdldEFjdGl2ZU5hdmlnYXRpb25Ub29sKCkgPT0gdGhpcy50b29sLmdldE5hbWUoKSlcbiAgICAgICAgdmlld2VyLnNldEFjdGl2ZU5hdmlnYXRpb25Ub29sKCk7XG5cbiAgICAvLyBEZXJlZ2lzdGVyIHRvb2xcbiAgICB2aWV3ZXIudG9vbENvbnRyb2xsZXIuZGVyZWdpc3RlclRvb2wodGhpcy50b29sKTtcbiAgICB0aGlzLnRvb2wgPSBudWxsO1xuXG4gICAgcmV0dXJuIHRydWU7XG59O1xuXG5wcm90by5hY3RpdmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZighdGhpcy5hY3RpdmVTdGF0dXMpIHtcbiAgICAgICAgdGhpcy52aWV3ZXIuc2V0QWN0aXZlTmF2aWdhdGlvblRvb2woXCJmaXJzdHBlcnNvblwiKTtcbiAgICAgICAgdGhpcy5hY3RpdmVTdGF0dXMgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn07XG5wcm90by5kZWFjdGl2YXRlPSBmdW5jdGlvbigpIHtcbiAgICBpZih0aGlzLmFjdGl2ZVN0YXR1cykge1xuICAgICAgICB0aGlzLnZpZXdlci5zZXRBY3RpdmVOYXZpZ2F0aW9uVG9vbCgpO1xuICAgICAgICB0aGlzLmFjdGl2ZVN0YXR1cyA9IGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn07XG5cbkF1dG9kZXNrLlZpZXdpbmcudGhlRXh0ZW5zaW9uTWFuYWdlci5yZWdpc3RlckV4dGVuc2lvbignQXV0b2Rlc2suRmlyc3RQZXJzb24nLCBGaXJzdFBlcnNvbkV4dGVuc2lvbik7XG5cblxuIl0sIm5hbWVzIjpbIkZpcnN0UGVyc29uVG9vbCIsIkZpcnN0UGVyc29uRXh0ZW5zaW9uIiwidmlld2VyIiwib3B0aW9ucyIsIkF1dG9kZXNrIiwiVmlld2luZyIsIkV4dGVuc2lvbiIsImNhbGwiLCJuYW1lIiwicHJvdG90eXBlIiwiT2JqZWN0IiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCJwcm90byIsImxvYWQiLCJzZWxmIiwiYXZ1IiwiVUkiLCJ0b29sIiwidG9vbENvbnRyb2xsZXIiLCJyZWdpc3RlclRvb2wiLCJjcmVhdGVVSSIsIm9uVG9vbENoYW5nZWQiLCJlIiwidG9vbE5hbWUiLCJpbmRleE9mIiwiZmlyc3RQZXJzb25Ub29sQnV0dG9uIiwic3RhdGUiLCJhY3RpdmUiLCJCdXR0b24iLCJTdGF0ZSIsIkFDVElWRSIsIklOQUNUSVZFIiwic2V0U3RhdGUiLCJhZGRFdmVudExpc3RlbmVyIiwiVE9PTF9DSEFOR0VfRVZFTlQiLCJnZXRUb29sYmFyIiwidG9vbGJhciIsIm5hdlRvb2xzIiwiZ2V0Q29udHJvbCIsIlRPT0xCQVIiLCJOQVZUT09MU0lEIiwic2V0VG9vbFRpcCIsIm9uQ2xpY2siLCJhY3RpdmVTdGF0dXMiLCJkZWFjdGl2YXRlIiwiYWN0aXZhdGUiLCJzZXRJY29uIiwiY2FtZXJhU3VibWVudVRvb2wiLCJhZGRDb250cm9sIiwiaW5kZXgiLCJnZXRJZCIsInVubG9hZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ1bmRlZmluZWQiLCJnZXRIb3RrZXlNYW5hZ2VyIiwicG9wSG90a2V5cyIsIkhPVEtFWVNfSUQiLCJyZW1vdmVGcm9tUGFyZW50IiwiZ2V0QWN0aXZlTmF2aWdhdGlvblRvb2wiLCJnZXROYW1lIiwic2V0QWN0aXZlTmF2aWdhdGlvblRvb2wiLCJkZXJlZ2lzdGVyVG9vbCIsInRoZUV4dGVuc2lvbk1hbmFnZXIiLCJyZWdpc3RlckV4dGVuc2lvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./extensions/FirstPerson/FirstPerson.js\n");

/***/ }),

/***/ "./extensions/FirstPerson/FirstPersonTool.js":
/*!***************************************************!*\
  !*** ./extensions/FirstPerson/FirstPersonTool.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FirstPersonTool: () => (/* binding */ FirstPersonTool)\n/* harmony export */ });\n/* harmony import */ var _Gamepad_GamepadModule__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Gamepad/GamepadModule */ \"./extensions/Gamepad/GamepadModule.js\");\n\nconst av = Autodesk.Viewing;\n/*\n * First Person View tool for LMV\n *\n * This tool provides a first person view with movement using the standard WASD keys\n * to forward/backward/left/right and the QE keys to move vertically.  The mouse or\n * cursor is used to orient the view.  Movement is always along or perpendicular to\n * the view direction.\n *\n * The SHIFT key may be used when moving to increase the speed.  Or the default\n * movement speed may be increased/decreased with the MINUS or EQUAL keys.  The\n * ZERO (0) will reset to the default speed values.\n *\n * @author Hans Kellner (Oct 2014)\n *\n */\nfunction FirstPersonTool(viewerapi) {\n\n  var avp = Autodesk.Viewing.Private;\n\n  var _isMac = navigator.userAgent.search(\"Mac OS\") != -1;\n  var _navapi = viewerapi.navigation;\n  var _container = viewerapi.container;\n  var _camera = _navapi.getCamera();\n  var _names = [\"firstperson\"];\n\n  this.setGlobalManager(viewerapi.globalManager);\n\n  var _modifierState = { SHIFT: 0, ALT: 0, CONTROL: 0 }; // TODO: Use the hotkeymanager for these.\n  var _keys = Autodesk.Viewing.KeyCode;\n\n  var _isActive = false;\n\n  // true to disable mouse & keyboard navigation.  Used when a HUD is visible to simulate\n  // a modal dialog.\n  var _ignoreMouseAndKeyNav = false;\n\n  // if true then mouse drag changes view orientation, otherwise just mouse move.\n  // If this is set to false then auto-tracking is enabled which might be a usability\n  // issue depending on where the cursor is locate when the tool is enabled.\n  // Movement is based on the distance the cursor is located from the center of\n  // the screen.  If the cursor is away from center when the tool is enabled then\n  // in auto-tracking (non-drag) mode the camera will begin moving.  This may be\n  // disconcerting to the user.\n  var _mouseDraggingLookMode = true;\n\n  var _isDragging = false;\n  var _touchType = null;\n\n  var _clock = new THREE.Clock(true);\n\n  var _hudMessageStartShowTime = -1;\n  var _hudMessageShowTime = 5000; // milliseconds to show HUD\n\n  var _modelScaleFactor = 1.0;\n\n  // These values define how fast/slow the camera movements are made.\n  // Adjust these to fine tune the movement.\n  var _movementSpeedDefault = 2.0;\n  var _movementSpeed = 2.0;\n  var _wheelMovementSpeed = 1.0;\n  var _verticalMovementSpeed = 0.5;\n  var _lookSpeed = 0.0035;\n\n  var _wheelDelta = 0;\n\n  // Current cursor\n  var _lastX = -1e20;\n  var _lastY = -1e20;\n\n  // Relative movement\n  var _deltaYaw = 0;\n  var _deltaPitch = 0;\n\n  // Key movement flags\n  var _moveForward = false;\n  var _moveBackward = false;\n  var _moveLeft = false;\n  var _moveRight = false;\n  var _moveUp = false;\n  var _moveDown = false;\n\n  // Previous FOV and Perspective settings\n  var _previousFov = _camera.fov;\n  var _restorePreviousFov = false;\n\n  var _wasPerspective = _camera.isPerspective;\n  var _restorePreviousPerspective = false;\n\n  // Help HUD\n  var _bDontShowAgain_HelpHUD = false;\n\n  //gamepad\n  var _gamepadModule;\n  //if this browser supports gamepad, instantiate GamepadModule\n  if (navigator.getGamepads || !!navigator.webkitGetGamepads || !!navigator.webkitGamepads) {\n    _gamepadModule = new _Gamepad_GamepadModule__WEBPACK_IMPORTED_MODULE_0__.GamepadModule(viewerapi);\n  }\n\n  //ADP\n  var _trackToolUsed = false;\n\n  // ToolInterface\n\n  this.isActive = function ()\n  {\n    return _isActive;\n  };\n\n  this.getNames = function ()\n  {\n    return _names;\n  };\n\n  this.getName = function ()\n  {\n    return _names[0];\n  };\n\n  this.activate = function ()\n  {\n    _clock.start();\n\n    // Switch to perspective\n    _wasPerspective = _camera.isPerspective;\n    _navapi.toPerspective();\n\n    // Change FOV to a wide value for a better 1st person experience\n    _previousFov = _camera.fov;\n    _navapi.setVerticalFov(75, true);\n\n    // Calculate a movement scale factor based on the model bounds.\n    var boundsSize = viewerapi.model.getBoundingBox().getSize(new THREE.Vector3());\n    _modelScaleFactor = Math.max(Math.min(Math.min(boundsSize.x, boundsSize.y), boundsSize.z) / 10.0, 0.0001);\n\n    // HACK: Place focus in canvas so we get key events.\n    viewerapi.canvas.focus();\n\n    _isActive = true;\n\n    // Display the HUD on startup but only if \"don't show me again\" wasn't requested\n    if (viewerapi.getFirstPersonToolPopup() && !_bDontShowAgain_HelpHUD) {\n      showHelpHUD();\n    }\n\n    this.addCrosshair();\n\n    viewerapi.impl.pauseHighlight(true);\n\n    if (_gamepadModule) {\n      _gamepadModule.activate(this.getName());\n    }\n  };\n\n  this.deactivate = function ()\n  {\n    _isActive = false;\n\n    _clock.stop();\n\n    hideHUD();\n    this.removeCrosshair();\n\n    if (_restorePreviousFov) {\n      _navapi.setVerticalFov(_previousFov, true);\n    }\n\n    if (_restorePreviousPerspective) {\n      if (!_wasPerspective)\n      _navapi.toOrthographic();\n    }\n\n    viewerapi.impl.pauseHighlight(false);\n\n    if (_gamepadModule)\n    _gamepadModule.deactivate();\n\n  };\n\n  this.getCursor = function ()\n  {\n    return \"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3goOFQoQszohGAAAA9hJREFUSMedll1oHGUUhp8zuzP5291pEvNTomgVjFCCCa0NpAqJEJTUFVv8uWxQLwKCF6IUr7wJ6J30QvBCAlZssA0EkYJaAm1FwU3iakrbVNNuutlukk3dzWyT/ZnJ7ufFTtokbmvX72Y45+N73/Oe8858I+xYSikBJJFI7AmFQh9alvVWoVC47vP5ho4cOXJeRGwqWN4yOQ2oHh0dPROJRNo7OjqIRCKPRxeiP66srBxSSn0vIsX/RaCU0gDV399vNjQ0tB8/fpxAIEAsFuP06dPEYrFvgHqguEMxIqLKdUPbmnArU52dnb2maWJUGeRyOWzbpqGxgXg87gOMncDlwLe2Y5uCwcHBFp/P90k4PE349xkWolGi0SjhPy5hF+UmIEopz/1AtxRcqmJzDQ8P7750+Wq8e9+TPGLe4sSp39jz9LMsxm/izE6gOVnquoIcOHDgnddfe/VEU3PLWkUzSCQSesCzxNtvHKZu11O0137OuTMneYY1+l+px99sci5zgU+/Pv/Z5OTkWeCvigja2tqqri3/RPbiMfSWLvY+/wJ7XwxCOoyz+gPF5C0OzsFZv8NEOOxU7KL5+fkcooFUo9avYt+4htTU43noJVTmIPYvp8hnChSKCr/fr1VMkEqlCgEATUDTAIVykhSWRtj4M4/KKzZ9Z9u2ehCCbVUYhlEaurg7m09NB/GWYhe2r69vV8UEvb29DeIWL+6uIG6w6b1SGAqF0hUTZDKZ7GLKy1w0h+Z1keQuMEDOKbK+oZFIJOyKZqCUEsuy/k4mk6kr0ZH6/Z2CkrttEl1QjuJkKI3z6KGp6vTFpYoVmKaZ9Xg8lleDoq3IzOdBILuygbVgs2YVSNrgOM7o1NTURkUE7qufX15evo5A0VHcnrNRgFgFJF6gsVmntlaIxWKNIlK/s8D/VCAianZ29spmv0vfVoVuaNT6PYhWMpGIGIZhNAGtQC3bbXDfj51YlrWObHeOKu3didfX1x3btgGqgADgu5eafyXT6XT2zmDLnVDg9Xq9uq573fMeQAeqy+HtTAgguq7h0aUsgyZCJpPZcBxnE1xz3fhACqp7enoe+3ZimVg8j6ELiIACEUETWErnsCwrD2h1dXW6C+4A2a033T0VfPD+e8dePvoFb36sM/LzKomkQ1FgMW3z7neL3Gh6jtbW1rmamhrDNM0NYAVIAYWyl06ZPwoNeHh6evqJmZmZiV8vnCBw+yLRRCv7gkdpamr6aGho6KuBgQFnfHx88V7AZQlcEt01jgD+sbGx3V+OjPR07d8fDQaDl1OpVLK7u9swTXP1Qa7NfwCi46BIaoRmhAAAAABJRU5ErkJggg==), auto\";\n  };\n\n  this.adjustSpeed = function (direction)\n  {\n    if (direction === 0) {// reset to default\n      _movementSpeed = _movementSpeedDefault;\n    } else\n    {\n      _movementSpeed *= direction > 0 ? 1.10 : 0.90;\n      if (_movementSpeed < 0.01) {\n        _movementSpeed = 0.01;\n      }\n    }\n  };\n\n  function getEventModifierState(event)\n  {\n    if (_touchType)\n    return false;\n\n    var ctrlKey = event.ctrlKey || _isMac && event.metaKey;\n    var metaKey = event.metaKey && !_isMac;\n\n    //console.log(\"Mod keys: ctrl = \"+ctrlKey+\" meta = \"+metaKey+\" alt^ctrl = \"+ (event.altKey ^ ctrlKey));\n\n    return ctrlKey || metaKey || event.shiftKey || event.altKey;\n  }\n\n  /////////////////////////////////////////////////////////////////////////\n  // Tool event handler callbacks - can use \"this\".\n\n  this.handleGesture = function (event)\n  {\n    // Convert Hammer touch-event X,Y into mouse-event X,Y.\n    if (event.pointers && event.pointers.length > 0) {\n      event.pageX = event.pointers[0].pageX;\n      event.pageY = event.pointers[0].pageY;\n    }\n\n    switch (event.type) {\n\n      case \"dragstart\":\n        _touchType = \"drag\";\n        // Single touch, fake the mouse for now...\n        return this.handleButtonDown(event, 0);\n\n      case \"dragmove\":\n        return _touchType === \"drag\" ? this.handleMouseMove(event) : false;\n\n      case \"dragend\":\n        if (_touchType === \"drag\")\n        {\n          this.handleButtonUp(event, 0);\n          _touchType = null;\n          return true;\n        }\n        return false;\n    }\n\n    return false;\n  };\n\n  this.handleSingleClick = function ()\n  {\n    return false;\n  };\n\n  this.handleButtonDown = function (event, button)\n  {\n    hideHUD();\n\n    var modifierState = getEventModifierState(event);\n    if (button === 0 && !modifierState) {\n\n      _lastX = event.pageX;\n      _lastY = event.pageY;\n\n      _deltaYaw = _deltaPitch = 0;\n      _isDragging = true;\n      return true;\n    }\n\n    return true; // Eat all these so default tools don't screw with view\n  };\n\n  this.handleMouseMove = function (event)\n  {\n    var dx = _lastX < -1e10 ? 0 : event.pageX - _lastX;\n    var dy = _lastY < -1e10 ? 0 : event.pageY - _lastY;\n    _lastX = event.pageX;\n    _lastY = event.pageY;\n\n    if (_isDragging === _mouseDraggingLookMode && !_ignoreMouseAndKeyNav)\n    {\n      // Joystick Camera Orientation\n      /** DISABLED\n       var xNew = event.pageX - window.innerWidth / 2;\n       var yNew = event.pageY - window.innerHeight / 2;\n       if (_mouseDraggingLookMode) {\n      // If in drag mode then movement is relative to start point\n      _mouseDX = xNew - _mouseXstart;\n      _mouseDY = yNew - _mouseYstart;\n      }\n       else {\n      _mouseDX = xNew;\n      _mouseDY = yNew;\n      }\n       // A circular area in the middle of the screen or around the start point\n       // defines a neutral area in which no movement occurs.\n       var mouseMoveDist = Math.sqrt( _mouseDX * _mouseDX + _mouseDY * _mouseDY );\n       if ( mouseMoveDist < _neutralZoneDist ) {\n      _mouseDX = _mouseDY = 0;\n      }\n       DISABLED **/\n\n      // Discrete Camera Orientation\n      _deltaYaw += dx * _lookSpeed;\n      _deltaPitch += dy * _lookSpeed;\n    }\n\n    return true; // Eat all these so default tools don't screw with view\n  };\n\n  this.handleButtonUp = function (event, button)\n  {\n\n    // If are dragging for a specific button then end dragging no matter\n    // what the state of the modifiers.  Otherwise you won't end dragging.\n    if (button === 0 && _isDragging) {\n      _deltaYaw = _deltaPitch = 0;\n      _isDragging = false;\n      return true;\n    }\n\n    return true; // Eat all these so default tools don't screw with view\n  };\n\n  this.handleKeyDown = function (event, keyCode)\n  {\n    if (_ignoreMouseAndKeyNav) {\n      return false;\n    }\n\n    hideHUD();\n\n    var handled = false;\n\n    switch (keyCode) {\n\n      case _keys.ESCAPE:\n        break;\n\n      case _keys.TAB:handled = false;break;\n\n      // Eat the modifiers so defualt tools don't activate and mess with cam\n      case _keys.SHIFT:_modifierState.SHIFT = 1;handled = true;break;\n      case _keys.CONTROL:_modifierState.CONTROL = 1;handled = true;break;\n      case _keys.ALT:_modifierState.ALT = 1;handled = true;break;\n      case _keys.SPACE:_modifierState.SPACE = 1;handled = true;break;\n\n      case _keys.EQUALS:this.adjustSpeed(1);handled = true;break;\n      case _keys.DASH:this.adjustSpeed(-1);handled = true;break;\n      case _keys.ZERO:this.adjustSpeed(0);handled = true;break; // Reset dolly speed to default\n\n      case _keys.UP:\n      case _keys.w:\n        _moveForward = true;handled = true;\n        break;\n\n      case _keys.LEFT:\n      case _keys.a:\n        _moveLeft = true;handled = true;\n        break;\n\n      case _keys.DOWN:\n      case _keys.s:\n        _moveBackward = true;handled = true;\n        break;\n\n      case _keys.RIGHT:\n      case _keys.d:\n        _moveRight = true;handled = true;\n        break;\n\n      case _keys.q:\n        _moveUp = true;handled = true;\n        break;\n\n      case _keys.e:\n        _moveDown = true;handled = true;\n        break;\n\n      case _keys.g:\n        handled = true;\n        break;\n\n      case _keys.F1:\n        handled = true;\n        break;\n    }\n\n    return handled;\n  };\n\n  this.handleKeyUp = function (event, keyCode)\n  {\n    if (_ignoreMouseAndKeyNav) {\n      return false;\n    }\n\n    var handled = false;\n\n    switch (keyCode) {\n\n      case _keys.TAB:\n        handled = false;\n        break;\n\n      // Eat the modifiers so defualt tools don't activate and mess with cam\n      case _keys.SHIFT:_modifierState.SHIFT = 0;handled = true;break;\n      case _keys.CONTROL:_modifierState.CONTROL = 0;handled = true;break;\n      case _keys.ALT:_modifierState.ALT = 0;handled = true;break;\n      case _keys.SPACE:_modifierState.SPACE = 0;handled = true;break;\n\n      case _keys.UP:\n      case _keys.w:\n        _moveForward = false;handled = true;\n        firstPersonToolUsed();\n        break;\n\n      case _keys.LEFT:\n      case _keys.a:\n        _moveLeft = false;handled = true;\n        firstPersonToolUsed();\n        break;\n\n      case _keys.DOWN:\n      case _keys.s:\n        _moveBackward = false;handled = true;\n        firstPersonToolUsed();\n        break;\n\n      case _keys.RIGHT:\n      case _keys.d:\n        _moveRight = false;handled = true;\n        firstPersonToolUsed();\n        break;\n\n      case _keys.q:\n        _moveUp = false;handled = true;\n        firstPersonToolUsed();\n        break;\n\n      case _keys.e:\n        _moveDown = false;handled = true;\n        firstPersonToolUsed();\n        break;\n\n      case _keys.g:\n        _mouseDraggingLookMode = !_mouseDraggingLookMode;\n        showDraggingLookModeHUD(_mouseDraggingLookMode);\n        handled = true;\n        break;\n\n      case _keys.F1:\n        showHelpHUD();\n        handled = true;\n        break;\n    }\n\n    return handled;\n  };\n\n  this.handleWheelInput = function (delta)\n  {\n    if (_ignoreMouseAndKeyNav) {\n      return false;\n    }\n\n    if (_navapi.getReverseZoomDirection())\n    delta *= -1;\n\n    _wheelDelta += delta;\n\n    return true;\n  };\n\n  this.handleSingleClick = function () {\n    return false;\n  };\n\n  this.handleDoubleClick = function () {\n    return false;\n  };\n\n  this.handleSingleTap = function (event)\n  {\n    return this.handleSingleClick(event, 0);\n  };\n\n  this.handleDoubleTap = function () {\n    return false;\n  };\n\n  this.handleBlur = function ()\n  {\n    // Reset things when we lose focus...\n    _moveForward = _moveBackward = false;\n    _moveLeft = _moveRight = false;\n    _moveUp = _moveDown = false;\n\n    return false;\n  };\n\n  this.update = function ()\n  {\n\n    if (!_isActive || !_navapi.isActionEnabled('walk'))\n    return false;\n\n    var delta = _clock.getDelta(); //returns delta in unit seconds\n\n    if (_hudMessageStartShowTime > -1) {\n      var curTime = new Date().getTime();\n      if (curTime - _hudMessageStartShowTime > _hudMessageShowTime) {// seconds\n        hideHUD();\n      }\n    }\n\n    // From the Collaboration extension:\n    //the \"go home\" call may change the camera back to ortho... and we can't do ortho while walking...\n    //HACK: Really, the home view should be set once when launch the extension, then set it back.\n    if (!_camera.isPerspective) {\n      console.log(\"Lost perspective mode: resetting view.\");\n      _navapi.toPerspective();\n    }\n\n    var localCam = _camera.clone(); // Copy of camera to modify\n\n    // Handle movement changes\n\n    var actualMoveSpeed = delta * _movementSpeed * _modelScaleFactor * (_modifierState.SHIFT === 1 ? 4 : 1);\n    var actualVerticalMoveSpeed = delta * _verticalMovementSpeed * _modelScaleFactor * (_modifierState.SHIFT === 1 ? 4 : 1);\n\n\n    if (_wheelDelta != 0) {\n      var actualWheelMoveSpeed = _wheelDelta * _wheelMovementSpeed * _modelScaleFactor * (_modifierState.SHIFT === 1 ? 4 : 1);\n      localCam.translateZ(-actualWheelMoveSpeed);\n      _wheelDelta = 0;\n    }\n\n    if (_moveForward) {\n      localCam.translateZ(-actualMoveSpeed);\n    }\n\n    if (_moveBackward) {\n      localCam.translateZ(actualMoveSpeed);\n    }\n\n    if (_moveLeft) {\n      localCam.translateX(-actualMoveSpeed);\n    }\n\n    if (_moveRight) {\n      localCam.translateX(actualMoveSpeed);\n    }\n\n    if (_moveUp) {\n      localCam.translateY(actualVerticalMoveSpeed);\n    }\n\n    if (_moveDown) {\n      localCam.translateY(-actualVerticalMoveSpeed);\n    }\n\n    var newPosition = localCam.position;\n    var posChanged = newPosition.distanceToSquared(_camera.position) !== 0;\n\n    // Handle look changes\n\n    // var actualLookSpeed = delta * _lookSpeed;\n\n    var newTarget = localCam.target;\n\n    var directionFwd = _camera.target.clone().sub(_camera.position);\n    //directionFwd = directionFwd.sub((directionFwd.multiply(_camera.worldup)).multiply(_camera.worldup));\n\n    var directionRight = directionFwd.clone().cross(_camera.up).normalize();\n\n    /** Joystick Camera Orientation\n     ** This code enabled continuous movement of camera as apposed to the\n     ** discrete movement mode below.  Moving the cursor outside of the\n     ** center of the view orients the camera in that direction and continues\n     ** moving while cursor is outside neutral center.  It works like a\n     ** virtual joystick.\n     **\n     ** Uncomment/Comment these sections to switch the style of camera orientation.\n     **/\n\n    /** DISABLED\n     var dyawAngle = 0, dpitchAngle = 0;\n     if (Math.abs(_mouseDX) > _neutralZoneDist) {\n    if (_mouseDX > 0) {\n        _mouseDX = Math.min(_mouseDX, _mouseXMaxLimit); // Throttle look speed.\n        dyawAngle = (_mouseDX - _neutralZoneDist) * actualLookSpeed;\n    }\n    else {\n        _mouseDX = Math.max(_mouseDX, -_mouseXMaxLimit); // Throttle look speed.\n        dyawAngle = (_mouseDX + _neutralZoneDist) * actualLookSpeed;\n    }\n    }\n     if (Math.abs(_mouseDY) > _neutralZoneDist) {\n    if (_mouseDY > 0) {\n        _mouseDY = Math.min(_mouseDY, _mouseYMaxLimit); // Throttle look speed.\n        dpitchAngle = (_mouseDY - _neutralZoneDist) * actualLookSpeed;\n    }\n    else {\n        _mouseDY = Math.max(_mouseDY, -_mouseYMaxLimit); // Throttle look speed.\n        dpitchAngle = (_mouseDY + _neutralZoneDist) * actualLookSpeed;\n    }\n    }\n     if (dpitchAngle) {\n    var pitchQ = new THREE.Quaternion();\n    pitchQ.setFromAxisAngle(directionRight, -dpitchAngle);\n    // Need to limit pitch to +-85 degrees so we don't create\n    // camera jumping at vertical limits.\n    var dirFwdTmp = directionFwd.clone();\n    dirFwdTmp.applyQuaternion(pitchQ);\n    var vertical = _camera.worldup.clone();\n    var vertAngle = dirFwdTmp.angleTo(vertical);\n    var vertLimit = THREE.Math.degToRad(5);\n    // If new angle is within limits then update values; otherwise ignore\n    if ( vertAngle >= vertLimit && vertAngle <= (Math.PI - vertLimit) ) {\n        directionFwd.applyQuaternion(pitchQ);\n        localCam.up.applyQuaternion(pitchQ);\n    }\n    }\n     if (dyawAngle) {\n    var yawQ = new THREE.Quaternion();\n    yawQ.setFromAxisAngle(_camera.worldup, -dyawAngle);\n    directionFwd.applyQuaternion(yawQ);\n    localCam.up.applyQuaternion(yawQ);\n    }\n     DISABLED **/\n\n    /** Discrete Camera Orientation\n     ** Movement based on the delta changes in position or cursor.  See the\n     ** the \"Dynamic Move\" code for an alternative.  In this mode the camera\n     ** is oriented based on the delta movement of the cursor.  Movement\n     ** stops as camera is oriented to new change of cursor.\n     ** TODO: Add logic to smooth motion so camera position ramps towards\n     ** the new location rather than discrete jumps.\n     **/\n\n    if (_deltaPitch != 0) {\n      var pitchQ = new THREE.Quaternion();\n      pitchQ.setFromAxisAngle(directionRight, -_deltaPitch);\n      // Need to limit pitch to +-85 degrees so we don't create\n      // camera jumping at vertical limits.\n      var dirFwdTmp = directionFwd.clone();\n      dirFwdTmp.applyQuaternion(pitchQ);\n\n      var vertical = _camera.worldup.clone();\n      var vertAngle = dirFwdTmp.angleTo(vertical);\n      var vertLimit = THREE.Math.degToRad(5);\n\n      // If new angle is within limits then update values; otherwise ignore\n      if (vertAngle >= vertLimit && vertAngle <= Math.PI - vertLimit) {\n        directionFwd.applyQuaternion(pitchQ);\n        localCam.up.applyQuaternion(pitchQ);\n      }\n\n      _deltaPitch = 0.0;\n    }\n\n    if (_deltaYaw != 0) {\n      var yawQ = new THREE.Quaternion();\n      yawQ.setFromAxisAngle(_camera.worldup, -_deltaYaw);\n      directionFwd.applyQuaternion(yawQ);\n      localCam.up.applyQuaternion(yawQ);\n      _deltaYaw = 0.0;\n    }\n\n    // Now calc new target location and if it changed.\n    newTarget = newPosition.clone().add(directionFwd);\n    //now fix newPosition for lockInPlane\n    var targetChanged = newTarget.distanceToSquared(_camera.target) !== 0;\n    // If position or target changed then update camera.\n    if (posChanged || targetChanged) {\n\n      _navapi.setView(newPosition, newTarget);\n      //_camera.position = newPosition.clone();\n      //_camera.target = newTarget.clone();\n      //_camera.dirty = true;s\n      // Force the camera to stay orientated up with world up.\n      _navapi.orientCameraUp();\n    }\n\n    //gamepad integration\n    if (_gamepadModule) {\n      _camera = _gamepadModule.update(_camera);\n    }\n\n    return _camera.dirty;\n\n\n  };\n  //ADP\n  var firstPersonToolUsed = function () {\n    if (!_trackToolUsed) {\n      avp.logger.track({ category: 'tool_used', name: 'FirstPerson_tool' });\n      _trackToolUsed = true;\n    }\n  };\n\n\n  /////////////////////////////////////////////////////////////////////////\n  // HUD helpers\n\n  // Show a HUD for a specific amount of time (showDelay > 0) or until closed.\n  var showHUD = function (messageSpecs, showDelay, closeCB, buttonCB, checkboxCB)\n  {\n    // TODO: Tool should not be trying to interact with UI\n    // Does not comply with headless viewer policy.\n    if (!Autodesk.Viewing.Private.HudMessage) {\n      return;\n    }\n\n    Autodesk.Viewing.Private.HudMessage.displayMessage(_container, messageSpecs, closeCB, buttonCB, checkboxCB);\n\n    if (showDelay > 0) {\n      _hudMessageStartShowTime = new Date().getTime();\n      _hudMessageShowTime = showDelay;\n    } else\n    {\n      _hudMessageStartShowTime = -1;\n      _hudMessageShowTime = 0;\n    }\n  };\n\n  var hideHUD = function ()\n  {\n    // TODO: Tool should not be trying to interact with UI\n    // Does not comply with headless viewer policy.\n    if (Autodesk.Viewing.Private.HudMessage) {\n      Autodesk.Viewing.Private.HudMessage.dismiss(); // in case it's still visible\n    }\n    _hudMessageStartShowTime = -1;\n  };\n\n  var showDraggingLookModeHUD = function (enabled)\n  {\n    hideHUD();\n\n    var themessage = enabled ?\n    \"Press the primary mouse button and drag to change the view orientation\" :\n    \"Move the cursor to change the view orientation\";\n\n    var messageSpecs = {\n      \"msgTitleKey\": \"First Person Tool\",\n      \"messageKey\": themessage,\n      \"messageDefaultValue\": themessage\n    };\n\n    var closeCallback = function () {}; // dummy callback function so that the 'X' is shown\n    showHUD(messageSpecs, 0, closeCallback);\n  };\n\n\n  var showHelpHUD = function ()\n  {\n    hideHUD();\n\n    // TODO: Sadly, the HudMessage api doesn't support html formatted messages\n    var messageSpecs = {\n      \"msgTitleKey\": \"First Person Tool\",\n      \"messageKey\": \"Use the WASD and QE keys to move\",\n      \"messageDefaultValue\": \"Use the WASD and QE keys to move\", // simplify key and remove peroid\n      \"buttonText\": \"Ok Got It\"\n    };\n\n    var closeCallback = function () {}; // dummy callback function so that the 'X' is shown\n    var buttonCallback = function () {\n      _bDontShowAgain_HelpHUD = true;\n      viewerapi.setFirstPersonToolPopup(false);\n      hideHUD();\n    };\n    showHUD(messageSpecs, 0, closeCallback, buttonCallback);\n  };\n\n  this.addCrosshair = function () {\n    if (avp.stringToDOM) {\n      this.crosshair = avp.stringToDOM('<div id=\"remote-crosshair\"><div class=\"crosshair-v\"></div><div class=\"crosshair-h\"></div></div>f');\n      viewerapi.canvasWrap.appendChild(this.crosshair);\n    }\n  };\n\n  this.removeCrosshair = function () {\n    if (this.crosshair && this.crosshair.parentNode) {\n      this.crosshair.parentNode.removeChild(this.crosshair);\n    }\n  };\n}\n\nav.GlobalManagerMixin.call(FirstPersonTool.prototype);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9leHRlbnNpb25zL0ZpcnN0UGVyc29uL0ZpcnN0UGVyc29uVG9vbC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF5RDtBQUN6RCxNQUFNQyxFQUFFLEdBQUdDLFFBQVEsQ0FBQ0MsT0FBTztBQUN2QjtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDVyxTQUFTQyxlQUFlQSxDQUFFQyxTQUFTLEVBQUc7O0VBRXpDLElBQUlDLEdBQUcsR0FBR0osUUFBUSxDQUFDQyxPQUFPLENBQUNJLE9BQU87O0VBRWxDLElBQUlDLE1BQU0sR0FBSUMsU0FBUyxDQUFDQyxTQUFTLENBQUNDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUU7RUFDekQsSUFBSUMsT0FBTyxHQUFHUCxTQUFTLENBQUNRLFVBQVU7RUFDbEMsSUFBSUMsVUFBVSxHQUFHVCxTQUFTLENBQUNVLFNBQVM7RUFDcEMsSUFBSUMsT0FBTyxHQUFHSixPQUFPLENBQUNLLFNBQVMsQ0FBQyxDQUFDO0VBQ2pDLElBQUlDLE1BQU0sR0FBRyxDQUFDLGFBQWEsQ0FBQzs7RUFFNUIsSUFBSSxDQUFDQyxnQkFBZ0IsQ0FBQ2QsU0FBUyxDQUFDZSxhQUFhLENBQUM7O0VBRTlDLElBQUlDLGNBQWMsR0FBRyxFQUFFQyxLQUFLLEVBQUUsQ0FBQyxFQUFFQyxHQUFHLEVBQUUsQ0FBQyxFQUFFQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFFO0VBQ3hELElBQUlDLEtBQUssR0FBR3ZCLFFBQVEsQ0FBQ0MsT0FBTyxDQUFDdUIsT0FBTzs7RUFFcEMsSUFBSUMsU0FBUyxHQUFHLEtBQUs7O0VBRXJCO0VBQ0E7RUFDQSxJQUFJQyxxQkFBcUIsR0FBRyxLQUFLOztFQUVqQztFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBLElBQUlDLHNCQUFzQixHQUFHLElBQUk7O0VBRWpDLElBQUlDLFdBQVcsR0FBRyxL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UyxHQUFHak4sR0FBRyxDQUFDZ04sV0FBVyxDQUFDLGtHQUFrRyxDQUFDO01BQ3BJak4sU0FBUyxDQUFDbU4sVUFBVSxDQUFDQyxXQUFXLENBQUMsSUFBSSxDQUFDRixTQUFTLENBQUM7SUFDcEQ7RUFDSixDQUFDOztFQUVELElBQUksQ0FBQ3pILGVBQWUsR0FBRyxZQUFXO0lBQzlCLElBQUksSUFBSSxDQUFDeUgsU0FBUyxJQUFJLElBQUksQ0FBQ0EsU0FBUyxDQUFDRyxVQUFVLEVBQUU7TUFDN0MsSUFBSSxDQUFDSCxTQUFTLENBQUNHLFVBQVUsQ0FBQ0MsV0FBVyxDQUFDLElBQUksQ0FBQ0osU0FBUyxDQUFDO0lBQ3pEO0VBQ0osQ0FBQztBQUNMOztBQUVBdE4sRUFBRSxDQUFDMk4sa0JBQWtCLENBQUNDLElBQUksQ0FBQ3pOLGVBQWUsQ0FBQzBOLFNBQVMsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL0F1dG9kZXNrLkV4dGVuc2lvbnMvLi9leHRlbnNpb25zL0ZpcnN0UGVyc29uL0ZpcnN0UGVyc29uVG9vbC5qcz83NzgwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdhbWVwYWRNb2R1bGUgfSBmcm9tICcuLi9HYW1lcGFkL0dhbWVwYWRNb2R1bGUnO1xuY29uc3QgYXYgPSBBdXRvZGVzay5WaWV3aW5nO1xuICAgIC8qXG4gICAgICogRmlyc3QgUGVyc29uIFZpZXcgdG9vbCBmb3IgTE1WXG4gICAgICpcbiAgICAgKiBUaGlzIHRvb2wgcHJvdmlkZXMgYSBmaXJzdCBwZXJzb24gdmlldyB3aXRoIG1vdmVtZW50IHVzaW5nIHRoZSBzdGFuZGFyZCBXQVNEIGtleXNcbiAgICAgKiB0byBmb3J3YXJkL2JhY2t3YXJkL2xlZnQvcmlnaHQgYW5kIHRoZSBRRSBrZXlzIHRvIG1vdmUgdmVydGljYWxseS4gIFRoZSBtb3VzZSBvclxuICAgICAqIGN1cnNvciBpcyB1c2VkIHRvIG9yaWVudCB0aGUgdmlldy4gIE1vdmVtZW50IGlzIGFsd2F5cyBhbG9uZyBvciBwZXJwZW5kaWN1bGFyIHRvXG4gICAgICogdGhlIHZpZXcgZGlyZWN0aW9uLlxuICAgICAqXG4gICAgICogVGhlIFNISUZUIGtleSBtYXkgYmUgdXNlZCB3aGVuIG1vdmluZyB0byBpbmNyZWFzZSB0aGUgc3BlZWQuICBPciB0aGUgZGVmYXVsdFxuICAgICAqIG1vdmVtZW50IHNwZWVkIG1heSBiZSBpbmNyZWFzZWQvZGVjcmVhc2VkIHdpdGggdGhlIE1JTlVTIG9yIEVRVUFMIGtleXMuICBUaGVcbiAgICAgKiBaRVJPICgwKSB3aWxsIHJlc2V0IHRvIHRoZSBkZWZhdWx0IHNwZWVkIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgSGFucyBLZWxsbmVyIChPY3QgMjAxNClcbiAgICAgKlxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBGaXJzdFBlcnNvblRvb2woIHZpZXdlcmFwaSApIHtcblxuICAgICAgICB2YXIgYXZwID0gQXV0b2Rlc2suVmlld2luZy5Qcml2YXRlO1xuXG4gICAgICAgIHZhciBfaXNNYWMgPSAobmF2aWdhdG9yLnVzZXJBZ2VudC5zZWFyY2goXCJNYWMgT1NcIikgIT0gLTEpO1xuICAgICAgICB2YXIgX25hdmFwaSA9IHZpZXdlcmFwaS5uYXZpZ2F0aW9uO1xuICAgICAgICB2YXIgX2NvbnRhaW5lciA9IHZpZXdlcmFwaS5jb250YWluZXI7XG4gICAgICAgIHZhciBfY2FtZXJhID0gX25hdmFwaS5nZXRDYW1lcmEoKTtcbiAgICAgICAgdmFyIF9uYW1lcyA9IFtcImZpcnN0cGVyc29uXCJdO1xuXG4gICAgICAgIHRoaXMuc2V0R2xvYmFsTWFuYWdlcih2aWV3ZXJhcGkuZ2xvYmFsTWFuYWdlcik7XG5cbiAgICAgICAgdmFyIF9tb2RpZmllclN0YXRlID0geyBTSElGVDogMCwgQUxUOiAwLCBDT05UUk9MOiAwIH07ICAvLyBUT0RPOiBVc2UgdGhlIGhvdGtleW1hbmFnZXIgZm9yIHRoZXNlLlxuICAgICAgICB2YXIgX2tleXMgPSBBdXRvZGVzay5WaWV3aW5nLktleUNvZGU7XG5cbiAgICAgICAgdmFyIF9pc0FjdGl2ZSA9IGZhbHNlO1xuXG4gICAgICAgIC8vIHRydWUgdG8gZGlzYWJsZSBtb3VzZSAmIGtleWJvYXJkIG5hdmlnYXRpb24uICBVc2VkIHdoZW4gYSBIVUQgaXMgdmlzaWJsZSB0byBzaW11bGF0ZVxuICAgICAgICAvLyBhIG1vZGFsIGRpYWxvZy5cbiAgICAgICAgdmFyIF9pZ25vcmVNb3VzZUFuZEtleU5hdiA9IGZhbHNlO1xuXG4gICAgICAgIC8vIGlmIHRydWUgdGhlbiBtb3VzZSBkcmFnIGNoYW5nZXMgdmlldyBvcmllbnRhdGlvbiwgb3RoZXJ3aXNlIGp1c3QgbW91c2UgbW92ZS5cbiAgICAgICAgLy8gSWYgdGhpcyBpcyBzZXQgdG8gZmFsc2UgdGhlbiBhdXRvLXRyYWNraW5nIGlzIGVuYWJsZWQgd2hpY2ggbWlnaHQgYmUgYSB1c2FiaWxpdHlcbiAgICAgICAgLy8gaXNzdWUgZGVwZW5kaW5nIG9uIHdoZXJlIHRoZSBjdXJzb3IgaXMgbG9jYXRlIHdoZW4gdGhlIHRvb2wgaXMgZW5hYmxlZC5cbiAgICAgICAgLy8gTW92ZW1lbnQgaXMgYmFzZWQgb24gdGhlIGRpc3RhbmNlIHRoZSBjdXJzb3IgaXMgbG9jYXRlZCBmcm9tIHRoZSBjZW50ZXIgb2ZcbiAgICAgICAgLy8gdGhlIHNjcmVlbi4gIElmIHRoZSBjdXJzb3IgaXMgYXdheSBmcm9tIGNlbnRlciB3aGVuIHRoZSB0b29sIGlzIGVuYWJsZWQgdGhlblxuICAgICAgICAvLyBpbiBhdXRvLXRyYWNraW5nIChub24tZHJhZykgbW9kZSB0aGUgY2FtZXJhIHdpbGwgYmVnaW4gbW92aW5nLiAgVGhpcyBtYXkgYmVcbiAgICAgICAgLy8gZGlzY29uY2VydGluZyB0byB0aGUgdXNlci5cbiAgICAgICAgdmFyIF9tb3VzZURyYWdnaW5nTG9va01vZGUgPSB0cnVlO1xuXG4gICAgICAgIHZhciBfaXNEcmFnZ2luZyA9IGZhbHNlO1xuICAgICAgICB2YXIgX3RvdWNoVHlwZSA9IG51bGw7XG5cbiAgICAgICAgdmFyIF9jbG9jayA9IG5ldyBUSFJFRS5DbG9jayh0cnVlKTtcblxuICAgICAgICB2YXIgX2h1ZE1lc3NhZ2VTdGFydFNob3dUaW1lID0gLTE7XG4gICAgICAgIHZhciBfaHVkTWVzc2FnZVNob3dUaW1lID0gNTAwMDsgICAgIC8vIG1pbGxpc2Vjb25kcyB0byBzaG93IEhVRFxuXG4gICAgICAgIHZhciBfbW9kZWxTY2FsZUZhY3RvciA9IDEuMDtcblxuICAgICAgICAvLyBUaGVzZSB2YWx1ZXMgZGVmaW5lIGhvdyBmYXN0L3Nsb3cgdGhlIGNhbWVyYSBtb3ZlbWVudHMgYXJlIG1hZGUuXG4gICAgICAgIC8vIEFkanVzdCB0aGVzZSB0byBmaW5lIHR1bmUgdGhlIG1vdmVtZW50LlxuICAgICAgICB2YXIgX21vdmVtZW50U3BlZWREZWZhdWx0ID0gMi4wO1xuICAgICAgICB2YXIgX21vdmVtZW50U3BlZWQgPSAyLjA7XG4gICAgICAgIHZhciBfd2hlZWxNb3ZlbWVudFNwZWVkID0gMS4wO1xuICAgICAgICB2YXIgX3ZlcnRpY2FsTW92ZW1lbnRTcGVlZCA9IDAuNTtcbiAgICAgICAgdmFyIF9sb29rU3BlZWQgPSAwLjAwMzU7XG5cbiAgICAgICAgdmFyIF93aGVlbERlbHRhID0gMDtcblxuICAgICAgICAvLyBDdXJyZW50IGN1cnNvclxuICAgICAgICB2YXIgX2xhc3RYID0gLTFlMjA7XG4gICAgICAgIHZhciBfbGFzdFkgPSAtMWUyMDtcblxuICAgICAgICAvLyBSZWxhdGl2ZSBtb3ZlbWVudFxuICAgICAgICB2YXIgX2RlbHRhWWF3ID0gMDtcbiAgICAgICAgdmFyIF9kZWx0YVBpdGNoID0gMDtcblxuICAgICAgICAvLyBLZXkgbW92ZW1lbnQgZmxhZ3NcbiAgICAgICAgdmFyIF9tb3ZlRm9yd2FyZCA9IGZhbHNlO1xuICAgICAgICB2YXIgX21vdmVCYWNrd2FyZCA9IGZhbHNlO1xuICAgICAgICB2YXIgX21vdmVMZWZ0ID0gZmFsc2U7XG4gICAgICAgIHZhciBfbW92ZVJpZ2h0ID0gZmFsc2U7XG4gICAgICAgIHZhciBfbW92ZVVwID0gZmFsc2U7XG4gICAgICAgIHZhciBfbW92ZURvd24gPSBmYWxzZTtcblxuICAgICAgICAvLyBQcmV2aW91cyBGT1YgYW5kIFBlcnNwZWN0aXZlIHNldHRpbmdzXG4gICAgICAgIHZhciBfcHJldmlvdXNGb3YgPSBfY2FtZXJhLmZvdjtcbiAgICAgICAgdmFyIF9yZXN0b3JlUHJldmlvdXNGb3YgPSBmYWxzZTtcblxuICAgICAgICB2YXIgX3dhc1BlcnNwZWN0aXZlID0gX2NhbWVyYS5pc1BlcnNwZWN0aXZlO1xuICAgICAgICB2YXIgX3Jlc3RvcmVQcmV2aW91c1BlcnNwZWN0aXZlID0gZmFsc2U7XG5cbiAgICAgICAgLy8gSGVscCBIVURcbiAgICAgICAgdmFyIF9iRG9udFNob3dBZ2Fpbl9IZWxwSFVEID0gZmFsc2U7XG5cbiAgICAgICAgLy9nYW1lcGFkXG4gICAgICAgIHZhciBfZ2FtZXBhZE1vZHVsZTtcbiAgICAgICAgLy9pZiB0aGlzIGJyb3dzZXIgc3VwcG9ydHMgZ2FtZXBhZCwgaW5zdGFudGlhdGUgR2FtZXBhZE1vZHVsZVxuICAgICAgICBpZihuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMgfHwgISFuYXZpZ2F0b3Iud2Via2l0R2V0R2FtZXBhZHMgfHwgISFuYXZpZ2F0b3Iud2Via2l0R2FtZXBhZHMpe1xuICAgICAgICAgICAgX2dhbWVwYWRNb2R1bGUgPSBuZXcgR2FtZXBhZE1vZHVsZSh2aWV3ZXJhcGkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9BRFBcbiAgICAgICAgdmFyIF90cmFja1Rvb2xVc2VkID0gZmFsc2U7XG5cbiAgICAgICAgLy8gVG9vbEludGVyZmFjZVxuXG4gICAgICAgIHRoaXMuaXNBY3RpdmUgPSBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiBfaXNBY3RpdmU7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXROYW1lcyA9IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIF9uYW1lcztcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmdldE5hbWUgPSBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiBfbmFtZXNbMF07XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5hY3RpdmF0ZSA9IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgX2Nsb2NrLnN0YXJ0KCk7XG5cbiAgICAgICAgICAgIC8vIFN3aXRjaCB0byBwZXJzcGVjdGl2ZVxuICAgICAgICAgICAgX3dhc1BlcnNwZWN0aXZlID0gX2NhbWVyYS5pc1BlcnNwZWN0aXZlO1xuICAgICAgICAgICAgX25hdmFwaS50b1BlcnNwZWN0aXZlKCk7XG5cbiAgICAgICAgICAgIC8vIENoYW5nZSBGT1YgdG8gYSB3aWRlIHZhbHVlIGZvciBhIGJldHRlciAxc3QgcGVyc29uIGV4cGVyaWVuY2VcbiAgICAgICAgICAgIF9wcmV2aW91c0ZvdiA9IF9jYW1lcmEuZm92O1xuICAgICAgICAgICAgX25hdmFwaS5zZXRWZXJ0aWNhbEZvdig3NSwgdHJ1ZSk7XG5cbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBhIG1vdmVtZW50IHNjYWxlIGZhY3RvciBiYXNlZCBvbiB0aGUgbW9kZWwgYm91bmRzLlxuICAgICAgICAgICAgdmFyIGJvdW5kc1NpemUgPSB2aWV3ZXJhcGkubW9kZWwuZ2V0Qm91bmRpbmdCb3goKS5nZXRTaXplKG5ldyBUSFJFRS5WZWN0b3IzKCkpO1xuICAgICAgICAgICAgX21vZGVsU2NhbGVGYWN0b3IgPSBNYXRoLm1heChNYXRoLm1pbihNYXRoLm1pbihib3VuZHNTaXplLngsYm91bmRzU2l6ZS55KSxib3VuZHNTaXplLnopIC8gMTAuMCwgMC4wMDAxKTtcblxuICAgICAgICAgICAgLy8gSEFDSzogUGxhY2UgZm9jdXMgaW4gY2FudmFzIHNvIHdlIGdldCBrZXkgZXZlbnRzLlxuICAgICAgICAgICAgdmlld2VyYXBpLmNhbnZhcy5mb2N1cygpO1xuXG4gICAgICAgICAgICBfaXNBY3RpdmUgPSB0cnVlO1xuXG4gICAgICAgICAgICAvLyBEaXNwbGF5IHRoZSBIVUQgb24gc3RhcnR1cCBidXQgb25seSBpZiBcImRvbid0IHNob3cgbWUgYWdhaW5cIiB3YXNuJ3QgcmVxdWVzdGVkXG4gICAgICAgICAgICBpZiAodmlld2VyYXBpLmdldEZpcnN0UGVyc29uVG9vbFBvcHVwKCkgJiYgIV9iRG9udFNob3dBZ2Fpbl9IZWxwSFVEKSB7XG4gICAgICAgICAgICAgICAgc2hvd0hlbHBIVUQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5hZGRDcm9zc2hhaXIoKTtcblxuICAgICAgICAgICAgdmlld2VyYXBpLmltcGwucGF1c2VIaWdobGlnaHQodHJ1ZSk7XG5cbiAgICAgICAgICAgIGlmIChfZ2FtZXBhZE1vZHVsZSkge1xuICAgICAgICAgICAgICAgIF9nYW1lcGFkTW9kdWxlLmFjdGl2YXRlKHRoaXMuZ2V0TmFtZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmRlYWN0aXZhdGUgPSBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIF9pc0FjdGl2ZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICBfY2xvY2suc3RvcCgpO1xuXG4gICAgICAgICAgICBoaWRlSFVEKCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUNyb3NzaGFpcigpO1xuXG4gICAgICAgICAgICBpZiAoX3Jlc3RvcmVQcmV2aW91c0Zvdikge1xuICAgICAgICAgICAgICAgIF9uYXZhcGkuc2V0VmVydGljYWxGb3YoX3ByZXZpb3VzRm92LCB0cnVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKF9yZXN0b3JlUHJldmlvdXNQZXJzcGVjdGl2ZSkge1xuICAgICAgICAgICAgICAgIGlmICghX3dhc1BlcnNwZWN0aXZlKVxuICAgICAgICAgICAgICAgICAgICBfbmF2YXBpLnRvT3J0aG9ncmFwaGljKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZpZXdlcmFwaS5pbXBsLnBhdXNlSGlnaGxpZ2h0KGZhbHNlKTtcblxuICAgICAgICAgICAgaWYoX2dhbWVwYWRNb2R1bGUpXG4gICAgICAgICAgICAgICAgX2dhbWVwYWRNb2R1bGUuZGVhY3RpdmF0ZSgpO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXRDdXJzb3IgPSBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiBcInVybChkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJnQUFBQVlDQVlBQUFEZ2R6MzRBQUFBQm1KTFIwUUEvd0QvQVArZ3ZhZVRBQUFBQ1hCSVdYTUFBQXNUQUFBTEV3RUFtcHdZQUFBQUIzUkpUVVVIM2dvT0ZRb1Fzem9oR0FBQUE5aEpSRUZVU01lZGxsMW9IR1VVaHA4enV6UDUyOTFwRXZOVG9tZ1ZqRkNDQ2EwTnBBcUpFSlRVRlZ2OHVXeFFMd0tDRjZJVXI3d0o2SjMwUXZCQ0FsWnNzQTBFa1lKYUFtMUZ3VTNpYWtyYlZOTnV1dGx1a2szZHpXeVQvWm5KN3VmRlR0b2tibXZYNzJZNDUrTjczL09lODg1OEkreFlTaWtCSkpGSTdBbUZRaDlhbHZWV29WQzQ3dlA1aG80Y09YSmVSR3dxV040eU9RMm9IaDBkUFJPSlJObzdPanFJUkNLUFJ4ZWlQNjZzckJ4U1NuMHZJc1gvUmFDVTBnRFYzOTl2TmpRMHRCOC9mcHhBSUVBc0Z1UDA2ZFBFWXJGdmdIcWd1RU14SXFMS2RVUGJtbkFyVTUyZG5iMm1hV0pVR2VSeU9XemJwcUd4Z1hnODdnT01uY0Rsd0xlMlk1dUN3Y0hCRnAvUDkwazRQRTM0OXhrV29sR2kwU2poUHk1aEYrVW1JRW9wei8xQXR4UmNxbUp6RFE4UDc3NTArV3E4ZTkrVFBHTGU0c1NwMzlqejlMTXN4bS9pekU2Z09WbnF1b0ljT0hEZ25kZGZlL1ZFVTNQTFdrVXpTQ1FTZXNDenhOdHZIS1p1MTFPMDEzN091VE1uZVlZMStsK3B4OTlzY2k1emdVKy9Qdi9aNU9Ua1dlQ3ZpZ2phMnRxcXJpMy9SUGJpTWZTV0x2WSsvd0o3WHd4Q09veXorZ1BGNUMwT3pzRlp2OE5FT094VTdLTDUrZmtjb29GVW85YXZZdCs0aHRUVTQzbm9KVlRtSVBZdnA4aG5DaFNLQ3IvZnIxVk1rRXFsQ2dFQVRVRFRBSVZ5a2hTV1J0ajRNNC9LS3paOVo5dTJlaENDYlZVWWhsRWF1cmc3bTA5TkIvR1dZaGUycjY5dlY4VUV2YjI5RGVJV0wrNnVJRzZ3NmIxU0dBcUYwaFVUWkRLWjdHTEt5MXcwaCtaMWtlUXVNRURPS2JLK29aRklKT3lLWnFDVUVzdXkvazRtazZrcjBaSDYvWjJDa3J0dEVsMVFqdUprS0kzejZLR3A2dlRGcFlvVm1LYVo5WGc4bGxlRG9xM0l6T2RCSUx1eWdiVmdzMllWU05yZ09NN28xTlRVUmtVRTdxdWZYMTVldm81QTBWSGNuck5SZ0ZnRkpGNmdzVm1udGxhSXhXS05JbEsvczhEL1ZDQWlhbloyOXNwbXYwdmZWb1Z1YU5UNlBZaFdNcEdJR0laaE5BR3RRQzNiYlhEZmo1MVlscldPYkhlT0t1M2RpZGZYMXgzYnRnR3FnQURndTVlYWZ5WFQ2WFQyem1ETG5WRGc5WHE5dXE1NzNmTWVRQWVxeStIdFRBZ2d1cTdoMGFVc2d5WkNKcFBaY0J4bkUxeHozZmhBQ3FwN2Vub2UrM1ppbVZnOGo2RUxpSUFDRVVFVFdFcm5zQ3dyRDJoMWRYVzZDKzRBMmEwMzNUMFZmUEQrZThkZVB2b0ZiMzZzTS9MektvbWtRMUZnTVczejduZUwzR2g2anRiVzFybWFtaHJETk0wTllBVklBWVd5bDA2WlB3b05lSGg2ZXZxSm1abVppVjh2bkNCdyt5TFJSQ3Y3Z2tkcGFtcjZhR2hvNkt1QmdRRm5mSHg4OFY3QVpRbGNFdDAxamdEK3NiR3gzVitPalBSMDdkOGZEUWFEbDFPcFZMSzd1OXN3VFhQMVFhN05md0NpNDZCSWFvUm1oQUFBQUFCSlJVNUVya0pnZ2c9PSksIGF1dG9cIjtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmFkanVzdFNwZWVkID0gZnVuY3Rpb24oIGRpcmVjdGlvbiApXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICggZGlyZWN0aW9uID09PSAwICkgeyAvLyByZXNldCB0byBkZWZhdWx0XG4gICAgICAgICAgICAgICAgX21vdmVtZW50U3BlZWQgPSBfbW92ZW1lbnRTcGVlZERlZmF1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBfbW92ZW1lbnRTcGVlZCAqPSAoZGlyZWN0aW9uID4gMCkgPyAgMS4xMCA6IDAuOTA7XG4gICAgICAgICAgICAgICAgaWYgKCBfbW92ZW1lbnRTcGVlZCA8IDAuMDEgKSB7XG4gICAgICAgICAgICAgICAgICAgIF9tb3ZlbWVudFNwZWVkID0gMC4wMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RXZlbnRNb2RpZmllclN0YXRlKGV2ZW50KVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoIF90b3VjaFR5cGUgKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgdmFyIGN0cmxLZXkgPSBldmVudC5jdHJsS2V5IHx8IChfaXNNYWMgJiYgZXZlbnQubWV0YUtleSk7XG4gICAgICAgICAgICB2YXIgbWV0YUtleSA9IGV2ZW50Lm1ldGFLZXkgJiYgIV9pc01hYztcblxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIk1vZCBrZXlzOiBjdHJsID0gXCIrY3RybEtleStcIiBtZXRhID0gXCIrbWV0YUtleStcIiBhbHReY3RybCA9IFwiKyAoZXZlbnQuYWx0S2V5IF4gY3RybEtleSkpO1xuXG4gICAgICAgICAgICByZXR1cm4gY3RybEtleSB8fCBtZXRhS2V5IHx8IGV2ZW50LnNoaWZ0S2V5IHx8IGV2ZW50LmFsdEtleTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgLy8gVG9vbCBldmVudCBoYW5kbGVyIGNhbGxiYWNrcyAtIGNhbiB1c2UgXCJ0aGlzXCIuXG5cbiAgICAgICAgdGhpcy5oYW5kbGVHZXN0dXJlID0gZnVuY3Rpb24oIGV2ZW50IClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gQ29udmVydCBIYW1tZXIgdG91Y2gtZXZlbnQgWCxZIGludG8gbW91c2UtZXZlbnQgWCxZLlxuICAgICAgICAgICAgaWYgKGV2ZW50LnBvaW50ZXJzICYmIGV2ZW50LnBvaW50ZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBldmVudC5wYWdlWCA9IGV2ZW50LnBvaW50ZXJzWzBdLnBhZ2VYO1xuICAgICAgICAgICAgICAgIGV2ZW50LnBhZ2VZID0gZXZlbnQucG9pbnRlcnNbMF0ucGFnZVk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN3aXRjaCggZXZlbnQudHlwZSApXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2FzZSBcImRyYWdzdGFydFwiOlxuICAgICAgICAgICAgICAgICAgICBfdG91Y2hUeXBlID0gXCJkcmFnXCI7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNpbmdsZSB0b3VjaCwgZmFrZSB0aGUgbW91c2UgZm9yIG5vdy4uLlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVCdXR0b25Eb3duKGV2ZW50LCAwKTtcblxuICAgICAgICAgICAgICAgIGNhc2UgXCJkcmFnbW92ZVwiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKF90b3VjaFR5cGUgPT09IFwiZHJhZ1wiKSA/IHRoaXMuaGFuZGxlTW91c2VNb3ZlKGV2ZW50KSA6IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgY2FzZSBcImRyYWdlbmRcIjpcbiAgICAgICAgICAgICAgICAgICAgaWYoIF90b3VjaFR5cGUgPT09IFwiZHJhZ1wiIClcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVCdXR0b25VcChldmVudCwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdG91Y2hUeXBlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuaGFuZGxlU2luZ2xlQ2xpY2sgPSBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmhhbmRsZUJ1dHRvbkRvd24gPSBmdW5jdGlvbiggZXZlbnQsIGJ1dHRvbiApXG4gICAgICAgIHtcbiAgICAgICAgICAgIGhpZGVIVUQoKTtcblxuICAgICAgICAgICAgdmFyIG1vZGlmaWVyU3RhdGUgPSBnZXRFdmVudE1vZGlmaWVyU3RhdGUoZXZlbnQpO1xuICAgICAgICAgICAgaWYgKGJ1dHRvbiA9PT0gMCAmJiAhbW9kaWZpZXJTdGF0ZSkge1xuXG4gICAgICAgICAgICAgICAgX2xhc3RYID0gZXZlbnQucGFnZVg7XG4gICAgICAgICAgICAgICAgX2xhc3RZID0gZXZlbnQucGFnZVk7XG5cbiAgICAgICAgICAgICAgICBfZGVsdGFZYXcgPSBfZGVsdGFQaXRjaCA9IDA7XG4gICAgICAgICAgICAgICAgX2lzRHJhZ2dpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTsgICAgLy8gRWF0IGFsbCB0aGVzZSBzbyBkZWZhdWx0IHRvb2xzIGRvbid0IHNjcmV3IHdpdGggdmlld1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuaGFuZGxlTW91c2VNb3ZlID0gZnVuY3Rpb24oIGV2ZW50IClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGR4ID0gKF9sYXN0WCA8IC0xZTEwKSA/IDAgOiBldmVudC5wYWdlWCAtIF9sYXN0WDtcbiAgICAgICAgICAgIHZhciBkeSA9IChfbGFzdFkgPCAtMWUxMCkgPyAwIDogZXZlbnQucGFnZVkgLSBfbGFzdFk7XG4gICAgICAgICAgICBfbGFzdFggPSBldmVudC5wYWdlWDtcbiAgICAgICAgICAgIF9sYXN0WSA9IGV2ZW50LnBhZ2VZO1xuXG4gICAgICAgICAgICBpZiAoIChfaXNEcmFnZ2luZyA9PT0gX21vdXNlRHJhZ2dpbmdMb29rTW9kZSkgJiYgIV9pZ25vcmVNb3VzZUFuZEtleU5hdilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyBKb3lzdGljayBDYW1lcmEgT3JpZW50YXRpb25cbiAgICAgICAgICAgICAgICAvKiogRElTQUJMRURcbiAgICAgICAgICAgICAgICAgdmFyIHhOZXcgPSBldmVudC5wYWdlWCAtIHdpbmRvdy5pbm5lcldpZHRoIC8gMjtcbiAgICAgICAgICAgICAgICAgdmFyIHlOZXcgPSBldmVudC5wYWdlWSAtIHdpbmRvdy5pbm5lckhlaWdodCAvIDI7XG4gICAgICAgICAgICAgICAgIGlmIChfbW91c2VEcmFnZ2luZ0xvb2tNb2RlKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgaW4gZHJhZyBtb2RlIHRoZW4gbW92ZW1lbnQgaXMgcmVsYXRpdmUgdG8gc3RhcnQgcG9pbnRcbiAgICAgICAgICAgICAgICBfbW91c2VEWCA9IHhOZXcgLSBfbW91c2VYc3RhcnQ7XG4gICAgICAgICAgICAgICAgX21vdXNlRFkgPSB5TmV3IC0gX21vdXNlWXN0YXJ0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBfbW91c2VEWCA9IHhOZXc7XG4gICAgICAgICAgICAgICAgX21vdXNlRFkgPSB5TmV3O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAvLyBBIGNpcmN1bGFyIGFyZWEgaW4gdGhlIG1pZGRsZSBvZiB0aGUgc2NyZWVuIG9yIGFyb3VuZCB0aGUgc3RhcnQgcG9pbnRcbiAgICAgICAgICAgICAgICAgLy8gZGVmaW5lcyBhIG5ldXRyYWwgYXJlYSBpbiB3aGljaCBubyBtb3ZlbWVudCBvY2N1cnMuXG4gICAgICAgICAgICAgICAgIHZhciBtb3VzZU1vdmVEaXN0ID0gTWF0aC5zcXJ0KCBfbW91c2VEWCAqIF9tb3VzZURYICsgX21vdXNlRFkgKiBfbW91c2VEWSApO1xuICAgICAgICAgICAgICAgICBpZiAoIG1vdXNlTW92ZURpc3QgPCBfbmV1dHJhbFpvbmVEaXN0ICkge1xuICAgICAgICAgICAgICAgIF9tb3VzZURYID0gX21vdXNlRFkgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICBESVNBQkxFRCAqKi9cblxuICAgICAgICAgICAgICAgICAgICAvLyBEaXNjcmV0ZSBDYW1lcmEgT3JpZW50YXRpb25cbiAgICAgICAgICAgICAgICBfZGVsdGFZYXcgICArPSBkeCAqIF9sb29rU3BlZWQ7XG4gICAgICAgICAgICAgICAgX2RlbHRhUGl0Y2ggKz0gZHkgKiBfbG9va1NwZWVkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTsgICAgLy8gRWF0IGFsbCB0aGVzZSBzbyBkZWZhdWx0IHRvb2xzIGRvbid0IHNjcmV3IHdpdGggdmlld1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuaGFuZGxlQnV0dG9uVXAgPSBmdW5jdGlvbiggZXZlbnQsIGJ1dHRvbiApXG4gICAgICAgIHtcblxuICAgICAgICAgICAgLy8gSWYgYXJlIGRyYWdnaW5nIGZvciBhIHNwZWNpZmljIGJ1dHRvbiB0aGVuIGVuZCBkcmFnZ2luZyBubyBtYXR0ZXJcbiAgICAgICAgICAgIC8vIHdoYXQgdGhlIHN0YXRlIG9mIHRoZSBtb2RpZmllcnMuICBPdGhlcndpc2UgeW91IHdvbid0IGVuZCBkcmFnZ2luZy5cbiAgICAgICAgICAgIGlmIChidXR0b24gPT09IDAgJiYgX2lzRHJhZ2dpbmcpIHtcbiAgICAgICAgICAgICAgICBfZGVsdGFZYXcgPSBfZGVsdGFQaXRjaCA9IDA7XG4gICAgICAgICAgICAgICAgX2lzRHJhZ2dpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7ICAgIC8vIEVhdCBhbGwgdGhlc2Ugc28gZGVmYXVsdCB0b29scyBkb24ndCBzY3JldyB3aXRoIHZpZXdcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmhhbmRsZUtleURvd24gPSBmdW5jdGlvbiggZXZlbnQsIGtleUNvZGUgKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoX2lnbm9yZU1vdXNlQW5kS2V5TmF2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBoaWRlSFVEKCk7XG5cbiAgICAgICAgICAgIHZhciBoYW5kbGVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHN3aXRjaCgga2V5Q29kZSApXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2FzZSBfa2V5cy5FU0NBUEU6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSBfa2V5cy5UQUI6IGhhbmRsZWQgPSBmYWxzZTsgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAvLyBFYXQgdGhlIG1vZGlmaWVycyBzbyBkZWZ1YWx0IHRvb2xzIGRvbid0IGFjdGl2YXRlIGFuZCBtZXNzIHdpdGggY2FtXG4gICAgICAgICAgICAgICAgY2FzZSBfa2V5cy5TSElGVDogICBfbW9kaWZpZXJTdGF0ZS5TSElGVCA9IDE7ICAgaGFuZGxlZCA9IHRydWU7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgX2tleXMuQ09OVFJPTDogX21vZGlmaWVyU3RhdGUuQ09OVFJPTCA9IDE7IGhhbmRsZWQgPSB0cnVlOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIF9rZXlzLkFMVDogICAgIF9tb2RpZmllclN0YXRlLkFMVCA9IDE7ICAgICBoYW5kbGVkID0gdHJ1ZTsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBfa2V5cy5TUEFDRTogICBfbW9kaWZpZXJTdGF0ZS5TUEFDRSA9IDE7ICAgaGFuZGxlZCA9IHRydWU7IGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSBfa2V5cy5FUVVBTFM6IHRoaXMuYWRqdXN0U3BlZWQoMSk7ICBoYW5kbGVkID0gdHJ1ZTsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBfa2V5cy5EQVNIOiAgIHRoaXMuYWRqdXN0U3BlZWQoLTEpOyBoYW5kbGVkID0gdHJ1ZTsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBfa2V5cy5aRVJPOiAgIHRoaXMuYWRqdXN0U3BlZWQoMCk7ICBoYW5kbGVkID0gdHJ1ZTsgYnJlYWs7IC8vIFJlc2V0IGRvbGx5IHNwZWVkIHRvIGRlZmF1bHRcblxuICAgICAgICAgICAgICAgIGNhc2UgX2tleXMuVVA6XG4gICAgICAgICAgICAgICAgY2FzZSBfa2V5cy53OlxuICAgICAgICAgICAgICAgICAgICBfbW92ZUZvcndhcmQgPSB0cnVlOyBoYW5kbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlIF9rZXlzLkxFRlQ6XG4gICAgICAgICAgICAgICAgY2FzZSBfa2V5cy5hOlxuICAgICAgICAgICAgICAgICAgICBfbW92ZUxlZnQgPSB0cnVlOyBoYW5kbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlIF9rZXlzLkRPV046XG4gICAgICAgICAgICAgICAgY2FzZSBfa2V5cy5zOlxuICAgICAgICAgICAgICAgICAgICBfbW92ZUJhY2t3YXJkID0gdHJ1ZTsgaGFuZGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSBfa2V5cy5SSUdIVDpcbiAgICAgICAgICAgICAgICBjYXNlIF9rZXlzLmQ6XG4gICAgICAgICAgICAgICAgICAgIF9tb3ZlUmlnaHQgPSB0cnVlOyBoYW5kbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlIF9rZXlzLnE6XG4gICAgICAgICAgICAgICAgICAgIF9tb3ZlVXAgPSB0cnVlOyBoYW5kbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlIF9rZXlzLmU6XG4gICAgICAgICAgICAgICAgICAgIF9tb3ZlRG93biA9IHRydWU7IGhhbmRsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgX2tleXMuZzpcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSBfa2V5cy5GMTpcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlZDtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmhhbmRsZUtleVVwID0gZnVuY3Rpb24oIGV2ZW50LCBrZXlDb2RlIClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKF9pZ25vcmVNb3VzZUFuZEtleU5hdikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGhhbmRsZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgc3dpdGNoKCBrZXlDb2RlIClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjYXNlIF9rZXlzLlRBQjpcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIC8vIEVhdCB0aGUgbW9kaWZpZXJzIHNvIGRlZnVhbHQgdG9vbHMgZG9uJ3QgYWN0aXZhdGUgYW5kIG1lc3Mgd2l0aCBjYW1cbiAgICAgICAgICAgICAgICBjYXNlIF9rZXlzLlNISUZUOiAgIF9tb2RpZmllclN0YXRlLlNISUZUID0gMDsgICBoYW5kbGVkID0gdHJ1ZTsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBfa2V5cy5DT05UUk9MOiBfbW9kaWZpZXJTdGF0ZS5DT05UUk9MID0gMDsgaGFuZGxlZCA9IHRydWU7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgX2tleXMuQUxUOiAgICAgX21vZGlmaWVyU3RhdGUuQUxUID0gMDsgICAgIGhhbmRsZWQgPSB0cnVlOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIF9rZXlzLlNQQUNFOiAgIF9tb2RpZmllclN0YXRlLlNQQUNFID0gMDsgICBoYW5kbGVkID0gdHJ1ZTsgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlIF9rZXlzLlVQOlxuICAgICAgICAgICAgICAgIGNhc2UgX2tleXMudzpcbiAgICAgICAgICAgICAgICAgICAgX21vdmVGb3J3YXJkID0gZmFsc2U7IGhhbmRsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBmaXJzdFBlcnNvblRvb2xVc2VkKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSBfa2V5cy5MRUZUOlxuICAgICAgICAgICAgICAgIGNhc2UgX2tleXMuYTpcbiAgICAgICAgICAgICAgICAgICAgX21vdmVMZWZ0ID0gZmFsc2U7IGhhbmRsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBmaXJzdFBlcnNvblRvb2xVc2VkKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSBfa2V5cy5ET1dOOlxuICAgICAgICAgICAgICAgIGNhc2UgX2tleXMuczpcbiAgICAgICAgICAgICAgICAgICAgX21vdmVCYWNrd2FyZCA9IGZhbHNlOyBoYW5kbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RQZXJzb25Ub29sVXNlZCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgX2tleXMuUklHSFQ6XG4gICAgICAgICAgICAgICAgY2FzZSBfa2V5cy5kOlxuICAgICAgICAgICAgICAgICAgICBfbW92ZVJpZ2h0ID0gZmFsc2U7IGhhbmRsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBmaXJzdFBlcnNvblRvb2xVc2VkKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSBfa2V5cy5xOlxuICAgICAgICAgICAgICAgICAgICBfbW92ZVVwID0gZmFsc2U7IGhhbmRsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBmaXJzdFBlcnNvblRvb2xVc2VkKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSBfa2V5cy5lOlxuICAgICAgICAgICAgICAgICAgICBfbW92ZURvd24gPSBmYWxzZTsgaGFuZGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0UGVyc29uVG9vbFVzZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlIF9rZXlzLmc6XG4gICAgICAgICAgICAgICAgICAgIF9tb3VzZURyYWdnaW5nTG9va01vZGUgPSAhX21vdXNlRHJhZ2dpbmdMb29rTW9kZTtcbiAgICAgICAgICAgICAgICAgICAgc2hvd0RyYWdnaW5nTG9va01vZGVIVUQoX21vdXNlRHJhZ2dpbmdMb29rTW9kZSk7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgX2tleXMuRjE6XG4gICAgICAgICAgICAgICAgICAgIHNob3dIZWxwSFVEKCk7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZWQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5oYW5kbGVXaGVlbElucHV0ID0gZnVuY3Rpb24oZGVsdGEpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChfaWdub3JlTW91c2VBbmRLZXlOYXYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICggX25hdmFwaS5nZXRSZXZlcnNlWm9vbURpcmVjdGlvbigpIClcbiAgICAgICAgICAgICAgICBkZWx0YSAqPSAtMTtcblxuICAgICAgICAgICAgX3doZWVsRGVsdGEgKz0gZGVsdGE7XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuaGFuZGxlU2luZ2xlQ2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmhhbmRsZURvdWJsZUNsaWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5oYW5kbGVTaW5nbGVUYXAgPSBmdW5jdGlvbiggZXZlbnQgKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVTaW5nbGVDbGljayhldmVudCwgMCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5oYW5kbGVEb3VibGVUYXAgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmhhbmRsZUJsdXIgPSBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIFJlc2V0IHRoaW5ncyB3aGVuIHdlIGxvc2UgZm9jdXMuLi5cbiAgICAgICAgICAgIF9tb3ZlRm9yd2FyZCA9IF9tb3ZlQmFja3dhcmQgPSBmYWxzZTtcbiAgICAgICAgICAgIF9tb3ZlTGVmdCA9IF9tb3ZlUmlnaHQgPSBmYWxzZTtcbiAgICAgICAgICAgIF9tb3ZlVXAgPSBfbW92ZURvd24gPSBmYWxzZTtcblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMudXBkYXRlID0gZnVuY3Rpb24oKVxuICAgICAgICB7XG5cbiAgICAgICAgICAgIGlmICghX2lzQWN0aXZlIHx8ICFfbmF2YXBpLmlzQWN0aW9uRW5hYmxlZCgnd2FsaycpKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgdmFyIGRlbHRhID0gX2Nsb2NrLmdldERlbHRhKCk7Ly9yZXR1cm5zIGRlbHRhIGluIHVuaXQgc2Vjb25kc1xuXG4gICAgICAgICAgICBpZiAoX2h1ZE1lc3NhZ2VTdGFydFNob3dUaW1lID4gLTEpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VyVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICAgIGlmIChjdXJUaW1lIC0gX2h1ZE1lc3NhZ2VTdGFydFNob3dUaW1lID4gX2h1ZE1lc3NhZ2VTaG93VGltZSkgeyAvLyBzZWNvbmRzXG4gICAgICAgICAgICAgICAgICAgIGhpZGVIVUQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEZyb20gdGhlIENvbGxhYm9yYXRpb24gZXh0ZW5zaW9uOlxuICAgICAgICAgICAgLy90aGUgXCJnbyBob21lXCIgY2FsbCBtYXkgY2hhbmdlIHRoZSBjYW1lcmEgYmFjayB0byBvcnRoby4uLiBhbmQgd2UgY2FuJ3QgZG8gb3J0aG8gd2hpbGUgd2Fsa2luZy4uLlxuICAgICAgICAgICAgLy9IQUNLOiBSZWFsbHksIHRoZSBob21lIHZpZXcgc2hvdWxkIGJlIHNldCBvbmNlIHdoZW4gbGF1bmNoIHRoZSBleHRlbnNpb24sIHRoZW4gc2V0IGl0IGJhY2suXG4gICAgICAgICAgICBpZiAoIV9jYW1lcmEuaXNQZXJzcGVjdGl2ZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTG9zdCBwZXJzcGVjdGl2ZSBtb2RlOiByZXNldHRpbmcgdmlldy5cIik7XG4gICAgICAgICAgICAgICAgX25hdmFwaS50b1BlcnNwZWN0aXZlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBsb2NhbENhbSA9IF9jYW1lcmEuY2xvbmUoKTsgICAvLyBDb3B5IG9mIGNhbWVyYSB0byBtb2RpZnlcblxuICAgICAgICAgICAgLy8gSGFuZGxlIG1vdmVtZW50IGNoYW5nZXNcblxuICAgICAgICAgICAgdmFyIGFjdHVhbE1vdmVTcGVlZCAgICAgICAgID0gZGVsdGEgKiBfbW92ZW1lbnRTcGVlZCAgICAgICAgICogX21vZGVsU2NhbGVGYWN0b3IgKiAoX21vZGlmaWVyU3RhdGUuU0hJRlQgPT09IDEgPyA0IDogMSk7XG4gICAgICAgICAgICB2YXIgYWN0dWFsVmVydGljYWxNb3ZlU3BlZWQgPSBkZWx0YSAqIF92ZXJ0aWNhbE1vdmVtZW50U3BlZWQgKiBfbW9kZWxTY2FsZUZhY3RvciAqIChfbW9kaWZpZXJTdGF0ZS5TSElGVCA9PT0gMSA/IDQgOiAxKTtcblxuXG4gICAgICAgICAgICBpZiAoX3doZWVsRGVsdGEgIT0gMCkge1xuICAgICAgICAgICAgICAgIHZhciBhY3R1YWxXaGVlbE1vdmVTcGVlZCA9IF93aGVlbERlbHRhICogX3doZWVsTW92ZW1lbnRTcGVlZCAqIF9tb2RlbFNjYWxlRmFjdG9yICogKF9tb2RpZmllclN0YXRlLlNISUZUID09PSAxID8gNCA6IDEpO1xuICAgICAgICAgICAgICAgIGxvY2FsQ2FtLnRyYW5zbGF0ZVooIC1hY3R1YWxXaGVlbE1vdmVTcGVlZCApO1xuICAgICAgICAgICAgICAgIF93aGVlbERlbHRhID0gMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCBfbW92ZUZvcndhcmQgKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxDYW0udHJhbnNsYXRlWigtYWN0dWFsTW92ZVNwZWVkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCBfbW92ZUJhY2t3YXJkICkge1xuICAgICAgICAgICAgICAgIGxvY2FsQ2FtLnRyYW5zbGF0ZVooIGFjdHVhbE1vdmVTcGVlZCApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIF9tb3ZlTGVmdCApIHtcbiAgICAgICAgICAgICAgICBsb2NhbENhbS50cmFuc2xhdGVYKCAtYWN0dWFsTW92ZVNwZWVkICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICggX21vdmVSaWdodCApIHtcbiAgICAgICAgICAgICAgICBsb2NhbENhbS50cmFuc2xhdGVYKCBhY3R1YWxNb3ZlU3BlZWQgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCBfbW92ZVVwICkge1xuICAgICAgICAgICAgICAgIGxvY2FsQ2FtLnRyYW5zbGF0ZVkoIGFjdHVhbFZlcnRpY2FsTW92ZVNwZWVkICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICggX21vdmVEb3duICkge1xuICAgICAgICAgICAgICAgIGxvY2FsQ2FtLnRyYW5zbGF0ZVkoIC1hY3R1YWxWZXJ0aWNhbE1vdmVTcGVlZCApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgbmV3UG9zaXRpb24gPSBsb2NhbENhbS5wb3NpdGlvbjtcbiAgICAgICAgICAgIHZhciBwb3NDaGFuZ2VkID0gKG5ld1Bvc2l0aW9uLmRpc3RhbmNlVG9TcXVhcmVkKF9jYW1lcmEucG9zaXRpb24pICE9PSAwKTtcblxuICAgICAgICAgICAgLy8gSGFuZGxlIGxvb2sgY2hhbmdlc1xuXG4gICAgICAgICAgICAvLyB2YXIgYWN0dWFsTG9va1NwZWVkID0gZGVsdGEgKiBfbG9va1NwZWVkO1xuXG4gICAgICAgICAgICB2YXIgbmV3VGFyZ2V0ID0gbG9jYWxDYW0udGFyZ2V0O1xuXG4gICAgICAgICAgICB2YXIgZGlyZWN0aW9uRndkID0gX2NhbWVyYS50YXJnZXQuY2xvbmUoKS5zdWIoX2NhbWVyYS5wb3NpdGlvbik7XG4gICAgICAgICAgICAvL2RpcmVjdGlvbkZ3ZCA9IGRpcmVjdGlvbkZ3ZC5zdWIoKGRpcmVjdGlvbkZ3ZC5tdWx0aXBseShfY2FtZXJhLndvcmxkdXApKS5tdWx0aXBseShfY2FtZXJhLndvcmxkdXApKTtcblxuICAgICAgICAgICAgdmFyIGRpcmVjdGlvblJpZ2h0ID0gZGlyZWN0aW9uRndkLmNsb25lKCkuY3Jvc3MoX2NhbWVyYS51cCkubm9ybWFsaXplKCk7XG5cbiAgICAgICAgICAgIC8qKiBKb3lzdGljayBDYW1lcmEgT3JpZW50YXRpb25cbiAgICAgICAgICAgICAqKiBUaGlzIGNvZGUgZW5hYmxlZCBjb250aW51b3VzIG1vdmVtZW50IG9mIGNhbWVyYSBhcyBhcHBvc2VkIHRvIHRoZVxuICAgICAgICAgICAgICoqIGRpc2NyZXRlIG1vdmVtZW50IG1vZGUgYmVsb3cuICBNb3ZpbmcgdGhlIGN1cnNvciBvdXRzaWRlIG9mIHRoZVxuICAgICAgICAgICAgICoqIGNlbnRlciBvZiB0aGUgdmlldyBvcmllbnRzIHRoZSBjYW1lcmEgaW4gdGhhdCBkaXJlY3Rpb24gYW5kIGNvbnRpbnVlc1xuICAgICAgICAgICAgICoqIG1vdmluZyB3aGlsZSBjdXJzb3IgaXMgb3V0c2lkZSBuZXV0cmFsIGNlbnRlci4gIEl0IHdvcmtzIGxpa2UgYVxuICAgICAgICAgICAgICoqIHZpcnR1YWwgam95c3RpY2suXG4gICAgICAgICAgICAgKipcbiAgICAgICAgICAgICAqKiBVbmNvbW1lbnQvQ29tbWVudCB0aGVzZSBzZWN0aW9ucyB0byBzd2l0Y2ggdGhlIHN0eWxlIG9mIGNhbWVyYSBvcmllbnRhdGlvbi5cbiAgICAgICAgICAgICAqKi9cblxuICAgICAgICAgICAgLyoqIERJU0FCTEVEXG4gICAgICAgICAgICAgdmFyIGR5YXdBbmdsZSA9IDAsIGRwaXRjaEFuZ2xlID0gMDtcbiAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoX21vdXNlRFgpID4gX25ldXRyYWxab25lRGlzdCkge1xuICAgICAgICAgICAgaWYgKF9tb3VzZURYID4gMCkge1xuICAgICAgICAgICAgICAgIF9tb3VzZURYID0gTWF0aC5taW4oX21vdXNlRFgsIF9tb3VzZVhNYXhMaW1pdCk7IC8vIFRocm90dGxlIGxvb2sgc3BlZWQuXG4gICAgICAgICAgICAgICAgZHlhd0FuZ2xlID0gKF9tb3VzZURYIC0gX25ldXRyYWxab25lRGlzdCkgKiBhY3R1YWxMb29rU3BlZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBfbW91c2VEWCA9IE1hdGgubWF4KF9tb3VzZURYLCAtX21vdXNlWE1heExpbWl0KTsgLy8gVGhyb3R0bGUgbG9vayBzcGVlZC5cbiAgICAgICAgICAgICAgICBkeWF3QW5nbGUgPSAoX21vdXNlRFggKyBfbmV1dHJhbFpvbmVEaXN0KSAqIGFjdHVhbExvb2tTcGVlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAgICAgIGlmIChNYXRoLmFicyhfbW91c2VEWSkgPiBfbmV1dHJhbFpvbmVEaXN0KSB7XG4gICAgICAgICAgICBpZiAoX21vdXNlRFkgPiAwKSB7XG4gICAgICAgICAgICAgICAgX21vdXNlRFkgPSBNYXRoLm1pbihfbW91c2VEWSwgX21vdXNlWU1heExpbWl0KTsgLy8gVGhyb3R0bGUgbG9vayBzcGVlZC5cbiAgICAgICAgICAgICAgICBkcGl0Y2hBbmdsZSA9IChfbW91c2VEWSAtIF9uZXV0cmFsWm9uZURpc3QpICogYWN0dWFsTG9va1NwZWVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgX21vdXNlRFkgPSBNYXRoLm1heChfbW91c2VEWSwgLV9tb3VzZVlNYXhMaW1pdCk7IC8vIFRocm90dGxlIGxvb2sgc3BlZWQuXG4gICAgICAgICAgICAgICAgZHBpdGNoQW5nbGUgPSAoX21vdXNlRFkgKyBfbmV1dHJhbFpvbmVEaXN0KSAqIGFjdHVhbExvb2tTcGVlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAgICAgIGlmIChkcGl0Y2hBbmdsZSkge1xuICAgICAgICAgICAgdmFyIHBpdGNoUSA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCk7XG4gICAgICAgICAgICBwaXRjaFEuc2V0RnJvbUF4aXNBbmdsZShkaXJlY3Rpb25SaWdodCwgLWRwaXRjaEFuZ2xlKTtcbiAgICAgICAgICAgIC8vIE5lZWQgdG8gbGltaXQgcGl0Y2ggdG8gKy04NSBkZWdyZWVzIHNvIHdlIGRvbid0IGNyZWF0ZVxuICAgICAgICAgICAgLy8gY2FtZXJhIGp1bXBpbmcgYXQgdmVydGljYWwgbGltaXRzLlxuICAgICAgICAgICAgdmFyIGRpckZ3ZFRtcCA9IGRpcmVjdGlvbkZ3ZC5jbG9uZSgpO1xuICAgICAgICAgICAgZGlyRndkVG1wLmFwcGx5UXVhdGVybmlvbihwaXRjaFEpO1xuICAgICAgICAgICAgdmFyIHZlcnRpY2FsID0gX2NhbWVyYS53b3JsZHVwLmNsb25lKCk7XG4gICAgICAgICAgICB2YXIgdmVydEFuZ2xlID0gZGlyRndkVG1wLmFuZ2xlVG8odmVydGljYWwpO1xuICAgICAgICAgICAgdmFyIHZlcnRMaW1pdCA9IFRIUkVFLk1hdGguZGVnVG9SYWQoNSk7XG4gICAgICAgICAgICAvLyBJZiBuZXcgYW5nbGUgaXMgd2l0aGluIGxpbWl0cyB0aGVuIHVwZGF0ZSB2YWx1ZXM7IG90aGVyd2lzZSBpZ25vcmVcbiAgICAgICAgICAgIGlmICggdmVydEFuZ2xlID49IHZlcnRMaW1pdCAmJiB2ZXJ0QW5nbGUgPD0gKE1hdGguUEkgLSB2ZXJ0TGltaXQpICkge1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbkZ3ZC5hcHBseVF1YXRlcm5pb24ocGl0Y2hRKTtcbiAgICAgICAgICAgICAgICBsb2NhbENhbS51cC5hcHBseVF1YXRlcm5pb24ocGl0Y2hRKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAgICAgIGlmIChkeWF3QW5nbGUpIHtcbiAgICAgICAgICAgIHZhciB5YXdRID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oKTtcbiAgICAgICAgICAgIHlhd1Euc2V0RnJvbUF4aXNBbmdsZShfY2FtZXJhLndvcmxkdXAsIC1keWF3QW5nbGUpO1xuICAgICAgICAgICAgZGlyZWN0aW9uRndkLmFwcGx5UXVhdGVybmlvbih5YXdRKTtcbiAgICAgICAgICAgIGxvY2FsQ2FtLnVwLmFwcGx5UXVhdGVybmlvbih5YXdRKTtcbiAgICAgICAgfVxuICAgICAgICAgICAgIERJU0FCTEVEICoqL1xuXG4gICAgICAgICAgICAvKiogRGlzY3JldGUgQ2FtZXJhIE9yaWVudGF0aW9uXG4gICAgICAgICAgICAgKiogTW92ZW1lbnQgYmFzZWQgb24gdGhlIGRlbHRhIGNoYW5nZXMgaW4gcG9zaXRpb24gb3IgY3Vyc29yLiAgU2VlIHRoZVxuICAgICAgICAgICAgICoqIHRoZSBcIkR5bmFtaWMgTW92ZVwiIGNvZGUgZm9yIGFuIGFsdGVybmF0aXZlLiAgSW4gdGhpcyBtb2RlIHRoZSBjYW1lcmFcbiAgICAgICAgICAgICAqKiBpcyBvcmllbnRlZCBiYXNlZCBvbiB0aGUgZGVsdGEgbW92ZW1lbnQgb2YgdGhlIGN1cnNvci4gIE1vdmVtZW50XG4gICAgICAgICAgICAgKiogc3RvcHMgYXMgY2FtZXJhIGlzIG9yaWVudGVkIHRvIG5ldyBjaGFuZ2Ugb2YgY3Vyc29yLlxuICAgICAgICAgICAgICoqIFRPRE86IEFkZCBsb2dpYyB0byBzbW9vdGggbW90aW9uIHNvIGNhbWVyYSBwb3NpdGlvbiByYW1wcyB0b3dhcmRzXG4gICAgICAgICAgICAgKiogdGhlIG5ldyBsb2NhdGlvbiByYXRoZXIgdGhhbiBkaXNjcmV0ZSBqdW1wcy5cbiAgICAgICAgICAgICAqKi9cblxuICAgICAgICAgICAgaWYgKF9kZWx0YVBpdGNoICE9IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgcGl0Y2hRID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oKTtcbiAgICAgICAgICAgICAgICBwaXRjaFEuc2V0RnJvbUF4aXNBbmdsZShkaXJlY3Rpb25SaWdodCwgLV9kZWx0YVBpdGNoKTtcbiAgICAgICAgICAgICAgICAvLyBOZWVkIHRvIGxpbWl0IHBpdGNoIHRvICstODUgZGVncmVlcyBzbyB3ZSBkb24ndCBjcmVhdGVcbiAgICAgICAgICAgICAgICAvLyBjYW1lcmEganVtcGluZyBhdCB2ZXJ0aWNhbCBsaW1pdHMuXG4gICAgICAgICAgICAgICAgdmFyIGRpckZ3ZFRtcCA9IGRpcmVjdGlvbkZ3ZC5jbG9uZSgpO1xuICAgICAgICAgICAgICAgIGRpckZ3ZFRtcC5hcHBseVF1YXRlcm5pb24ocGl0Y2hRKTtcblxuICAgICAgICAgICAgICAgIHZhciB2ZXJ0aWNhbCA9IF9jYW1lcmEud29ybGR1cC5jbG9uZSgpO1xuICAgICAgICAgICAgICAgIHZhciB2ZXJ0QW5nbGUgPSBkaXJGd2RUbXAuYW5nbGVUbyh2ZXJ0aWNhbCk7XG4gICAgICAgICAgICAgICAgdmFyIHZlcnRMaW1pdCA9IFRIUkVFLk1hdGguZGVnVG9SYWQoNSk7XG5cbiAgICAgICAgICAgICAgICAvLyBJZiBuZXcgYW5nbGUgaXMgd2l0aGluIGxpbWl0cyB0aGVuIHVwZGF0ZSB2YWx1ZXM7IG90aGVyd2lzZSBpZ25vcmVcbiAgICAgICAgICAgICAgICBpZiAoIHZlcnRBbmdsZSA+PSB2ZXJ0TGltaXQgJiYgdmVydEFuZ2xlIDw9IChNYXRoLlBJIC0gdmVydExpbWl0KSApIHtcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uRndkLmFwcGx5UXVhdGVybmlvbihwaXRjaFEpO1xuICAgICAgICAgICAgICAgICAgICBsb2NhbENhbS51cC5hcHBseVF1YXRlcm5pb24ocGl0Y2hRKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBfZGVsdGFQaXRjaCA9IDAuMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKF9kZWx0YVlhdyAhPSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIHlhd1EgPSBuZXcgVEhSRUUuUXVhdGVybmlvbigpO1xuICAgICAgICAgICAgICAgIHlhd1Euc2V0RnJvbUF4aXNBbmdsZShfY2FtZXJhLndvcmxkdXAsIC1fZGVsdGFZYXcpO1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbkZ3ZC5hcHBseVF1YXRlcm5pb24oeWF3USk7XG4gICAgICAgICAgICAgICAgbG9jYWxDYW0udXAuYXBwbHlRdWF0ZXJuaW9uKHlhd1EpO1xuICAgICAgICAgICAgICAgIF9kZWx0YVlhdyA9IDAuMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gTm93IGNhbGMgbmV3IHRhcmdldCBsb2NhdGlvbiBhbmQgaWYgaXQgY2hhbmdlZC5cbiAgICAgICAgICAgIG5ld1RhcmdldCA9IG5ld1Bvc2l0aW9uLmNsb25lKCkuYWRkKGRpcmVjdGlvbkZ3ZCk7XG4gICAgICAgICAgICAvL25vdyBmaXggbmV3UG9zaXRpb24gZm9yIGxvY2tJblBsYW5lXG4gICAgICAgICAgICB2YXIgdGFyZ2V0Q2hhbmdlZCA9IChuZXdUYXJnZXQuZGlzdGFuY2VUb1NxdWFyZWQoX2NhbWVyYS50YXJnZXQpICE9PSAwKTtcbiAgICAgICAgICAgIC8vIElmIHBvc2l0aW9uIG9yIHRhcmdldCBjaGFuZ2VkIHRoZW4gdXBkYXRlIGNhbWVyYS5cbiAgICAgICAgICAgIGlmIChwb3NDaGFuZ2VkIHx8IHRhcmdldENoYW5nZWQpIHtcblxuICAgICAgICAgICAgICAgIF9uYXZhcGkuc2V0VmlldyhuZXdQb3NpdGlvbiwgbmV3VGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAvL19jYW1lcmEucG9zaXRpb24gPSBuZXdQb3NpdGlvbi5jbG9uZSgpO1xuICAgICAgICAgICAgICAgIC8vX2NhbWVyYS50YXJnZXQgPSBuZXdUYXJnZXQuY2xvbmUoKTtcbiAgICAgICAgICAgICAgICAvL19jYW1lcmEuZGlydHkgPSB0cnVlO3NcbiAgICAgICAgICAgICAgICAvLyBGb3JjZSB0aGUgY2FtZXJhIHRvIHN0YXkgb3JpZW50YXRlZCB1cCB3aXRoIHdvcmxkIHVwLlxuICAgICAgICAgICAgICAgIF9uYXZhcGkub3JpZW50Q2FtZXJhVXAoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9nYW1lcGFkIGludGVncmF0aW9uXG4gICAgICAgICAgICBpZihfZ2FtZXBhZE1vZHVsZSl7XG4gICAgICAgICAgICAgICAgX2NhbWVyYSA9ICBfZ2FtZXBhZE1vZHVsZS51cGRhdGUoX2NhbWVyYSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBfY2FtZXJhLmRpcnR5O1xuXG5cbiAgICAgICAgfTtcbiAgICAgICAgLy9BRFBcbiAgICAgICAgdmFyIGZpcnN0UGVyc29uVG9vbFVzZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZighX3RyYWNrVG9vbFVzZWQpIHtcbiAgICAgICAgICAgICAgICBhdnAubG9nZ2VyLnRyYWNrKHtjYXRlZ29yeTogJ3Rvb2xfdXNlZCcsIG5hbWU6ICdGaXJzdFBlcnNvbl90b29sJ30pO1xuICAgICAgICAgICAgICAgIF90cmFja1Rvb2xVc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgLy8gSFVEIGhlbHBlcnNcblxuICAgICAgICAvLyBTaG93IGEgSFVEIGZvciBhIHNwZWNpZmljIGFtb3VudCBvZiB0aW1lIChzaG93RGVsYXkgPiAwKSBvciB1bnRpbCBjbG9zZWQuXG4gICAgICAgIHZhciBzaG93SFVEID0gZnVuY3Rpb24obWVzc2FnZVNwZWNzLCBzaG93RGVsYXksIGNsb3NlQ0IsIGJ1dHRvbkNCLCBjaGVja2JveENCKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBUT0RPOiBUb29sIHNob3VsZCBub3QgYmUgdHJ5aW5nIHRvIGludGVyYWN0IHdpdGggVUlcbiAgICAgICAgICAgIC8vIERvZXMgbm90IGNvbXBseSB3aXRoIGhlYWRsZXNzIHZpZXdlciBwb2xpY3kuXG4gICAgICAgICAgICBpZiAoIUF1dG9kZXNrLlZpZXdpbmcuUHJpdmF0ZS5IdWRNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBBdXRvZGVzay5WaWV3aW5nLlByaXZhdGUuSHVkTWVzc2FnZS5kaXNwbGF5TWVzc2FnZShfY29udGFpbmVyLCBtZXNzYWdlU3BlY3MsIGNsb3NlQ0IsIGJ1dHRvbkNCLCBjaGVja2JveENCKTtcblxuICAgICAgICAgICAgaWYgKHNob3dEZWxheSA+IDApIHtcbiAgICAgICAgICAgICAgICBfaHVkTWVzc2FnZVN0YXJ0U2hvd1RpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICBfaHVkTWVzc2FnZVNob3dUaW1lID0gc2hvd0RlbGF5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgX2h1ZE1lc3NhZ2VTdGFydFNob3dUaW1lID0gLTE7XG4gICAgICAgICAgICAgICAgX2h1ZE1lc3NhZ2VTaG93VGltZSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGhpZGVIVUQgPSBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIFRPRE86IFRvb2wgc2hvdWxkIG5vdCBiZSB0cnlpbmcgdG8gaW50ZXJhY3Qgd2l0aCBVSVxuICAgICAgICAgICAgLy8gRG9lcyBub3QgY29tcGx5IHdpdGggaGVhZGxlc3Mgdmlld2VyIHBvbGljeS5cbiAgICAgICAgICAgIGlmIChBdXRvZGVzay5WaWV3aW5nLlByaXZhdGUuSHVkTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIEF1dG9kZXNrLlZpZXdpbmcuUHJpdmF0ZS5IdWRNZXNzYWdlLmRpc21pc3MoKTsgIC8vIGluIGNhc2UgaXQncyBzdGlsbCB2aXNpYmxlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfaHVkTWVzc2FnZVN0YXJ0U2hvd1RpbWUgPSAtMTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgc2hvd0RyYWdnaW5nTG9va01vZGVIVUQgPSBmdW5jdGlvbihlbmFibGVkKVxuICAgICAgICB7XG4gICAgICAgICAgICBoaWRlSFVEKCk7XG5cbiAgICAgICAgICAgIHZhciB0aGVtZXNzYWdlID0gKGVuYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgPyBcIlByZXNzIHRoZSBwcmltYXJ5IG1vdXNlIGJ1dHRvbiBhbmQgZHJhZyB0byBjaGFuZ2UgdGhlIHZpZXcgb3JpZW50YXRpb25cIlxuICAgICAgICAgICAgICAgICAgICA6IFwiTW92ZSB0aGUgY3Vyc29yIHRvIGNoYW5nZSB0aGUgdmlldyBvcmllbnRhdGlvblwiKTtcblxuICAgICAgICAgICAgdmFyIG1lc3NhZ2VTcGVjcyA9IHtcbiAgICAgICAgICAgICAgICBcIm1zZ1RpdGxlS2V5XCIgICA6IFwiRmlyc3QgUGVyc29uIFRvb2xcIixcbiAgICAgICAgICAgICAgICBcIm1lc3NhZ2VLZXlcIiAgICA6IHRoZW1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgXCJtZXNzYWdlRGVmYXVsdFZhbHVlXCIgIDogdGhlbWVzc2FnZVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGNsb3NlQ2FsbGJhY2sgPSBmdW5jdGlvbigpIHt9OyAvLyBkdW1teSBjYWxsYmFjayBmdW5jdGlvbiBzbyB0aGF0IHRoZSAnWCcgaXMgc2hvd25cbiAgICAgICAgICAgIHNob3dIVUQobWVzc2FnZVNwZWNzLCAwLCBjbG9zZUNhbGxiYWNrKTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIHZhciBzaG93SGVscEhVRCA9IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgaGlkZUhVRCgpO1xuXG4gICAgICAgICAgICAvLyBUT0RPOiBTYWRseSwgdGhlIEh1ZE1lc3NhZ2UgYXBpIGRvZXNuJ3Qgc3VwcG9ydCBodG1sIGZvcm1hdHRlZCBtZXNzYWdlc1xuICAgICAgICAgICAgdmFyIG1lc3NhZ2VTcGVjcyA9IHtcbiAgICAgICAgICAgICAgICBcIm1zZ1RpdGxlS2V5XCIgICAgICAgICAgIDogXCJGaXJzdCBQZXJzb24gVG9vbFwiLFxuICAgICAgICAgICAgICAgIFwibWVzc2FnZUtleVwiICAgICAgICAgICAgOiBcIlVzZSB0aGUgV0FTRCBhbmQgUUUga2V5cyB0byBtb3ZlXCIsXG4gICAgICAgICAgICAgICAgXCJtZXNzYWdlRGVmYXVsdFZhbHVlXCIgICA6IFwiVXNlIHRoZSBXQVNEIGFuZCBRRSBrZXlzIHRvIG1vdmVcIiwgLy8gc2ltcGxpZnkga2V5IGFuZCByZW1vdmUgcGVyb2lkXG4gICAgICAgICAgICAgICAgXCJidXR0b25UZXh0XCIgICAgICAgICAgICA6IFwiT2sgR290IEl0XCJcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBjbG9zZUNhbGxiYWNrID0gZnVuY3Rpb24oKSB7fTsgLy8gZHVtbXkgY2FsbGJhY2sgZnVuY3Rpb24gc28gdGhhdCB0aGUgJ1gnIGlzIHNob3duXG4gICAgICAgICAgICB2YXIgYnV0dG9uQ2FsbGJhY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfYkRvbnRTaG93QWdhaW5fSGVscEhVRCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdmlld2VyYXBpLnNldEZpcnN0UGVyc29uVG9vbFBvcHVwKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBoaWRlSFVEKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgc2hvd0hVRChtZXNzYWdlU3BlY3MsIDAsIGNsb3NlQ2FsbGJhY2ssIGJ1dHRvbkNhbGxiYWNrKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmFkZENyb3NzaGFpciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGF2cC5zdHJpbmdUb0RPTSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3Jvc3NoYWlyID0gYXZwLnN0cmluZ1RvRE9NKCc8ZGl2IGlkPVwicmVtb3RlLWNyb3NzaGFpclwiPjxkaXYgY2xhc3M9XCJjcm9zc2hhaXItdlwiPjwvZGl2PjxkaXYgY2xhc3M9XCJjcm9zc2hhaXItaFwiPjwvZGl2PjwvZGl2PmYnKTtcbiAgICAgICAgICAgICAgICB2aWV3ZXJhcGkuY2FudmFzV3JhcC5hcHBlbmRDaGlsZCh0aGlzLmNyb3NzaGFpcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5yZW1vdmVDcm9zc2hhaXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNyb3NzaGFpciAmJiB0aGlzLmNyb3NzaGFpci5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jcm9zc2hhaXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmNyb3NzaGFpcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYXYuR2xvYmFsTWFuYWdlck1peGluLmNhbGwoRmlyc3RQZXJzb25Ub29sLnByb3RvdHlwZSk7Il0sIm5hbWVzIjpbIkdhbWVwYWRNb2R1bGUiLCJhdiIsIkF1dG9kZXNrIiwiVmlld2luZyIsIkZpcnN0UGVyc29uVG9vbCIsInZpZXdlcmFwaSIsImF2cCIsIlByaXZhdGUiLCJfaXNNYWMiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJzZWFyY2giLCJfbmF2YXBpIiwibmF2aWdhdGlvbiIsIl9jb250YWluZXIiLCJjb250YWluZXIiLCJfY2FtZXJhIiwiZ2V0Q2FtZXJhIiwiX25hbWVzIiwic2V0R2xvYmFsTWFuYWdlciIsImdsb2JhbE1hbmFnZXIiLCJfbW9kaWZpZXJTdGF0ZSIsIlNISUZUIiwiQUxUIiwiQ09OVFJPTCIsIl9rZXlzIiwiS2V5Q29kZSIsIl9pc0FjdGl2ZSIsIl9pZ25vcmVNb3VzZUFuZEtleU5hdiIsIl9tb3VzZURyYWdnaW5nTG9va01vZGUiLCJfaXNEcmFnZ2luZyIsIl90b3VjaFR5cGUiLCJfY2xvY2siLCJUSFJFRSIsIkNsb2NrIiwiX2h1ZE1lc3NhZ2VTdGFydFNob3dUaW1lIiwiX2h1ZE1lc3NhZ2VTaG93VGltZSIsIl9tb2RlbFNjYWxlRmFjdG9yIiwiX21vdmVtZW50U3BlZWREZWZhdWx0IiwiX21vdmVtZW50U3BlZWQiLCJfd2hlZWxNb3ZlbWVudFNwZWVkIiwiX3ZlcnRpY2FsTW92ZW1lbnRTcGVlZCIsIl9sb29rU3BlZWQiLCJfd2hlZWxEZWx0YSIsIl9sYXN0WCIsIl9sYXN0WSIsIl9kZWx0YVlhdyIsIl9kZWx0YVBpdGNoIiwiX21vdmVGb3J3YXJkIiwiX21vdmVCYWNrd2FyZCIsIl9tb3ZlTGVmdCIsIl9tb3ZlUmlnaHQiLCJfbW92ZVVwIiwiX21vdmVEb3duIiwiX3ByZXZpb3VzRm92IiwiZm92IiwiX3Jlc3RvcmVQcmV2aW91c0ZvdiIsIl93YXNQZXJzcGVjdGl2ZSIsImlzUGVyc3BlY3RpdmUiLCJfcmVzdG9yZVByZXZpb3VzUGVyc3BlY3RpdmUiLCJfYkRvbnRTaG93QWdhaW5fSGVscEhVRCIsIl9nYW1lcGFkTW9kdWxlIiwiZ2V0R2FtZXBhZHMiLCJ3ZWJraXRHZXRHYW1lcGFkcyIsIndlYmtpdEdhbWVwYWRzIiwiX3RyYWNrVG9vbFVzZWQiLCJpc0FjdGl2ZSIsImdldE5hbWVzIiwiZ2V0TmFtZSIsImFjdGl2YXRlIiwic3RhcnQiLCJ0b1BlcnNwZWN0aXZlIiwic2V0VmVydGljYWxGb3YiLCJib3VuZHNTaXplIiwibW9kZWwiLCJnZXRCb3VuZGluZ0JveCIsImdldFNpemUiLCJWZWN0b3IzIiwiTWF0aCIsIm1heCIsIm1pbiIsIngiLCJ5IiwieiIsImNhbnZhcyIsImZvY3VzIiwiZ2V0Rmlyc3RQZXJzb25Ub29sUG9wdXAiLCJzaG93SGVscEhVRCIsImFkZENyb3NzaGFpciIsImltcGwiLCJwYXVzZUhpZ2hsaWdodCIsImRlYWN0aXZhdGUiLCJzdG9wIiwiaGlkZUhVRCIsInJlbW92ZUNyb3NzaGFpciIsInRvT3J0aG9ncmFwaGljIiwiZ2V0Q3Vyc29yIiwiYWRqdXN0U3BlZWQiLCJkaXJlY3Rpb24iLCJnZXRFdmVudE1vZGlmaWVyU3RhdGUiLCJldmVudCIsImN0cmxLZXkiLCJtZXRhS2V5Iiwic2hpZnRLZXkiLCJhbHRLZXkiLCJoYW5kbGVHZXN0dXJlIiwicG9pbnRlcnMiLCJsZW5ndGgiLCJwYWdlWCIsInBhZ2VZIiwidHlwZSIsImhhbmRsZUJ1dHRvbkRvd24iLCJoYW5kbGVNb3VzZU1vdmUiLCJoYW5kbGVCdXR0b25VcCIsImhhbmRsZVNpbmdsZUNsaWNrIiwiYnV0dG9uIiwibW9kaWZpZXJTdGF0ZSIsImR4IiwiZHkiLCJoYW5kbGVLZXlEb3duIiwia2V5Q29kZSIsImhhbmRsZWQiLCJFU0NBUEUiLCJUQUIiLCJTUEFDRSIsIkVRVUFMUyIsIkRBU0giLCJaRVJPIiwiVVAiLCJ3IiwiTEVGVCIsImEiLCJET1dOIiwicyIsIlJJR0hUIiwiZCIsInEiLCJlIiwiZyIsIkYxIiwiaGFuZGxlS2V5VXAiLCJmaXJzdFBlcnNvblRvb2xVc2VkIiwic2hvd0RyYWdnaW5nTG9va01vZGVIVUQiLCJoYW5kbGVXaGVlbElucHV0IiwiZGVsdGEiLCJnZXRSZXZlcnNlWm9vbURpcmVjdGlvbiIsImhhbmRsZURvdWJsZUNsaWNrIiwiaGFuZGxlU2luZ2xlVGFwIiwiaGFuZGxlRG91YmxlVGFwIiwiaGFuZGxlQmx1ciIsInVwZGF0ZSIsImlzQWN0aW9uRW5hYmxlZCIsImdldERlbHRhIiwiY3VyVGltZSIsIkRhdGUiLCJnZXRUaW1lIiwiY29uc29sZSIsImxvZyIsImxvY2FsQ2FtIiwiY2xvbmUiLCJhY3R1YWxNb3ZlU3BlZWQiLCJhY3R1YWxWZXJ0aWNhbE1vdmVTcGVlZCIsImFjdHVhbFdoZWVsTW92ZVNwZWVkIiwidHJhbnNsYXRlWiIsInRyYW5zbGF0ZVgiLCJ0cmFuc2xhdGVZIiwibmV3UG9zaXRpb24iLCJwb3NpdGlvbiIsInBvc0NoYW5nZWQiLCJkaXN0YW5jZVRvU3F1YXJlZCIsIm5ld1RhcmdldCIsInRhcmdldCIsImRpcmVjdGlvbkZ3ZCIsInN1YiIsImRpcmVjdGlvblJpZ2h0IiwiY3Jvc3MiLCJ1cCIsIm5vcm1hbGl6ZSIsInBpdGNoUSIsIlF1YXRlcm5pb24iLCJzZXRGcm9tQXhpc0FuZ2xlIiwiZGlyRndkVG1wIiwiYXBwbHlRdWF0ZXJuaW9uIiwidmVydGljYWwiLCJ3b3JsZHVwIiwidmVydEFuZ2xlIiwiYW5nbGVUbyIsInZlcnRMaW1pdCIsImRlZ1RvUmFkIiwiUEkiLCJ5YXdRIiwiYWRkIiwidGFyZ2V0Q2hhbmdlZCIsInNldFZpZXciLCJvcmllbnRDYW1lcmFVcCIsImRpcnR5IiwibG9nZ2VyIiwidHJhY2siLCJjYXRlZ29yeSIsIm5hbWUiLCJzaG93SFVEIiwibWVzc2FnZVNwZWNzIiwic2hvd0RlbGF5IiwiY2xvc2VDQiIsImJ1dHRvbkNCIiwiY2hlY2tib3hDQiIsIkh1ZE1lc3NhZ2UiLCJkaXNwbGF5TWVzc2FnZSIsImRpc21pc3MiLCJlbmFibGVkIiwidGhlbWVzc2FnZSIsImNsb3NlQ2FsbGJhY2siLCJidXR0b25DYWxsYmFjayIsInNldEZpcnN0UGVyc29uVG9vbFBvcHVwIiwic3RyaW5nVG9ET00iLCJjcm9zc2hhaXIiLCJjYW52YXNXcmFwIiwiYXBwZW5kQ2hpbGQiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJHbG9iYWxNYW5hZ2VyTWl4aW4iLCJjYWxsIiwicHJvdG90eXBlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./extensions/FirstPerson/FirstPersonTool.js\n");

/***/ }),

/***/ "./extensions/Gamepad/GamepadModule.js":
/*!*********************************************!*\
  !*** ./extensions/Gamepad/GamepadModule.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GamepadModule: () => (/* binding */ GamepadModule)\n/* harmony export */ });\n/***\n* GamepadModule is a tool (not an extension) that reacts to input from\n* a gamepad controller plugged into the hosting machine.\n *\n* @param viewerapi\n* @constructor\n*/\nfunction GamepadModule(viewerapi) {\n\n  var avp = Autodesk.Viewing.Private;\n\n  var _navapi = viewerapi.navigation;\n  var _container = viewerapi.container;\n  var _camera = _navapi.getCamera();\n\n  var _modelScaleFactor = 1.0;\n\n  var _explodeSpeed = 0;\n\n  var _THRESHOLD = 0.1;\n  var _SPEED_ADJUST = 5.5,\n    _INITIAL_SPEED_SCALAR = 6,\n    _speed_scalar = _INITIAL_SPEED_SCALAR;\n\n\n  var _btnPressMap = {};\n  var _gamepad;\n  var _hudMessageStartShowTime;\n  var _hudMessageShowTime;\n  var _viewerState;\n  var _savepoints;\n  var _nextsavepoint;\n\n  //Nav mode toggle\n  var _lockInPlane;\n\n  var _clock = new THREE.Clock(true);\n\n  var VIEWER_STATE_FILTER = {\n    seedURN: false,\n    objectSet: true,\n    viewport: true,\n    renderOptions: {\n      environment: false,\n      ambientOcclusion: false,\n      toneMap: {\n        exposure: false\n      },\n      appearance: false\n    }\n  };\n  var _actualMoveSpeed;\n  var _movementSpeed = 2.0;\n  var _INITIAL_FOV = 75;\n  var _ZOOM_SCALAR = -45; //smaller => closer zoom\n  var _altitudeLockCoord;\n  var _currentTool;\n\n  /*Face Buttons*/\n  var _BUTTONS = {\n    SOUTH_BTN: 0,\n    EAST_BTN: 1,\n    WEST_BTN: 2,\n    NORTH_BTN: 3,\n\n    /*Shoulder and trigger buttons*/\n    LEFT_SHOULDER: 4,\n    RIGHT_SHOULDER: 5,\n    LEFT_TRIGGER: 6, //ANALOG\n    RIGHT_TRIGGER: 7, //ANALOG\n\n    /*directional pad (DPad)*/\n    SOUTH_DPAD: 13,\n    EAST_DPAD: 15,\n    WEST_DPAD: 14,\n    NORTH_DPAD: 12,\n\n    /*Joystick buttons (press joystick in)*/\n    LEFT_STICK_BUTTON: 10,\n    RIGHT_STICK_BUTTON: 11\n\n  };\n\n  var _STICKS = {\n    //Axis//\n    /*Left and right joysticks*/\n    LEFT_STICK_X: 0, //ANALOG\n    LEFT_STICK_Y: 1, //ANALOG\n    RIGHT_STICK_X: 2, //ANALOG\n    RIGHT_STICK_Y: 3 //ANALOG\n  };\n\n  var _BLANK_FUNC = function () {};\n  var _BUTTON_MAPPING = {};\n  for (var k in _BUTTONS) {\n    if (Object.prototype.hasOwnProperty.call(_BUTTONS, k))\n    _BUTTON_MAPPING[_BUTTONS[k]] = _BLANK_FUNC;\n  }\n\n  var init = function () {\n\n  };\n\n  this.activate = function (toolName) {\n    // Calculate a movement scale factor based on the model bounds.\n    var boundsSize = viewerapi.model.getBoundingBox().getSize(new THREE.Vector3());\n    _modelScaleFactor = Math.max(Math.min(Math.min(boundsSize.x, boundsSize.y), boundsSize.z) / 10.0, 0.0001);\n    _gamepad = navigator.getGamepads()[0];\n    _viewerState = new Autodesk.Viewing.Private.ViewerState(viewerapi);\n    _savepoints = [];\n    _nextsavepoint = 0;\n    _currentTool = toolName;\n    setMapping(toolName);\n  };\n\n  this.deactivate = function () {\n    //console.log(\"DEACTIVATE\");\n    _currentTool = null;\n    _viewerState = null;\n  };\n\n  this.update = function (delta, camera) {\n\n    if (camera)\n    _camera = camera;\n    delta = _clock.getDelta();\n\n    //poll for gamepad connection\n    _gamepad = navigator.getGamepads()[0];\n\n    if (_hudMessageStartShowTime > -1) {\n      var curTime = new Date().getTime();\n      if (curTime - _hudMessageStartShowTime > _hudMessageShowTime) {// seconds\n        hideHUD();\n      }\n    }\n\n    if (_gamepad) {\n      _actualMoveSpeed = delta * _movementSpeed * _modelScaleFactor * _speed_scalar; // (_gamepad.buttons[_BUTTONS.RIGHT_TRIGGER].value > _THRESHOLD ? _SPEED_ADJUST * _gamepad.buttons[_BUTTONS.RIGHT_TRIGGER].value + _MAX_SPEED_SCALAR : _MAX_SPEED_SCALAR);\n      // From the Collaboration extension:\n      //the \"go home\" call may change the camera back to ortho... and we can't do ortho while walking...\n      //HACK: Really, the home view should be set once when launch the extension, then set it back.\n      if (!_camera.isPerspective) {\n        //console.log(\"Lost perspective mode: resetting view.\");\n        _navapi.toPerspective();\n      }\n      if (_gamepad) {//TODO test for connection (change of state?)\n        if (inputDetected()) {//need to update camera scene\n          // console.log(\"needs update\");\n          _camera.dirty = true;\n          if (_lockInPlane) {\n            _altitudeLockCoord = _camera.position.z;\n          }\n\n          var direction = _camera.target.clone().sub(_camera.position);\n          var distance = direction.length();\n          direction.multiplyScalar(1.0 / distance);\n          var right = direction.clone().cross(_camera.up).normalize();\n          if (Math.abs(_gamepad.axes[_STICKS.LEFT_STICK_Y]) > _THRESHOLD) {\n            var forwardMove = direction.clone().multiplyScalar(-_gamepad.axes[_STICKS.LEFT_STICK_Y] * _actualMoveSpeed);\n            _camera.position.add(forwardMove);\n            _camera.target.add(forwardMove);\n          }\n\n          if (Math.abs(_gamepad.axes[_STICKS.LEFT_STICK_X]) > _THRESHOLD) {\n            var strafeMove = right.clone().multiplyScalar(_gamepad.axes[_STICKS.LEFT_STICK_X] * _actualMoveSpeed);\n            _camera.position.add(strafeMove);\n            _camera.target.add(strafeMove);\n          }\n\n          var lookUpDown = new THREE.Quaternion();\n          var ndir = direction;\n          if (Math.abs(_gamepad.axes[_STICKS.RIGHT_STICK_Y]) > _THRESHOLD) {\n\n            var tempCam = _camera.clone(); //modify this camera to see if it will be in viable range\n            var tempDir = direction.clone();\n\n            lookUpDown.setFromAxisAngle(right, -_gamepad.axes[_STICKS.RIGHT_STICK_Y] * _actualMoveSpeed / 2); //lookscale\n\n            tempDir.applyQuaternion(lookUpDown);\n            tempCam.up.applyQuaternion(lookUpDown);\n            var vertical = tempCam.worldup.clone();\n            var vertAngle = tempDir.angleTo(vertical);\n            var vertLimit = THREE.Math.degToRad(5);\n\n            // If new angle is within limits then update values; otherwise ignore\n            if (vertAngle >= vertLimit && vertAngle <= Math.PI - vertLimit) {\n              ndir = direction.clone().applyQuaternion(lookUpDown);\n              _camera.up.applyQuaternion(lookUpDown);\n            }\n          }\n\n          var lookLeftRight = new THREE.Quaternion();\n          if (Math.abs(_gamepad.axes[_STICKS.RIGHT_STICK_X]) > _THRESHOLD) {\n            lookLeftRight.setFromAxisAngle(_camera.worldup, -_gamepad.axes[_STICKS.RIGHT_STICK_X] * _actualMoveSpeed / 2); //lookscale\n            ndir.applyQuaternion(lookLeftRight);\n            _camera.up.applyQuaternion(lookLeftRight);\n          }\n\n          /*HANDLE ALL BUTTON INPUTS*/\n          handleGamepadFaceButtons();\n          /**************************/\n\n          if (_lockInPlane)\n          _camera.position.z = _altitudeLockCoord;\n\n          ndir.multiplyScalar(distance);\n          _camera.target.copy(_camera.position).add(ndir);\n        }\n      }\n    }\n    return _camera;\n  };\n\n\n  // Show a HUD for a specific amount of time (showDelay > 0) or until closed.\n  var showHUD = function (messageSpecs, showDelay, closeCB, buttonCB, checkboxCB)\n  {\n    Autodesk.Viewing.Private.HudMessage.displayMessage(_container, messageSpecs, closeCB, buttonCB, checkboxCB);\n\n    if (showDelay > 0) {\n      _hudMessageStartShowTime = new Date().getTime();\n      _hudMessageShowTime = showDelay;\n    } else\n    {\n      _hudMessageStartShowTime = -1;\n      _hudMessageShowTime = 0;\n    }\n  };\n\n  var hideHUD = function ()\n  {\n    Autodesk.Viewing.Private.HudMessage.dismiss(); // in case it's still visible\n    _hudMessageStartShowTime = -1;\n  };\n\n  var showDPadHud = function (direction)\n  {\n    hideHUD();\n    var message;\n    switch (direction) {\n      case \"up\":\n        message = _lockInPlane ? \"Vertical Lock Mode\" : \"Fly mode\";break;\n      case \"left\":\n        break;\n      case \"right\":\n        break;\n      case \"down\":\n        break;\n    }\n\n    var messageSpecs = {\n      \"msgTitleKey\": \"View Orientation Drag Mode Toggled\",\n      \"messageKey\": \"View Orientation Drag Mode Toggled\",\n      \"messageDefaultValue\": message\n\n    };\n    showHUD(messageSpecs, 2000); //show hud for 2secs\n\n  };\n\n  //checks for any button doing anything important\n  function inputDetected() {\n    //check to see if we pressed a button last frame\n    //loop through mapping to only check buttons we care about\n    for (var btn in _BUTTON_MAPPING) {\n      if (Object.prototype.hasOwnProperty.call(_BUTTON_MAPPING, btn)) {\n        if (_gamepad.buttons[btn].pressed) {\n          if (_gamepad.buttons[btn].value != 0.5) {\n            _btnPressMap[btn] = true; //its pressed!\n            return true;\n          }\n        }\n      }\n    }\n    for (let btn in _btnPressMap) {\n      if (Object.prototype.hasOwnProperty.call(_btnPressMap, btn)) {\n        if (_btnPressMap[btn]) {\n          //_btnPressMap[btn] = false;//\n          return true;\n        }\n      }\n    }\n    //now check movement\n    return !(Math.abs(_gamepad.axes[_STICKS.LEFT_STICK_X]) < _THRESHOLD &&\n    Math.abs(_gamepad.axes[_STICKS.LEFT_STICK_Y]) < _THRESHOLD &&\n    Math.abs(_gamepad.axes[_STICKS.RIGHT_STICK_X]) < _THRESHOLD &&\n    Math.abs(_gamepad.axes[_STICKS.RIGHT_STICK_Y]) < _THRESHOLD);\n\n  }\n\n  /*\n  will check face buttons (including Directional Pad) for input\n   */\n  function handleGamepadFaceButtons() {\n    for (var btn in _BUTTONS) {\n      if (Object.prototype.hasOwnProperty.call(_BUTTONS, btn)) {\n        handleGamepadButton(_BUTTONS[btn]);\n      }\n    }\n  }\n\n  function handleGamepadButton(buttonIdx) {\n    //buttons in first IF are testing for being held (good for analog inputs and held down buttons)\n    //ELSE IF will activate upon RELEASE of a button\n    if (_gamepad.buttons[buttonIdx].value > _THRESHOLD) {\n      _btnPressMap[buttonIdx] = true; //set was_pressed\n      switch (buttonIdx) {\n        case _BUTTONS.LEFT_SHOULDER:\n          _BUTTON_MAPPING[buttonIdx]();break;\n        case _BUTTONS.RIGHT_SHOULDER:\n          _BUTTON_MAPPING[buttonIdx]();break;\n        case _BUTTONS.LEFT_TRIGGER:\n          _BUTTON_MAPPING[buttonIdx](_gamepad.buttons[_BUTTONS.LEFT_TRIGGER].value);break;\n        case _BUTTONS.RIGHT_TRIGGER:\n          _BUTTON_MAPPING[buttonIdx](_gamepad.buttons[_BUTTONS.RIGHT_TRIGGER].value);break;\n      }\n    }\n    //ON RELEASE\n    else if (_btnPressMap[buttonIdx]) {\n      _btnPressMap[buttonIdx] = false;\n      switch (buttonIdx) {\n        case _BUTTONS.SOUTH_BTN:\n          _BUTTON_MAPPING[buttonIdx]();break;\n        case _BUTTONS.EAST_BTN:\n          _BUTTON_MAPPING[buttonIdx]();break;\n        case _BUTTONS.WEST_BTN:\n          _BUTTON_MAPPING[buttonIdx]();break;\n        case _BUTTONS.NORTH_BTN:\n          _BUTTON_MAPPING[buttonIdx]();break;\n        case _BUTTONS.NORTH_DPAD:\n          _BUTTON_MAPPING[buttonIdx]();break;\n        case _BUTTONS.SOUTH_DPAD:\n          _BUTTON_MAPPING[buttonIdx]();break;\n        case _BUTTONS.WEST_DPAD:\n          _BUTTON_MAPPING[buttonIdx]();break;\n        case _BUTTONS.EAST_DPAD:\n          _BUTTON_MAPPING[buttonIdx]();break;\n        case _BUTTONS.RIGHT_STICK_BUTTON:\n          _BUTTON_MAPPING[buttonIdx]();break;\n        case _BUTTONS.LEFT_STICK_BUTTON:\n          _BUTTON_MAPPING[buttonIdx]();break;\n        case _BUTTONS.LEFT_TRIGGER:\n          _BUTTON_MAPPING[buttonIdx](_gamepad.buttons[_BUTTONS.LEFT_TRIGGER].value);break;\n        case _BUTTONS.RIGHT_TRIGGER:\n          _BUTTON_MAPPING[buttonIdx](_gamepad.buttons[_BUTTONS.RIGHT_TRIGGER].value);break;\n      }\n    }\n  }\n\n  var setMapping = function (mapping) {\n    switch (mapping) {\n      case \"headtracker\":\n        _BUTTON_MAPPING[_BUTTONS.SOUTH_BTN] = selectObject;\n        _BUTTON_MAPPING[_BUTTONS.SOUTH_DPAD] = goHome;\n        _BUTTON_MAPPING[_BUTTONS.NORTH_DPAD] = toggleNavMode;\n        _BUTTON_MAPPING[_BUTTONS.WEST_BTN] = hideObject;\n        _BUTTON_MAPPING[_BUTTONS.LEFT_SHOULDER] = decAltitude;\n        _BUTTON_MAPPING[_BUTTONS.RIGHT_SHOULDER] = incAltitude;\n        _BUTTON_MAPPING[_BUTTONS.LEFT_TRIGGER] = explode;\n        _BUTTON_MAPPING[_BUTTONS.RIGHT_TRIGGER] = fineSpeedAdjust;\n        _BUTTON_MAPPING[_BUTTONS.RIGHT_STICK_BUTTON] = deselectAll;\n        _BUTTON_MAPPING[_BUTTONS.LEFT_STICK_BUTTON] = unhideAll;\n        break;\n      default:\n        _BUTTON_MAPPING[_BUTTONS.SOUTH_BTN] = selectObject;\n        _BUTTON_MAPPING[_BUTTONS.EAST_BTN] = createSavePoint;\n        _BUTTON_MAPPING[_BUTTONS.WEST_BTN] = hideObject;\n        _BUTTON_MAPPING[_BUTTONS.NORTH_BTN] = showPropertyPanel;\n        _BUTTON_MAPPING[_BUTTONS.SOUTH_DPAD] = goHome;\n        _BUTTON_MAPPING[_BUTTONS.WEST_DPAD] = previousSavePoint;\n        _BUTTON_MAPPING[_BUTTONS.EAST_DPAD] = nextSavePoint;\n        _BUTTON_MAPPING[_BUTTONS.NORTH_DPAD] = toggleNavMode;\n        _BUTTON_MAPPING[_BUTTONS.LEFT_SHOULDER] = decAltitude;\n        _BUTTON_MAPPING[_BUTTONS.RIGHT_SHOULDER] = incAltitude;\n        _BUTTON_MAPPING[_BUTTONS.LEFT_TRIGGER] = triggerZoom;\n        _BUTTON_MAPPING[_BUTTONS.RIGHT_TRIGGER] = fineSpeedAdjust;\n        _BUTTON_MAPPING[_BUTTONS.RIGHT_STICK_BUTTON] = deselectAll;\n        _BUTTON_MAPPING[_BUTTONS.LEFT_STICK_BUTTON] = unhideAll;\n        break;\n    }\n  };\n\n  //things buttons can do below\n  var goHome = function () {\n    viewerapi.navigation.setRequestHomeView(true);\n    viewerapi.showAll();\n    viewerapi.impl.selector.clearSelection();\n    viewerapi.explode(0);\n  };\n\n  //Shoulder buttons and triggers\n  var decAltitude = function () {\n    if (_lockInPlane)\n    _altitudeLockCoord += -_gamepad.buttons[_BUTTONS.LEFT_SHOULDER].pressed * _actualMoveSpeed;else\n\n    _camera.translateY(-_gamepad.buttons[_BUTTONS.LEFT_SHOULDER].pressed * _actualMoveSpeed);\n  };\n\n  var incAltitude = function () {\n    if (_lockInPlane)\n    _altitudeLockCoord += _gamepad.buttons[_BUTTONS.RIGHT_SHOULDER].pressed * _actualMoveSpeed;else\n\n    _camera.translateY(_gamepad.buttons[_BUTTONS.RIGHT_SHOULDER].pressed * _actualMoveSpeed);\n  };\n\n  var explode = function (analog_value) {\n    if (analog_value > _THRESHOLD) {\n      if (analog_value == 0.5) {//not set yet\n        viewerapi.explode(0);\n        return;\n      }\n      _explodeSpeed = analog_value;\n      var ns = _explodeSpeed;\n      if (ns > 1) ns = 1;\n      if (ns < 0) ns = 0;\n      viewerapi.explode(ns);\n    } else\n\n    viewerapi.explode(0);\n  };\n\n\n  //Triggers are analog, so pass in value of trigger\n  var triggerZoom = function (analog_value) {\n    if (analog_value > _THRESHOLD) {\n      if (analog_value == 0.5) {\n        _camera.fov = _INITIAL_FOV;\n        _btnPressMap[_BUTTONS.LEFT_TRIGGER] = false;\n        return;\n      }\n      //linear interp: y = -40x + 75\n      ///75 is original fov angle. smaller slope = greater max zoom.\n      // equation will interpolate between based on trigger pressure (analog)\n      _camera.fov = _ZOOM_SCALAR * analog_value + _INITIAL_FOV;\n    } else\n    {\n      _camera.fov = _INITIAL_FOV; //originally 75\n    }\n  };\n\n  var fineSpeedAdjust = function (analog_value) {\n    if (analog_value > _THRESHOLD) {\n      if (analog_value == 0.5) {//ignore\n        //TODO set speed correctly before input received AND have whole speedadjust down here!!\n        _btnPressMap[_BUTTONS.RIGHT_TRIGGER] = false;\n        return;\n      }\n      _speed_scalar = -(_SPEED_ADJUST * analog_value) + _INITIAL_SPEED_SCALAR;\n    } else\n    {\n      _speed_scalar = _INITIAL_SPEED_SCALAR;\n    }\n\n  };\n\n  var createSavePoint = function () {\n    var state = _viewerState.getState(VIEWER_STATE_FILTER);\n    _savepoints.push(state);\n    avp.logger.log(\"Savepoint created.\");\n  };\n\n  var previousSavePoint = function () {\n    if (_savepoints.length) {\n      _nextsavepoint--;\n      if (_nextsavepoint < 0)\n      _nextsavepoint = _savepoints.length - 1;\n      _viewerState.restoreState(_savepoints[_nextsavepoint]);\n    }\n  };\n\n  var nextSavePoint = function () {\n    if (_savepoints.length) {\n      _nextsavepoint++;\n      if (_nextsavepoint >= _savepoints.length)\n      _nextsavepoint = 0;\n      _viewerState.restoreState(_savepoints[_nextsavepoint]);\n    }\n  };\n\n  var selectObject = function () {\n    var res = viewerapi.impl.hitTestViewport(new THREE.Vector3(0, 0, 0));\n    if (_currentTool == \"headtracker\") {\n      //vr tool forgets to do this, necessary for center selection\n      _camera.updateMatrixWorld();\n    }\n    if (res) {\n      viewerapi.impl.selector.toggleSelection(res.dbId, res.model);\n      //viewerapi.fitToView(res.dbId);\n    } else {\n      viewerapi.impl.selector.clearSelection();\n    }\n  };\n\n  var deselectAll = function () {\n    viewerapi.impl.selector.clearSelection();\n  };\n\n  var unhideAll = function () {\n    viewerapi.showAll();\n    viewerapi.impl.selector.clearSelection();\n    viewerapi.explode(0);\n  };\n\n  var hideObject = function () {\n    var res = viewerapi.impl.hitTestViewport(new THREE.Vector3(0, 0, 0), false);\n    if (res) {\n      // TODO: this doesn't seem right. Probably should use indexOf()\n      if (res.dbId in viewerapi.getHiddenNodes())\n      viewerapi.show(res.dbId);else\n\n      viewerapi.hide(res.dbId);\n    }\n  };\n\n  var showPropertyPanel = function () {\n    viewerapi.getPropertyPanel(true).setVisible(!viewerapi.getPropertyPanel(true).isVisible());\n  };\n\n  var toggleNavMode = function () {\n    _lockInPlane = !_lockInPlane;\n    if (_lockInPlane)\n    _altitudeLockCoord = _camera.position.z;\n    showDPadHud(\"up\");\n  };\n\n  init();\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QztFQUNyQixDQUFDOztFQUVEMUUsSUFBSSxDQUFDLENBQUM7QUFDViIsInNvdXJjZXMiOlsid2VicGFjazovL0F1dG9kZXNrLkV4dGVuc2lvbnMvLi9leHRlbnNpb25zL0dhbWVwYWQvR2FtZXBhZE1vZHVsZS5qcz9kMzgyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKipcbiogR2FtZXBhZE1vZHVsZSBpcyBhIHRvb2wgKG5vdCBhbiBleHRlbnNpb24pIHRoYXQgcmVhY3RzIHRvIGlucHV0IGZyb21cbiogYSBnYW1lcGFkIGNvbnRyb2xsZXIgcGx1Z2dlZCBpbnRvIHRoZSBob3N0aW5nIG1hY2hpbmUuXG4gKlxuKiBAcGFyYW0gdmlld2VyYXBpXG4qIEBjb25zdHJ1Y3RvclxuKi9cbmV4cG9ydCBmdW5jdGlvbiBHYW1lcGFkTW9kdWxlKCB2aWV3ZXJhcGkgKSB7XG5cbiAgICB2YXIgYXZwID0gQXV0b2Rlc2suVmlld2luZy5Qcml2YXRlO1xuXG4gICAgdmFyIF9uYXZhcGkgPSB2aWV3ZXJhcGkubmF2aWdhdGlvbjtcbiAgICB2YXIgX2NvbnRhaW5lciA9IHZpZXdlcmFwaS5jb250YWluZXI7XG4gICAgdmFyIF9jYW1lcmEgPSBfbmF2YXBpLmdldENhbWVyYSgpO1xuXG4gICAgdmFyIF9tb2RlbFNjYWxlRmFjdG9yID0gMS4wO1xuXG4gICAgdmFyIF9leHBsb2RlU3BlZWQgPSAwO1xuXG4gICAgdmFyIF9USFJFU0hPTEQgPSAwLjE7XG4gICAgdmFyIF9TUEVFRF9BREpVU1QgPSA1LjUsXG4gICAgICAgIF9JTklUSUFMX1NQRUVEX1NDQUxBUiA9IDYsXG4gICAgICAgIF9zcGVlZF9zY2FsYXIgPSBfSU5JVElBTF9TUEVFRF9TQ0FMQVI7XG5cblxuICAgIHZhciBfYnRuUHJlc3NNYXAgPSB7fTtcbiAgICB2YXIgX2dhbWVwYWQ7XG4gICAgdmFyIF9odWRNZXNzYWdlU3RhcnRTaG93VGltZTtcbiAgICB2YXIgX2h1ZE1lc3NhZ2VTaG93VGltZTtcbiAgICB2YXIgX3ZpZXdlclN0YXRlO1xuICAgIHZhciBfc2F2ZXBvaW50cztcbiAgICB2YXIgX25leHRzYXZlcG9pbnQ7XG5cbiAgICAvL05hdiBtb2RlIHRvZ2dsZVxuICAgIHZhciBfbG9ja0luUGxhbmU7XG5cbiAgICB2YXIgX2Nsb2NrID0gbmV3IFRIUkVFLkNsb2NrKHRydWUpO1xuXG4gICAgdmFyIFZJRVdFUl9TVEFURV9GSUxURVIgPSB7XG4gICAgICAgIHNlZWRVUk46IGZhbHNlLFxuICAgICAgICBvYmplY3RTZXQ6IHRydWUsXG4gICAgICAgIHZpZXdwb3J0OiB0cnVlLFxuICAgICAgICByZW5kZXJPcHRpb25zOiB7XG4gICAgICAgICAgICBlbnZpcm9ubWVudDogZmFsc2UsXG4gICAgICAgICAgICBhbWJpZW50T2NjbHVzaW9uOiBmYWxzZSxcbiAgICAgICAgICAgIHRvbmVNYXA6IHtcbiAgICAgICAgICAgICAgICBleHBvc3VyZTogZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhcHBlYXJhbmNlOiBmYWxzZVxuICAgICAgICB9XG4gICAgfTtcbiAgICB2YXIgX2FjdHVhbE1vdmVTcGVlZDtcbiAgICB2YXIgX21vdmVtZW50U3BlZWQgPSAyLjA7XG4gICAgdmFyIF9JTklUSUFMX0ZPViA9IDc1O1xuICAgIHZhciBfWk9PTV9TQ0FMQVIgPSAtNDU7Ly9zbWFsbGVyID0+IGNsb3NlciB6b29tXG4gICAgdmFyIF9hbHRpdHVkZUxvY2tDb29yZDtcbiAgICB2YXIgX2N1cnJlbnRUb29sO1xuXG4gICAgLypGYWNlIEJ1dHRvbnMqL1xuICAgIHZhciBfQlVUVE9OUyA9IHtcbiAgICAgICAgU09VVEhfQlROIDogMCxcbiAgICAgICAgRUFTVF9CVE4gOiAxLFxuICAgICAgICBXRVNUX0JUTiA6IDIsXG4gICAgICAgIE5PUlRIX0JUTiA6IDMsXG5cbiAgICAgICAgLypTaG91bGRlciBhbmQgdHJpZ2dlciBidXR0b25zKi9cbiAgICAgICAgTEVGVF9TSE9VTERFUiA6IDQsXG4gICAgICAgIFJJR0hUX1NIT1VMREVSIDogNSxcbiAgICAgICAgTEVGVF9UUklHR0VSIDogNiwvL0FOQUxPR1xuICAgICAgICBSSUdIVF9UUklHR0VSIDogNywvL0FOQUxPR1xuXG4gICAgICAgIC8qZGlyZWN0aW9uYWwgcGFkIChEUGFkKSovXG4gICAgICAgIFNPVVRIX0RQQUQgOiAxMyxcbiAgICAgICAgRUFTVF9EUEFEIDogMTUsXG4gICAgICAgIFdFU1RfRFBBRCA6IDE0LFxuICAgICAgICBOT1JUSF9EUEFEIDogMTIsXG5cbiAgICAgICAgLypKb3lzdGljayBidXR0b25zIChwcmVzcyBqb3lzdGljayBpbikqL1xuICAgICAgICBMRUZUX1NUSUNLX0JVVFRPTjogMTAsXG4gICAgICAgIFJJR0hUX1NUSUNLX0JVVFRPTjogMTFcblxuICAgIH07XG5cbiAgICB2YXIgX1NUSUNLUyA9IHtcbiAgICAgICAgLy9BeGlzLy9cbiAgICAgICAgLypMZWZ0IGFuZCByaWdodCBqb3lzdGlja3MqL1xuICAgICAgICBMRUZUX1NUSUNLX1ggOiAwLC8vQU5BTE9HXG4gICAgICAgIExFRlRfU1RJQ0tfWSA6IDEsLy9BTkFMT0dcbiAgICAgICAgUklHSFRfU1RJQ0tfWCA6IDIsLy9BTkFMT0dcbiAgICAgICAgUklHSFRfU1RJQ0tfWSA6IDMvL0FOQUxPR1xuICAgIH07XG5cbiAgICB2YXIgX0JMQU5LX0ZVTkMgPSBmdW5jdGlvbigpIHt9O1xuICAgIHZhciBfQlVUVE9OX01BUFBJTkcgPSB7fTtcbiAgICBmb3IgKHZhciBrIGluIF9CVVRUT05TKSB7XG4gICAgICAgIGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChfQlVUVE9OUywgaykpXG4gICAgICAgICAgICBfQlVUVE9OX01BUFBJTkdbX0JVVFRPTlNba11dID0gX0JMQU5LX0ZVTkM7XG4gICAgfVxuXG4gICAgdmFyIGluaXQgPSBmdW5jdGlvbigpIHtcblxuICAgIH07XG5cbiAgICB0aGlzLmFjdGl2YXRlID0gZnVuY3Rpb24gKHRvb2xOYW1lKSB7XG4gICAgICAgIC8vIENhbGN1bGF0ZSBhIG1vdmVtZW50IHNjYWxlIGZhY3RvciBiYXNlZCBvbiB0aGUgbW9kZWwgYm91bmRzLlxuICAgICAgICB2YXIgYm91bmRzU2l6ZSA9IHZpZXdlcmFwaS5tb2RlbC5nZXRCb3VuZGluZ0JveCgpLmdldFNpemUobmV3IFRIUkVFLlZlY3RvcjMoKSk7XG4gICAgICAgIF9tb2RlbFNjYWxlRmFjdG9yID0gTWF0aC5tYXgoTWF0aC5taW4oTWF0aC5taW4oYm91bmRzU2l6ZS54LCBib3VuZHNTaXplLnkpLCBib3VuZHNTaXplLnopIC8gMTAuMCwgMC4wMDAxKTtcbiAgICAgICAgX2dhbWVwYWQgPSBuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMoKVswXTtcbiAgICAgICAgX3ZpZXdlclN0YXRlID0gbmV3IEF1dG9kZXNrLlZpZXdpbmcuUHJpdmF0ZS5WaWV3ZXJTdGF0ZSh2aWV3ZXJhcGkpO1xuICAgICAgICBfc2F2ZXBvaW50cyA9IFtdO1xuICAgICAgICBfbmV4dHNhdmVwb2ludCA9IDA7XG4gICAgICAgIF9jdXJyZW50VG9vbCA9IHRvb2xOYW1lO1xuICAgICAgICBzZXRNYXBwaW5nKHRvb2xOYW1lKTtcbiAgICB9O1xuXG4gICAgdGhpcy5kZWFjdGl2YXRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcIkRFQUNUSVZBVEVcIik7XG4gICAgICAgIF9jdXJyZW50VG9vbCA9IG51bGw7XG4gICAgICAgIF92aWV3ZXJTdGF0ZSA9IG51bGw7XG4gICAgfTtcblxuICAgIHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKGRlbHRhLCBjYW1lcmEpIHtcblxuICAgICAgICBpZihjYW1lcmEpXG4gICAgICAgICAgICBfY2FtZXJhID0gY2FtZXJhO1xuICAgICAgICBkZWx0YSA9IF9jbG9jay5nZXREZWx0YSgpO1xuXG4gICAgICAgIC8vcG9sbCBmb3IgZ2FtZXBhZCBjb25uZWN0aW9uXG4gICAgICAgIF9nYW1lcGFkID0gbmF2aWdhdG9yLmdldEdhbWVwYWRzKClbMF07XG5cbiAgICAgICAgaWYgKF9odWRNZXNzYWdlU3RhcnRTaG93VGltZSA+IC0xKSB7XG4gICAgICAgICAgICB2YXIgY3VyVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgaWYgKGN1clRpbWUgLSBfaHVkTWVzc2FnZVN0YXJ0U2hvd1RpbWUgPiBfaHVkTWVzc2FnZVNob3dUaW1lKSB7IC8vIHNlY29uZHNcbiAgICAgICAgICAgICAgICBoaWRlSFVEKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZihfZ2FtZXBhZCkge1xuICAgICAgICAgICAgX2FjdHVhbE1vdmVTcGVlZCA9IGRlbHRhICogX21vdmVtZW50U3BlZWQgKiBfbW9kZWxTY2FsZUZhY3RvciAqIF9zcGVlZF9zY2FsYXI7Ly8gKF9nYW1lcGFkLmJ1dHRvbnNbX0JVVFRPTlMuUklHSFRfVFJJR0dFUl0udmFsdWUgPiBfVEhSRVNIT0xEID8gX1NQRUVEX0FESlVTVCAqIF9nYW1lcGFkLmJ1dHRvbnNbX0JVVFRPTlMuUklHSFRfVFJJR0dFUl0udmFsdWUgKyBfTUFYX1NQRUVEX1NDQUxBUiA6IF9NQVhfU1BFRURfU0NBTEFSKTtcbiAgICAgICAgICAgIC8vIEZyb20gdGhlIENvbGxhYm9yYXRpb24gZXh0ZW5zaW9uOlxuICAgICAgICAgICAgLy90aGUgXCJnbyBob21lXCIgY2FsbCBtYXkgY2hhbmdlIHRoZSBjYW1lcmEgYmFjayB0byBvcnRoby4uLiBhbmQgd2UgY2FuJ3QgZG8gb3J0aG8gd2hpbGUgd2Fsa2luZy4uLlxuICAgICAgICAgICAgLy9IQUNLOiBSZWFsbHksIHRoZSBob21lIHZpZXcgc2hvdWxkIGJlIHNldCBvbmNlIHdoZW4gbGF1bmNoIHRoZSBleHRlbnNpb24sIHRoZW4gc2V0IGl0IGJhY2suXG4gICAgICAgICAgICBpZiAoIV9jYW1lcmEuaXNQZXJzcGVjdGl2ZSkge1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJMb3N0IHBlcnNwZWN0aXZlIG1vZGU6IHJlc2V0dGluZyB2aWV3LlwiKTtcbiAgICAgICAgICAgICAgICBfbmF2YXBpLnRvUGVyc3BlY3RpdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChfZ2FtZXBhZCkgey8vVE9ETyB0ZXN0IGZvciBjb25uZWN0aW9uIChjaGFuZ2Ugb2Ygc3RhdGU/KVxuICAgICAgICAgICAgICAgIGlmIChpbnB1dERldGVjdGVkKCkpIHsvL25lZWQgdG8gdXBkYXRlIGNhbWVyYSBzY2VuZVxuICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwibmVlZHMgdXBkYXRlXCIpO1xuICAgICAgICAgICAgICAgICAgICBfY2FtZXJhLmRpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9sb2NrSW5QbGFuZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2FsdGl0dWRlTG9ja0Nvb3JkID0gX2NhbWVyYS5wb3NpdGlvbi56O1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IF9jYW1lcmEudGFyZ2V0LmNsb25lKCkuc3ViKF9jYW1lcmEucG9zaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGlzdGFuY2UgPSBkaXJlY3Rpb24ubGVuZ3RoKCk7XG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbi5tdWx0aXBseVNjYWxhcigxLjAgLyBkaXN0YW5jZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByaWdodCA9IGRpcmVjdGlvbi5jbG9uZSgpLmNyb3NzKF9jYW1lcmEudXApLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoX2dhbWVwYWQuYXhlc1tfU1RJQ0tTLkxFRlRfU1RJQ0tfWV0pID4gX1RIUkVTSE9MRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZvcndhcmRNb3ZlID0gZGlyZWN0aW9uLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoLV9nYW1lcGFkLmF4ZXNbX1NUSUNLUy5MRUZUX1NUSUNLX1ldICogX2FjdHVhbE1vdmVTcGVlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2FtZXJhLnBvc2l0aW9uLmFkZChmb3J3YXJkTW92ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2FtZXJhLnRhcmdldC5hZGQoZm9yd2FyZE1vdmUpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKF9nYW1lcGFkLmF4ZXNbX1NUSUNLUy5MRUZUX1NUSUNLX1hdKSA+IF9USFJFU0hPTEQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHJhZmVNb3ZlID0gcmlnaHQuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihfZ2FtZXBhZC5heGVzW19TVElDS1MuTEVGVF9TVElDS19YXSAqIF9hY3R1YWxNb3ZlU3BlZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NhbWVyYS5wb3NpdGlvbi5hZGQoc3RyYWZlTW92ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2FtZXJhLnRhcmdldC5hZGQoc3RyYWZlTW92ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgbG9va1VwRG93biA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZGlyID0gZGlyZWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoX2dhbWVwYWQuYXhlc1tfU1RJQ0tTLlJJR0hUX1NUSUNLX1ldKSA+IF9USFJFU0hPTEQpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXBDYW0gPSBfY2FtZXJhLmNsb25lKCk7Ly9tb2RpZnkgdGhpcyBjYW1lcmEgdG8gc2VlIGlmIGl0IHdpbGwgYmUgaW4gdmlhYmxlIHJhbmdlXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcERpciA9IGRpcmVjdGlvbi5jbG9uZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBsb29rVXBEb3duLnNldEZyb21BeGlzQW5nbGUocmlnaHQsIC1fZ2FtZXBhZC5heGVzW19TVElDS1MuUklHSFRfU1RJQ0tfWV0gKiBfYWN0dWFsTW92ZVNwZWVkIC8gMik7Ly9sb29rc2NhbGVcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcERpci5hcHBseVF1YXRlcm5pb24obG9va1VwRG93bik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wQ2FtLnVwLmFwcGx5UXVhdGVybmlvbihsb29rVXBEb3duKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ZXJ0aWNhbCA9IHRlbXBDYW0ud29ybGR1cC5jbG9uZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZlcnRBbmdsZSA9IHRlbXBEaXIuYW5nbGVUbyh2ZXJ0aWNhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmVydExpbWl0ID0gVEhSRUUuTWF0aC5kZWdUb1JhZCg1KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgbmV3IGFuZ2xlIGlzIHdpdGhpbiBsaW1pdHMgdGhlbiB1cGRhdGUgdmFsdWVzOyBvdGhlcndpc2UgaWdub3JlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHZlcnRBbmdsZSA+PSB2ZXJ0TGltaXQgJiYgdmVydEFuZ2xlIDw9IChNYXRoLlBJIC0gdmVydExpbWl0KSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZGlyID0gZGlyZWN0aW9uLmNsb25lKCkuYXBwbHlRdWF0ZXJuaW9uKGxvb2tVcERvd24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jYW1lcmEudXAuYXBwbHlRdWF0ZXJuaW9uKGxvb2tVcERvd24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvb2tMZWZ0UmlnaHQgPSBuZXcgVEhSRUUuUXVhdGVybmlvbigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoX2dhbWVwYWQuYXhlc1tfU1RJQ0tTLlJJR0hUX1NUSUNLX1hdKSA+IF9USFJFU0hPTEQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvb2tMZWZ0UmlnaHQuc2V0RnJvbUF4aXNBbmdsZShfY2FtZXJhLndvcmxkdXAsIC1fZ2FtZXBhZC5heGVzW19TVElDS1MuUklHSFRfU1RJQ0tfWF0gKiBfYWN0dWFsTW92ZVNwZWVkIC8gMik7Ly9sb29rc2NhbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIG5kaXIuYXBwbHlRdWF0ZXJuaW9uKGxvb2tMZWZ0UmlnaHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NhbWVyYS51cC5hcHBseVF1YXRlcm5pb24obG9va0xlZnRSaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvKkhBTkRMRSBBTEwgQlVUVE9OIElOUFVUUyovXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZUdhbWVwYWRGYWNlQnV0dG9ucygpO1xuICAgICAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKF9sb2NrSW5QbGFuZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jYW1lcmEucG9zaXRpb24ueiA9IF9hbHRpdHVkZUxvY2tDb29yZDtcblxuICAgICAgICAgICAgICAgICAgICBuZGlyLm11bHRpcGx5U2NhbGFyKGRpc3RhbmNlKTtcbiAgICAgICAgICAgICAgICAgICAgX2NhbWVyYS50YXJnZXQuY29weShfY2FtZXJhLnBvc2l0aW9uKS5hZGQobmRpcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfY2FtZXJhO1xuICAgIH07XG5cblxuICAgIC8vIFNob3cgYSBIVUQgZm9yIGEgc3BlY2lmaWMgYW1vdW50IG9mIHRpbWUgKHNob3dEZWxheSA+IDApIG9yIHVudGlsIGNsb3NlZC5cbiAgICB2YXIgc2hvd0hVRCA9IGZ1bmN0aW9uKG1lc3NhZ2VTcGVjcywgc2hvd0RlbGF5LCBjbG9zZUNCLCBidXR0b25DQiwgY2hlY2tib3hDQilcbiAgICB7XG4gICAgICAgIEF1dG9kZXNrLlZpZXdpbmcuUHJpdmF0ZS5IdWRNZXNzYWdlLmRpc3BsYXlNZXNzYWdlKF9jb250YWluZXIsIG1lc3NhZ2VTcGVjcywgY2xvc2VDQiwgYnV0dG9uQ0IsIGNoZWNrYm94Q0IpO1xuXG4gICAgICAgIGlmIChzaG93RGVsYXkgPiAwKSB7XG4gICAgICAgICAgICBfaHVkTWVzc2FnZVN0YXJ0U2hvd1RpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICAgIF9odWRNZXNzYWdlU2hvd1RpbWUgPSBzaG93RGVsYXk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBfaHVkTWVzc2FnZVN0YXJ0U2hvd1RpbWUgPSAtMTtcbiAgICAgICAgICAgIF9odWRNZXNzYWdlU2hvd1RpbWUgPSAwO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBoaWRlSFVEID0gZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgICAgQXV0b2Rlc2suVmlld2luZy5Qcml2YXRlLkh1ZE1lc3NhZ2UuZGlzbWlzcygpOyAgLy8gaW4gY2FzZSBpdCdzIHN0aWxsIHZpc2libGVcbiAgICAgICAgX2h1ZE1lc3NhZ2VTdGFydFNob3dUaW1lID0gLTE7XG4gICAgfTtcblxuICAgIHZhciBzaG93RFBhZEh1ZCA9IGZ1bmN0aW9uKGRpcmVjdGlvbilcbiAgICB7XG4gICAgICAgIGhpZGVIVUQoKTtcbiAgICAgICAgdmFyIG1lc3NhZ2U7XG4gICAgICAgIHN3aXRjaChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIGNhc2UgXCJ1cFwiOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBfbG9ja0luUGxhbmUgPyBcIlZlcnRpY2FsIExvY2sgTW9kZVwiIDogXCJGbHkgbW9kZVwiOyBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJsZWZ0XCI6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwicmlnaHRcIjpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJkb3duXCI6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbWVzc2FnZVNwZWNzID0ge1xuICAgICAgICAgICAgXCJtc2dUaXRsZUtleVwiICAgOiBcIlZpZXcgT3JpZW50YXRpb24gRHJhZyBNb2RlIFRvZ2dsZWRcIixcbiAgICAgICAgICAgIFwibWVzc2FnZUtleVwiICAgIDogXCJWaWV3IE9yaWVudGF0aW9uIERyYWcgTW9kZSBUb2dnbGVkXCIsXG4gICAgICAgICAgICBcIm1lc3NhZ2VEZWZhdWx0VmFsdWVcIiAgOiBtZXNzYWdlXG5cbiAgICAgICAgfTtcbiAgICAgICAgc2hvd0hVRChtZXNzYWdlU3BlY3MsIDIwMDApOy8vc2hvdyBodWQgZm9yIDJzZWNzXG5cbiAgICB9O1xuXG4gICAgLy9jaGVja3MgZm9yIGFueSBidXR0b24gZG9pbmcgYW55dGhpbmcgaW1wb3J0YW50XG4gICAgZnVuY3Rpb24gaW5wdXREZXRlY3RlZCgpe1xuICAgICAgICAvL2NoZWNrIHRvIHNlZSBpZiB3ZSBwcmVzc2VkIGEgYnV0dG9uIGxhc3QgZnJhbWVcbiAgICAgICAgLy9sb29wIHRocm91Z2ggbWFwcGluZyB0byBvbmx5IGNoZWNrIGJ1dHRvbnMgd2UgY2FyZSBhYm91dFxuICAgICAgICBmb3IgKHZhciBidG4gaW4gX0JVVFRPTl9NQVBQSU5HKSB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKF9CVVRUT05fTUFQUElORywgYnRuKSkge1xuICAgICAgICAgICAgICAgIGlmKF9nYW1lcGFkLmJ1dHRvbnNbYnRuXS5wcmVzc2VkKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoX2dhbWVwYWQuYnV0dG9uc1tidG5dLnZhbHVlICE9IDAuNSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2J0blByZXNzTWFwW2J0bl0gPSB0cnVlOy8vaXRzIHByZXNzZWQhXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBidG4gaW4gX2J0blByZXNzTWFwKSB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKF9idG5QcmVzc01hcCwgYnRuKSkge1xuICAgICAgICAgICAgICAgIGlmKF9idG5QcmVzc01hcFtidG5dKXtcbiAgICAgICAgICAgICAgICAgICAgLy9fYnRuUHJlc3NNYXBbYnRuXSA9IGZhbHNlOy8vXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvL25vdyBjaGVjayBtb3ZlbWVudFxuICAgICAgICByZXR1cm4gIShNYXRoLmFicyhfZ2FtZXBhZC5heGVzW19TVElDS1MuTEVGVF9TVElDS19YXSkgPCBfVEhSRVNIT0xEICYmXG4gICAgICAgICAgICAgICAgTWF0aC5hYnMoX2dhbWVwYWQuYXhlc1tfU1RJQ0tTLkxFRlRfU1RJQ0tfWV0pIDwgX1RIUkVTSE9MRCAmJlxuICAgICAgICAgICAgICAgIE1hdGguYWJzKF9nYW1lcGFkLmF4ZXNbX1NUSUNLUy5SSUdIVF9TVElDS19YXSkgPCBfVEhSRVNIT0xEICYmXG4gICAgICAgICAgICAgICAgTWF0aC5hYnMoX2dhbWVwYWQuYXhlc1tfU1RJQ0tTLlJJR0hUX1NUSUNLX1ldKSA8IF9USFJFU0hPTEQpO1xuXG4gICAgfVxuXG4gICAgLypcbiAgICB3aWxsIGNoZWNrIGZhY2UgYnV0dG9ucyAoaW5jbHVkaW5nIERpcmVjdGlvbmFsIFBhZCkgZm9yIGlucHV0XG4gICAgICovXG4gICAgZnVuY3Rpb24gaGFuZGxlR2FtZXBhZEZhY2VCdXR0b25zKCl7XG4gICAgICAgIGZvcih2YXIgYnRuIGluIF9CVVRUT05TKXtcbiAgICAgICAgICAgIGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChfQlVUVE9OUywgYnRuKSl7XG4gICAgICAgICAgICAgICAgaGFuZGxlR2FtZXBhZEJ1dHRvbihfQlVUVE9OU1tidG5dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZUdhbWVwYWRCdXR0b24oYnV0dG9uSWR4KSB7XG4gICAgICAgIC8vYnV0dG9ucyBpbiBmaXJzdCBJRiBhcmUgdGVzdGluZyBmb3IgYmVpbmcgaGVsZCAoZ29vZCBmb3IgYW5hbG9nIGlucHV0cyBhbmQgaGVsZCBkb3duIGJ1dHRvbnMpXG4gICAgICAgIC8vRUxTRSBJRiB3aWxsIGFjdGl2YXRlIHVwb24gUkVMRUFTRSBvZiBhIGJ1dHRvblxuICAgICAgICBpZiAoX2dhbWVwYWQuYnV0dG9uc1tidXR0b25JZHhdLnZhbHVlID4gX1RIUkVTSE9MRCkge1xuICAgICAgICAgICAgX2J0blByZXNzTWFwW2J1dHRvbklkeF0gPSB0cnVlOy8vc2V0IHdhc19wcmVzc2VkXG4gICAgICAgICAgICBzd2l0Y2ggKGJ1dHRvbklkeCkge1xuICAgICAgICAgICAgICAgIGNhc2UgX0JVVFRPTlMuTEVGVF9TSE9VTERFUjpcbiAgICAgICAgICAgICAgICAgICAgX0JVVFRPTl9NQVBQSU5HW2J1dHRvbklkeF0oKTsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBfQlVUVE9OUy5SSUdIVF9TSE9VTERFUjpcbiAgICAgICAgICAgICAgICAgICAgX0JVVFRPTl9NQVBQSU5HW2J1dHRvbklkeF0oKTsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBfQlVUVE9OUy5MRUZUX1RSSUdHRVI6XG4gICAgICAgICAgICAgICAgICAgIF9CVVRUT05fTUFQUElOR1tidXR0b25JZHhdKF9nYW1lcGFkLmJ1dHRvbnNbX0JVVFRPTlMuTEVGVF9UUklHR0VSXS52YWx1ZSk7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgX0JVVFRPTlMuUklHSFRfVFJJR0dFUjpcbiAgICAgICAgICAgICAgICAgICAgX0JVVFRPTl9NQVBQSU5HW2J1dHRvbklkeF0oX2dhbWVwYWQuYnV0dG9uc1tfQlVUVE9OUy5SSUdIVF9UUklHR0VSXS52YWx1ZSk7IGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vT04gUkVMRUFTRVxuICAgICAgICBlbHNlIGlmIChfYnRuUHJlc3NNYXBbYnV0dG9uSWR4XSkge1xuICAgICAgICAgICAgX2J0blByZXNzTWFwW2J1dHRvbklkeF0gPSBmYWxzZTtcbiAgICAgICAgICAgIHN3aXRjaCAoYnV0dG9uSWR4KSB7XG4gICAgICAgICAgICAgICAgY2FzZSBfQlVUVE9OUy5TT1VUSF9CVE46XG4gICAgICAgICAgICAgICAgICAgIF9CVVRUT05fTUFQUElOR1tidXR0b25JZHhdKCk7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgX0JVVFRPTlMuRUFTVF9CVE46XG4gICAgICAgICAgICAgICAgICAgIF9CVVRUT05fTUFQUElOR1tidXR0b25JZHhdKCk7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgX0JVVFRPTlMuV0VTVF9CVE46XG4gICAgICAgICAgICAgICAgICAgIF9CVVRUT05fTUFQUElOR1tidXR0b25JZHhdKCk7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgX0JVVFRPTlMuTk9SVEhfQlROOlxuICAgICAgICAgICAgICAgICAgICBfQlVUVE9OX01BUFBJTkdbYnV0dG9uSWR4XSgpOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIF9CVVRUT05TLk5PUlRIX0RQQUQ6XG4gICAgICAgICAgICAgICAgICAgIF9CVVRUT05fTUFQUElOR1tidXR0b25JZHhdKCk7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgX0JVVFRPTlMuU09VVEhfRFBBRDpcbiAgICAgICAgICAgICAgICAgICAgX0JVVFRPTl9NQVBQSU5HW2J1dHRvbklkeF0oKTsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBfQlVUVE9OUy5XRVNUX0RQQUQ6XG4gICAgICAgICAgICAgICAgICAgIF9CVVRUT05fTUFQUElOR1tidXR0b25JZHhdKCk7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgX0JVVFRPTlMuRUFTVF9EUEFEOlxuICAgICAgICAgICAgICAgICAgICBfQlVUVE9OX01BUFBJTkdbYnV0dG9uSWR4XSgpOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIF9CVVRUT05TLlJJR0hUX1NUSUNLX0JVVFRPTjpcbiAgICAgICAgICAgICAgICAgICAgX0JVVFRPTl9NQVBQSU5HW2J1dHRvbklkeF0oKTsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBfQlVUVE9OUy5MRUZUX1NUSUNLX0JVVFRPTjpcbiAgICAgICAgICAgICAgICAgICAgX0JVVFRPTl9NQVBQSU5HW2J1dHRvbklkeF0oKTsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBfQlVUVE9OUy5MRUZUX1RSSUdHRVI6XG4gICAgICAgICAgICAgICAgICAgIF9CVVRUT05fTUFQUElOR1tidXR0b25JZHhdKF9nYW1lcGFkLmJ1dHRvbnNbX0JVVFRPTlMuTEVGVF9UUklHR0VSXS52YWx1ZSk7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgX0JVVFRPTlMuUklHSFRfVFJJR0dFUjpcbiAgICAgICAgICAgICAgICAgICAgX0JVVFRPTl9NQVBQSU5HW2J1dHRvbklkeF0oX2dhbWVwYWQuYnV0dG9uc1tfQlVUVE9OUy5SSUdIVF9UUklHR0VSXS52YWx1ZSk7IGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHNldE1hcHBpbmcgPSBmdW5jdGlvbihtYXBwaW5nKXtcbiAgICAgICAgc3dpdGNoKG1hcHBpbmcpIHtcbiAgICAgICAgICAgIGNhc2UgXCJoZWFkdHJhY2tlclwiOlxuICAgICAgICAgICAgICAgIF9CVVRUT05fTUFQUElOR1tfQlVUVE9OUy5TT1VUSF9CVE5dID0gc2VsZWN0T2JqZWN0O1xuICAgICAgICAgICAgICAgIF9CVVRUT05fTUFQUElOR1tfQlVUVE9OUy5TT1VUSF9EUEFEXSA9IGdvSG9tZTtcbiAgICAgICAgICAgICAgICBfQlVUVE9OX01BUFBJTkdbX0JVVFRPTlMuTk9SVEhfRFBBRF0gPSB0b2dnbGVOYXZNb2RlO1xuICAgICAgICAgICAgICAgIF9CVVRUT05fTUFQUElOR1tfQlVUVE9OUy5XRVNUX0JUTl0gPSBoaWRlT2JqZWN0O1xuICAgICAgICAgICAgICAgIF9CVVRUT05fTUFQUElOR1tfQlVUVE9OUy5MRUZUX1NIT1VMREVSXSA9IGRlY0FsdGl0dWRlO1xuICAgICAgICAgICAgICAgIF9CVVRUT05fTUFQUElOR1tfQlVUVE9OUy5SSUdIVF9TSE9VTERFUl0gPSBpbmNBbHRpdHVkZTtcbiAgICAgICAgICAgICAgICBfQlVUVE9OX01BUFBJTkdbX0JVVFRPTlMuTEVGVF9UUklHR0VSXSA9IGV4cGxvZGU7XG4gICAgICAgICAgICAgICAgX0JVVFRPTl9NQVBQSU5HW19CVVRUT05TLlJJR0hUX1RSSUdHRVJdID0gZmluZVNwZWVkQWRqdXN0O1xuICAgICAgICAgICAgICAgIF9CVVRUT05fTUFQUElOR1tfQlVUVE9OUy5SSUdIVF9TVElDS19CVVRUT05dID0gZGVzZWxlY3RBbGw7XG4gICAgICAgICAgICAgICAgX0JVVFRPTl9NQVBQSU5HW19CVVRUT05TLkxFRlRfU1RJQ0tfQlVUVE9OXSA9IHVuaGlkZUFsbDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgX0JVVFRPTl9NQVBQSU5HW19CVVRUT05TLlNPVVRIX0JUTl0gPSBzZWxlY3RPYmplY3Q7XG4gICAgICAgICAgICAgICAgX0JVVFRPTl9NQVBQSU5HW19CVVRUT05TLkVBU1RfQlROXSA9IGNyZWF0ZVNhdmVQb2ludDtcbiAgICAgICAgICAgICAgICBfQlVUVE9OX01BUFBJTkdbX0JVVFRPTlMuV0VTVF9CVE5dID0gaGlkZU9iamVjdDtcbiAgICAgICAgICAgICAgICBfQlVUVE9OX01BUFBJTkdbX0JVVFRPTlMuTk9SVEhfQlROXSA9IHNob3dQcm9wZXJ0eVBhbmVsO1xuICAgICAgICAgICAgICAgIF9CVVRUT05fTUFQUElOR1tfQlVUVE9OUy5TT1VUSF9EUEFEXSA9IGdvSG9tZTtcbiAgICAgICAgICAgICAgICBfQlVUVE9OX01BUFBJTkdbX0JVVFRPTlMuV0VTVF9EUEFEXSA9IHByZXZpb3VzU2F2ZVBvaW50O1xuICAgICAgICAgICAgICAgIF9CVVRUT05fTUFQUElOR1tfQlVUVE9OUy5FQVNUX0RQQURdID0gbmV4dFNhdmVQb2ludDtcbiAgICAgICAgICAgICAgICBfQlVUVE9OX01BUFBJTkdbX0JVVFRPTlMuTk9SVEhfRFBBRF0gPSB0b2dnbGVOYXZNb2RlO1xuICAgICAgICAgICAgICAgIF9CVVRUT05fTUFQUElOR1tfQlVUVE9OUy5MRUZUX1NIT1VMREVSXSA9IGRlY0FsdGl0dWRlO1xuICAgICAgICAgICAgICAgIF9CVVRUT05fTUFQUElOR1tfQlVUVE9OUy5SSUdIVF9TSE9VTERFUl0gPSBpbmNBbHRpdHVkZTtcbiAgICAgICAgICAgICAgICBfQlVUVE9OX01BUFBJTkdbX0JVVFRPTlMuTEVGVF9UUklHR0VSXSA9IHRyaWdnZXJab29tO1xuICAgICAgICAgICAgICAgIF9CVVRUT05fTUFQUElOR1tfQlVUVE9OUy5SSUdIVF9UUklHR0VSXSA9IGZpbmVTcGVlZEFkanVzdDtcbiAgICAgICAgICAgICAgICBfQlVUVE9OX01BUFBJTkdbX0JVVFRPTlMuUklHSFRfU1RJQ0tfQlVUVE9OXSA9IGRlc2VsZWN0QWxsO1xuICAgICAgICAgICAgICAgIF9CVVRUT05fTUFQUElOR1tfQlVUVE9OUy5MRUZUX1NUSUNLX0JVVFRPTl0gPSB1bmhpZGVBbGw7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy90aGluZ3MgYnV0dG9ucyBjYW4gZG8gYmVsb3dcbiAgICB2YXIgZ29Ib21lID0gZnVuY3Rpb24oKXtcbiAgICAgICAgdmlld2VyYXBpLm5hdmlnYXRpb24uc2V0UmVxdWVzdEhvbWVWaWV3KHRydWUpO1xuICAgICAgICB2aWV3ZXJhcGkuc2hvd0FsbCgpO1xuICAgICAgICB2aWV3ZXJhcGkuaW1wbC5zZWxlY3Rvci5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICB2aWV3ZXJhcGkuZXhwbG9kZSgwKTtcbiAgICB9O1xuXG4gICAgLy9TaG91bGRlciBidXR0b25zIGFuZCB0cmlnZ2Vyc1xuICAgIHZhciBkZWNBbHRpdHVkZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoX2xvY2tJblBsYW5lKVxuICAgICAgICAgICAgX2FsdGl0dWRlTG9ja0Nvb3JkICs9ICgtX2dhbWVwYWQuYnV0dG9uc1tfQlVUVE9OUy5MRUZUX1NIT1VMREVSXS5wcmVzc2VkKSAqIF9hY3R1YWxNb3ZlU3BlZWQ7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIF9jYW1lcmEudHJhbnNsYXRlWSgtX2dhbWVwYWQuYnV0dG9uc1tfQlVUVE9OUy5MRUZUX1NIT1VMREVSXS5wcmVzc2VkICogX2FjdHVhbE1vdmVTcGVlZCk7XG4gICAgfTtcblxuICAgIHZhciBpbmNBbHRpdHVkZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoX2xvY2tJblBsYW5lKVxuICAgICAgICAgICAgX2FsdGl0dWRlTG9ja0Nvb3JkICs9IChfZ2FtZXBhZC5idXR0b25zW19CVVRUT05TLlJJR0hUX1NIT1VMREVSXS5wcmVzc2VkKSAqIF9hY3R1YWxNb3ZlU3BlZWQ7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIF9jYW1lcmEudHJhbnNsYXRlWShfZ2FtZXBhZC5idXR0b25zW19CVVRUT05TLlJJR0hUX1NIT1VMREVSXS5wcmVzc2VkICogX2FjdHVhbE1vdmVTcGVlZCk7XG4gICAgfTtcblxuICAgIHZhciBleHBsb2RlID0gZnVuY3Rpb24oYW5hbG9nX3ZhbHVlKXtcbiAgICAgICAgaWYgKGFuYWxvZ192YWx1ZSA+IF9USFJFU0hPTEQpIHtcbiAgICAgICAgICAgIGlmIChhbmFsb2dfdmFsdWUgPT0gMC41KSB7Ly9ub3Qgc2V0IHlldFxuICAgICAgICAgICAgICAgIHZpZXdlcmFwaS5leHBsb2RlKDApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF9leHBsb2RlU3BlZWQgPSBhbmFsb2dfdmFsdWU7XG4gICAgICAgICAgICB2YXIgbnMgPSBfZXhwbG9kZVNwZWVkO1xuICAgICAgICAgICAgaWYgKG5zID4gMSkgbnMgPSAxO1xuICAgICAgICAgICAgaWYgKG5zIDwgMCkgbnMgPSAwO1xuICAgICAgICAgICAgdmlld2VyYXBpLmV4cGxvZGUobnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHZpZXdlcmFwaS5leHBsb2RlKDApO1xuICAgIH07XG5cblxuICAgIC8vVHJpZ2dlcnMgYXJlIGFuYWxvZywgc28gcGFzcyBpbiB2YWx1ZSBvZiB0cmlnZ2VyXG4gICAgdmFyIHRyaWdnZXJab29tID0gZnVuY3Rpb24oYW5hbG9nX3ZhbHVlKXtcbiAgICAgICAgaWYgKGFuYWxvZ192YWx1ZSA+IF9USFJFU0hPTEQpIHtcbiAgICAgICAgICAgIGlmKGFuYWxvZ192YWx1ZSA9PSAwLjUpIHtcbiAgICAgICAgICAgICAgICBfY2FtZXJhLmZvdiA9IF9JTklUSUFMX0ZPVjtcbiAgICAgICAgICAgICAgICBfYnRuUHJlc3NNYXBbX0JVVFRPTlMuTEVGVF9UUklHR0VSXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vbGluZWFyIGludGVycDogeSA9IC00MHggKyA3NVxuICAgICAgICAgICAgLy8vNzUgaXMgb3JpZ2luYWwgZm92IGFuZ2xlLiBzbWFsbGVyIHNsb3BlID0gZ3JlYXRlciBtYXggem9vbS5cbiAgICAgICAgICAgIC8vIGVxdWF0aW9uIHdpbGwgaW50ZXJwb2xhdGUgYmV0d2VlbiBiYXNlZCBvbiB0cmlnZ2VyIHByZXNzdXJlIChhbmFsb2cpXG4gICAgICAgICAgICBfY2FtZXJhLmZvdiA9IF9aT09NX1NDQUxBUiAqIGFuYWxvZ192YWx1ZSArIF9JTklUSUFMX0ZPVjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIF9jYW1lcmEuZm92ID0gX0lOSVRJQUxfRk9WOy8vb3JpZ2luYWxseSA3NVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBmaW5lU3BlZWRBZGp1c3QgPSBmdW5jdGlvbihhbmFsb2dfdmFsdWUpe1xuICAgICAgICBpZihhbmFsb2dfdmFsdWUgPiBfVEhSRVNIT0xEKXtcbiAgICAgICAgICAgIGlmKGFuYWxvZ192YWx1ZSA9PSAwLjUpIHsvL2lnbm9yZVxuICAgICAgICAgICAgICAgIC8vVE9ETyBzZXQgc3BlZWQgY29ycmVjdGx5IGJlZm9yZSBpbnB1dCByZWNlaXZlZCBBTkQgaGF2ZSB3aG9sZSBzcGVlZGFkanVzdCBkb3duIGhlcmUhIVxuICAgICAgICAgICAgICAgIF9idG5QcmVzc01hcFtfQlVUVE9OUy5SSUdIVF9UUklHR0VSXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF9zcGVlZF9zY2FsYXIgPSAtKF9TUEVFRF9BREpVU1QgKiBhbmFsb2dfdmFsdWUpICsgX0lOSVRJQUxfU1BFRURfU0NBTEFSO1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICBfc3BlZWRfc2NhbGFyID0gX0lOSVRJQUxfU1BFRURfU0NBTEFSO1xuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgdmFyIGNyZWF0ZVNhdmVQb2ludCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBzdGF0ZSA9IF92aWV3ZXJTdGF0ZS5nZXRTdGF0ZShWSUVXRVJfU1RBVEVfRklMVEVSKTtcbiAgICAgICAgX3NhdmVwb2ludHMucHVzaChzdGF0ZSk7XG4gICAgICAgIGF2cC5sb2dnZXIubG9nKFwiU2F2ZXBvaW50IGNyZWF0ZWQuXCIpO1xuICAgIH07XG5cbiAgICB2YXIgcHJldmlvdXNTYXZlUG9pbnQgPSBmdW5jdGlvbigpe1xuICAgICAgICBpZiAoX3NhdmVwb2ludHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBfbmV4dHNhdmVwb2ludC0tO1xuICAgICAgICAgICAgaWYgKF9uZXh0c2F2ZXBvaW50IDwgMClcbiAgICAgICAgICAgICAgICBfbmV4dHNhdmVwb2ludCA9IF9zYXZlcG9pbnRzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICBfdmlld2VyU3RhdGUucmVzdG9yZVN0YXRlKF9zYXZlcG9pbnRzW19uZXh0c2F2ZXBvaW50XSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIG5leHRTYXZlUG9pbnQgPSBmdW5jdGlvbigpe1xuICAgICAgICBpZiAoX3NhdmVwb2ludHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBfbmV4dHNhdmVwb2ludCsrO1xuICAgICAgICAgICAgaWYgKF9uZXh0c2F2ZXBvaW50ID49IF9zYXZlcG9pbnRzLmxlbmd0aClcbiAgICAgICAgICAgICAgICBfbmV4dHNhdmVwb2ludCA9IDA7XG4gICAgICAgICAgICBfdmlld2VyU3RhdGUucmVzdG9yZVN0YXRlKF9zYXZlcG9pbnRzW19uZXh0c2F2ZXBvaW50XSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIHNlbGVjdE9iamVjdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciByZXMgPSB2aWV3ZXJhcGkuaW1wbC5oaXRUZXN0Vmlld3BvcnQobmV3IFRIUkVFLlZlY3RvcjMoMCwgMCwgMCkpO1xuICAgICAgICBpZihfY3VycmVudFRvb2wgPT0gXCJoZWFkdHJhY2tlclwiKXtcbiAgICAgICAgICAgIC8vdnIgdG9vbCBmb3JnZXRzIHRvIGRvIHRoaXMsIG5lY2Vzc2FyeSBmb3IgY2VudGVyIHNlbGVjdGlvblxuICAgICAgICAgICAgX2NhbWVyYS51cGRhdGVNYXRyaXhXb3JsZCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXMpIHtcbiAgICAgICAgICAgIHZpZXdlcmFwaS5pbXBsLnNlbGVjdG9yLnRvZ2dsZVNlbGVjdGlvbihyZXMuZGJJZCwgcmVzLm1vZGVsKTtcbiAgICAgICAgICAgIC8vdmlld2VyYXBpLmZpdFRvVmlldyhyZXMuZGJJZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2aWV3ZXJhcGkuaW1wbC5zZWxlY3Rvci5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBkZXNlbGVjdEFsbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2aWV3ZXJhcGkuaW1wbC5zZWxlY3Rvci5jbGVhclNlbGVjdGlvbigpO1xuICAgIH07XG5cbiAgICB2YXIgdW5oaWRlQWxsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZpZXdlcmFwaS5zaG93QWxsKCk7XG4gICAgICAgIHZpZXdlcmFwaS5pbXBsLnNlbGVjdG9yLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgIHZpZXdlcmFwaS5leHBsb2RlKDApO1xuICAgIH07XG5cbiAgICB2YXIgaGlkZU9iamVjdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciByZXMgPSB2aWV3ZXJhcGkuaW1wbC5oaXRUZXN0Vmlld3BvcnQobmV3IFRIUkVFLlZlY3RvcjMoMCwgMCwgMCksIGZhbHNlKTtcbiAgICAgICAgaWYgKHJlcykge1xuICAgICAgICAgICAgLy8gVE9ETzogdGhpcyBkb2Vzbid0IHNlZW0gcmlnaHQuIFByb2JhYmx5IHNob3VsZCB1c2UgaW5kZXhPZigpXG4gICAgICAgICAgICBpZiAocmVzLmRiSWQgaW4gdmlld2VyYXBpLmdldEhpZGRlbk5vZGVzKCkpXG4gICAgICAgICAgICAgICAgdmlld2VyYXBpLnNob3cocmVzLmRiSWQpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHZpZXdlcmFwaS5oaWRlKHJlcy5kYklkKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgc2hvd1Byb3BlcnR5UGFuZWwgPSBmdW5jdGlvbigpe1xuICAgICAgICB2aWV3ZXJhcGkuZ2V0UHJvcGVydHlQYW5lbCh0cnVlKS5zZXRWaXNpYmxlKCF2aWV3ZXJhcGkuZ2V0UHJvcGVydHlQYW5lbCh0cnVlKS5pc1Zpc2libGUoKSk7XG4gICAgfTtcblxuICAgIHZhciB0b2dnbGVOYXZNb2RlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgX2xvY2tJblBsYW5lID0gIV9sb2NrSW5QbGFuZTtcbiAgICAgICAgaWYoX2xvY2tJblBsYW5lKVxuICAgICAgICAgICAgX2FsdGl0dWRlTG9ja0Nvb3JkID0gX2NhbWVyYS5wb3NpdGlvbi56O1xuICAgICAgICBzaG93RFBhZEh1ZChcInVwXCIpO1xuICAgIH07XG5cbiAgICBpbml0KCk7XG59XG5cbiJdLCJuYW1lcyI6WyJHYW1lcGFkTW9kdWxlIiwidmlld2VyYXBpIiwiYXZwIiwiQXV0b2Rlc2siLCJWaWV3aW5nIiwiUHJpdmF0ZSIsIl9uYXZhcGkiLCJuYXZpZ2F0aW9uIiwiX2NvbnRhaW5lciIsImNvbnRhaW5lciIsIl9jYW1lcmEiLCJnZXRDYW1lcmEiLCJfbW9kZWxTY2FsZUZhY3RvciIsIl9leHBsb2RlU3BlZWQiLCJfVEhSRVNIT0xEIiwiX1NQRUVEX0FESlVTVCIsIl9JTklUSUFMX1NQRUVEX1NDQUxBUiIsIl9zcGVlZF9zY2FsYXIiLCJfYnRuUHJlc3NNYXAiLCJfZ2FtZXBhZCIsIl9odWRNZXNzYWdlU3RhcnRTaG93VGltZSIsIl9odWRNZXNzYWdlU2hvd1RpbWUiLCJfdmlld2VyU3RhdGUiLCJfc2F2ZXBvaW50cyIsIl9uZXh0c2F2ZXBvaW50IiwiX2xvY2tJblBsYW5lIiwiX2Nsb2NrIiwiVEhSRUUiLCJDbG9jayIsIlZJRVdFUl9TVEFURV9GSUxURVIiLCJzZWVkVVJOIiwib2JqZWN0U2V0Iiwidmlld3BvcnQiLCJyZW5kZXJPcHRpb25zIiwiZW52aXJvbm1lbnQiLCJhbWJpZW50T2NjbHVzaW9uIiwidG9uZU1hcCIsImV4cG9zdXJlIiwiYXBwZWFyYW5jZSIsIl9hY3R1YWxNb3ZlU3BlZWQiLCJfbW92ZW1lbnRTcGVlZCIsIl9JTklUSUFMX0ZPViIsIl9aT09NX1NDQUxBUiIsIl9hbHRpdHVkZUxvY2tDb29yZCIsIl9jdXJyZW50VG9vbCIsIl9CVVRUT05TIiwiU09VVEhfQlROIiwiRUFTVF9CVE4iLCJXRVNUX0JUTiIsIk5PUlRIX0JUTiIsIkxFRlRfU0hPVUxERVIiLCJSSUdIVF9TSE9VTERFUiIsIkxFRlRfVFJJR0dFUiIsIlJJR0hUX1RSSUdHRVIiLCJTT1VUSF9EUEFEIiwiRUFTVF9EUEFEIiwiV0VTVF9EUEFEIiwiTk9SVEhfRFBBRCIsIkxFRlRfU1RJQ0tfQlVUVE9OIiwiUklHSFRfU1RJQ0tfQlVUVE9OIiwiX1NUSUNLUyIsIkxFRlRfU1RJQ0tfWCIsIkxFRlRfU1RJQ0tfWSIsIlJJR0hUX1NUSUNLX1giLCJSSUdIVF9TVElDS19ZIiwiX0JMQU5LX0ZVTkMiLCJfQlVUVE9OX01BUFBJTkciLCJrIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaW5pdCIsImFjdGl2YXRlIiwidG9vbE5hbWUiLCJib3VuZHNTaXplIiwibW9kZWwiLCJnZXRCb3VuZGluZ0JveCIsImdldFNpemUiLCJWZWN0b3IzIiwiTWF0aCIsIm1heCIsIm1pbiIsIngiLCJ5IiwieiIsIm5hdmlnYXRvciIsImdldEdhbWVwYWRzIiwiVmlld2VyU3RhdGUiLCJzZXRNYXBwaW5nIiwiZGVhY3RpdmF0ZSIsInVwZGF0ZSIsImRlbHRhIiwiY2FtZXJhIiwiZ2V0RGVsdGEiLCJjdXJUaW1lIiwiRGF0ZSIsImdldFRpbWUiLCJoaWRlSFVEIiwiaXNQZXJzcGVjdGl2ZSIsInRvUGVyc3BlY3RpdmUiLCJpbnB1dERldGVjdGVkIiwiZGlydHkiLCJwb3NpdGlvbiIsImRpcmVjdGlvbiIsInRhcmdldCIsImNsb25lIiwic3ViIiwiZGlzdGFuY2UiLCJsZW5ndGgiLCJtdWx0aXBseVNjYWxhciIsInJpZ2h0IiwiY3Jvc3MiLCJ1cCIsIm5vcm1hbGl6ZSIsImFicyIsImF4ZXMiLCJmb3J3YXJkTW92ZSIsImFkZCIsInN0cmFmZU1vdmUiLCJsb29rVXBEb3duIiwiUXVhdGVybmlvbiIsIm5kaXIiLCJ0ZW1wQ2FtIiwidGVtcERpciIsInNldEZyb21BeGlzQW5nbGUiLCJhcHBseVF1YXRlcm5pb24iLCJ2ZXJ0aWNhbCIsIndvcmxkdXAiLCJ2ZXJ0QW5nbGUiLCJhbmdsZVRvIiwidmVydExpbWl0IiwiZGVnVG9SYWQiLCJQSSIsImxvb2tMZWZ0UmlnaHQiLCJoYW5kbGVHYW1lcGFkRmFjZUJ1dHRvbnMiLCJjb3B5Iiwic2hvd0hVRCIsIm1lc3NhZ2VTcGVjcyIsInNob3dEZWxheSIsImNsb3NlQ0IiLCJidXR0b25DQiIsImNoZWNrYm94Q0IiLCJIdWRNZXNzYWdlIiwiZGlzcGxheU1lc3NhZ2UiLCJkaXNtaXNzIiwic2hvd0RQYWRIdWQiLCJtZXNzYWdlIiwiYnRuIiwiYnV0dG9ucyIsInByZXNzZWQiLCJ2YWx1ZSIsImhhbmRsZUdhbWVwYWRCdXR0b24iLCJidXR0b25JZHgiLCJtYXBwaW5nIiwic2VsZWN0T2JqZWN0IiwiZ29Ib21lIiwidG9nZ2xlTmF2TW9kZSIsImhpZGVPYmplY3QiLCJkZWNBbHRpdHVkZSIsImluY0FsdGl0dWRlIiwiZXhwbG9kZSIsImZpbmVTcGVlZEFkanVzdCIsImRlc2VsZWN0QWxsIiwidW5oaWRlQWxsIiwiY3JlYXRlU2F2ZVBvaW50Iiwic2hvd1Byb3BlcnR5UGFuZWwiLCJwcmV2aW91c1NhdmVQb2ludCIsIm5leHRTYXZlUG9pbnQiLCJ0cmlnZ2VyWm9vbSIsInNldFJlcXVlc3RIb21lVmlldyIsInNob3dBbGwiLCJpbXBsIiwic2VsZWN0b3IiLCJjbGVhclNlbGVjdGlvbiIsInRyYW5zbGF0ZVkiLCJhbmFsb2dfdmFsdWUiLCJucyIsImZvdiIsInN0YXRlIiwiZ2V0U3RhdGUiLCJwdXNoIiwibG9nZ2VyIiwibG9nIiwicmVzdG9yZVN0YXRlIiwicmVzIiwiaGl0VGVzdFZpZXdwb3J0IiwidXBkYXRlTWF0cml4V29ybGQiLCJ0b2dnbGVTZWxlY3Rpb24iLCJkYklkIiwiZ2V0SGlkZGVuTm9kZXMiLCJzaG93IiwiaGlkZSIsImdldFByb3BlcnR5UGFuZWwiLCJzZXRWaXNpYmxlIiwiaXNWaXNpYmxlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./extensions/Gamepad/GamepadModule.js\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./extensions/FirstPerson/FirstPerson.js");
/******/ 	Autodesk.Extensions.FirstPerson = __webpack_exports__;
/******/ 	
/******/ })()
;